function Pk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function OT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LT={exports:{}},oh={},MT={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),kk=Symbol.for("react.portal"),Ak=Symbol.for("react.fragment"),Rk=Symbol.for("react.strict_mode"),Nk=Symbol.for("react.profiler"),Ok=Symbol.for("react.provider"),Lk=Symbol.for("react.context"),Mk=Symbol.for("react.forward_ref"),Dk=Symbol.for("react.suspense"),Vk=Symbol.for("react.memo"),Fk=Symbol.for("react.lazy"),Z_=Symbol.iterator;function jk(t){return t===null||typeof t!="object"?null:(t=Z_&&t[Z_]||t["@@iterator"],typeof t=="function"?t:null)}var DT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VT=Object.assign,FT={};function Bo(t,e,n){this.props=t,this.context=e,this.refs=FT,this.updater=n||DT}Bo.prototype.isReactComponent={};Bo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jT(){}jT.prototype=Bo.prototype;function Tg(t,e,n){this.props=t,this.context=e,this.refs=FT,this.updater=n||DT}var Sg=Tg.prototype=new jT;Sg.constructor=Tg;VT(Sg,Bo.prototype);Sg.isPureReactComponent=!0;var ew=Array.isArray,UT=Object.prototype.hasOwnProperty,Ig={current:null},zT={key:!0,ref:!0,__self:!0,__source:!0};function BT(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)UT.call(e,i)&&!zT.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Zl,type:t,key:s,ref:o,props:r,_owner:Ig.current}}function Uk(t,e){return{$$typeof:Zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zl}function zk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tw=/\/+/g;function xf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zk(""+t.key):e.toString(36)}function vu(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Zl:case kk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+xf(o,0):i,ew(r)?(n="",t!=null&&(n=t.replace(tw,"$&/")+"/"),vu(r,e,n,"",function(c){return c})):r!=null&&(bg(r)&&(r=Uk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(tw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ew(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+xf(s,a);o+=vu(s,e,n,l,r)}else if(l=jk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+xf(s,a++),o+=vu(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qc(t,e,n){if(t==null)return t;var i=[],r=0;return vu(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Bk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},_u={transition:null},$k={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:_u,ReactCurrentOwner:Ig};function $T(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!bg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Bo;de.Fragment=Ak;de.Profiler=Nk;de.PureComponent=Tg;de.StrictMode=Rk;de.Suspense=Dk;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$k;de.act=$T;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=VT({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ig.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)UT.call(e,l)&&!zT.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Zl,type:t.type,key:r,ref:s,props:i,_owner:o}};de.createContext=function(t){return t={$$typeof:Lk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ok,_context:t},t.Consumer=t};de.createElement=BT;de.createFactory=function(t){var e=BT.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:Mk,render:t}};de.isValidElement=bg;de.lazy=function(t){return{$$typeof:Fk,_payload:{_status:-1,_result:t},_init:Bk}};de.memo=function(t,e){return{$$typeof:Vk,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=_u.transition;_u.transition={};try{t()}finally{_u.transition=e}};de.unstable_act=$T;de.useCallback=function(t,e){return Wt.current.useCallback(t,e)};de.useContext=function(t){return Wt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Wt.current.useEffect(t,e)};de.useId=function(){return Wt.current.useId()};de.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Wt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};de.useRef=function(t){return Wt.current.useRef(t)};de.useState=function(t){return Wt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Wt.current.useTransition()};de.version="18.3.1";MT.exports=de;var M=MT.exports;const Ye=OT(M),qk=Pk({__proto__:null,default:Ye},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wk=M,Hk=Symbol.for("react.element"),Gk=Symbol.for("react.fragment"),Kk=Object.prototype.hasOwnProperty,Qk=Wk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yk={key:!0,ref:!0,__self:!0,__source:!0};function qT(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Kk.call(e,i)&&!Yk.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Hk,type:t,key:s,ref:o,props:r,_owner:Qk.current}}oh.Fragment=Gk;oh.jsx=qT;oh.jsxs=qT;LT.exports=oh;var w=LT.exports,Op={},WT={exports:{}},dn={},HT={exports:{}},GT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,K){var Q=j.length;j.push(K);e:for(;0<Q;){var Ee=Q-1>>>1,ye=j[Ee];if(0<r(ye,K))j[Ee]=K,j[Q]=ye,Q=Ee;else break e}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var K=j[0],Q=j.pop();if(Q!==K){j[0]=Q;e:for(var Ee=0,ye=j.length,Ke=ye>>>1;Ee<Ke;){var ri=2*(Ee+1)-1,si=j[ri],oi=ri+1,ai=j[oi];if(0>r(si,Q))oi<ye&&0>r(ai,si)?(j[Ee]=ai,j[oi]=Q,Ee=oi):(j[Ee]=si,j[ri]=Q,Ee=ri);else if(oi<ye&&0>r(ai,Q))j[Ee]=ai,j[oi]=Q,Ee=oi;else break e}}return K}function r(j,K){var Q=j.sortIndex-K.sortIndex;return Q!==0?Q:j.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,v=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(j){for(var K=n(c);K!==null;){if(K.callback===null)i(c);else if(K.startTime<=j)i(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function A(j){if(S=!1,E(j),!v)if(n(l)!==null)v=!0,Ce(L);else{var K=n(c);K!==null&&it(A,K.startTime-j)}}function L(j,K){v=!1,S&&(S=!1,_(T),T=-1),m=!0;var Q=f;try{for(E(K),h=n(l);h!==null&&(!(h.expirationTime>K)||j&&!N());){var Ee=h.callback;if(typeof Ee=="function"){h.callback=null,f=h.priorityLevel;var ye=Ee(h.expirationTime<=K);K=t.unstable_now(),typeof ye=="function"?h.callback=ye:h===n(l)&&i(l),E(K)}else i(l);h=n(l)}if(h!==null)var Ke=!0;else{var ri=n(c);ri!==null&&it(A,ri.startTime-K),Ke=!1}return Ke}finally{h=null,f=Q,m=!1}}var D=!1,k=null,T=-1,b=5,I=-1;function N(){return!(t.unstable_now()-I<b)}function O(){if(k!==null){var j=t.unstable_now();I=j;var K=!0;try{K=k(!0,j)}finally{K?P():(D=!1,k=null)}}else D=!1}var P;if(typeof y=="function")P=function(){y(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,re=$.port2;$.port1.onmessage=O,P=function(){re.postMessage(null)}}else P=function(){x(O,0)};function Ce(j){k=j,D||(D=!0,P())}function it(j,K){T=x(function(){j(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Ce(L))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var Q=f;f=K;try{return j()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=f;f=j;try{return K()}finally{f=Q}},t.unstable_scheduleCallback=function(j,K,Q){var Ee=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Ee+Q:Ee):Q=Ee,j){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Q+ye,j={id:d++,callback:K,priorityLevel:j,startTime:Q,expirationTime:ye,sortIndex:-1},Q>Ee?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(S?(_(T),T=-1):S=!0,it(A,Q-Ee))):(j.sortIndex=ye,e(l,j),v||m||(v=!0,Ce(L))),j},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(j){var K=f;return function(){var Q=f;f=K;try{return j.apply(this,arguments)}finally{f=Q}}}})(GT);HT.exports=GT;var Xk=HT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=M,un=Xk;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KT=new Set,hl={};function bs(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(hl[t]=e,t=0;t<e.length;t++)KT.add(e[t])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=Object.prototype.hasOwnProperty,Zk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nw={},iw={};function eA(t){return Lp.call(iw,t)?!0:Lp.call(nw,t)?!1:Zk.test(t)?iw[t]=!0:(nw[t]=!0,!1)}function tA(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nA(t,e,n,i){if(e===null||typeof e>"u"||tA(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cg=/[\-:]([a-z])/g;function xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cg,xg);It[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cg,xg);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cg,xg);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,e,n,i){var r=It.hasOwnProperty(e)?It[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nA(e,n,r,i)&&(n=null),i||r===null?eA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var zi=Jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wc=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),QT=Symbol.for("react.provider"),YT=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Vp=Symbol.for("react.suspense_list"),Rg=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),XT=Symbol.for("react.offscreen"),rw=Symbol.iterator;function ya(t){return t===null||typeof t!="object"?null:(t=rw&&t[rw]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Pf;function La(t){if(Pf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pf=e&&e[1]||""}return`
`+Pf+t}var kf=!1;function Af(t,e){if(!t||kf)return"";kf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{kf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?La(t):""}function iA(t){switch(t.tag){case 5:return La(t.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return t=Af(t.type,!1),t;case 11:return t=Af(t.type.render,!1),t;case 1:return t=Af(t.type,!0),t;default:return""}}function Fp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case qs:return"Portal";case Mp:return"Profiler";case kg:return"StrictMode";case Dp:return"Suspense";case Vp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case YT:return(t.displayName||"Context")+".Consumer";case QT:return(t._context.displayName||"Context")+".Provider";case Ag:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rg:return e=t.displayName||null,e!==null?e:Fp(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return Fp(t(e))}catch{}}return null}function rA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fp(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sA(t){var e=JT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hc(t){t._valueTracker||(t._valueTracker=sA(t))}function ZT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=JT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jp(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e1(t,e){e=e.checked,e!=null&&Pg(t,"checked",e,!1)}function Up(t,e){e1(t,e);var n=br(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zp(t,e.type,n):e.hasOwnProperty("defaultValue")&&zp(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ow(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zp(t,e,n){(e!=="number"||Wu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ma=Array.isArray;function ro(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Bp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function aw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ma(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function t1(t,e){var n=br(e.value),i=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function lw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $p(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,i1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oA=["Webkit","ms","Moz","O"];Object.keys(qa).forEach(function(t){oA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qa[e]=qa[t]})});function r1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qa.hasOwnProperty(t)&&qa[t]?(""+e).trim():e+"px"}function s1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=r1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var aA=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qp(t,e){if(e){if(aA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Wp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function Ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gp=null,so=null,oo=null;function cw(t){if(t=nc(t)){if(typeof Gp!="function")throw Error(B(280));var e=t.stateNode;e&&(e=dh(e),Gp(t.stateNode,t.type,e))}}function o1(t){so?oo?oo.push(t):oo=[t]:so=t}function a1(){if(so){var t=so,e=oo;if(oo=so=null,cw(t),e)for(t=0;t<e.length;t++)cw(e[t])}}function l1(t,e){return t(e)}function c1(){}var Rf=!1;function u1(t,e,n){if(Rf)return t(e,n);Rf=!0;try{return l1(t,e,n)}finally{Rf=!1,(so!==null||oo!==null)&&(c1(),a1())}}function pl(t,e){var n=t.stateNode;if(n===null)return null;var i=dh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Kp=!1;if(ki)try{var va={};Object.defineProperty(va,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{Kp=!1}function lA(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Wa=!1,Hu=null,Gu=!1,Qp=null,cA={onError:function(t){Wa=!0,Hu=t}};function uA(t,e,n,i,r,s,o,a,l){Wa=!1,Hu=null,lA.apply(cA,arguments)}function dA(t,e,n,i,r,s,o,a,l){if(uA.apply(this,arguments),Wa){if(Wa){var c=Hu;Wa=!1,Hu=null}else throw Error(B(198));Gu||(Gu=!0,Qp=c)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function d1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uw(t){if(Cs(t)!==t)throw Error(B(188))}function hA(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return uw(r),t;if(s===i)return uw(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function h1(t){return t=hA(t),t!==null?f1(t):null}function f1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f1(t);if(e!==null)return e;t=t.sibling}return null}var p1=un.unstable_scheduleCallback,dw=un.unstable_cancelCallback,fA=un.unstable_shouldYield,pA=un.unstable_requestPaint,Ze=un.unstable_now,mA=un.unstable_getCurrentPriorityLevel,Og=un.unstable_ImmediatePriority,m1=un.unstable_UserBlockingPriority,Ku=un.unstable_NormalPriority,gA=un.unstable_LowPriority,g1=un.unstable_IdlePriority,ah=null,Qn=null;function yA(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(ah,t,void 0,(t.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:wA,vA=Math.log,_A=Math.LN2;function wA(t){return t>>>=0,t===0?32:31-(vA(t)/_A|0)|0}var Kc=64,Qc=4194304;function Da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Da(a):(s&=o,s!==0&&(i=Da(s)))}else o=n&~r,o!==0?i=Da(o):s!==0&&(i=Da(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ln(e),r=1<<n,i|=t[n],e&=~r;return i}function EA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ln(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=EA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Yp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function y1(){var t=Kc;return Kc<<=1,!(Kc&4194240)&&(Kc=64),t}function Nf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ln(e),t[e]=n}function SA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ln(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Lg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ln(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ie=0;function v1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _1,Mg,w1,E1,T1,Xp=!1,Yc=[],hr=null,fr=null,pr=null,ml=new Map,gl=new Map,Zi=[],IA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hw(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(e.pointerId)}}function _a(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=nc(e),e!==null&&Mg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function bA(t,e,n,i,r){switch(e){case"focusin":return hr=_a(hr,t,e,n,i,r),!0;case"dragenter":return fr=_a(fr,t,e,n,i,r),!0;case"mouseover":return pr=_a(pr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ml.set(s,_a(ml.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,gl.set(s,_a(gl.get(s)||null,t,e,n,i,r)),!0}return!1}function S1(t){var e=Jr(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=d1(n),e!==null){t.blockedOn=e,T1(t.priority,function(){w1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hp=i,n.target.dispatchEvent(i),Hp=null}else return e=nc(n),e!==null&&Mg(e),t.blockedOn=n,!1;e.shift()}return!0}function fw(t,e,n){wu(t)&&n.delete(e)}function CA(){Xp=!1,hr!==null&&wu(hr)&&(hr=null),fr!==null&&wu(fr)&&(fr=null),pr!==null&&wu(pr)&&(pr=null),ml.forEach(fw),gl.forEach(fw)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Xp||(Xp=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,CA)))}function yl(t){function e(r){return wa(r,t)}if(0<Yc.length){wa(Yc[0],t);for(var n=1;n<Yc.length;n++){var i=Yc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(hr!==null&&wa(hr,t),fr!==null&&wa(fr,t),pr!==null&&wa(pr,t),ml.forEach(e),gl.forEach(e),n=0;n<Zi.length;n++)i=Zi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Zi.length&&(n=Zi[0],n.blockedOn===null);)S1(n),n.blockedOn===null&&Zi.shift()}var ao=zi.ReactCurrentBatchConfig,Yu=!0;function xA(t,e,n,i){var r=Ie,s=ao.transition;ao.transition=null;try{Ie=1,Dg(t,e,n,i)}finally{Ie=r,ao.transition=s}}function PA(t,e,n,i){var r=Ie,s=ao.transition;ao.transition=null;try{Ie=4,Dg(t,e,n,i)}finally{Ie=r,ao.transition=s}}function Dg(t,e,n,i){if(Yu){var r=Jp(t,e,n,i);if(r===null)Bf(t,e,i,Xu,n),hw(t,i);else if(bA(r,t,e,n,i))i.stopPropagation();else if(hw(t,i),e&4&&-1<IA.indexOf(t)){for(;r!==null;){var s=nc(r);if(s!==null&&_1(s),s=Jp(t,e,n,i),s===null&&Bf(t,e,i,Xu,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Bf(t,e,i,null,n)}}var Xu=null;function Jp(t,e,n,i){if(Xu=null,t=Ng(i),t=Jr(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=d1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xu=t,null}function I1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mA()){case Og:return 1;case m1:return 4;case Ku:case gA:return 16;case g1:return 536870912;default:return 16}default:return 16}}var or=null,Vg=null,Eu=null;function b1(){if(Eu)return Eu;var t,e=Vg,n=e.length,i,r="value"in or?or.value:or.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Eu=r.slice(t,1<i?1-i:void 0)}function Tu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xc(){return!0}function pw(){return!1}function hn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xc:pw,this.isPropagationStopped=pw,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),e}var $o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fg=hn($o),tc=Ue({},$o,{view:0,detail:0}),kA=hn(tc),Of,Lf,Ea,lh=Ue({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ea&&(Ea&&t.type==="mousemove"?(Of=t.screenX-Ea.screenX,Lf=t.screenY-Ea.screenY):Lf=Of=0,Ea=t),Of)},movementY:function(t){return"movementY"in t?t.movementY:Lf}}),mw=hn(lh),AA=Ue({},lh,{dataTransfer:0}),RA=hn(AA),NA=Ue({},tc,{relatedTarget:0}),Mf=hn(NA),OA=Ue({},$o,{animationName:0,elapsedTime:0,pseudoElement:0}),LA=hn(OA),MA=Ue({},$o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DA=hn(MA),VA=Ue({},$o,{data:0}),gw=hn(VA),FA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UA[t])?!!e[t]:!1}function jg(){return zA}var BA=Ue({},tc,{key:function(t){if(t.key){var e=FA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(t){return t.type==="keypress"?Tu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$A=hn(BA),qA=Ue({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yw=hn(qA),WA=Ue({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),HA=hn(WA),GA=Ue({},$o,{propertyName:0,elapsedTime:0,pseudoElement:0}),KA=hn(GA),QA=Ue({},lh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YA=hn(QA),XA=[9,13,27,32],Ug=ki&&"CompositionEvent"in window,Ha=null;ki&&"documentMode"in document&&(Ha=document.documentMode);var JA=ki&&"TextEvent"in window&&!Ha,C1=ki&&(!Ug||Ha&&8<Ha&&11>=Ha),vw=" ",_w=!1;function x1(t,e){switch(t){case"keyup":return XA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function ZA(t,e){switch(t){case"compositionend":return P1(e);case"keypress":return e.which!==32?null:(_w=!0,vw);case"textInput":return t=e.data,t===vw&&_w?null:t;default:return null}}function eR(t,e){if(Hs)return t==="compositionend"||!Ug&&x1(t,e)?(t=b1(),Eu=Vg=or=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C1&&e.locale!=="ko"?null:e.data;default:return null}}var tR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tR[t.type]:e==="textarea"}function k1(t,e,n,i){o1(i),e=Ju(e,"onChange"),0<e.length&&(n=new Fg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ga=null,vl=null;function nR(t){U1(t,0)}function ch(t){var e=Qs(t);if(ZT(e))return t}function iR(t,e){if(t==="change")return e}var A1=!1;if(ki){var Df;if(ki){var Vf="oninput"in document;if(!Vf){var Ew=document.createElement("div");Ew.setAttribute("oninput","return;"),Vf=typeof Ew.oninput=="function"}Df=Vf}else Df=!1;A1=Df&&(!document.documentMode||9<document.documentMode)}function Tw(){Ga&&(Ga.detachEvent("onpropertychange",R1),vl=Ga=null)}function R1(t){if(t.propertyName==="value"&&ch(vl)){var e=[];k1(e,vl,t,Ng(t)),u1(nR,e)}}function rR(t,e,n){t==="focusin"?(Tw(),Ga=e,vl=n,Ga.attachEvent("onpropertychange",R1)):t==="focusout"&&Tw()}function sR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ch(vl)}function oR(t,e){if(t==="click")return ch(e)}function aR(t,e){if(t==="input"||t==="change")return ch(e)}function lR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:lR;function _l(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Lp.call(e,r)||!Vn(t[r],e[r]))return!1}return!0}function Sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Iw(t,e){var n=Sw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sw(n)}}function N1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function O1(){for(var t=window,e=Wu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cR(t){var e=O1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&N1(n.ownerDocument.documentElement,n)){if(i!==null&&zg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Iw(n,s);var o=Iw(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uR=ki&&"documentMode"in document&&11>=document.documentMode,Gs=null,Zp=null,Ka=null,em=!1;function bw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;em||Gs==null||Gs!==Wu(i)||(i=Gs,"selectionStart"in i&&zg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ka&&_l(Ka,i)||(Ka=i,i=Ju(Zp,"onSelect"),0<i.length&&(e=new Fg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Gs)))}function Jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},Ff={},L1={};ki&&(L1=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function uh(t){if(Ff[t])return Ff[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in L1)return Ff[t]=e[n];return t}var M1=uh("animationend"),D1=uh("animationiteration"),V1=uh("animationstart"),F1=uh("transitionend"),j1=new Map,Cw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,e){j1.set(t,e),bs(e,[t])}for(var jf=0;jf<Cw.length;jf++){var Uf=Cw[jf],dR=Uf.toLowerCase(),hR=Uf[0].toUpperCase()+Uf.slice(1);Or(dR,"on"+hR)}Or(M1,"onAnimationEnd");Or(D1,"onAnimationIteration");Or(V1,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(F1,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Va));function xw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dA(i,e,void 0,t),t.currentTarget=null}function U1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;xw(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;xw(r,a,c),s=l}}}if(Gu)throw t=Qp,Gu=!1,Qp=null,t}function Oe(t,e){var n=e[sm];n===void 0&&(n=e[sm]=new Set);var i=t+"__bubble";n.has(i)||(z1(e,t,2,!1),n.add(i))}function zf(t,e,n){var i=0;e&&(i|=4),z1(n,t,i,e)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function wl(t){if(!t[Zc]){t[Zc]=!0,KT.forEach(function(n){n!=="selectionchange"&&(fR.has(n)||zf(n,!1,t),zf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zc]||(e[Zc]=!0,zf("selectionchange",!1,e))}}function z1(t,e,n,i){switch(I1(e)){case 1:var r=xA;break;case 4:r=PA;break;default:r=Dg}n=r.bind(null,e,n,t),r=void 0,!Kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Bf(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Jr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}u1(function(){var c=s,d=Ng(n),h=[];e:{var f=j1.get(t);if(f!==void 0){var m=Fg,v=t;switch(t){case"keypress":if(Tu(n)===0)break e;case"keydown":case"keyup":m=$A;break;case"focusin":v="focus",m=Mf;break;case"focusout":v="blur",m=Mf;break;case"beforeblur":case"afterblur":m=Mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=RA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=HA;break;case M1:case D1:case V1:m=LA;break;case F1:m=KA;break;case"scroll":m=kA;break;case"wheel":m=YA;break;case"copy":case"cut":case"paste":m=DA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=yw}var S=(e&4)!==0,x=!S&&t==="scroll",_=S?f!==null?f+"Capture":null:f;S=[];for(var y=c,E;y!==null;){E=y;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,_!==null&&(A=pl(y,_),A!=null&&S.push(El(y,A,E)))),x)break;y=y.return}0<S.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Hp&&(v=n.relatedTarget||n.fromElement)&&(Jr(v)||v[Ai]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?Jr(v):null,v!==null&&(x=Cs(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(S=mw,A="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=yw,A="onPointerLeave",_="onPointerEnter",y="pointer"),x=m==null?f:Qs(m),E=v==null?f:Qs(v),f=new S(A,y+"leave",m,n,d),f.target=x,f.relatedTarget=E,A=null,Jr(d)===c&&(S=new S(_,y+"enter",v,n,d),S.target=E,S.relatedTarget=x,A=S),x=A,m&&v)t:{for(S=m,_=v,y=0,E=S;E;E=Ms(E))y++;for(E=0,A=_;A;A=Ms(A))E++;for(;0<y-E;)S=Ms(S),y--;for(;0<E-y;)_=Ms(_),E--;for(;y--;){if(S===_||_!==null&&S===_.alternate)break t;S=Ms(S),_=Ms(_)}S=null}else S=null;m!==null&&Pw(h,f,m,S,!1),v!==null&&x!==null&&Pw(h,x,v,S,!0)}}e:{if(f=c?Qs(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var L=iR;else if(ww(f))if(A1)L=aR;else{L=sR;var D=rR}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=oR);if(L&&(L=L(t,c))){k1(h,L,n,d);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&zp(f,"number",f.value)}switch(D=c?Qs(c):window,t){case"focusin":(ww(D)||D.contentEditable==="true")&&(Gs=D,Zp=c,Ka=null);break;case"focusout":Ka=Zp=Gs=null;break;case"mousedown":em=!0;break;case"contextmenu":case"mouseup":case"dragend":em=!1,bw(h,n,d);break;case"selectionchange":if(uR)break;case"keydown":case"keyup":bw(h,n,d)}var k;if(Ug)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Hs?x1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(C1&&n.locale!=="ko"&&(Hs||T!=="onCompositionStart"?T==="onCompositionEnd"&&Hs&&(k=b1()):(or=d,Vg="value"in or?or.value:or.textContent,Hs=!0)),D=Ju(c,T),0<D.length&&(T=new gw(T,t,null,n,d),h.push({event:T,listeners:D}),k?T.data=k:(k=P1(n),k!==null&&(T.data=k)))),(k=JA?ZA(t,n):eR(t,n))&&(c=Ju(c,"onBeforeInput"),0<c.length&&(d=new gw("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=k))}U1(h,e)})}function El(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ju(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=pl(t,n),s!=null&&i.unshift(El(t,s,r)),s=pl(t,e),s!=null&&i.push(El(t,s,r))),t=t.return}return i}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pw(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=pl(n,s),l!=null&&o.unshift(El(n,l,a))):r||(l=pl(n,s),l!=null&&o.push(El(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pR=/\r\n?/g,mR=/\u0000|\uFFFD/g;function kw(t){return(typeof t=="string"?t:""+t).replace(pR,`
`).replace(mR,"")}function eu(t,e,n){if(e=kw(e),kw(t)!==e&&n)throw Error(B(425))}function Zu(){}var tm=null,nm=null;function im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rm=typeof setTimeout=="function"?setTimeout:void 0,gR=typeof clearTimeout=="function"?clearTimeout:void 0,Aw=typeof Promise=="function"?Promise:void 0,yR=typeof queueMicrotask=="function"?queueMicrotask:typeof Aw<"u"?function(t){return Aw.resolve(null).then(t).catch(vR)}:rm;function vR(t){setTimeout(function(){throw t})}function $f(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),yl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);yl(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qo=Math.random().toString(36).slice(2),$n="__reactFiber$"+qo,Tl="__reactProps$"+qo,Ai="__reactContainer$"+qo,sm="__reactEvents$"+qo,_R="__reactListeners$"+qo,wR="__reactHandles$"+qo;function Jr(t){var e=t[$n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[$n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rw(t);t!==null;){if(n=t[$n])return n;t=Rw(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[$n]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function dh(t){return t[Tl]||null}var om=[],Ys=-1;function Lr(t){return{current:t}}function Me(t){0>Ys||(t.current=om[Ys],om[Ys]=null,Ys--)}function Re(t,e){Ys++,om[Ys]=t.current,t.current=e}var Cr={},Vt=Lr(Cr),Xt=Lr(!1),cs=Cr;function To(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Jt(t){return t=t.childContextTypes,t!=null}function ed(){Me(Xt),Me(Vt)}function Nw(t,e,n){if(Vt.current!==Cr)throw Error(B(168));Re(Vt,e),Re(Xt,n)}function B1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(B(108,rA(t)||"Unknown",r));return Ue({},n,i)}function td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,cs=Vt.current,Re(Vt,t),Re(Xt,Xt.current),!0}function Ow(t,e,n){var i=t.stateNode;if(!i)throw Error(B(169));n?(t=B1(t,e,cs),i.__reactInternalMemoizedMergedChildContext=t,Me(Xt),Me(Vt),Re(Vt,t)):Me(Xt),Re(Xt,n)}var pi=null,hh=!1,qf=!1;function $1(t){pi===null?pi=[t]:pi.push(t)}function ER(t){hh=!0,$1(t)}function Mr(){if(!qf&&pi!==null){qf=!0;var t=0,e=Ie;try{var n=pi;for(Ie=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}pi=null,hh=!1}catch(r){throw pi!==null&&(pi=pi.slice(t+1)),p1(Og,Mr),r}finally{Ie=e,qf=!1}}return null}var Xs=[],Js=0,nd=null,id=0,pn=[],mn=0,us=null,gi=1,yi="";function Hr(t,e){Xs[Js++]=id,Xs[Js++]=nd,nd=t,id=e}function q1(t,e,n){pn[mn++]=gi,pn[mn++]=yi,pn[mn++]=us,us=t;var i=gi;t=yi;var r=32-Ln(i)-1;i&=~(1<<r),n+=1;var s=32-Ln(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,gi=1<<32-Ln(e)+r|n<<r|i,yi=s+t}else gi=1<<s|n<<r|i,yi=t}function Bg(t){t.return!==null&&(Hr(t,1),q1(t,1,0))}function $g(t){for(;t===nd;)nd=Xs[--Js],Xs[Js]=null,id=Xs[--Js],Xs[Js]=null;for(;t===us;)us=pn[--mn],pn[mn]=null,yi=pn[--mn],pn[mn]=null,gi=pn[--mn],pn[mn]=null}var cn=null,an=null,Ve=!1,kn=null;function W1(t,e){var n=yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,an=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:gi,overflow:yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,an=null,!0):!1;default:return!1}}function am(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lm(t){if(Ve){var e=an;if(e){var n=e;if(!Lw(t,e)){if(am(t))throw Error(B(418));e=mr(n.nextSibling);var i=cn;e&&Lw(t,e)?W1(i,n):(t.flags=t.flags&-4097|2,Ve=!1,cn=t)}}else{if(am(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ve=!1,cn=t}}}function Mw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function tu(t){if(t!==cn)return!1;if(!Ve)return Mw(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!im(t.type,t.memoizedProps)),e&&(e=an)){if(am(t))throw H1(),Error(B(418));for(;e;)W1(t,e),e=mr(e.nextSibling)}if(Mw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=cn?mr(t.stateNode.nextSibling):null;return!0}function H1(){for(var t=an;t;)t=mr(t.nextSibling)}function So(){an=cn=null,Ve=!1}function qg(t){kn===null?kn=[t]:kn.push(t)}var TR=zi.ReactCurrentBatchConfig;function Ta(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function nu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dw(t){var e=t._init;return e(t._payload)}function G1(t){function e(_,y){if(t){var E=_.deletions;E===null?(_.deletions=[y],_.flags|=16):E.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function i(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function r(_,y){return _=_r(_,y),_.index=0,_.sibling=null,_}function s(_,y,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<y?(_.flags|=2,y):E):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,E,A){return y===null||y.tag!==6?(y=Xf(E,_.mode,A),y.return=_,y):(y=r(y,E),y.return=_,y)}function l(_,y,E,A){var L=E.type;return L===Ws?d(_,y,E.props.children,A,E.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xi&&Dw(L)===y.type)?(A=r(y,E.props),A.ref=Ta(_,y,E),A.return=_,A):(A=ku(E.type,E.key,E.props,null,_.mode,A),A.ref=Ta(_,y,E),A.return=_,A)}function c(_,y,E,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Jf(E,_.mode,A),y.return=_,y):(y=r(y,E.children||[]),y.return=_,y)}function d(_,y,E,A,L){return y===null||y.tag!==7?(y=os(E,_.mode,A,L),y.return=_,y):(y=r(y,E),y.return=_,y)}function h(_,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xf(""+y,_.mode,E),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wc:return E=ku(y.type,y.key,y.props,null,_.mode,E),E.ref=Ta(_,null,y),E.return=_,E;case qs:return y=Jf(y,_.mode,E),y.return=_,y;case Xi:var A=y._init;return h(_,A(y._payload),E)}if(Ma(y)||ya(y))return y=os(y,_.mode,E,null),y.return=_,y;nu(_,y)}return null}function f(_,y,E,A){var L=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(_,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wc:return E.key===L?l(_,y,E,A):null;case qs:return E.key===L?c(_,y,E,A):null;case Xi:return L=E._init,f(_,y,L(E._payload),A)}if(Ma(E)||ya(E))return L!==null?null:d(_,y,E,A,null);nu(_,E)}return null}function m(_,y,E,A,L){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(E)||null,a(y,_,""+A,L);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wc:return _=_.get(A.key===null?E:A.key)||null,l(y,_,A,L);case qs:return _=_.get(A.key===null?E:A.key)||null,c(y,_,A,L);case Xi:var D=A._init;return m(_,y,E,D(A._payload),L)}if(Ma(A)||ya(A))return _=_.get(E)||null,d(y,_,A,L,null);nu(y,A)}return null}function v(_,y,E,A){for(var L=null,D=null,k=y,T=y=0,b=null;k!==null&&T<E.length;T++){k.index>T?(b=k,k=null):b=k.sibling;var I=f(_,k,E[T],A);if(I===null){k===null&&(k=b);break}t&&k&&I.alternate===null&&e(_,k),y=s(I,y,T),D===null?L=I:D.sibling=I,D=I,k=b}if(T===E.length)return n(_,k),Ve&&Hr(_,T),L;if(k===null){for(;T<E.length;T++)k=h(_,E[T],A),k!==null&&(y=s(k,y,T),D===null?L=k:D.sibling=k,D=k);return Ve&&Hr(_,T),L}for(k=i(_,k);T<E.length;T++)b=m(k,_,T,E[T],A),b!==null&&(t&&b.alternate!==null&&k.delete(b.key===null?T:b.key),y=s(b,y,T),D===null?L=b:D.sibling=b,D=b);return t&&k.forEach(function(N){return e(_,N)}),Ve&&Hr(_,T),L}function S(_,y,E,A){var L=ya(E);if(typeof L!="function")throw Error(B(150));if(E=L.call(E),E==null)throw Error(B(151));for(var D=L=null,k=y,T=y=0,b=null,I=E.next();k!==null&&!I.done;T++,I=E.next()){k.index>T?(b=k,k=null):b=k.sibling;var N=f(_,k,I.value,A);if(N===null){k===null&&(k=b);break}t&&k&&N.alternate===null&&e(_,k),y=s(N,y,T),D===null?L=N:D.sibling=N,D=N,k=b}if(I.done)return n(_,k),Ve&&Hr(_,T),L;if(k===null){for(;!I.done;T++,I=E.next())I=h(_,I.value,A),I!==null&&(y=s(I,y,T),D===null?L=I:D.sibling=I,D=I);return Ve&&Hr(_,T),L}for(k=i(_,k);!I.done;T++,I=E.next())I=m(k,_,T,I.value,A),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?T:I.key),y=s(I,y,T),D===null?L=I:D.sibling=I,D=I);return t&&k.forEach(function(O){return e(_,O)}),Ve&&Hr(_,T),L}function x(_,y,E,A){if(typeof E=="object"&&E!==null&&E.type===Ws&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Wc:e:{for(var L=E.key,D=y;D!==null;){if(D.key===L){if(L=E.type,L===Ws){if(D.tag===7){n(_,D.sibling),y=r(D,E.props.children),y.return=_,_=y;break e}}else if(D.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xi&&Dw(L)===D.type){n(_,D.sibling),y=r(D,E.props),y.ref=Ta(_,D,E),y.return=_,_=y;break e}n(_,D);break}else e(_,D);D=D.sibling}E.type===Ws?(y=os(E.props.children,_.mode,A,E.key),y.return=_,_=y):(A=ku(E.type,E.key,E.props,null,_.mode,A),A.ref=Ta(_,y,E),A.return=_,_=A)}return o(_);case qs:e:{for(D=E.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(_,y.sibling),y=r(y,E.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Jf(E,_.mode,A),y.return=_,_=y}return o(_);case Xi:return D=E._init,x(_,y,D(E._payload),A)}if(Ma(E))return v(_,y,E,A);if(ya(E))return S(_,y,E,A);nu(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(_,y.sibling),y=r(y,E),y.return=_,_=y):(n(_,y),y=Xf(E,_.mode,A),y.return=_,_=y),o(_)):n(_,y)}return x}var Io=G1(!0),K1=G1(!1),rd=Lr(null),sd=null,Zs=null,Wg=null;function Hg(){Wg=Zs=sd=null}function Gg(t){var e=rd.current;Me(rd),t._currentValue=e}function cm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function lo(t,e){sd=t,Wg=Zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Wg!==t)if(t={context:t,memoizedValue:e,next:null},Zs===null){if(sd===null)throw Error(B(308));Zs=t,sd.dependencies={lanes:0,firstContext:t}}else Zs=Zs.next=t;return e}var Zr=null;function Kg(t){Zr===null?Zr=[t]:Zr.push(t)}function Q1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Kg(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ji=!1;function Qg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ri(t,n)}return r=i.interleaved,r===null?(e.next=e,Kg(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ri(t,n)}function Su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Lg(t,n)}}function Vw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function od(t,e,n,i){var r=t.updateQueue;Ji=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,S=a;switch(f=e,m=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=Ue({},h,f);break e;case 2:Ji=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=h}}function Fw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(B(191,r));r.call(i)}}}var ic={},Yn=Lr(ic),Sl=Lr(ic),Il=Lr(ic);function es(t){if(t===ic)throw Error(B(174));return t}function Yg(t,e){switch(Re(Il,e),Re(Sl,t),Re(Yn,ic),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$p(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$p(e,t)}Me(Yn),Re(Yn,e)}function bo(){Me(Yn),Me(Sl),Me(Il)}function X1(t){es(Il.current);var e=es(Yn.current),n=$p(e,t.type);e!==n&&(Re(Sl,t),Re(Yn,n))}function Xg(t){Sl.current===t&&(Me(Yn),Me(Sl))}var Fe=Lr(0);function ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wf=[];function Jg(){for(var t=0;t<Wf.length;t++)Wf[t]._workInProgressVersionPrimary=null;Wf.length=0}var Iu=zi.ReactCurrentDispatcher,Hf=zi.ReactCurrentBatchConfig,ds=0,je=null,st=null,ft=null,ld=!1,Qa=!1,bl=0,SR=0;function kt(){throw Error(B(321))}function Zg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function ey(t,e,n,i,r,s){if(ds=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?xR:PR,t=n(i,r),Qa){s=0;do{if(Qa=!1,bl=0,25<=s)throw Error(B(301));s+=1,ft=st=null,e.updateQueue=null,Iu.current=kR,t=n(i,r)}while(Qa)}if(Iu.current=cd,e=st!==null&&st.next!==null,ds=0,ft=st=je=null,ld=!1,e)throw Error(B(300));return t}function ty(){var t=bl!==0;return bl=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?je.memoizedState=ft=t:ft=ft.next=t,ft}function Tn(){if(st===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ft===null?je.memoizedState:ft.next;if(e!==null)ft=e,st=t;else{if(t===null)throw Error(B(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ft===null?je.memoizedState=ft=t:ft=ft.next=t}return ft}function Cl(t,e){return typeof e=="function"?e(t):e}function Gf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=st,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((ds&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,je.lanes|=d,hs|=d}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Vn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,je.lanes|=s,hs|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kf(t){var e=Tn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Vn(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function J1(){}function Z1(t,e){var n=je,i=Tn(),r=e(),s=!Vn(i.memoizedState,r);if(s&&(i.memoizedState=r,Qt=!0),i=i.queue,ny(nS.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,xl(9,tS.bind(null,n,i,r,e),void 0,null),gt===null)throw Error(B(349));ds&30||eS(n,e,r)}return r}function eS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tS(t,e,n,i){e.value=n,e.getSnapshot=i,iS(e)&&rS(t)}function nS(t,e,n){return n(function(){iS(e)&&rS(t)})}function iS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function rS(t){var e=Ri(t,1);e!==null&&Mn(e,t,1,-1)}function jw(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e.queue=t,t=t.dispatch=CR.bind(null,je,t),[e.memoizedState,t]}function xl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function sS(){return Tn().memoizedState}function bu(t,e,n,i){var r=Un();je.flags|=t,r.memoizedState=xl(1|e,n,void 0,i===void 0?null:i)}function fh(t,e,n,i){var r=Tn();i=i===void 0?null:i;var s=void 0;if(st!==null){var o=st.memoizedState;if(s=o.destroy,i!==null&&Zg(i,o.deps)){r.memoizedState=xl(e,n,s,i);return}}je.flags|=t,r.memoizedState=xl(1|e,n,s,i)}function Uw(t,e){return bu(8390656,8,t,e)}function ny(t,e){return fh(2048,8,t,e)}function oS(t,e){return fh(4,2,t,e)}function aS(t,e){return fh(4,4,t,e)}function lS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cS(t,e,n){return n=n!=null?n.concat([t]):null,fh(4,4,lS.bind(null,e,t),n)}function iy(){}function uS(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Zg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dS(t,e){var n=Tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Zg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function hS(t,e,n){return ds&21?(Vn(n,e)||(n=y1(),je.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function IR(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var i=Hf.transition;Hf.transition={};try{t(!1),e()}finally{Ie=n,Hf.transition=i}}function fS(){return Tn().memoizedState}function bR(t,e,n){var i=vr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},pS(t))mS(e,n);else if(n=Q1(t,e,n,i),n!==null){var r=qt();Mn(n,t,i,r),gS(n,e,i)}}function CR(t,e,n){var i=vr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(pS(t))mS(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Vn(a,o)){var l=e.interleaved;l===null?(r.next=r,Kg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Q1(t,e,r,i),n!==null&&(r=qt(),Mn(n,t,i,r),gS(n,e,i))}}function pS(t){var e=t.alternate;return t===je||e!==null&&e===je}function mS(t,e){Qa=ld=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Lg(t,n)}}var cd={readContext:En,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},xR={readContext:En,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:Uw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bu(4194308,4,lS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bu(4194308,4,t,e)},useInsertionEffect:function(t,e){return bu(4,2,t,e)},useMemo:function(t,e){var n=Un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Un();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=bR.bind(null,je,t),[i.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:jw,useDebugValue:iy,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=jw(!1),e=t[0];return t=IR.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=je,r=Un();if(Ve){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),gt===null)throw Error(B(349));ds&30||eS(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Uw(nS.bind(null,i,s,t),[t]),i.flags|=2048,xl(9,tS.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Un(),e=gt.identifierPrefix;if(Ve){var n=yi,i=gi;n=(i&~(1<<32-Ln(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PR={readContext:En,useCallback:uS,useContext:En,useEffect:ny,useImperativeHandle:cS,useInsertionEffect:oS,useLayoutEffect:aS,useMemo:dS,useReducer:Gf,useRef:sS,useState:function(){return Gf(Cl)},useDebugValue:iy,useDeferredValue:function(t){var e=Tn();return hS(e,st.memoizedState,t)},useTransition:function(){var t=Gf(Cl)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:J1,useSyncExternalStore:Z1,useId:fS,unstable_isNewReconciler:!1},kR={readContext:En,useCallback:uS,useContext:En,useEffect:ny,useImperativeHandle:cS,useInsertionEffect:oS,useLayoutEffect:aS,useMemo:dS,useReducer:Kf,useRef:sS,useState:function(){return Kf(Cl)},useDebugValue:iy,useDeferredValue:function(t){var e=Tn();return st===null?e.memoizedState=t:hS(e,st.memoizedState,t)},useTransition:function(){var t=Kf(Cl)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:J1,useSyncExternalStore:Z1,useId:fS,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function um(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ph={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),r=vr(t),s=Si(i,r);s.payload=e,n!=null&&(s.callback=n),e=gr(t,s,r),e!==null&&(Mn(e,t,r,i),Su(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),r=vr(t),s=Si(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=gr(t,s,r),e!==null&&(Mn(e,t,r,i),Su(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=vr(t),r=Si(n,i);r.tag=2,e!=null&&(r.callback=e),e=gr(t,r,i),e!==null&&(Mn(e,t,i,n),Su(e,t,i))}};function zw(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!_l(n,i)||!_l(r,s):!0}function yS(t,e,n){var i=!1,r=Cr,s=e.contextType;return typeof s=="object"&&s!==null?s=En(s):(r=Jt(e)?cs:Vt.current,i=e.contextTypes,s=(i=i!=null)?To(t,r):Cr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ph,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Bw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ph.enqueueReplaceState(e,e.state,null)}function dm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Qg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=En(s):(s=Jt(e)?cs:Vt.current,r.context=To(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(um(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ph.enqueueReplaceState(r,r.state,null),od(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Co(t,e){try{var n="",i=e;do n+=iA(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Qf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AR=typeof WeakMap=="function"?WeakMap:Map;function vS(t,e,n){n=Si(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){dd||(dd=!0,Tm=i),hm(t,e)},n}function _S(t,e,n){n=Si(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){hm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hm(t,e),typeof i!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $w(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new AR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=qR.bind(null,t,e,n),e.then(t,t))}function qw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ww(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Si(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var RR=zi.ReactCurrentOwner,Qt=!1;function $t(t,e,n,i){e.child=t===null?K1(e,null,n,i):Io(e,t.child,n,i)}function Hw(t,e,n,i,r){n=n.render;var s=e.ref;return lo(e,r),i=ey(t,e,n,i,s,r),n=ty(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ni(t,e,r)):(Ve&&n&&Bg(e),e.flags|=1,$t(t,e,i,r),e.child)}function Gw(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!dy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wS(t,e,s,i,r)):(t=ku(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_l,n(o,i)&&t.ref===e.ref)return Ni(t,e,r)}return e.flags|=1,t=_r(s,i),t.ref=e.ref,t.return=e,e.child=t}function wS(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(_l(s,i)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Ni(t,e,r)}return fm(t,e,n,i,r)}function ES(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(to,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(to,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Re(to,rn),rn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Re(to,rn),rn|=i;return $t(t,e,r,n),e.child}function TS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fm(t,e,n,i,r){var s=Jt(n)?cs:Vt.current;return s=To(e,s),lo(e,r),n=ey(t,e,n,i,s,r),i=ty(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ni(t,e,r)):(Ve&&i&&Bg(e),e.flags|=1,$t(t,e,n,r),e.child)}function Kw(t,e,n,i,r){if(Jt(n)){var s=!0;td(e)}else s=!1;if(lo(e,r),e.stateNode===null)Cu(t,e),yS(e,n,i),dm(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=En(c):(c=Jt(n)?cs:Vt.current,c=To(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&Bw(e,o,i,c),Ji=!1;var f=e.memoizedState;o.state=f,od(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Xt.current||Ji?(typeof d=="function"&&(um(e,n,d,i),l=e.memoizedState),(a=Ji||zw(e,n,a,i,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Y1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:xn(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Jt(n)?cs:Vt.current,l=To(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Bw(e,o,i,l),Ji=!1,f=e.memoizedState,o.state=f,od(e,i,o,r);var v=e.memoizedState;a!==h||f!==v||Xt.current||Ji?(typeof m=="function"&&(um(e,n,m,i),v=e.memoizedState),(c=Ji||zw(e,n,c,i,f,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return pm(t,e,n,i,s,r)}function pm(t,e,n,i,r,s){TS(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Ow(e,n,!1),Ni(t,e,s);i=e.stateNode,RR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Io(e,t.child,null,s),e.child=Io(e,null,a,s)):$t(t,e,a,s),e.memoizedState=i.state,r&&Ow(e,n,!0),e.child}function SS(t){var e=t.stateNode;e.pendingContext?Nw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nw(t,e.context,!1),Yg(t,e.containerInfo)}function Qw(t,e,n,i,r){return So(),qg(r),e.flags|=256,$t(t,e,n,i),e.child}var mm={dehydrated:null,treeContext:null,retryLane:0};function gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function IS(t,e,n){var i=e.pendingProps,r=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Re(Fe,r&1),t===null)return lm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yh(o,i,0,null),t=os(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=gm(n),e.memoizedState=mm,t):ry(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return NR(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=_r(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=_r(a,s):(s=os(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?gm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=mm,i}return s=t.child,t=s.sibling,i=_r(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function ry(t,e){return e=yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function iu(t,e,n,i){return i!==null&&qg(i),Io(e,t.child,null,n),t=ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NR(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Qf(Error(B(422))),iu(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=yh({mode:"visible",children:i.children},r,0,null),s=os(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Io(e,t.child,null,o),e.child.memoizedState=gm(o),e.memoizedState=mm,s);if(!(e.mode&1))return iu(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(B(419)),i=Qf(s,i,void 0),iu(t,e,o,i)}if(a=(o&t.childLanes)!==0,Qt||a){if(i=gt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ri(t,r),Mn(i,t,r,-1))}return uy(),i=Qf(Error(B(421))),iu(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=WR.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,an=mr(r.nextSibling),cn=e,Ve=!0,kn=null,t!==null&&(pn[mn++]=gi,pn[mn++]=yi,pn[mn++]=us,gi=t.id,yi=t.overflow,us=e),e=ry(e,i.children),e.flags|=4096,e)}function Yw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),cm(t.return,e,n)}function Yf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function bS(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if($t(t,e,i.children,n),i=Fe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yw(t,n,e);else if(t.tag===19)Yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Re(Fe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ad(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Yf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ad(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Yf(e,!0,n,null,s);break;case"together":Yf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OR(t,e,n){switch(e.tag){case 3:SS(e),So();break;case 5:X1(e);break;case 1:Jt(e.type)&&td(e);break;case 4:Yg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Re(rd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Re(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?IS(t,e,n):(Re(Fe,Fe.current&1),t=Ni(t,e,n),t!==null?t.sibling:null);Re(Fe,Fe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return bS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Re(Fe,Fe.current),i)break;return null;case 22:case 23:return e.lanes=0,ES(t,e,n)}return Ni(t,e,n)}var CS,ym,xS,PS;CS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ym=function(){};xS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,es(Yn.current);var s=null;switch(n){case"input":r=jp(t,r),i=jp(t,i),s=[];break;case"select":r=Ue({},r,{value:void 0}),i=Ue({},i,{value:void 0}),s=[];break;case"textarea":r=Bp(t,r),i=Bp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Zu)}qp(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};PS=function(t,e,n,i){n!==i&&(e.flags|=4)};function Sa(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function LR(t,e,n){var i=e.pendingProps;switch($g(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Jt(e.type)&&ed(),At(e),null;case 3:return i=e.stateNode,bo(),Me(Xt),Me(Vt),Jg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(tu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(bm(kn),kn=null))),ym(t,e),At(e),null;case 5:Xg(e);var r=es(Il.current);if(n=e.type,t!==null&&e.stateNode!=null)xS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(B(166));return At(e),null}if(t=es(Yn.current),tu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[$n]=e,i[Tl]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(r=0;r<Va.length;r++)Oe(Va[r],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":sw(i,s),Oe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",i);break;case"textarea":aw(i,s),Oe("invalid",i)}qp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&eu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&eu(i.textContent,a,t),r=["children",""+a]):hl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",i)}switch(n){case"input":Hc(i),ow(i,s,!0);break;case"textarea":Hc(i),lw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Zu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[$n]=e,t[Tl]=i,CS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wp(n,i),n){case"dialog":Oe("cancel",t),Oe("close",t),r=i;break;case"iframe":case"object":case"embed":Oe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Va.length;r++)Oe(Va[r],t);r=i;break;case"source":Oe("error",t),r=i;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),r=i;break;case"details":Oe("toggle",t),r=i;break;case"input":sw(t,i),r=jp(t,i),Oe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ue({},i,{value:void 0}),Oe("invalid",t);break;case"textarea":aw(t,i),r=Bp(t,i),Oe("invalid",t);break;default:r=i}qp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?s1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&i1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&fl(t,l):typeof l=="number"&&fl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&Pg(t,s,l,o))}switch(n){case"input":Hc(t),ow(t,i,!1);break;case"textarea":Hc(t),lw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+br(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ro(t,!!i.multiple,s,!1):i.defaultValue!=null&&ro(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Zu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)PS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(n=es(Il.current),es(Yn.current),tu(e)){if(i=e.stateNode,n=e.memoizedProps,i[$n]=e,(s=i.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:eu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[$n]=e,e.stateNode=i}return At(e),null;case 13:if(Me(Fe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&an!==null&&e.mode&1&&!(e.flags&128))H1(),So(),e.flags|=98560,s=!1;else if(s=tu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[$n]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),s=!1}else kn!==null&&(bm(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?lt===0&&(lt=3):uy())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return bo(),ym(t,e),t===null&&wl(e.stateNode.containerInfo),At(e),null;case 10:return Gg(e.type._context),At(e),null;case 17:return Jt(e.type)&&ed(),At(e),null;case 19:if(Me(Fe),s=e.memoizedState,s===null)return At(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Sa(s,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ad(t),o!==null){for(e.flags|=128,Sa(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>xo&&(e.flags|=128,i=!0,Sa(s,!1),e.lanes=4194304)}else{if(!i)if(t=ad(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return At(e),null}else 2*Ze()-s.renderingStartTime>xo&&n!==1073741824&&(e.flags|=128,i=!0,Sa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=Fe.current,Re(Fe,i?n&1|2:n&1),e):(At(e),null);case 22:case 23:return cy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?rn&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function MR(t,e){switch($g(e),e.tag){case 1:return Jt(e.type)&&ed(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bo(),Me(Xt),Me(Vt),Jg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xg(e),null;case 13:if(Me(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Fe),null;case 4:return bo(),null;case 10:return Gg(e.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var ru=!1,Lt=!1,DR=typeof WeakSet=="function"?WeakSet:Set,Y=null;function eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){qe(t,e,i)}else n.current=null}function vm(t,e,n){try{n()}catch(i){qe(t,e,i)}}var Xw=!1;function VR(t,e){if(tm=Yu,t=O1(),zg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++d===i&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nm={focusedElem:t,selectionRange:n},Yu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,x=v.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?S:xn(e.type,S),x);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(A){qe(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return v=Xw,Xw=!1,v}function Ya(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&vm(e,n,s)}r=r.next}while(r!==i)}}function mh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function _m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kS(t){var e=t.alternate;e!==null&&(t.alternate=null,kS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[Tl],delete e[sm],delete e[_R],delete e[wR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AS(t){return t.tag===5||t.tag===3||t.tag===4}function Jw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zu));else if(i!==4&&(t=t.child,t!==null))for(wm(t,e,n),t=t.sibling;t!==null;)wm(t,e,n),t=t.sibling}function Em(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Em(t,e,n),t=t.sibling;t!==null;)Em(t,e,n),t=t.sibling}var vt=null,Pn=!1;function Qi(t,e,n){for(n=n.child;n!==null;)RS(t,e,n),n=n.sibling}function RS(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(ah,n)}catch{}switch(n.tag){case 5:Lt||eo(n,e);case 6:var i=vt,r=Pn;vt=null,Qi(t,e,n),vt=i,Pn=r,vt!==null&&(Pn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Pn?(t=vt,n=n.stateNode,t.nodeType===8?$f(t.parentNode,n):t.nodeType===1&&$f(t,n),yl(t)):$f(vt,n.stateNode));break;case 4:i=vt,r=Pn,vt=n.stateNode.containerInfo,Pn=!0,Qi(t,e,n),vt=i,Pn=r;break;case 0:case 11:case 14:case 15:if(!Lt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vm(n,e,o),r=r.next}while(r!==i)}Qi(t,e,n);break;case 1:if(!Lt&&(eo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){qe(n,e,a)}Qi(t,e,n);break;case 21:Qi(t,e,n);break;case 22:n.mode&1?(Lt=(i=Lt)||n.memoizedState!==null,Qi(t,e,n),Lt=i):Qi(t,e,n);break;default:Qi(t,e,n)}}function Zw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DR),e.forEach(function(i){var r=HR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,Pn=!1;break e;case 3:vt=a.stateNode.containerInfo,Pn=!0;break e;case 4:vt=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(vt===null)throw Error(B(160));RS(s,o,r),vt=null,Pn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){qe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NS(e,t),e=e.sibling}function NS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),jn(t),i&4){try{Ya(3,t,t.return),mh(3,t)}catch(S){qe(t,t.return,S)}try{Ya(5,t,t.return)}catch(S){qe(t,t.return,S)}}break;case 1:bn(e,t),jn(t),i&512&&n!==null&&eo(n,n.return);break;case 5:if(bn(e,t),jn(t),i&512&&n!==null&&eo(n,n.return),t.flags&32){var r=t.stateNode;try{fl(r,"")}catch(S){qe(t,t.return,S)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&e1(r,s),Wp(a,o);var c=Wp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?s1(r,h):d==="dangerouslySetInnerHTML"?i1(r,h):d==="children"?fl(r,h):Pg(r,d,h,c)}switch(a){case"input":Up(r,s);break;case"textarea":t1(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ro(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?ro(r,!!s.multiple,s.defaultValue,!0):ro(r,!!s.multiple,s.multiple?[]:"",!1))}r[Tl]=s}catch(S){qe(t,t.return,S)}}break;case 6:if(bn(e,t),jn(t),i&4){if(t.stateNode===null)throw Error(B(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(S){qe(t,t.return,S)}}break;case 3:if(bn(e,t),jn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{yl(e.containerInfo)}catch(S){qe(t,t.return,S)}break;case 4:bn(e,t),jn(t);break;case 13:bn(e,t),jn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(ay=Ze())),i&4&&Zw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||d,bn(e,t),Lt=c):bn(e,t),jn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Y=t,d=t.child;d!==null;){for(h=Y=d;Y!==null;){switch(f=Y,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ya(4,f,f.return);break;case 1:eo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){qe(i,n,S)}}break;case 5:eo(f,f.return);break;case 22:if(f.memoizedState!==null){t0(h);continue}}m!==null?(m.return=f,Y=m):t0(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=r1("display",o))}catch(S){qe(t,t.return,S)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(S){qe(t,t.return,S)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bn(e,t),jn(t),i&4&&Zw(t);break;case 21:break;default:bn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AS(n)){var i=n;break e}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(fl(r,""),i.flags&=-33);var s=Jw(t);Em(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Jw(t);wm(t,a,o);break;default:throw Error(B(161))}}catch(l){qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FR(t,e,n){Y=t,OS(t)}function OS(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ru;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Lt;a=ru;var c=Lt;if(ru=o,(Lt=l)&&!c)for(Y=r;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?n0(r):l!==null?(l.return=o,Y=l):n0(r);for(;s!==null;)Y=s,OS(s),s=s.sibling;Y=r,ru=a,Lt=c}e0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):e0(t)}}function e0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||mh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Lt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Fw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&yl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Lt||e.flags&512&&_m(e)}catch(f){qe(e,e.return,f)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function t0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function n0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mh(4,e)}catch(l){qe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){qe(e,r,l)}}var s=e.return;try{_m(e)}catch(l){qe(e,s,l)}break;case 5:var o=e.return;try{_m(e)}catch(l){qe(e,o,l)}}}catch(l){qe(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var jR=Math.ceil,ud=zi.ReactCurrentDispatcher,sy=zi.ReactCurrentOwner,vn=zi.ReactCurrentBatchConfig,ge=0,gt=null,nt=null,Tt=0,rn=0,to=Lr(0),lt=0,Pl=null,hs=0,gh=0,oy=0,Xa=null,Kt=null,ay=0,xo=1/0,fi=null,dd=!1,Tm=null,yr=null,su=!1,ar=null,hd=0,Ja=0,Sm=null,xu=-1,Pu=0;function qt(){return ge&6?Ze():xu!==-1?xu:xu=Ze()}function vr(t){return t.mode&1?ge&2&&Tt!==0?Tt&-Tt:TR.transition!==null?(Pu===0&&(Pu=y1()),Pu):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:I1(t.type)),t):1}function Mn(t,e,n,i){if(50<Ja)throw Ja=0,Sm=null,Error(B(185));ec(t,n,i),(!(ge&2)||t!==gt)&&(t===gt&&(!(ge&2)&&(gh|=n),lt===4&&er(t,Tt)),Zt(t,i),n===1&&ge===0&&!(e.mode&1)&&(xo=Ze()+500,hh&&Mr()))}function Zt(t,e){var n=t.callbackNode;TA(t,e);var i=Qu(t,t===gt?Tt:0);if(i===0)n!==null&&dw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&dw(n),e===1)t.tag===0?ER(i0.bind(null,t)):$1(i0.bind(null,t)),yR(function(){!(ge&6)&&Mr()}),n=null;else{switch(v1(i)){case 1:n=Og;break;case 4:n=m1;break;case 16:n=Ku;break;case 536870912:n=g1;break;default:n=Ku}n=zS(n,LS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LS(t,e){if(xu=-1,Pu=0,ge&6)throw Error(B(327));var n=t.callbackNode;if(co()&&t.callbackNode!==n)return null;var i=Qu(t,t===gt?Tt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=fd(t,i);else{e=i;var r=ge;ge|=2;var s=DS();(gt!==t||Tt!==e)&&(fi=null,xo=Ze()+500,ss(t,e));do try{BR();break}catch(a){MS(t,a)}while(!0);Hg(),ud.current=s,ge=r,nt!==null?e=0:(gt=null,Tt=0,e=lt)}if(e!==0){if(e===2&&(r=Yp(t),r!==0&&(i=r,e=Im(t,r))),e===1)throw n=Pl,ss(t,0),er(t,i),Zt(t,Ze()),n;if(e===6)er(t,i);else{if(r=t.current.alternate,!(i&30)&&!UR(r)&&(e=fd(t,i),e===2&&(s=Yp(t),s!==0&&(i=s,e=Im(t,s))),e===1))throw n=Pl,ss(t,0),er(t,i),Zt(t,Ze()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(B(345));case 2:Gr(t,Kt,fi);break;case 3:if(er(t,i),(i&130023424)===i&&(e=ay+500-Ze(),10<e)){if(Qu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=rm(Gr.bind(null,t,Kt,fi),e);break}Gr(t,Kt,fi);break;case 4:if(er(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ln(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*jR(i/1960))-i,10<i){t.timeoutHandle=rm(Gr.bind(null,t,Kt,fi),i);break}Gr(t,Kt,fi);break;case 5:Gr(t,Kt,fi);break;default:throw Error(B(329))}}}return Zt(t,Ze()),t.callbackNode===n?LS.bind(null,t):null}function Im(t,e){var n=Xa;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=fd(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&bm(e)),t}function bm(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function UR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Vn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~oy,e&=~gh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ln(e),i=1<<n;t[n]=-1,e&=~i}}function i0(t){if(ge&6)throw Error(B(327));co();var e=Qu(t,0);if(!(e&1))return Zt(t,Ze()),null;var n=fd(t,e);if(t.tag!==0&&n===2){var i=Yp(t);i!==0&&(e=i,n=Im(t,i))}if(n===1)throw n=Pl,ss(t,0),er(t,e),Zt(t,Ze()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gr(t,Kt,fi),Zt(t,Ze()),null}function ly(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(xo=Ze()+500,hh&&Mr())}}function fs(t){ar!==null&&ar.tag===0&&!(ge&6)&&co();var e=ge;ge|=1;var n=vn.transition,i=Ie;try{if(vn.transition=null,Ie=1,t)return t()}finally{Ie=i,vn.transition=n,ge=e,!(ge&6)&&Mr()}}function cy(){rn=to.current,Me(to)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gR(n)),nt!==null)for(n=nt.return;n!==null;){var i=n;switch($g(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ed();break;case 3:bo(),Me(Xt),Me(Vt),Jg();break;case 5:Xg(i);break;case 4:bo();break;case 13:Me(Fe);break;case 19:Me(Fe);break;case 10:Gg(i.type._context);break;case 22:case 23:cy()}n=n.return}if(gt=t,nt=t=_r(t.current,null),Tt=rn=e,lt=0,Pl=null,oy=gh=hs=0,Kt=Xa=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Zr=null}return t}function MS(t,e){do{var n=nt;try{if(Hg(),Iu.current=cd,ld){for(var i=je.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ld=!1}if(ds=0,ft=st=je=null,Qa=!1,bl=0,sy.current=null,n===null||n.return===null){lt=1,Pl=e,nt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=qw(o);if(m!==null){m.flags&=-257,Ww(m,o,a,s,e),m.mode&1&&$w(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){$w(s,c,e),uy();break e}l=Error(B(426))}}else if(Ve&&a.mode&1){var x=qw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Ww(x,o,a,s,e),qg(Co(l,a));break e}}s=l=Co(l,a),lt!==4&&(lt=2),Xa===null?Xa=[s]:Xa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=vS(s,l,e);Vw(s,_);break e;case 1:a=l;var y=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(yr===null||!yr.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=_S(s,a,e);Vw(s,A);break e}}s=s.return}while(s!==null)}FS(n)}catch(L){e=L,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function DS(){var t=ud.current;return ud.current=cd,t===null?cd:t}function uy(){(lt===0||lt===3||lt===2)&&(lt=4),gt===null||!(hs&268435455)&&!(gh&268435455)||er(gt,Tt)}function fd(t,e){var n=ge;ge|=2;var i=DS();(gt!==t||Tt!==e)&&(fi=null,ss(t,e));do try{zR();break}catch(r){MS(t,r)}while(!0);if(Hg(),ge=n,ud.current=i,nt!==null)throw Error(B(261));return gt=null,Tt=0,lt}function zR(){for(;nt!==null;)VS(nt)}function BR(){for(;nt!==null&&!fA();)VS(nt)}function VS(t){var e=US(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?FS(t):nt=e,sy.current=null}function FS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MR(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,nt=null;return}}else if(n=LR(n,e,rn),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);lt===0&&(lt=5)}function Gr(t,e,n){var i=Ie,r=vn.transition;try{vn.transition=null,Ie=1,$R(t,e,n,i)}finally{vn.transition=r,Ie=i}return null}function $R(t,e,n,i){do co();while(ar!==null);if(ge&6)throw Error(B(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SA(t,s),t===gt&&(nt=gt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||su||(su=!0,zS(Ku,function(){return co(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vn.transition,vn.transition=null;var o=Ie;Ie=1;var a=ge;ge|=4,sy.current=null,VR(t,n),NS(n,t),cR(nm),Yu=!!tm,nm=tm=null,t.current=n,FR(n),pA(),ge=a,Ie=o,vn.transition=s}else t.current=n;if(su&&(su=!1,ar=t,hd=r),s=t.pendingLanes,s===0&&(yr=null),yA(n.stateNode),Zt(t,Ze()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(dd)throw dd=!1,t=Tm,Tm=null,t;return hd&1&&t.tag!==0&&co(),s=t.pendingLanes,s&1?t===Sm?Ja++:(Ja=0,Sm=t):Ja=0,Mr(),null}function co(){if(ar!==null){var t=v1(hd),e=vn.transition,n=Ie;try{if(vn.transition=null,Ie=16>t?16:t,ar===null)var i=!1;else{if(t=ar,ar=null,hd=0,ge&6)throw Error(B(331));var r=ge;for(ge|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Y=c;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Ya(8,d,s)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var f=d.sibling,m=d.return;if(kS(d),d===c){Y=null;break}if(f!==null){f.return=m,Y=f;break}Y=m}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var x=S.sibling;S.sibling=null,S=x}while(S!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ya(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,Y=_;break e}Y=s.return}}var y=t.current;for(Y=y;Y!==null;){o=Y;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Y=E;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mh(9,a)}}catch(L){qe(a,a.return,L)}if(a===o){Y=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Y=A;break e}Y=a.return}}if(ge=r,Mr(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(ah,t)}catch{}i=!0}return i}finally{Ie=n,vn.transition=e}}return!1}function r0(t,e,n){e=Co(n,e),e=vS(t,e,1),t=gr(t,e,1),e=qt(),t!==null&&(ec(t,1,e),Zt(t,e))}function qe(t,e,n){if(t.tag===3)r0(t,t,n);else for(;e!==null;){if(e.tag===3){r0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yr===null||!yr.has(i))){t=Co(n,t),t=_S(e,t,1),e=gr(e,t,1),t=qt(),e!==null&&(ec(e,1,t),Zt(e,t));break}}e=e.return}}function qR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(Tt&n)===n&&(lt===4||lt===3&&(Tt&130023424)===Tt&&500>Ze()-ay?ss(t,0):oy|=n),Zt(t,e)}function jS(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=qt();t=Ri(t,e),t!==null&&(ec(t,e,n),Zt(t,n))}function WR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jS(t,n)}function HR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(e),jS(t,n)}var US;US=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,OR(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Ve&&e.flags&1048576&&q1(e,id,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Cu(t,e),t=e.pendingProps;var r=To(e,Vt.current);lo(e,n),r=ey(null,e,i,t,r,n);var s=ty();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(s=!0,td(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Qg(e),r.updater=ph,e.stateNode=r,r._reactInternals=e,dm(e,i,t,n),e=pm(null,e,i,!0,s,n)):(e.tag=0,Ve&&s&&Bg(e),$t(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Cu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=KR(i),t=xn(i,t),r){case 0:e=fm(null,e,i,t,n);break e;case 1:e=Kw(null,e,i,t,n);break e;case 11:e=Hw(null,e,i,t,n);break e;case 14:e=Gw(null,e,i,xn(i.type,t),n);break e}throw Error(B(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xn(i,r),fm(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xn(i,r),Kw(t,e,i,r,n);case 3:e:{if(SS(e),t===null)throw Error(B(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Y1(t,e),od(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Co(Error(B(423)),e),e=Qw(t,e,i,n,r);break e}else if(i!==r){r=Co(Error(B(424)),e),e=Qw(t,e,i,n,r);break e}else for(an=mr(e.stateNode.containerInfo.firstChild),cn=e,Ve=!0,kn=null,n=K1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(So(),i===r){e=Ni(t,e,n);break e}$t(t,e,i,n)}e=e.child}return e;case 5:return X1(e),t===null&&lm(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,im(i,r)?o=null:s!==null&&im(i,s)&&(e.flags|=32),TS(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&lm(e),null;case 13:return IS(t,e,n);case 4:return Yg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Io(e,null,i,n):$t(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xn(i,r),Hw(t,e,i,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Re(rd,i._currentValue),i._currentValue=o,s!==null)if(Vn(s.value,o)){if(s.children===r.children&&!Xt.current){e=Ni(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Si(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,lo(e,n),r=En(r),i=i(r),e.flags|=1,$t(t,e,i,n),e.child;case 14:return i=e.type,r=xn(i,e.pendingProps),r=xn(i.type,r),Gw(t,e,i,r,n);case 15:return wS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xn(i,r),Cu(t,e),e.tag=1,Jt(i)?(t=!0,td(e)):t=!1,lo(e,n),yS(e,i,r),dm(e,i,r,n),pm(null,e,i,!0,t,n);case 19:return bS(t,e,n);case 22:return ES(t,e,n)}throw Error(B(156,e.tag))};function zS(t,e){return p1(t,e)}function GR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,e,n,i){return new GR(t,e,n,i)}function dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KR(t){if(typeof t=="function")return dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ag)return 11;if(t===Rg)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ku(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")dy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ws:return os(n.children,r,s,e);case kg:o=8,r|=8;break;case Mp:return t=yn(12,n,e,r|2),t.elementType=Mp,t.lanes=s,t;case Dp:return t=yn(13,n,e,r),t.elementType=Dp,t.lanes=s,t;case Vp:return t=yn(19,n,e,r),t.elementType=Vp,t.lanes=s,t;case XT:return yh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QT:o=10;break e;case YT:o=9;break e;case Ag:o=11;break e;case Rg:o=14;break e;case Xi:o=16,i=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=yn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function os(t,e,n,i){return t=yn(7,t,i,e),t.lanes=n,t}function yh(t,e,n,i){return t=yn(22,t,i,e),t.elementType=XT,t.lanes=n,t.stateNode={isHidden:!1},t}function Xf(t,e,n){return t=yn(6,t,null,e),t.lanes=n,t}function Jf(t,e,n){return e=yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nf(0),this.expirationTimes=Nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function hy(t,e,n,i,r,s,o,a,l){return t=new QR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(s),t}function YR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function BS(t){if(!t)return Cr;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Jt(n))return B1(t,n,e)}return e}function $S(t,e,n,i,r,s,o,a,l){return t=hy(n,i,!0,t,r,s,o,a,l),t.context=BS(null),n=t.current,i=qt(),r=vr(n),s=Si(i,r),s.callback=e??null,gr(n,s,r),t.current.lanes=r,ec(t,r,i),Zt(t,i),t}function vh(t,e,n,i){var r=e.current,s=qt(),o=vr(r);return n=BS(n),e.context===null?e.context=n:e.pendingContext=n,e=Si(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=gr(r,e,o),t!==null&&(Mn(t,r,o,s),Su(t,r,o)),o}function pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fy(t,e){s0(t,e),(t=t.alternate)&&s0(t,e)}function XR(){return null}var qS=typeof reportError=="function"?reportError:function(t){console.error(t)};function py(t){this._internalRoot=t}_h.prototype.render=py.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));vh(t,e,null,null)};_h.prototype.unmount=py.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){vh(null,t,null,null)}),e[Ai]=null}};function _h(t){this._internalRoot=t}_h.prototype.unstable_scheduleHydration=function(t){if(t){var e=E1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zi.length&&e!==0&&e<Zi[n].priority;n++);Zi.splice(n,0,t),n===0&&S1(t)}};function my(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function o0(){}function JR(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=pd(o);s.call(c)}}var o=$S(e,i,t,0,null,!1,!1,"",o0);return t._reactRootContainer=o,t[Ai]=o.current,wl(t.nodeType===8?t.parentNode:t),fs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=pd(l);a.call(c)}}var l=hy(t,0,!1,null,null,!1,!1,"",o0);return t._reactRootContainer=l,t[Ai]=l.current,wl(t.nodeType===8?t.parentNode:t),fs(function(){vh(e,l,n,i)}),l}function Eh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=pd(o);a.call(l)}}vh(e,o,t,r)}else o=JR(n,e,t,r,i);return pd(o)}_1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Da(e.pendingLanes);n!==0&&(Lg(e,n|1),Zt(e,Ze()),!(ge&6)&&(xo=Ze()+500,Mr()))}break;case 13:fs(function(){var i=Ri(t,1);if(i!==null){var r=qt();Mn(i,t,1,r)}}),fy(t,1)}};Mg=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=qt();Mn(e,t,134217728,n)}fy(t,134217728)}};w1=function(t){if(t.tag===13){var e=vr(t),n=Ri(t,e);if(n!==null){var i=qt();Mn(n,t,e,i)}fy(t,e)}};E1=function(){return Ie};T1=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Gp=function(t,e,n){switch(e){case"input":if(Up(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=dh(i);if(!r)throw Error(B(90));ZT(i),Up(i,r)}}}break;case"textarea":t1(t,n);break;case"select":e=n.value,e!=null&&ro(t,!!n.multiple,e,!1)}};l1=ly;c1=fs;var ZR={usingClientEntryPoint:!1,Events:[nc,Qs,dh,o1,a1,ly]},Ia={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eN={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||XR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ah=ou.inject(eN),Qn=ou}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZR;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(e))throw Error(B(200));return YR(t,e,null,n)};dn.createRoot=function(t,e){if(!my(t))throw Error(B(299));var n=!1,i="",r=qS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=hy(t,1,!1,null,null,n,!1,i,r),t[Ai]=e.current,wl(t.nodeType===8?t.parentNode:t),new py(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=h1(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return fs(t)};dn.hydrate=function(t,e,n){if(!wh(e))throw Error(B(200));return Eh(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!my(t))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=qS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$S(e,null,t,1,n??null,r,!1,s,o),t[Ai]=e.current,wl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new _h(e)};dn.render=function(t,e,n){if(!wh(e))throw Error(B(200));return Eh(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!wh(t))throw Error(B(40));return t._reactRootContainer?(fs(function(){Eh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};dn.unstable_batchedUpdates=ly;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!wh(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Eh(t,e,n,!1,i)};dn.version="18.3.1-next-f1338f8080-20240426";function WS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WS)}catch(t){console.error(t)}}WS(),WT.exports=dn;var tN=WT.exports,a0=tN;Op.createRoot=a0.createRoot,Op.hydrateRoot=a0.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kl.apply(this,arguments)}var lr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lr||(lr={}));const l0="popstate";function nN(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Cm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:md(r)}return rN(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iN(){return Math.random().toString(36).substr(2,8)}function c0(t,e){return{usr:t.state,key:t.key,idx:e}}function Cm(t,e,n,i){return n===void 0&&(n=null),kl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wo(e):e,{state:n,key:e&&e.key||i||iN()})}function md(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function rN(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=lr.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(kl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=lr.Pop;let x=d(),_=x==null?null:x-c;c=x,l&&l({action:a,location:S.location,delta:_})}function f(x,_){a=lr.Push;let y=Cm(S.location,x,_);c=d()+1;let E=c0(y,c),A=S.createHref(y);try{o.pushState(E,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(A)}s&&l&&l({action:a,location:S.location,delta:1})}function m(x,_){a=lr.Replace;let y=Cm(S.location,x,_);c=d();let E=c0(y,c),A=S.createHref(y);o.replaceState(E,"",A),s&&l&&l({action:a,location:S.location,delta:0})}function v(x){let _=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof x=="string"?x:md(x);return y=y.replace(/ $/,"%20"),Ge(_,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,_)}let S={get action(){return a},get location(){return t(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(l0,h),l=x,()=>{r.removeEventListener(l0,h),l=null}},createHref(x){return e(r,x)},createURL:v,encodeLocation(x){let _=v(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(x){return o.go(x)}};return S}var u0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u0||(u0={}));function sN(t,e,n){return n===void 0&&(n="/"),oN(t,e,n,!1)}function oN(t,e,n,i){let r=typeof e=="string"?Wo(e):e,s=Po(r.pathname||"/",n);if(s==null)return null;let o=GS(t);aN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=vN(s);a=gN(o[l],c,i)}return a}function GS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ge(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=wr([i,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ge(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),GS(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:pN(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of KS(s.path))r(s,o,l)}),e}function KS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=KS(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function aN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mN(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const lN=/^:[\w-]+$/,cN=3,uN=2,dN=1,hN=10,fN=-2,d0=t=>t==="*";function pN(t,e){let n=t.split("/"),i=n.length;return n.some(d0)&&(i+=fN),e&&(i+=uN),n.filter(r=>!d0(r)).reduce((r,s)=>r+(lN.test(s)?cN:s===""?dN:hN),i)}function mN(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function gN(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=gd({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=gd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:wr([s,h.pathname]),pathnameBase:TN(wr([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=wr([s,h.pathnameBase]))}return o}function gd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=yN(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let S=a[h]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function yN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),HS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function vN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Po(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function _N(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Wo(t):t;return{pathname:n?n.startsWith("/")?n:wN(n,e):e,search:SN(i),hash:IN(r)}}function wN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Zf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function QS(t,e){let n=EN(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function YS(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Wo(t):(r=kl({},t),Ge(!r.pathname||!r.pathname.includes("?"),Zf("?","pathname","search",r)),Ge(!r.pathname||!r.pathname.includes("#"),Zf("#","pathname","hash",r)),Ge(!r.search||!r.search.includes("#"),Zf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=_N(r,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),TN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const XS=["post","put","patch","delete"];new Set(XS);const CN=["get",...XS];new Set(CN);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Al.apply(this,arguments)}const Th=M.createContext(null),JS=M.createContext(null),Dr=M.createContext(null),Sh=M.createContext(null),xs=M.createContext({outlet:null,matches:[],isDataRoute:!1}),ZS=M.createContext(null);function xN(t,e){let{relative:n}=e===void 0?{}:e;rc()||Ge(!1);let{basename:i,navigator:r}=M.useContext(Dr),{hash:s,pathname:o,search:a}=Ih(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:wr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function rc(){return M.useContext(Sh)!=null}function Bi(){return rc()||Ge(!1),M.useContext(Sh).location}function eI(t){M.useContext(Dr).static||M.useLayoutEffect(t)}function Vr(){let{isDataRoute:t}=M.useContext(xs);return t?UN():PN()}function PN(){rc()||Ge(!1);let t=M.useContext(Th),{basename:e,future:n,navigator:i}=M.useContext(Dr),{matches:r}=M.useContext(xs),{pathname:s}=Bi(),o=JSON.stringify(QS(r,n.v7_relativeSplatPath)),a=M.useRef(!1);return eI(()=>{a.current=!0}),M.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=YS(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wr([e,h.pathname])),(d.replace?i.replace:i.push)(h,d.state,d)},[e,i,o,s,t])}function Ih(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(Dr),{matches:r}=M.useContext(xs),{pathname:s}=Bi(),o=JSON.stringify(QS(r,i.v7_relativeSplatPath));return M.useMemo(()=>YS(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function kN(t,e){return AN(t,e)}function AN(t,e,n,i){rc()||Ge(!1);let{navigator:r}=M.useContext(Dr),{matches:s}=M.useContext(xs),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Bi(),d;if(e){var h;let x=typeof e=="string"?Wo(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||Ge(!1),d=x}else d=c;let f=d.pathname||"/",m=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=sN(t,{pathname:m}),S=MN(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:wr([l,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:wr([l,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,i);return e&&S?M.createElement(Sh.Provider,{value:{location:Al({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:lr.Pop}},S):S}function RN(){let t=jN(),e=bN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const NN=M.createElement(RN,null);class ON extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(xs.Provider,{value:this.props.routeContext},M.createElement(ZS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LN(t){let{routeContext:e,match:n,children:i}=t,r=M.useContext(Th);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(xs.Provider,{value:e},i)}function MN(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ge(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,v=!1,S=null,x=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,S=h.route.errorElement||NN,l&&(c<0&&f===0?(v=!0,x=null):c===f&&(v=!0,x=h.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),y=()=>{let E;return m?E=S:v?E=x:h.route.Component?E=M.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,M.createElement(LN,{match:h,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?M.createElement(ON,{location:n.location,revalidation:n.revalidation,component:S,error:m,children:y(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):y()},null)}var tI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tI||{}),yd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yd||{});function DN(t){let e=M.useContext(Th);return e||Ge(!1),e}function VN(t){let e=M.useContext(JS);return e||Ge(!1),e}function FN(t){let e=M.useContext(xs);return e||Ge(!1),e}function nI(t){let e=FN(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function jN(){var t;let e=M.useContext(ZS),n=VN(yd.UseRouteError),i=nI(yd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function UN(){let{router:t}=DN(tI.UseNavigateStable),e=nI(yd.UseNavigateStable),n=M.useRef(!1);return eI(()=>{n.current=!0}),M.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Al({fromRouteId:e},s)))},[t,e])}function Bt(t){Ge(!1)}function zN(t){let{basename:e="/",children:n=null,location:i,navigationType:r=lr.Pop,navigator:s,static:o=!1,future:a}=t;rc()&&Ge(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:Al({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Wo(i));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=i,S=M.useMemo(()=>{let x=Po(d,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:v},navigationType:r}},[l,d,h,f,m,v,r]);return S==null?null:M.createElement(Dr.Provider,{value:c},M.createElement(Sh.Provider,{children:n,value:S}))}function BN(t){let{children:e,location:n}=t;return kN(xm(e),n)}new Promise(()=>{});function xm(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let s=[...e,r];if(i.type===M.Fragment){n.push.apply(n,xm(i.props.children,s));return}i.type!==Bt&&Ge(!1),!i.props.index||!i.props.children||Ge(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=xm(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vd(){return vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vd.apply(this,arguments)}function iI(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function $N(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qN(t,e){return t.button===0&&(!e||e==="_self")&&!$N(t)}function Pm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function WN(t,e){let n=Pm(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}const HN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],GN=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],KN="6";try{window.__reactRouterVersion=KN}catch{}const QN=M.createContext({isTransitioning:!1}),YN="startTransition",h0=qk[YN];function XN(t){let{basename:e,children:n,future:i,window:r}=t,s=M.useRef();s.current==null&&(s.current=nN({window:r,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=M.useCallback(h=>{c&&h0?h0(()=>l(h)):l(h)},[l,c]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.createElement(zN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const JN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ko=M.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:h}=e,f=iI(e,HN),{basename:m}=M.useContext(Dr),v,S=!1;if(typeof c=="string"&&ZN.test(c)&&(v=c,JN))try{let E=new URL(window.location.href),A=c.startsWith("//")?new URL(E.protocol+c):new URL(c),L=Po(A.pathname,m);A.origin===E.origin&&L!=null?c=L+A.search+A.hash:S=!0}catch{}let x=xN(c,{relative:r}),_=t2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:r,unstable_viewTransition:h});function y(E){i&&i(E),E.defaultPrevented||_(E)}return M.createElement("a",vd({},f,{href:v||x,onClick:S||s?i:y,ref:n,target:l}))}),ui=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:d}=e,h=iI(e,GN),f=Ih(l,{relative:h.relative}),m=Bi(),v=M.useContext(JS),{navigator:S,basename:x}=M.useContext(Dr),_=v!=null&&n2(f)&&c===!0,y=S.encodeLocation?S.encodeLocation(f).pathname:f.pathname,E=m.pathname,A=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(E=E.toLowerCase(),A=A?A.toLowerCase():null,y=y.toLowerCase()),A&&x&&(A=Po(A,x)||A);const L=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let D=E===y||!o&&E.startsWith(y)&&E.charAt(L)==="/",k=A!=null&&(A===y||!o&&A.startsWith(y)&&A.charAt(y.length)==="/"),T={isActive:D,isPending:k,isTransitioning:_},b=D?i:void 0,I;typeof s=="function"?I=s(T):I=[s,D?"active":null,k?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(T):a;return M.createElement(ko,vd({},h,{"aria-current":b,className:I,ref:n,style:N,to:l,unstable_viewTransition:c}),typeof d=="function"?d(T):d)});var km;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(km||(km={}));var f0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(f0||(f0={}));function e2(t){let e=M.useContext(Th);return e||Ge(!1),e}function t2(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Vr(),c=Bi(),d=Ih(t,{relative:o});return M.useCallback(h=>{if(qN(h,n)){h.preventDefault();let f=i!==void 0?i:md(c)===md(d);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,i,r,n,t,s,o,a])}function rI(t){let e=M.useRef(Pm(t)),n=M.useRef(!1),i=Bi(),r=M.useMemo(()=>WN(i.search,n.current?null:e.current),[i.search]),s=Vr(),o=M.useCallback((a,l)=>{const c=Pm(typeof a=="function"?a(r):a);n.current=!0,s("?"+c,l)},[s,r]);return[r,o]}function n2(t,e){e===void 0&&(e={});let n=M.useContext(QN);n==null&&Ge(!1);let{basename:i}=e2(km.useViewTransitionState),r=Ih(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Po(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Po(n.nextLocation.pathname,i)||n.nextLocation.pathname;return gd(r.pathname,o)!=null||gd(r.pathname,s)!=null}function p0(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function gy(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:p0(e[n])&&p0(t[n])&&Object.keys(e[n]).length>0&&gy(t[n],e[n])})}const sI={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ii(){const t=typeof document<"u"?document:{};return gy(t,sI),t}const i2={document:sI,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function fn(){const t=typeof window<"u"?window:{};return gy(t,i2),t}function r2(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function s2(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function Am(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function _d(){return Date.now()}function o2(t){const e=fn();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function a2(t,e){e===void 0&&(e="x");const n=fn();let i,r,s;const o=o2(t);return n.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function au(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function l2(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function on(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(i!=null&&!l2(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){const a=r[s],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(au(t[a])&&au(i[a])?i[a].__swiper__?t[a]=i[a]:on(t[a],i[a]):!au(t[a])&&au(i[a])?(t[a]={},i[a].__swiper__?t[a]=i[a]:on(t[a],i[a])):t[a]=i[a])}}}return t}function lu(t,e,n){t.style.setProperty(e,n)}function oI(t){let{swiper:e,targetPosition:n,side:i}=t;const r=fn(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=n>s?"next":"prev",d=(f,m)=>c==="next"&&f>=m||c==="prev"&&f<=m,h=()=>{a=new Date().getTime(),o===null&&(o=a);const f=Math.max(Math.min((a-o)/l,1),0),m=.5-Math.cos(f*Math.PI)/2;let v=s+m*(n-s);if(d(v,n)&&(v=n),e.wrapperEl.scrollTo({[i]:v}),d(v,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:v})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function aI(t){return t.querySelector(".swiper-slide-transform")||t.shadowRoot&&t.shadowRoot.querySelector(".swiper-slide-transform")||t}function Wn(t,e){e===void 0&&(e="");const n=[...t.children];return t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),e?n.filter(i=>i.matches(e)):n}function c2(t,e){const n=e.contains(t);return!n&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(t):n}function wd(t){try{console.warn(t);return}catch{}}function Ed(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:r2(e)),n}function u2(t,e){const n=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function d2(t,e){const n=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function cr(t,e){return fn().getComputedStyle(t,null).getPropertyValue(e)}function m0(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function h2(t,e){const n=[];let i=t.parentElement;for(;i;)n.push(i),i=i.parentElement;return n}function f2(t,e){function n(i){i.target===t&&(e.call(t,i),t.removeEventListener("transitionend",n))}e&&t.addEventListener("transitionend",n)}function g0(t,e,n){const i=fn();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function di(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}let ep;function p2(){const t=fn(),e=Ii();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function lI(){return ep||(ep=p2()),ep}let tp;function m2(t){let{userAgent:e}=t===void 0?{}:t;const n=lI(),i=fn(),r=i.navigator.platform,s=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=r==="Win32";let v=r==="MacIntel";const S=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&v&&n.touch&&S.indexOf(`${a}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),v=!1),c&&!m&&(o.os="android",o.android=!0),(d||f||h)&&(o.os="ios",o.ios=!0),o}function cI(t){return t===void 0&&(t={}),tp||(tp=m2(t)),tp}let np;function g2(){const t=fn(),e=cI();let n=!1;function i(){const a=t.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){const a=String(t.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));n=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),s=i(),o=s||r&&e.ios;return{isSafari:n||s,needPerspectiveFix:n,need3dFix:o,isWebView:r}}function y2(){return np||(np=g2()),np}function v2(t){let{swiper:e,on:n,emit:i}=t;const r=fn();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=r.requestAnimationFrame(()=>{const{width:f,height:m}=e;let v=f,S=m;h.forEach(x=>{let{contentBoxSize:_,contentRect:y,target:E}=x;E&&E!==e.el||(v=y?y.width:(_[0]||_).inlineSize,S=y?y.height:(_[0]||_).blockSize)}),(v!==f||S!==m)&&a()})}),s.observe(e.el))},c=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",d)}),n("destroy",()=>{c(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",d)})}function _2(t){let{swiper:e,extendParams:n,on:i,emit:r}=t;const s=[],o=fn(),a=function(d,h){h===void 0&&(h={});const f=o.MutationObserver||o.WebkitMutationObserver,m=new f(v=>{if(e.__preventObserver__)return;if(v.length===1){r("observerUpdate",v[0]);return}const S=function(){r("observerUpdate",v[0])};o.requestAnimationFrame?o.requestAnimationFrame(S):o.setTimeout(S,0)});m.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(m)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=h2(e.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var w2={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=n?"unshift":"push";return t.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(i,o)}return r.__emitterProxy=e,i.on(t,r,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[i].splice(s,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],n=s.slice(1,s.length),i=t):(e=s[0].events,n=s[0].data,i=s[0].context||t),n.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...n])}),t.eventsListeners&&t.eventsListeners[l]&&t.eventsListeners[l].forEach(c=>{c.apply(i,n)})}),t}};function E2(){const t=this;let e,n;const i=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(cr(i,"padding-left")||0,10)-parseInt(cr(i,"padding-right")||0,10),n=n-parseInt(cr(i,"padding-top")||0,10)-parseInt(cr(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function T2(){const t=this;function e(I,N){return parseFloat(I.getPropertyValue(t.getDirectionLabel(N))||0)}const n=t.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=t,l=t.virtual&&n.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,d=Wn(r,`.${t.params.slideClass}, swiper-slide`),h=l?t.virtual.slides.length:d.length;let f=[];const m=[],v=[];let S=n.slidesOffsetBefore;typeof S=="function"&&(S=n.slidesOffsetBefore.call(t));let x=n.slidesOffsetAfter;typeof x=="function"&&(x=n.slidesOffsetAfter.call(t));const _=t.snapGrid.length,y=t.slidesGrid.length;let E=n.spaceBetween,A=-S,L=0,D=0;if(typeof s>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*s:typeof E=="string"&&(E=parseFloat(E)),t.virtualSize=-E,d.forEach(I=>{o?I.style.marginLeft="":I.style.marginRight="",I.style.marginBottom="",I.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(lu(i,"--swiper-centered-offset-before",""),lu(i,"--swiper-centered-offset-after",""));const k=n.grid&&n.grid.rows>1&&t.grid;k?t.grid.initSlides(d):t.grid&&t.grid.unsetSlides();let T;const b=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(I=>typeof n.breakpoints[I].slidesPerView<"u").length>0;for(let I=0;I<h;I+=1){T=0;let N;if(d[I]&&(N=d[I]),k&&t.grid.updateSlide(I,N,d),!(d[I]&&cr(N,"display")==="none")){if(n.slidesPerView==="auto"){b&&(d[I].style[t.getDirectionLabel("width")]="");const O=getComputedStyle(N),P=N.style.transform,$=N.style.webkitTransform;if(P&&(N.style.transform="none"),$&&(N.style.webkitTransform="none"),n.roundLengths)T=t.isHorizontal()?g0(N,"width"):g0(N,"height");else{const re=e(O,"width"),Ce=e(O,"padding-left"),it=e(O,"padding-right"),j=e(O,"margin-left"),K=e(O,"margin-right"),Q=O.getPropertyValue("box-sizing");if(Q&&Q==="border-box")T=re+j+K;else{const{clientWidth:Ee,offsetWidth:ye}=N;T=re+Ce+it+j+K+(ye-Ee)}}P&&(N.style.transform=P),$&&(N.style.webkitTransform=$),n.roundLengths&&(T=Math.floor(T))}else T=(s-(n.slidesPerView-1)*E)/n.slidesPerView,n.roundLengths&&(T=Math.floor(T)),d[I]&&(d[I].style[t.getDirectionLabel("width")]=`${T}px`);d[I]&&(d[I].swiperSlideSize=T),v.push(T),n.centeredSlides?(A=A+T/2+L/2+E,L===0&&I!==0&&(A=A-s/2-E),I===0&&(A=A-s/2-E),Math.abs(A)<1/1e3&&(A=0),n.roundLengths&&(A=Math.floor(A)),D%n.slidesPerGroup===0&&f.push(A),m.push(A)):(n.roundLengths&&(A=Math.floor(A)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&f.push(A),m.push(A),A=A+T+E),t.virtualSize+=T+E,L=T,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+x,o&&a&&(n.effect==="slide"||n.effect==="coverflow")&&(i.style.width=`${t.virtualSize+E}px`),n.setWrapperSize&&(i.style[t.getDirectionLabel("width")]=`${t.virtualSize+E}px`),k&&t.grid.updateWrapperSize(T,f),!n.centeredSlides){const I=[];for(let N=0;N<f.length;N+=1){let O=f[N];n.roundLengths&&(O=Math.floor(O)),f[N]<=t.virtualSize-s&&I.push(O)}f=I,Math.floor(t.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-s)}if(l&&n.loop){const I=v[0]+E;if(n.slidesPerGroup>1){const N=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),O=I*n.slidesPerGroup;for(let P=0;P<N;P+=1)f.push(f[f.length-1]+O)}for(let N=0;N<t.virtual.slidesBefore+t.virtual.slidesAfter;N+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+I),m.push(m[m.length-1]+I),t.virtualSize+=I}if(f.length===0&&(f=[0]),E!==0){const I=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");d.filter((N,O)=>!n.cssMode||n.loop?!0:O!==d.length-1).forEach(N=>{N.style[I]=`${E}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let I=0;v.forEach(O=>{I+=O+(E||0)}),I-=E;const N=I>s?I-s:0;f=f.map(O=>O<=0?-S:O>N?N+x:O)}if(n.centerInsufficientSlides){let I=0;v.forEach(O=>{I+=O+(E||0)}),I-=E;const N=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(I+N<s){const O=(s-I-N)/2;f.forEach((P,$)=>{f[$]=P-O}),m.forEach((P,$)=>{m[$]=P+O})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:m,slidesSizesGrid:v}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){lu(i,"--swiper-centered-offset-before",`${-f[0]}px`),lu(i,"--swiper-centered-offset-after",`${t.size/2-v[v.length-1]/2}px`);const I=-t.snapGrid[0],N=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(O=>O+I),t.slidesGrid=t.slidesGrid.map(O=>O+N)}if(h!==c&&t.emit("slidesLengthChange"),f.length!==_&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),m.length!==y&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const I=`${n.containerModifierClass}backface-hidden`,N=t.el.classList.contains(I);h<=n.maxBackfaceHiddenSlides?N||t.el.classList.add(I):N&&t.el.classList.remove(I)}}function S2(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!i)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function I2(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-n-t.cssOverflowAdjustment()}const y0=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function b2(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;r&&(o=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=n.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){const c=i[l];let d=c.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(d-=i[0].swiperSlideOffset);const h=(o+(n.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),f=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),m=-(o-d),v=m+e.slidesSizesGrid[l],S=m>=0&&m<=e.size-e.slidesSizesGrid[l],x=m>=0&&m<e.size-1||v>1&&v<=e.size||m<=0&&v>=e.size;x&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),y0(c,x,n.slideVisibleClass),y0(c,S,n.slideFullyVisibleClass),c.progress=r?-h:h,c.originalProgress=r?-f:f}}function C2(t){const e=this;if(typeof t>"u"){const d=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*d||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(i===0)r=0,s=!0,o=!0;else{r=(t-e.minTranslate())/i;const d=Math.abs(t-e.minTranslate())<1,h=Math.abs(t-e.maxTranslate())<1;s=d||r<=0,o=h||r>=1,d&&(r=0),h&&(r=1)}if(n.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],m=e.slidesGrid[h],v=e.slidesGrid[e.slidesGrid.length-1],S=Math.abs(t);S>=f?a=(S-f)/v:a=(S+v-m)/v,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}const ip=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function x2(){const t=this,{slides:e,params:n,slidesEl:i,activeIndex:r}=t,s=t.virtual&&n.virtual.enabled,o=t.grid&&n.grid&&n.grid.rows>1,a=h=>Wn(i,`.${n.slideClass}${h}, swiper-slide${h}`)[0];let l,c,d;if(s)if(n.loop){let h=r-t.virtual.slidesBefore;h<0&&(h=t.virtual.slides.length+h),h>=t.virtual.slides.length&&(h-=t.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(h=>h.column===r)[0],d=e.filter(h=>h.column===r+1)[0],c=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(o||(d=d2(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d&&(d=e[0]),c=u2(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{ip(h,h===l,n.slideActiveClass),ip(h,h===d,n.slideNextClass),ip(h,h===c,n.slidePrevClass)}),t.emitSlidesClasses()}const Au=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,i=e.closest(n());if(i){let r=i.querySelector(`.${t.params.lazyPreloaderClass}`);!r&&t.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},rp=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Rm=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const i=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),r=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),t.slides.forEach((l,c)=>{a.includes(l.column)&&rp(t,c)});return}const s=r+i-1;if(t.params.rewind||t.params.loop)for(let o=r-e;o<=s+e;o+=1){const a=(o%n+n)%n;(a<r||a>s)&&rp(t,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,n-1);o+=1)o!==r&&(o>s||o<r)&&rp(t,o)};function P2(t){const{slidesGrid:e,params:n}=t,i=t.rtlTranslate?t.translate:-t.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function k2(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=t,c;const d=m=>{let v=m-e.virtual.slidesBefore;return v<0&&(v=e.virtual.slides.length+v),v>=e.virtual.slides.length&&(v-=e.virtual.slides.length),v};if(typeof l>"u"&&(l=P2(e)),i.indexOf(n)>=0)c=i.indexOf(n);else{const m=Math.min(r.slidesPerGroupSkip,l);c=m+Math.floor((l-m)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&r.grid&&r.grid.rows>1;let f;if(e.virtual&&r.virtual.enabled&&r.loop)f=d(l);else if(h){const m=e.slides.filter(S=>S.column===l)[0];let v=parseInt(m.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(e.slides.indexOf(m),0)),f=Math.floor(v/r.grid.rows)}else if(e.slides[l]){const m=e.slides[l].getAttribute("data-swiper-slide-index");m?f=parseInt(m,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&Rm(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function A2(t,e){const n=this,i=n.params;let r=t.closest(`.${i.slideClass}, swiper-slide`);!r&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===r){s=!0,o=a;break}}if(r&&s)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}i.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var R2={updateSize:E2,updateSlides:T2,updateAutoHeight:S2,updateSlidesOffset:I2,updateSlidesProgress:b2,updateProgress:C2,updateSlidesClasses:x2,updateActiveIndex:k2,updateClickedSlide:A2};function N2(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let o=a2(s,t);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function O2(t,e){const n=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=n;let a=0,l=0;const c=0;n.isHorizontal()?a=i?-t:t:l=t,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l,r.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:r.virtualTranslate||(n.isHorizontal()?a-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let d;const h=n.maxTranslate()-n.minTranslate();h===0?d=0:d=(t-n.minTranslate())/h,d!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function L2(){return-this.snapGrid[0]}function M2(){return-this.snapGrid[this.snapGrid.length-1]}function D2(t,e,n,i,r){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),i===void 0&&(i=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let d;if(i&&t>l?d=l:i&&t<c?d=c:d=t,s.updateProgress(d),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return oI({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var V2={getTranslate:N2,setTranslate:O2,minTranslate:L2,maxTranslate:M2,translateTo:D2};function F2(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function uI(t){let{swiper:e,runCallbacks:n,direction:i,step:r}=t;const{activeIndex:s,previousIndex:o}=e;let a=i;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),n&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function j2(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),uI({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function U2(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),uI({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var z2={setTransition:F2,transitionStart:j2,transitionEnd:U2};function B2(t,e,n,i,r){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:h,rtlTranslate:f,wrapperEl:m,enabled:v}=s;if(!v&&!i&&!r||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const S=Math.min(s.params.slidesPerGroupSkip,o);let x=S+Math.floor((o-S)/s.params.slidesPerGroup);x>=l.length&&(x=l.length-1);const _=-l[x];if(a.normalizeSlideIndex)for(let L=0;L<c.length;L+=1){const D=-Math.floor(_*100),k=Math.floor(c[L]*100),T=Math.floor(c[L+1]*100);typeof c[L+1]<"u"?D>=k&&D<T-(T-k)/2?o=L:D>=k&&D<T&&(o=L+1):D>=k&&(o=L)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(f?_>s.translate&&_>s.minTranslate():_<s.translate&&_<s.minTranslate())||!s.allowSlidePrev&&_>s.translate&&_>s.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(_);let y;o>h?y="next":o<h?y="prev":y="reset";const E=s.virtual&&s.params.virtual.enabled;if(!(E&&r)&&(f&&-_===s.translate||!f&&_===s.translate))return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(_),y!=="reset"&&(s.transitionStart(n,y),s.transitionEnd(n,y)),!1;if(a.cssMode){const L=s.isHorizontal(),D=f?_:-_;if(e===0)E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{m[L?"scrollLeft":"scrollTop"]=D})):m[L?"scrollLeft":"scrollTop"]=D,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return oI({swiper:s,targetPosition:D,side:L?"left":"top"}),!0;m.scrollTo({[L?"left":"top"]:D,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(_),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(n,y),e===0?s.transitionEnd(n,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(D){!s||s.destroyed||D.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function $2(t,e,n,i){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=t;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){const f=o*r.params.grid.rows;a=r.slides.filter(m=>m.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=r.getSlideIndexByData(o);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let d=r.params.slidesPerView;d==="auto"?d=r.slidesPerViewDynamic():(d=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let h=l-a<d;if(c&&(h=h||a<Math.ceil(d/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=c?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?r.realIndex:void 0})}if(s){const f=o*r.params.grid.rows;o=r.slides.filter(m=>m.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,n,i)}),r}function q2(t,e,n){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:a,c=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,t,e,n)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+l,t,e,n)}function W2(t,e,n){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);const d=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const h=a?i.translate:-i.translate;function f(_){return _<0?-Math.floor(Math.abs(_)):Math.floor(_)}const m=f(h),v=s.map(_=>f(_));let S=s[v.indexOf(m)-1];if(typeof S>"u"&&r.cssMode){let _;s.forEach((y,E)=>{m>=y&&(_=E)}),typeof _<"u"&&(S=s[_>0?_-1:_])}let x=0;if(typeof S<"u"&&(x=o.indexOf(S),x<0&&(x=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(x=x-i.slidesPerViewDynamic("previous",!0)+1,x=Math.max(x,0))),r.rewind&&i.isBeginning){const _=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(_,t,e,n)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(x,t,e,n)}),!0;return i.slideTo(x,t,e,n)}function H2(t,e,n){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof t>"u"&&(t=i.params.speed),i.slideTo(i.activeIndex,t,e,n)}function G2(t,e,n,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const c=r.snapGrid[a],d=r.snapGrid[a+1];l-c>(d-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[a-1],d=r.snapGrid[a];l-c<=(d-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,t,e,n)}function K2(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let r=t.clickedIndex,s;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<t.loopedSlides-i/2||r>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),r=t.getSlideIndex(Wn(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Am(()=>{t.slideTo(r)})):t.slideTo(r):r>t.slides.length-i?(t.loopFix(),r=t.getSlideIndex(Wn(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Am(()=>{t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}var Q2={slideTo:B2,slideToLoop:$2,slideNext:q2,slidePrev:W2,slideReset:H2,slideToClosest:G2,slideToClickedSlide:K2};function Y2(t){const e=this,{params:n,slidesEl:i}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{Wn(i,`.${n.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&n.grid&&n.grid.rows>1,o=n.slidesPerGroup*(s?n.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%n.grid.rows!==0,c=d=>{for(let h=0;h<d;h+=1){const f=e.isElement?Ed("swiper-slide",[n.slideBlankClass]):Ed("div",[n.slideClass,n.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(n.loopAddBlankSlides){const d=o-e.slides.length%o;c(d),e.recalcSlides(),e.updateSlides()}else wd("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(n.loopAddBlankSlides){const d=n.grid.rows-e.slides.length%n.grid.rows;c(d),e.recalcSlides(),e.updateSlides()}else wd("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function X2(t){let{slideRealIndex:e,slideTo:n=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=t===void 0?{}:t;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:d,allowSlideNext:h,slidesEl:f,params:m}=l,{centeredSlides:v}=m;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&m.virtual.enabled){n&&(!m.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):m.centeredSlides&&l.snapIndex<m.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let S=m.slidesPerView;S==="auto"?S=l.slidesPerViewDynamic():(S=Math.ceil(parseFloat(m.slidesPerView,10)),v&&S%2===0&&(S=S+1));const x=m.slidesPerGroupAuto?S:m.slidesPerGroup;let _=x;_%x!==0&&(_+=x-_%x),_+=m.loopAdditionalSlides,l.loopedSlides=_;const y=l.grid&&m.grid&&m.grid.rows>1;c.length<S+_?wd("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&m.grid.fill==="row"&&wd("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const E=[],A=[];let L=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(c.filter(P=>P.classList.contains(m.slideActiveClass))[0]):L=s;const D=i==="next"||!i,k=i==="prev"||!i;let T=0,b=0;const I=y?Math.ceil(c.length/m.grid.rows):c.length,O=(y?c[s].column:s)+(v&&typeof r>"u"?-S/2+.5:0);if(O<_){T=Math.max(_-O,x);for(let P=0;P<_-O;P+=1){const $=P-Math.floor(P/I)*I;if(y){const re=I-$-1;for(let Ce=c.length-1;Ce>=0;Ce-=1)c[Ce].column===re&&E.push(Ce)}else E.push(I-$-1)}}else if(O+S>I-_){b=Math.max(O-(I-_*2),x);for(let P=0;P<b;P+=1){const $=P-Math.floor(P/I)*I;y?c.forEach((re,Ce)=>{re.column===$&&A.push(Ce)}):A.push($)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),k&&E.forEach(P=>{c[P].swiperLoopMoveDOM=!0,f.prepend(c[P]),c[P].swiperLoopMoveDOM=!1}),D&&A.forEach(P=>{c[P].swiperLoopMoveDOM=!0,f.append(c[P]),c[P].swiperLoopMoveDOM=!1}),l.recalcSlides(),m.slidesPerView==="auto"?l.updateSlides():y&&(E.length>0&&k||A.length>0&&D)&&l.slides.forEach((P,$)=>{l.grid.updateSlide($,P,l.slides)}),m.watchSlidesProgress&&l.updateSlidesOffset(),n){if(E.length>0&&k){if(typeof e>"u"){const P=l.slidesGrid[L],re=l.slidesGrid[L+T]-P;a?l.setTranslate(l.translate-re):(l.slideTo(L+Math.ceil(T),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-re,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-re))}else if(r){const P=y?E.length/m.grid.rows:E.length;l.slideTo(l.activeIndex+P,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(A.length>0&&D)if(typeof e>"u"){const P=l.slidesGrid[L],re=l.slidesGrid[L-b]-P;a?l.setTranslate(l.translate-re):(l.slideTo(L-b,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-re,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-re))}else{const P=y?A.length/m.grid.rows:A.length;l.slideTo(l.activeIndex-P,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){const P={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach($=>{!$.destroyed&&$.params.loop&&$.loopFix({...P,slideTo:$.params.slidesPerView===m.slidesPerView?n:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...P,slideTo:l.controller.control.params.slidesPerView===m.slidesPerView?n:!1})}l.emit("loopFix")}function J2(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),t.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{n.append(r)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var Z2={loopCreate:Y2,loopFix:X2,loopDestroy:J2};function eO(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function tO(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var nO={setGrabCursor:eO,unsetGrabCursor:tO};function iO(t,e){e===void 0&&(e=this);function n(i){if(!i||i===Ii()||i===fn())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(t);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(e)}function v0(t,e,n){const i=fn(),{params:r}=t,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(n<=o||n>=i.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function rO(t){const e=this,n=Ii();let i=t;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){v0(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!c2(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(f?iO(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const m=o.currentX,v=o.currentY;if(!v0(e,i,m))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=m,o.startY=v,r.touchStartTime=_d(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let S=!0;l.matches(r.focusableElements)&&(S=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&n.activeElement.blur();const x=S&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||x)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function sO(t){const e=Ii(),n=this,i=n.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=n;if(!a||!r.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(D=>D.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l);return}const d=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!n.allowTouchMove){l.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),i.touchStartTime=_d());return}if(r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}i.allowTouchCallbacks&&n.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,m=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+m**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let D;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+m*m>=25&&(D=Math.atan2(Math.abs(m),Math.abs(f))*180/Math.PI,i.isScrolling=n.isHorizontal()?D>r.touchAngle:90-D>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let v=n.isHorizontal()?f:m,S=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),S=Math.abs(S)*(o?1:-1)),s.diff=v,v*=r.touchRatio,o&&(v=-v,S=-S);const x=n.touchesDirection;n.swipeDirection=v>0?"prev":"next",n.touchesDirection=S>0?"prev":"next";const _=n.params.loop&&!r.cssMode,y=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!i.isMoved){if(_&&y&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(D)}i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let E;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&x!==n.touchesDirection&&_&&y&&Math.abs(v)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}n.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=v+i.startTranslate;let A=!0,L=r.resistanceRatio;if(r.touchReleaseOnEdges&&(L=0),v>0?(_&&y&&!E&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(A=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+v)**L))):v<0&&(_&&y&&!E&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(A=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-v)**L))),A&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(v)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function oO(t){const e=this,n=e.touchEventsData;let i=t;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(L=>L.identifier===n.touchId)[0],!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!o.simulateTouch&&i.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=_d(),f=h-n.touchStartTime;if(e.allowClick){const L=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(L&&L[0]||i.target,L),e.emit("tap click",i),f<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(n.lastClickTime=_d(),Am(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||a.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let m;if(o.followFinger?m=l?e.translate:-e.translate:m=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:m});return}const v=m>=-e.maxTranslate()&&!e.params.loop;let S=0,x=e.slidesSizesGrid[0];for(let L=0;L<c.length;L+=L<o.slidesPerGroupSkip?1:o.slidesPerGroup){const D=L<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[L+D]<"u"?(v||m>=c[L]&&m<c[L+D])&&(S=L,x=c[L+D]-c[L]):(v||m>=c[L])&&(S=L,x=c[c.length-1]-c[c.length-2])}let _=null,y=null;o.rewind&&(e.isBeginning?y=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(_=0));const E=(m-c[S])/x,A=S<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(E>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?_:S+A):e.slideTo(S)),e.swipeDirection==="prev"&&(E>1-o.longSwipesRatio?e.slideTo(S+A):y!==null&&E<0&&Math.abs(E)>o.longSwipesRatio?e.slideTo(y):e.slideTo(S))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(S+A):e.slideTo(S):(e.swipeDirection==="next"&&e.slideTo(_!==null?_:S+A),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:S))}}function _0(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function aO(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function lO(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let r;const s=t.maxTranslate()-t.minTranslate();s===0?r=0:r=(t.translate-t.minTranslate())/s,r!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function cO(t){const e=this;Au(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function uO(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const dI=(t,e)=>{const n=Ii(),{params:i,el:r,wrapperEl:s,device:o}=t,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!r||typeof r=="string"||(n[l]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",t.onTouchStart,{passive:!1}),r[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("touchmove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("touchend",t.onTouchEnd,{passive:!0}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("touchcancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),n[l]("contextmenu",t.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",t.onClick,!0),i.cssMode&&s[l]("scroll",t.onScroll),i.updateOnWindowResize?t[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",_0,!0):t[c]("observerUpdate",_0,!0),r[l]("load",t.onLoad,{capture:!0}))};function dO(){const t=this,{params:e}=t;t.onTouchStart=rO.bind(t),t.onTouchMove=sO.bind(t),t.onTouchEnd=oO.bind(t),t.onDocumentTouchStart=uO.bind(t),e.cssMode&&(t.onScroll=lO.bind(t)),t.onClick=aO.bind(t),t.onLoad=cO.bind(t),dI(t,"on")}function hO(){dI(this,"off")}var fO={attachEvents:dO,detachEvents:hO};const w0=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function pO(){const t=this,{realIndex:e,initialized:n,params:i,el:r}=t,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||t.originalParams,c=w0(t,i),d=w0(t,l),h=t.params.grabCursor,f=l.grabCursor,m=i.enabled;c&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!c&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),h&&!f?t.unsetGrabCursor():!h&&f&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(E=>{if(typeof l[E]>"u")return;const A=i[E]&&i[E].enabled,L=l[E]&&l[E].enabled;A&&!L&&t[E].disable(),!A&&L&&t[E].enable()});const v=l.direction&&l.direction!==i.direction,S=i.loop&&(l.slidesPerView!==i.slidesPerView||v),x=i.loop;v&&n&&t.changeDirection(),on(t.params,l);const _=t.params.enabled,y=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),m&&!_?t.disable():!m&&_&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),n&&(S?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!x&&y?(t.loopCreate(e),t.updateSlides()):x&&!y&&t.loopDestroy()),t.emit("breakpoint",l)}function mO(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let i=!1;const r=fn(),s=e==="window"?r.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=n.clientWidth&&(i=l)}return i||"max"}var gO={setBreakpoint:pO,getBreakpoint:mO};function yO(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(e+r)}):typeof i=="string"&&n.push(e+i)}),n}function vO(){const t=this,{classNames:e,params:n,rtl:i,el:r,device:s}=t,o=yO(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),r.classList.add(...e),t.emitContainerClasses()}function _O(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var wO={addClasses:vO,removeClasses:_O};function EO(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const r=t.slides.length-1,s=t.slidesGrid[r]+t.slidesSizesGrid[r]+i*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var TO={checkOverflow:EO},Nm={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function SO(t,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){on(e,i);return}if(t[r]===!0&&(t[r]={enabled:!0}),r==="navigation"&&t[r]&&t[r].enabled&&!t[r].prevEl&&!t[r].nextEl&&(t[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&t[r]&&t[r].enabled&&!t[r].el&&(t[r].auto=!0),!(r in t&&"enabled"in s)){on(e,i);return}typeof t[r]=="object"&&!("enabled"in t[r])&&(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),on(e,i)}}const sp={eventsEmitter:w2,update:R2,translate:V2,transition:z2,slide:Q2,loop:Z2,grabCursor:nO,events:fO,breakpoints:gO,checkOverflow:TO,classes:wO},op={};let yy=class hi{constructor(){let e,n;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?n=r[0]:[e,n]=r,n||(n={}),n=on({},n),e&&!n.el&&(n.el=e);const o=Ii();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const d=[];return o.querySelectorAll(n.el).forEach(h=>{const f=on({},n,{el:h});d.push(new hi(f))}),d}const a=this;a.__swiper__=!0,a.support=lI(),a.device=cI({userAgent:n.userAgent}),a.browser=y2(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],n.modules&&Array.isArray(n.modules)&&a.modules.push(...n.modules);const l={};a.modules.forEach(d=>{d({params:n,swiper:a,extendParams:SO(n,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=on({},Nm,l);return a.params=on({},c,op,n),a.originalParams=on({},a.params),a.passedParams=on({},n),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:i}=this,r=Wn(n,`.${i.slideClass}, swiper-slide`),s=m0(r[0]);return m0(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:i}=e;e.slides=Wn(n,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);n.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i;let d=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[c]?Math.ceil(s[c].swiperSlideSize):0,f;for(let m=c+1;m<s.length;m+=1)s[m]&&!f&&(h+=Math.ceil(s[m].swiperSlideSize),d+=1,h>l&&(f=!0));for(let m=c-1;m>=0;m-=1)s[m]&&!f&&(h+=s[m].swiperSlideSize,d+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<s.length;h+=1)(n?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(d+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&Au(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let i=e||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):Wn(i,r())[0];return!o&&n.params.createElements&&(o=Ed("div",n.params.wrapperClass),i.append(o),Wn(i,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:i,wrapperEl:o,slidesEl:n.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:n.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||cr(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||cr(i,"direction")==="rtl"),wrongRTL:cr(o,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?Au(n,s):s.addEventListener("load",o=>{Au(n,o.target)})}),Rm(n),n.initialized=!0,Rm(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const i=this,{params:r,el:s,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),s2(i)),i.destroyed=!0),null}static extendDefaults(e){on(op,e)}static get extendedDefaults(){return op}static get defaults(){return Nm}static installModule(e){hi.prototype.__modules__||(hi.prototype.__modules__=[]);const n=hi.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>hi.installModule(n)),hi):(hi.installModule(e),hi)}};Object.keys(sp).forEach(t=>{Object.keys(sp[t]).forEach(e=>{yy.prototype[e]=sp[t][e]})});yy.use([v2,_2]);const hI=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ps(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function uo(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:ps(e[i])&&ps(t[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?t[i]=e[i]:uo(t[i],e[i]):t[i]=e[i]})}function fI(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function pI(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function mI(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function gI(t){t===void 0&&(t="");const e=t.split(" ").map(i=>i.trim()).filter(i=>!!i),n=[];return e.forEach(i=>{n.indexOf(i)<0&&n.push(i)}),n.join(" ")}function IO(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function bO(t){let{swiper:e,slides:n,passedParams:i,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=t;const c=r.filter(b=>b!=="children"&&b!=="direction"&&b!=="wrapperClass"),{params:d,pagination:h,navigation:f,scrollbar:m,virtual:v,thumbs:S}=e;let x,_,y,E,A,L,D,k;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(x=!0),r.includes("controller")&&i.controller&&i.controller.control&&d.controller&&!d.controller.control&&(_=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(y=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&m&&!m.el&&(E=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||o)&&(i.navigation.nextEl||s)&&(d.navigation||d.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(A=!0);const T=b=>{e[b]&&(e[b].destroy(),b==="navigation"?(e.isElement&&(e[b].prevEl.remove(),e[b].nextEl.remove()),d[b].prevEl=void 0,d[b].nextEl=void 0,e[b].prevEl=void 0,e[b].nextEl=void 0):(e.isElement&&e[b].el.remove(),d[b].el=void 0,e[b].el=void 0))};r.includes("loop")&&e.isElement&&(d.loop&&!i.loop?L=!0:!d.loop&&i.loop?D=!0:k=!0),c.forEach(b=>{if(ps(d[b])&&ps(i[b]))Object.assign(d[b],i[b]),(b==="navigation"||b==="pagination"||b==="scrollbar")&&"enabled"in i[b]&&!i[b].enabled&&T(b);else{const I=i[b];(I===!0||I===!1)&&(b==="navigation"||b==="pagination"||b==="scrollbar")?I===!1&&T(b):d[b]=i[b]}}),c.includes("controller")&&!_&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),r.includes("children")&&n&&v&&d.virtual.enabled?(v.slides=n,v.update(!0)):r.includes("virtual")&&v&&d.virtual.enabled&&(n&&(v.slides=n),v.update(!0)),r.includes("children")&&n&&d.loop&&(k=!0),x&&S.init()&&S.update(!0),_&&(e.controller.control=d.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),E&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),m.init(),m.updateSize(),m.setTranslate()),A&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),f.init(),f.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(L||k)&&e.loopDestroy(),(D||k)&&e.loopCreate(),e.update()}function CO(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},i={},r={};uo(n,Nm),n._emitClasses=!0,n.init=!1;const s={},o=hI.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?ps(t[l])?(n[l]={},r[l]={},uo(n[l],t[l]),uo(r[l],t[l])):(n[l]=t[l],r[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:r,rest:s,events:i}}function xO(t,e){let{el:n,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:o,swiper:a}=t;fI(e)&&i&&r&&(a.params.navigation.nextEl=i,a.originalParams.navigation.nextEl=i,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),pI(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),mI(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(n)}function PO(t,e,n,i,r){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&i){const l=i.map(r),c=n.map(r);l.join("")!==c.join("")&&o("children"),i.length!==n.length&&o("children")}return hI.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(ps(t[l])&&ps(e[l])){const c=Object.keys(t[l]),d=Object.keys(e[l]);c.length!==d.length?o(l):(c.forEach(h=>{t[l][h]!==e[l][h]&&o(l)}),d.forEach(h=>{t[l][h]!==e[l][h]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}const kO=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Td.apply(this,arguments)}function yI(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function vI(t){const e=[];return Ye.Children.toArray(t).forEach(n=>{yI(n)?e.push(n):n.props&&n.props.children&&vI(n.props.children).forEach(i=>e.push(i))}),e}function AO(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Ye.Children.toArray(t).forEach(i=>{if(yI(i))e.push(i);else if(i.props&&i.props.slot&&n[i.props.slot])n[i.props.slot].push(i);else if(i.props&&i.props.children){const r=vI(i.props.children);r.length>0?r.forEach(s=>e.push(s)):n["container-end"].push(i)}else n["container-end"].push(i)}),{slides:e,slots:n}}function RO(t,e,n){if(!n)return null;const i=d=>{let h=d;return d<0?h=e.length+d:h>=e.length&&(h=h-e.length),h},r=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,c=[];for(let d=a;d<l;d+=1)d>=s&&d<=o&&c.push(e[i(d)]);return c.map((d,h)=>Ye.cloneElement(d,{swiper:t,style:r,key:d.props.virtualIndex||d.key||`slide-${h}`}))}function Za(t,e){return typeof window>"u"?M.useEffect(t,e):M.useLayoutEffect(t,e)}const E0=M.createContext(null),NO=M.createContext(null),_I=M.forwardRef(function(t,e){let{className:n,tag:i="div",wrapperTag:r="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[c,d]=M.useState("swiper"),[h,f]=M.useState(null),[m,v]=M.useState(!1),S=M.useRef(!1),x=M.useRef(null),_=M.useRef(null),y=M.useRef(null),E=M.useRef(null),A=M.useRef(null),L=M.useRef(null),D=M.useRef(null),k=M.useRef(null),{params:T,passedParams:b,rest:I,events:N}=CO(a),{slides:O,slots:P}=AO(s),$=()=>{v(!m)};Object.assign(T.on,{_containerClasses(K,Q){d(Q)}});const re=()=>{Object.assign(T.on,N),l=!0;const K={...T};if(delete K.wrapperClass,_.current=new yy(K),_.current.virtual&&_.current.params.virtual.enabled){_.current.virtual.slides=O;const Q={cache:!1,slides:O,renderExternal:f,renderExternalUpdate:!1};uo(_.current.params.virtual,Q),uo(_.current.originalParams.virtual,Q)}};x.current||re(),_.current&&_.current.on("_beforeBreakpoint",$);const Ce=()=>{l||!N||!_.current||Object.keys(N).forEach(K=>{_.current.on(K,N[K])})},it=()=>{!N||!_.current||Object.keys(N).forEach(K=>{_.current.off(K,N[K])})};M.useEffect(()=>()=>{_.current&&_.current.off("_beforeBreakpoint",$)}),M.useEffect(()=>{!S.current&&_.current&&(_.current.emitSlidesClasses(),S.current=!0)}),Za(()=>{if(e&&(e.current=x.current),!!x.current)return _.current.destroyed&&re(),xO({el:x.current,nextEl:A.current,prevEl:L.current,paginationEl:D.current,scrollbarEl:k.current,swiper:_.current},T),o&&!_.current.destroyed&&o(_.current),()=>{_.current&&!_.current.destroyed&&_.current.destroy(!0,!1)}},[]),Za(()=>{Ce();const K=PO(b,y.current,O,E.current,Q=>Q.key);return y.current=b,E.current=O,K.length&&_.current&&!_.current.destroyed&&bO({swiper:_.current,slides:O,passedParams:b,changedParams:K,nextEl:A.current,prevEl:L.current,scrollbarEl:k.current,paginationEl:D.current}),()=>{it()}}),Za(()=>{kO(_.current)},[h]);function j(){return T.virtual?RO(_.current,O,h):O.map((K,Q)=>Ye.cloneElement(K,{swiper:_.current,swiperSlideIndex:Q}))}return Ye.createElement(i,Td({ref:x,className:gI(`${c}${n?` ${n}`:""}`)},I),Ye.createElement(NO.Provider,{value:_.current},P["container-start"],Ye.createElement(r,{className:IO(T.wrapperClass)},P["wrapper-start"],j(),P["wrapper-end"]),fI(T)&&Ye.createElement(Ye.Fragment,null,Ye.createElement("div",{ref:L,className:"swiper-button-prev"}),Ye.createElement("div",{ref:A,className:"swiper-button-next"})),mI(T)&&Ye.createElement("div",{ref:k,className:"swiper-scrollbar"}),pI(T)&&Ye.createElement("div",{ref:D,className:"swiper-pagination"}),P["container-end"]))});_I.displayName="Swiper";const wI=M.forwardRef(function(t,e){let{tag:n="div",children:i,className:r="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...d}=t===void 0?{}:t;const h=M.useRef(null),[f,m]=M.useState("swiper-slide"),[v,S]=M.useState(!1);function x(A,L,D){L===h.current&&m(D)}Za(()=>{if(typeof c<"u"&&(h.current.swiperSlideIndex=c),e&&(e.current=h.current),!(!h.current||!s)){if(s.destroyed){f!=="swiper-slide"&&m("swiper-slide");return}return s.on("_slideClass",x),()=>{s&&s.off("_slideClass",x)}}}),Za(()=>{s&&h.current&&!s.destroyed&&m(s.getSlideClasses(h.current))},[s]);const _={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},y=()=>typeof i=="function"?i(_):i,E=()=>{S(!0)};return Ye.createElement(n,Td({ref:h,className:gI(`${f}${r?` ${r}`:""}`),"data-swiper-slide-index":l,onLoad:E},d),o&&Ye.createElement(E0.Provider,{value:_},Ye.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},y(),a&&!v&&Ye.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Ye.createElement(E0.Provider,{value:_},y(),a&&!v&&Ye.createElement("div",{className:"swiper-lazy-preloader"})))});wI.displayName="SwiperSlide";function OO(t,e,n,i){return t.params.createElements&&Object.keys(i).forEach(r=>{if(!n[r]&&n.auto===!0){let s=Wn(t.el,`.${i[r]}`)[0];s||(s=Ed("div",i[r]),s.className=i[r],t.el.append(s)),n[r]=s,e[r]=s}}),n}function LO(t){let{swiper:e,extendParams:n,on:i,emit:r}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(v){let S;return v&&typeof v=="string"&&e.isElement&&(S=e.el.querySelector(v),S)?S:(v&&(typeof v=="string"&&(S=[...document.querySelectorAll(v)]),e.params.uniqueNavElements&&typeof v=="string"&&S&&S.length>1&&e.el.querySelectorAll(v).length===1?S=e.el.querySelector(v):S&&S.length===1&&(S=S[0])),v&&!S?v:S)}function o(v,S){const x=e.params.navigation;v=di(v),v.forEach(_=>{_&&(_.classList[S?"add":"remove"](...x.disabledClass.split(" ")),_.tagName==="BUTTON"&&(_.disabled=S),e.params.watchOverflow&&e.enabled&&_.classList[e.isLocked?"add":"remove"](x.lockClass))})}function a(){const{nextEl:v,prevEl:S}=e.navigation;if(e.params.loop){o(S,!1),o(v,!1);return}o(S,e.isBeginning&&!e.params.rewind),o(v,e.isEnd&&!e.params.rewind)}function l(v){v.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(v){v.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const v=e.params.navigation;if(e.params.navigation=OO(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(v.nextEl||v.prevEl))return;let S=s(v.nextEl),x=s(v.prevEl);Object.assign(e.navigation,{nextEl:S,prevEl:x}),S=di(S),x=di(x);const _=(y,E)=>{y&&y.addEventListener("click",E==="next"?c:l),!e.enabled&&y&&y.classList.add(...v.lockClass.split(" "))};S.forEach(y=>_(y,"next")),x.forEach(y=>_(y,"prev"))}function h(){let{nextEl:v,prevEl:S}=e.navigation;v=di(v),S=di(S);const x=(_,y)=>{_.removeEventListener("click",y==="next"?c:l),_.classList.remove(...e.params.navigation.disabledClass.split(" "))};v.forEach(_=>x(_,"next")),S.forEach(_=>x(_,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?m():(d(),a())}),i("toEdge fromEdge lock unlock",()=>{a()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:v,prevEl:S}=e.navigation;if(v=di(v),S=di(S),e.enabled){a();return}[...v,...S].filter(x=>!!x).forEach(x=>x.classList.add(e.params.navigation.lockClass))}),i("click",(v,S)=>{let{nextEl:x,prevEl:_}=e.navigation;x=di(x),_=di(_);const y=S.target;let E=_.includes(y)||x.includes(y);if(e.isElement&&!E){const A=S.path||S.composedPath&&S.composedPath();A&&(E=A.find(L=>x.includes(L)||_.includes(L)))}if(e.params.navigation.hideOnClick&&!E){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let A;x.length?A=x[0].classList.contains(e.params.navigation.hiddenClass):_.length&&(A=_[0].classList.contains(e.params.navigation.hiddenClass)),r(A===!0?"navigationShow":"navigationHide"),[...x,..._].filter(L=>!!L).forEach(L=>L.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},m=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:m,update:a,init:d,destroy:h})}function MO(t){let{swiper:e,extendParams:n,on:i,emit:r,params:s}=t;e.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=s&&s.autoplay?s.autoplay.delay:3e3,c=s&&s.autoplay?s.autoplay.delay:3e3,d,h=new Date().getTime(),f,m,v,S,x,_,y;function E(j){!e||e.destroyed||!e.wrapperEl||j.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",E),!(y||j.detail&&j.detail.bySwiperTouchMove)&&I())}const A=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(c=d,f=!1);const j=e.autoplay.paused?d:h+c-new Date().getTime();e.autoplay.timeLeft=j,r("autoplayTimeLeft",j,j/l),a=requestAnimationFrame(()=>{A()})},L=()=>{let j;return e.virtual&&e.params.virtual.enabled?j=e.slides.filter(Q=>Q.classList.contains("swiper-slide-active"))[0]:j=e.slides[e.activeIndex],j?parseInt(j.getAttribute("data-swiper-autoplay"),10):void 0},D=j=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),A();let K=typeof j>"u"?e.params.autoplay.delay:j;l=e.params.autoplay.delay,c=e.params.autoplay.delay;const Q=L();!Number.isNaN(Q)&&Q>0&&typeof j>"u"&&(K=Q,l=Q,c=Q),d=K;const Ee=e.params.speed,ye=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(Ee,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,Ee,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(Ee,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,Ee,!0,!0),r("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{D()})))};return K>0?(clearTimeout(o),o=setTimeout(()=>{ye()},K)):requestAnimationFrame(()=>{ye()}),K},k=()=>{h=new Date().getTime(),e.autoplay.running=!0,D(),r("autoplayStart")},T=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),r("autoplayStop")},b=(j,K)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),j||(_=!0);const Q=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",E):I()};if(e.autoplay.paused=!0,K){x&&(d=e.params.autoplay.delay),x=!1,Q();return}d=(d||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&d<0&&!e.params.loop)&&(d<0&&(d=0),Q())},I=()=>{e.isEnd&&d<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),_?(_=!1,D(d)):D(),e.autoplay.paused=!1,r("autoplayResume"))},N=()=>{if(e.destroyed||!e.autoplay.running)return;const j=Ii();j.visibilityState==="hidden"&&(_=!0,b(!0)),j.visibilityState==="visible"&&I()},O=j=>{j.pointerType==="mouse"&&(_=!0,y=!0,!(e.animating||e.autoplay.paused)&&b(!0))},P=j=>{j.pointerType==="mouse"&&(y=!1,e.autoplay.paused&&I())},$=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",O),e.el.addEventListener("pointerleave",P))},re=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",O),e.el.removeEventListener("pointerleave",P))},Ce=()=>{Ii().addEventListener("visibilitychange",N)},it=()=>{Ii().removeEventListener("visibilitychange",N)};i("init",()=>{e.params.autoplay.enabled&&($(),Ce(),k())}),i("destroy",()=>{re(),it(),e.autoplay.running&&T()}),i("_freeModeStaticRelease",()=>{(v||_)&&I()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?T():b(!0,!0)}),i("beforeTransitionStart",(j,K,Q)=>{e.destroyed||!e.autoplay.running||(Q||!e.params.autoplay.disableOnInteraction?b(!0,!0):T())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){T();return}m=!0,v=!1,_=!1,S=setTimeout(()=>{_=!0,v=!0,b(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!m)){if(clearTimeout(S),clearTimeout(o),e.params.autoplay.disableOnInteraction){v=!1,m=!1;return}v&&e.params.cssMode&&I(),v=!1,m=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(x=!0)}),Object.assign(e.autoplay,{start:k,stop:T,pause:b,resume:I})}function DO(t){const{effect:e,swiper:n,on:i,setTranslate:r,setTransition:s,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:c}=t;i("beforeInit",()=>{if(n.params.effect!==e)return;n.classNames.push(`${n.params.containerModifierClass}${e}`),a&&a()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const h=o?o():{};Object.assign(n.params,h),Object.assign(n.originalParams,h)}),i("setTranslate",()=>{n.params.effect===e&&r()}),i("setTransition",(h,f)=>{n.params.effect===e&&s(f)}),i("transitionEnd",()=>{if(n.params.effect===e&&l){if(!c||!c().slideShadows)return;n.slides.forEach(h=>{h.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>f.remove())}),l()}});let d;i("virtualUpdate",()=>{n.params.effect===e&&(n.slides.length||(d=!0),requestAnimationFrame(()=>{d&&n.slides&&n.slides.length&&(r(),d=!1)}))})}function VO(t,e){const n=aI(e);return n!==e&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function FO(t){let{swiper:e,duration:n,transformElements:i,allSlides:r}=t;const{activeIndex:s}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(c=>c.shadowRoot&&c.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&n!==0){let a=!1,l;r?l=i:l=i.filter(c=>{const d=c.classList.contains("swiper-slide-transform")?o(c):c;return e.getSlideIndex(d)===s}),l.forEach(c=>{f2(c,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;const d=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(d)})})}}function jO(t){let{swiper:e,extendParams:n,on:i}=t;n({fadeEffect:{crossFade:!1}}),DO({effect:"fade",swiper:e,on:i,setTranslate:()=>{const{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){const c=e.slides[l];let h=-c.swiperSlideOffset;e.params.virtualTranslate||(h-=e.translate);let f=0;e.isHorizontal()||(f=h,h=0);const m=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(c.progress),0):1+Math.min(Math.max(c.progress,-1),0),v=VO(a,c);v.style.opacity=m,v.style.transform=`translate3d(${h}px, ${f}px, 0px)`}},setTransition:o=>{const a=e.slides.map(l=>aI(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),FO({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function UO({item:t,Imdb:e}){const{fav:n,watchList:i,handleFav:r,handleWatchList:s}=Sn(),[o,a]=M.useState(null),[l,c]=M.useState(null),[d,h]=M.useState(null),[f,m]=M.useState([]);return M.useEffect(()=>{m(t),a(n),c(i)},[n,i,t,e,d]),M.useEffect(()=>{h(()=>e.filter(S=>S.imdbID==f.imdb_id)[0]),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(S=>new window.bootstrap.Tooltip(S))},[d,e]),w.jsx("div",{style:{"--bg":`url(${f["banner-img"]})`},className:"w-100 eachSlide h-100 row align-items-end m-0 p-md-5 p-3 pb-5",children:w.jsxs("div",{className:"col-12 col-lg-8 col-xl-6 p-md-5 d-flex flex-column gap-3",children:[w.jsx("h4",{className:"theme-clr",children:f.type}),d!=null&&w.jsx("h6",{className:"d-flex gap-3 genre",children:d.Genre.split(", ").map((v,S)=>w.jsx("span",{role:"button",children:v},S))}),w.jsx("h1",{className:"display-4 fw-bold text-balance",children:f.title}),d!=null&&w.jsxs(w.Fragment,{children:[w.jsx("p",{className:"text-balance clamp",children:d.Plot}),w.jsxs("div",{className:"info d-flex gap-1 align-items-center",children:[w.jsx("h5",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Released "+d.Released,className:"m-0",children:d.Year}),w.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:w.jsxs("g",{fill:"currentColor",children:[w.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),w.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),w.jsx("h5",{className:"m-0",children:d.Rated}),w.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:w.jsxs("g",{fill:"currentColor",children:[w.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),w.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),w.jsx("h5",{className:"m-0",children:d.Runtime})]})," "]}),d!=null&&w.jsxs("div",{style:{"--rating":d.imdbRating/2},className:"rating d-flex gap-2 align-items-center",children:[w.jsx("div",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Total Votes "+d.imdbVotes}),d.imdbRating,"/10 Rating"]}),w.jsxs("div",{className:"d-flex gap-4 align-items-center mt-4",children:[w.jsx(ko,{to:"../play",state:{item:t,imdbData:d},children:w.jsx("button",{className:"custom-btn w-max px-4 py-2 full-radius",children:"Watch Now"})}),o!=null&&w.jsx("div",{onClick:()=>r(f.imdb_id),role:"button",className:o.includes(f.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),l!=null&&w.jsx("div",{onClick:()=>s(f.imdb_id),role:"button",className:l.includes(f.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})})]})]})})}function zO({loading:t,error:e,moviza:n,Imdb:i}){return Sn(),t?w.jsx("div",{className:"loading",children:"Loading..."}):w.jsx(_I,{className:"slider",modules:[LO,jO,MO],spaceBetween:0,slidesPerView:1,navigation:!0,effect:"fade",loop:!0,autoplay:t?{}:{delay:3e3,disableOnInteraction:!1},children:n.map((r,s)=>{if(s<7)return w.jsx(wI,{children:w.jsx(UO,{item:r,Imdb:i})},s)})})}function vy({item:t,Imdb:e}){const{fav:n,watchList:i,handleFav:r,handleWatchList:s}=Sn(),[o,a]=M.useState(null),[l,c]=M.useState(null);M.useEffect(()=>{a(n),c(i)},[n,i]);const[d,h]=M.useState(null);return M.useEffect(()=>{h(()=>e.filter(m=>m.imdbID==t.imdb_id)[0]),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(m=>new window.bootstrap.Tooltip(m))},[d,e,t]),w.jsxs("div",{className:"gridItem w-100 d-flex ",style:{"--bg":`url(${d!=null&&d.Poster})`},children:[w.jsxs("div",{className:"position-absolute gap-1 px-2 py-4 top-0 start-0 w-100 h-100 d-flex flex-column justify-content-end align-items-center",children:[d!=null&&w.jsx("h6",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Released "+d.Released,className:"m-0 small-font theme-clr",children:d.Year}),w.jsx("h6",{className:"text-center text-balance",children:t.title}),d!=null&&w.jsxs("div",{className:"info d-flex gap-1 flex-wrap align-items-center  justify-content-center",children:[w.jsx("h6",{className:"m-0 small-font",children:d.Rated}),w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:w.jsxs("g",{fill:"currentColor",children:[w.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),w.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),w.jsx("h6",{className:"m-0 small-font",children:d.Runtime})]})]}),w.jsxs("div",{className:"d-flex play position-absolute top-0 start-0 w-100 h-100 justify-content-center align-items-center",children:[w.jsx(ko,{to:"../play",state:{item:t,imdbData:d},children:w.jsx("button",{className:"custom-btn w-max full-radius fs-3 px-2",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"M8 17.175V6.825q0-.425.3-.713t.7-.287q.125 0 .263.037t.262.113l8.15 5.175q.225.15.338.375t.112.475t-.112.475t-.338.375l-8.15 5.175q-.125.075-.262.113T9 18.175q-.4 0-.7-.288t-.3-.712"})})})}),o!=null&&w.jsx("div",{onClick:()=>r(t.imdb_id),role:"button",className:o.includes(t.imdb_id)?"theme-clr w-max position-absolute top-0 start-0 ms-2 mt-2  fs-3 d-flex justify-content-center align-items-center":"w-max position-absolute top-0 start-0 ms-2 mt-2  fs-3 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),l!=null&&w.jsx("div",{onClick:()=>s(t.imdb_id),role:"button",className:l.includes(t.imdb_id)?"theme-clr w-max position-absolute top-0 end-0 me-2 mt-2  fs-3 d-flex justify-content-center align-items-center":"w-max position-absolute top-0 end-0 me-2 mt-2  fs-3 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})})]})]})}function Fs({loading:t,error:e,moviza:n,Imdb:i,match:r,type:s,range:o,title:a,link:l}){Sn();let c=0;return w.jsx("section",{className:"container",children:w.jsxs("div",{className:"row",children:[a&&w.jsxs("div",{className:"col-12 py-5 px-3 d-flex justify-content-between align-items-center",children:[w.jsxs("h3",{children:[w.jsx("span",{className:"theme-clr",children:"#"}),a]}),w.jsx(ko,{to:l,children:"See All"})]}),w.jsx("div",{className:"col-12 gridItems",children:n&&n.length>0?n.map((d,h)=>{if(c<o&&d[s]==r)return c++,w.jsx(vy,{item:d,Imdb:i},h)}):w.jsx("h1",{className:"no-data",children:"No Data Found"})})]})})}function BO({useMoviza:t}){const{fav:e,watchList:n,handleFav:i,handleWatchList:r}=Sn(),{loading:s,error:o,moviza:a,Imdb:l}=t(),[c,d]=M.useState([]);return M.useEffect(()=>{d(l)},[s,t]),w.jsxs("main",{children:[w.jsx(zO,{fav:e,watchList:n,loading:s,error:o,moviza:a,Imdb:c}),w.jsx(Fs,{link:"movies",loading:s,error:o,moviza:a,Imdb:c,match:"Movie",type:"type",range:12,title:"Movies"}),w.jsx(Fs,{link:"series",loading:s,error:o,moviza:a,Imdb:c,match:"Series",type:"type",range:12,title:"Series"}),w.jsx(Fs,{link:"anime",loading:s,error:o,moviza:a,Imdb:c,match:"Anime",type:"cinematography",range:12,title:"Anime"}),w.jsx(Fs,{link:"animation",loading:s,error:o,moviza:a,Imdb:c,match:"Animation",type:"cinematography",range:12,title:"Animation"}),w.jsx(Fs,{link:"live-action",loading:s,error:o,moviza:a,Imdb:c,match:"Live-Action",type:"cinematography",range:12,title:"Live Action"})]})}function $O(){const{documentData:t}=Sn(),[e,n]=M.useState(""),[i,r]=M.useState("");M.useEffect(()=>{t&&n(t.name)},[t]);const s=o=>{o.preventDefault();const a=`Request From ${e}
${i}`,l="7217477094:AAG2Ej7QPlgaGmEbe8FCoRGqcvRZ68aPN1s",c="-1002206486921",d=`https://api.telegram.org/bot${l}/sendMessage`;fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:c,text:a})}).then(h=>h.json()).then(h=>{h.ok?(r(""),alert("Message sent successfully!")):alert("Failed to send message: "+h.description)}).catch(h=>{console.error("Error:",h),alert("Error sending message")})};return w.jsx("section",{className:"container mt-5",children:w.jsxs("div",{className:"row my-5 pt-5",children:[w.jsxs("div",{className:"col-12 col-xl-7 p-5",children:[w.jsx("h2",{className:"theme-clr",children:"Moviza"}),w.jsx("h1",{children:"Your Ultimate Free OTT Destination"}),w.jsx("p",{className:"fs-5",children:"Moviza is your go-to OTT platform, offering a vast library of movies, series, and animes, all completely free of charge! Inspired by the likes of Netflix and Amazon Prime, Moviza is dedicated to providing high-quality entertainment in Tamil."}),w.jsx("h2",{className:"theme-clr mt-5",children:"What We Offer"}),w.jsxs("ul",{children:[w.jsxs("li",{children:[w.jsx("span",{className:"theme-clr",children:"Diverse Content:"})," From the latest Hollywood blockbusters to popular Tamil-dubbed films, we bring you a wide range of content. Enjoy your favorite movies and series in Tamil or catch the latest Hollywood releases with Tamil dubbing."]}),w.jsxs("li",{children:[w.jsx("span",{className:"theme-clr",children:"Extensive Tamil Library:"})," Explore an array of Tamil-dubbed series and animes, ensuring there's always something new and exciting for you to watch."]}),w.jsxs("li",{children:[w.jsx("span",{className:"theme-clr",children:"Request New Content:"})," Have a specific movie or series in mind? Use our request feature to suggest new titles. We strive to accommodate your requests, with new additions typically uploaded within just one day!"]})]}),w.jsx("h2",{className:"theme-clr mt-5",children:"Why Choose Moviza?"}),w.jsxs("ul",{children:[w.jsxs("li",{children:[w.jsx("span",{className:"theme-clr",children:"Absolutely Free:"})," Access all our content without any subscription fees. Just stream and enjoy!"]}),w.jsxs("li",{children:[w.jsx("span",{className:"theme-clr",children:"High-Quality Entertainment:"})," Experience a seamless streaming experience with a user-friendly interface and high-definition content."]}),w.jsxs("li",{children:[w.jsx("span",{className:"theme-clr",children:"Tamil Focus:"})," Our platform is dedicated to serving the Tamil-speaking audience, ensuring you have access to content that resonates with you."]})]}),w.jsx("p",{className:"fs-5",children:"Moviza is here to redefine your entertainment experience. Dive into our world of free streaming and explore a universe of movies, series, and animes like never before!"})]}),w.jsxs("div",{className:"col-12 col-xl-5 p-5",children:[w.jsx("h2",{className:"theme-clr",children:"Request"}),w.jsxs("form",{className:"d-flex flex-column gap-4 my-3",onSubmit:s,children:[w.jsx("textarea",{className:"form-control py-3",rows:10,value:i,onChange:o=>r(o.target.value),placeholder:"Your Request",required:!0}),w.jsx("button",{className:"custom-btn py-2 rounded-1",type:"submit",children:"Send Request"})]})]})]})})}const EI="/assets/logo-CQ3Ew4tp.png";function zn(){const[t,e]=M.useState([]),[n,i]=M.useState([]),[r,s]=M.useState(!0),[o,a]=M.useState(null);return M.useEffect(()=>{(async()=>{try{const c=await fetch("https://nwmtamilplay.github.io/moviza/database/moviza.json");if(!c.ok)throw new Error("Network response was not ok");const d=await c.json();e(d)}catch(c){console.error("There has been a problem with your fetch operation:",c),a(c.message),s(!1)}try{const c=await fetch("https://nwmtamilplay.github.io/moviza/database/imdb_data.json");if(!c.ok)throw new Error("Network response was not ok");const d=await c.json();i(d),s(!1)}catch(c){console.error("There has been a problem with your fetch operation:",c),a(c.message),s(!1)}})()},[]),{loading:r,error:o,moviza:t,Imdb:n}}function qO({user:t}){const e=Vr(),{loading:n,error:i,moviza:r,Imdb:s}=zn(),{fav:o,watchList:a,handleFav:l,handleWatchList:c}=Sn(),[d,h]=M.useState(null),[f,m]=M.useState(null);M.useEffect(()=>{h(o),m(a)},[o,a]);const[v,S]=M.useState(""),[x,_]=M.useState([]),y=$=>{if(_([]),S($.target.value),$.target.value.trim()!=""){const re=r.filter(Ce=>Ce.title.toLowerCase().includes($.target.value)||Ce.detail.toLowerCase().includes($.target.value));console.log(re),_(re)}},E=$=>{$.key==="Enter"&&v.trim()!=""&&(S(""),_([]),e("/search",{state:{searchText:v},replace:!0}))},A=$=>{const re=r.filter(it=>it.imdb_id==$),Ce=s.filter(it=>it.imdbID==$);return{moviza:re,imdb:Ce}},L=M.useRef(null),{documentData:D}=Sn(),[k,T]=M.useState(null),[b,I]=M.useState(null),N=M.useRef(null),O=M.useRef(null);M.useEffect(()=>{O.current&&O.current.classList.contains("active")&&O.current.classList.remove("active")},[e]);const P=()=>{O.current&&O.current.classList.toggle("active")};return M.useEffect(()=>{T(t),I(D);const $=re=>{O.current&&!O.current.contains(re.target)&&N.current&&!N.current.contains(re.target)&&O.current.classList.remove("active")};return document.addEventListener("click",$),()=>{document.removeEventListener("click",$)}},[t,D]),M.useEffect(()=>{let $=0;window.addEventListener("scroll",function(){let re=window.pageYOffset||document.documentElement.scrollTop;$>200?(L.current&&L.current.classList.add("not-top"),re>$?L.current&&L.current.classList.remove("show"):L.current&&L.current.classList.add("show")):L.current&&L.current.classList.remove("not-top"),$=re})},[L]),w.jsx("header",{ref:L,className:"w-100",children:w.jsx("nav",{className:"container p-3",children:w.jsx("div",{className:"row",children:w.jsxs("div",{className:"col-12 d-flex align-items-center",children:[w.jsx(ui,{className:"logo me-auto",to:"/",children:w.jsx("img",{className:"w-100",src:EI,alt:"Moviza"})}),w.jsxs("div",{ref:O,className:"navigation d-flex flex-column flex-xl-row align-items-xl-center justify-content-center gap-4 p-4 p-xl-0",children:[w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/",children:[w.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"M4 14.85V11q0-.2.075-.375T4.3 10.3l7-7q.15-.15.325-.225Q11.8 3 12 3t.375.075q.175.075.325.225l1.425 1.4ZM17 20v-8.175L13.075 7.9L15.2 5.775l4.5 4.525q.125.15.213.325Q20 10.8 20 11v8q0 .425-.288.712Q19.425 20 19 20ZM5 20q-.425 0-.713-.288Q4 19.425 4 19v-2.05l3-3V17h8.5v3Z"})}),"Home"]}),w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/about",children:[" ",w.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"M18.001 20H20v2h-8C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10a9.99 9.99 0 0 1-3.999 8M12 10a2 2 0 1 0 0-4a2 2 0 0 0 0 4m-4 4a2 2 0 1 0 0-4a2 2 0 0 0 0 4m8 0a2 2 0 1 0 0-4a2 2 0 0 0 0 4m-4 4a2 2 0 1 0 0-4a2 2 0 0 0 0 4"})}),"About"]}),w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/movies",children:[w.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"m20.84 2.18l-3.93.78l2.74 3.54l1.97-.4zm-6.87 1.36L12 3.93l2.75 3.53l1.96-.39zm-4.9.96l-1.97.41l2.75 3.53l1.96-.39zm-4.91 1l-.98.19a2 2 0 0 0-1.57 2.35L2 10l4.9-.97zM2 10v10a2 2 0 0 0 2 2h16c1.11 0 2-.89 2-2V10z"})})," Movies"]}),w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/series",children:[w.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"m11.05 14.5l4.15-2.65q.45-.3.45-.85t-.45-.85L11.05 7.5q-.5-.325-1.025-.05t-.525.875v5.35q0 .6.525.875t1.025-.05M4 19q-.825 0-1.412-.587T2 17V5q0-.825.588-1.412T4 3h16q.825 0 1.413.588T22 5v12q0 .825-.587 1.413T20 19h-4v1q0 .425-.288.713T15 21H9q-.425 0-.712-.288T8 20v-1z"})})," Series"]}),w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/anime",children:[w.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"0.95em",height:"0.95em",viewBox:"0 0 512 512",children:w.jsx("path",{fill:"currentColor",d:"m368.256 214.573l-102.627 187.35c40.554 71.844 73.647 97.07 138.664 94.503c63.67-2.514 136.974-89.127 95.694-163.243L397.205 150.94c-3.676 12.266-25.16 55.748-28.95 63.634M216.393 440.625C104.077 583.676-57.957 425.793 20.85 302.892c0 0 83.895-147.024 116.521-204.303c25.3-44.418 53.644-72.37 90.497-81.33c44.94-10.926 97.565 12.834 125.62 56.167c19.497 30.113 36.752 57.676 6.343 109.738c-3.613 6.184-136.326 248.402-143.438 257.46m8.014-264.595c-30.696-17.696-30.696-62.177 0-79.873s69.273 4.544 69.273 39.936s-38.578 57.633-69.273 39.937"})})," Anime"]}),w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/favorite",children:[w.jsx("svg",{role:"button",className:"fs-4",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"M12 20.325q-.35 0-.712-.125t-.638-.4l-1.725-1.575q-2.65-2.425-4.788-4.812T2 8.15Q2 5.8 3.575 4.225T7.5 2.65q1.325 0 2.5.562t2 1.538q.825-.975 2-1.537t2.5-.563q2.35 0 3.925 1.575T22 8.15q0 2.875-2.125 5.275T15.05 18.25l-1.7 1.55q-.275.275-.637.4t-.713.125"})})," ",w.jsx("span",{className:"w-max d-flex d-xl-none",children:"Favorite"})]}),w.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/watch-list",children:[w.jsx("svg",{role:"button",className:"fs-4",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"m12 18l-4.2 1.8q-1 .425-1.9-.162T5 17.975V5q0-.825.588-1.412T7 3h10q.825 0 1.413.588T19 5v12.975q0 1.075-.9 1.663t-1.9.162z"})})," ",w.jsx("span",{className:"w-max d-flex d-xl-none",children:"Watch List"})]}),w.jsxs(ui,{className:"d-flex d-xl-none gap-3 align-items-center",to:"/search",children:[w.jsx("svg",{role:"button",className:"fs-4",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"})})," ",w.jsx("span",{className:"w-max d-flex d-xl-none",children:"Search"})]}),w.jsxs("div",{className:"position-relative search-box d-none d-xl-flex",children:[w.jsx("input",{onKeyDown:E,name:"s",placeholder:"Search",value:v,onChange:$=>y($),className:"search full-radius py-2 px-3",type:"text"}),w.jsx("div",{className:"searchResult scroll-box",children:x.map($=>{const re=A($.imdb_id);return console.log(re),w.jsxs("div",{className:"result-items m-3",children:[w.jsx("img",{className:"w-100",src:re.imdb[0].Poster,alt:""}),w.jsxs("div",{className:"details d-flex flex-column gap-1 p-3",children:[w.jsx("span",{className:"theme-clr small-font",children:$.type}),w.jsx("h6",{className:"fs-6",children:$.title}),w.jsxs("div",{className:"d-flex w-100 gap-2 align-items-center mt-auto",children:[d!=null&&w.jsx("div",{onClick:()=>l($.imdb_id),role:"button",className:d.includes($.imdb_id)?"theme-clr fs-4 d-flex justify-content-center align-items-center":"fs-4 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),f!=null&&w.jsx("div",{onClick:()=>c($.imdb_id),role:"button",className:f.includes($.imdb_id)?"theme-clr fs-4 d-flex justify-content-center align-items-center":"fs-4 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})}),w.jsx(ko,{to:"../play",onClick:()=>{S(""),_([])},className:"ms-auto",state:{item:$,imdbData:re.imdb[0]},children:w.jsx("button",{className:"result-btn w-max btn",children:"Watch Now"})})]})]})]})})})]})]}),w.jsx(ko,{to:"/profile",children:w.jsx("img",{role:"button",className:"profile full-radius ms-5",src:b!=null?b.profile?b.profile:`https://placehold.co/40x40/yellow/black?text=${b.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:k!=null?k.displayName:"admin"})}),w.jsx("button",{ref:N,onClick:P,className:"menu ms-3 d-flex d-xl-none",children:w.jsx("svg",{className:"fs-1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"currentColor",d:"M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1m0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1"})})})]})})})})}function ba({useMoviza:t,types:e,check:n,queryCheck:i}){const[r,s]=rI(),[o,a]=M.useState([{cat:"All",active:!0},{cat:"Anime",active:!1},{cat:"Animation",active:!1},{cat:"Live-Action",active:!1}]),[l,c]=M.useState([{type:"All",active:!0},{type:"Movie",active:!1},{type:"Series",active:!1}]),{loading:d,error:h,moviza:f,Imdb:m}=t(),[v,S]=M.useState([]),[x,_]=M.useState([]);return M.useEffect(()=>{if(S(f),_(m),r.get(i[1])){if(i[1]=="cat"){const y=o.map(E=>E.cat===r.get(i[1])?{...E,active:!0}:{...E,active:!1});a(y)}else{const y=l.map(E=>E.type===r.get(i[1])?{...E,active:!0}:{...E,active:!1});c(y)}r.get(i[1])!="All"&&r.get(i[1])!=""&&S(f.filter(y=>y[i[0]]===r.get(i[1])&&y[n]===e))}},[d,r]),w.jsxs(w.Fragment,{children:[w.jsx("section",{className:"mt-5 pt-5 container",children:w.jsx("div",{className:"row",children:w.jsx("div",{className:"col-12 py-5",children:w.jsx("h6",{className:"d-flex flex-wrap gap-3 genre",children:i[1]=="cat"?o.map((y,E)=>w.jsx("span",{role:"button",onClick:()=>{s({cat:y.cat})},className:y.active?"active":"",children:y.cat},E)):l.map((y,E)=>w.jsx("span",{role:"button",onClick:()=>{s({type:y.type})},className:y.active?"active":"",children:y.type},E))})})})}),w.jsx(Fs,{loading:d,error:h,moviza:v,Imdb:x,match:e,type:n,range:99})]})}var T0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(t,e){if(!t)throw Ho(e)},Ho=function(t){return new Error("Firebase Database ("+TI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},WO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),i.push(n[d],n[h],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new HO;const f=s<<2|a>>4;if(i.push(f),c!==64){const m=a<<4&240|c>>2;if(i.push(m),h!==64){const v=c<<6&192|h;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const II=function(t){const e=SI(t);return _y.encodeByteArray(e,!0)},Sd=function(t){return II(t).replace(/\./g,"")},Id=function(t){try{return _y.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){return bI(void 0,t)}function bI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!KO(n)||(t[n]=bI(t[n],e[n]));return t}function KO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=()=>QO().__FIREBASE_DEFAULTS__,XO=()=>{if(typeof process>"u"||typeof T0>"u")return;const t=T0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Id(t[1]);return e&&JSON.parse(e)},bh=()=>{try{return YO()||XO()||JO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CI=t=>{var e,n;return(n=(e=bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wy=t=>{const e=CI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},xI=()=>{var t;return(t=bh())===null||t===void 0?void 0:t.config},PI=t=>{var e;return(e=bh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sd(JSON.stringify(n)),Sd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ty(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function ZO(){var t;const e=(t=bh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tL(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AI(){return TI.NODE_ADMIN===!0}function nL(){return!ZO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iL(){try{return typeof indexedDB=="object"}catch{return!1}}function rL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="FirebaseError";class ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=sL,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?oL(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ii(r,a,i)}}function oL(t,e){return t.replace(aL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const aL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=Rl(Id(s[0])||""),n=Rl(Id(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},lL=function(t){const e=RI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},cL=function(t){const e=RI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ao(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Om(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bd(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Cd(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(S0(s)&&S0(o)){if(!Cd(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function S0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Fa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):h<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const f=(r<<5|r>>>27)+c+l+d+i[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function dL(t,e){const n=new hL(t,e);return n.subscribe.bind(n)}class hL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");fL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=ap),r.error===void 0&&(r.error=ap),r.complete===void 0&&(r.complete=ap);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ap(){}function Sy(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,q(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},xh=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ch;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yL(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gL(t){return t===Kr?void 0:t}function yL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const _L={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},wL=he.INFO,EL={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},TL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=EL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ph{constructor(e){this.name=e,this._logLevel=wL,this._logHandler=TL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const SL=(t,e)=>e.some(n=>t instanceof n);let I0,b0;function IL(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bL(){return b0||(b0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NI=new WeakMap,Lm=new WeakMap,OI=new WeakMap,lp=new WeakMap,Iy=new WeakMap;function CL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Er(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NI.set(n,t)}).catch(()=>{}),Iy.set(e,t),e}function xL(t){if(Lm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Lm.set(t,e)}let Mm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PL(t){Mm=t(Mm)}function kL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(cp(this),e,...n);return OI.set(i,e.sort?e.sort():[e]),Er(i)}:bL().includes(t)?function(...e){return t.apply(cp(this),e),Er(NI.get(this))}:function(...e){return Er(t.apply(cp(this),e))}}function AL(t){return typeof t=="function"?kL(t):(t instanceof IDBTransaction&&xL(t),SL(t,IL())?new Proxy(t,Mm):t)}function Er(t){if(t instanceof IDBRequest)return CL(t);if(lp.has(t))return lp.get(t);const e=AL(t);return e!==t&&(lp.set(t,e),Iy.set(e,t)),e}const cp=t=>Iy.get(t);function RL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Er(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Er(o.result),l.oldVersion,l.newVersion,Er(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NL=["get","getKey","getAll","getAllKeys","count"],OL=["put","add","delete","clear"],up=new Map;function C0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=OL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||NL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return up.set(e,s),s}PL(t=>({...t,get:(e,n,i)=>C0(e,n)||t.get(e,n,i),has:(e,n)=>!!C0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ML(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function ML(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dm="@firebase/app",x0="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new Ph("@firebase/app"),DL="@firebase/app-compat",VL="@firebase/analytics-compat",FL="@firebase/analytics",jL="@firebase/app-check-compat",UL="@firebase/app-check",zL="@firebase/auth",BL="@firebase/auth-compat",$L="@firebase/database",qL="@firebase/database-compat",WL="@firebase/functions",HL="@firebase/functions-compat",GL="@firebase/installations",KL="@firebase/installations-compat",QL="@firebase/messaging",YL="@firebase/messaging-compat",XL="@firebase/performance",JL="@firebase/performance-compat",ZL="@firebase/remote-config",eM="@firebase/remote-config-compat",tM="@firebase/storage",nM="@firebase/storage-compat",iM="@firebase/firestore",rM="@firebase/vertexai-preview",sM="@firebase/firestore-compat",oM="firebase",aM="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",lM={[Dm]:"fire-core",[DL]:"fire-core-compat",[FL]:"fire-analytics",[VL]:"fire-analytics-compat",[UL]:"fire-app-check",[jL]:"fire-app-check-compat",[zL]:"fire-auth",[BL]:"fire-auth-compat",[$L]:"fire-rtdb",[qL]:"fire-rtdb-compat",[WL]:"fire-fn",[HL]:"fire-fn-compat",[GL]:"fire-iid",[KL]:"fire-iid-compat",[QL]:"fire-fcm",[YL]:"fire-fcm-compat",[XL]:"fire-perf",[JL]:"fire-perf-compat",[ZL]:"fire-rc",[eM]:"fire-rc-compat",[tM]:"fire-gcs",[nM]:"fire-gcs-compat",[iM]:"fire-fst",[sM]:"fire-fst-compat",[rM]:"fire-vertex","fire-js":"fire-js",[oM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,cM=new Map,Fm=new Map;function P0(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xr(t){const e=t.name;if(Fm.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,t);for(const n of xd.values())P0(n,t);for(const n of cM.values())P0(n,t);return!0}function oc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new sc("app","Firebase",uM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=aM;function LI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Vm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Tr.create("bad-app-name",{appName:String(r)});if(n||(n=xI()),!n)throw Tr.create("no-options");const s=xd.get(r);if(s){if(Cd(n,s.options)&&Cd(i,s.config))return s;throw Tr.create("duplicate-app",{appName:r})}const o=new vL(r);for(const l of Fm.values())o.addComponent(l);const a=new dM(n,i,o);return xd.set(r,a),a}function kh(t=Vm){const e=xd.get(t);if(!e&&t===Vm&&xI())return LI();if(!e)throw Tr.create("no-app",{appName:t});return e}function _n(t,e,n){var i;let r=(i=lM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(a.join(" "));return}xr(new Oi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="firebase-heartbeat-database",fM=1,Nl="firebase-heartbeat-store";let dp=null;function MI(){return dp||(dp=RL(hM,fM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),dp}async function pM(t){try{const n=(await MI()).transaction(Nl),i=await n.objectStore(Nl).get(DI(t));return await n.done,i}catch(e){if(e instanceof ii)Li.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function k0(t,e){try{const i=(await MI()).transaction(Nl,"readwrite");await i.objectStore(Nl).put(e,DI(t)),await i.done}catch(n){if(n instanceof ii)Li.warn(n.message);else{const i=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(i.message)}}}function DI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=1024,gM=30*24*60*60*1e3;class yM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _M(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n,i;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=A0();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=gM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=A0(),{heartbeatsToSend:i,unsentEntries:r}=vM(this._heartbeatsCache.heartbeats),s=Sd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Li.warn(n),""}}}function A0(){return new Date().toISOString().substring(0,10)}function vM(t,e=mM){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),R0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),R0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class _M{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iL()?rL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return k0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return k0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function R0(t){return Sd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){xr(new Oi("platform-logger",e=>new LL(e),"PRIVATE")),xr(new Oi("heartbeat",e=>new yM(e),"PRIVATE")),_n(Dm,x0,t),_n(Dm,x0,"esm2017"),_n("fire-js","")}wM("");var EM="firebase",TM="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(EM,TM,"app");function by(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function VI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SM=VI,FI=new sc("auth","Firebase",VI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Ph("@firebase/auth");function IM(t,...e){Pd.logLevel<=he.WARN&&Pd.warn(`Auth (${Fr}): ${t}`,...e)}function Ru(t,...e){Pd.logLevel<=he.ERROR&&Pd.error(`Auth (${Fr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Cy(t,...e)}function Xn(t,...e){return Cy(t,...e)}function jI(t,e,n){const i=Object.assign(Object.assign({},SM()),{[e]:n});return new sc("auth","Firebase",i).create(e,{appName:t.name})}function bi(t){return jI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return FI.create(t,...e)}function ne(t,e,...n){if(!t)throw Cy(e,...n)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ru(e),new Error(e)}function Mi(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bM(){return N0()==="http:"||N0()==="https:"}function N0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bM()||eL()||"connection"in navigator)?navigator.onLine:!0}function xM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=Ty()||kI()}get(){return CM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new ac(3e4,6e4);function qi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wi(t,e,n,i,r={}){return zI(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Go(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),UI.fetch()(BI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function zI(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},PM),e);try{const r=new RM(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw cu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cu(t,"user-disabled",o);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jI(t,d,c);Fn(t,d)}}catch(r){if(r instanceof ii)throw r;Fn(t,"network-request-failed",{message:String(r)})}}async function lc(t,e,n,i,r={}){const s=await Wi(t,e,n,i,r);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function BI(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?xy(t.config,r):`${t.config.apiScheme}://${r}`}function AM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),kM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Xn(t,e,i);return r.customData._tokenResponse=n,r}function O0(t){return t!==void 0&&t.enterprise!==void 0}class NM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function OM(t,e){return Wi(t,"GET","/v2/recaptchaConfig",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e){return Wi(t,"POST","/v1/accounts:delete",e)}async function $I(t,e){return Wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MM(t,e=!1){const n=et(t),i=await n.getIdToken(e),r=Py(i);ne(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:el(hp(r.auth_time)),issuedAtTime:el(hp(r.iat)),expirationTime:el(hp(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hp(t){return Number(t)*1e3}function Py(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ru("JWT malformed, contained fewer than 3 sections"),null;try{const r=Id(n);return r?JSON.parse(r):(Ru("Failed to decode base64 JWT payload"),null)}catch(r){return Ru("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function L0(t){const e=Py(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ii&&DM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function DM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ol(t,$I(n,{idToken:i}));ne(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?qI(s.providerUserInfo):[],a=jM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Um(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function FM(t){const e=et(t);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function qI(t){return t.map(e=>{var{providerId:n}=e,i=by(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t,e){const n=await zI(t,{},async()=>{const i=Go({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=BI(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UI.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zM(t,e){return Wi(t,"POST","/v2/accounts:revokeToken",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=L0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await UM(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new ho;return i&&(ne(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ne(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _i{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=by(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Um(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MM(this,e)}reload(){return FM(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await Ol(this,LM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,d;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:A,isAnonymous:L,providerData:D,stsTokenManager:k}=n;ne(E&&k,e,"internal-error");const T=ho.fromJSON(this.name,k);ne(typeof E=="string",e,"internal-error"),Yi(h,e.name),Yi(f,e.name),ne(typeof A=="boolean",e,"internal-error"),ne(typeof L=="boolean",e,"internal-error"),Yi(m,e.name),Yi(v,e.name),Yi(S,e.name),Yi(x,e.name),Yi(_,e.name),Yi(y,e.name);const b=new _i({uid:E,auth:e,email:f,emailVerified:A,displayName:h,isAnonymous:L,photoURL:v,phoneNumber:m,tenantId:S,stsTokenManager:T,createdAt:_,lastLoginAt:y});return D&&Array.isArray(D)&&(b.providerData=D.map(I=>Object.assign({},I))),x&&(b._redirectEventId=x),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new ho;r.updateFromServerResponse(n);const s=new _i({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await kd(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ne(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?qI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new ho;a.updateFromIdToken(i);const l=new _i({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Um(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=new Map;function wi(t){Mi(t instanceof Function,"Expected a class definition");let e=M0.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,M0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WI.type="NONE";const D0=WI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t,e,n){return`firebase:${t}:${e}:${n}`}class fo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Nu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Nu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new fo(wi(D0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||wi(D0);const o=Nu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=_i._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fo(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new fo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XI(e))return"Blackberry";if(JI(e))return"Webos";if(GI(e))return"Safari";if((e.includes("chrome/")||KI(e))&&!e.includes("edge/"))return"Chrome";if(YI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HI(t=Ft()){return/firefox\//i.test(t)}function GI(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KI(t=Ft()){return/crios\//i.test(t)}function QI(t=Ft()){return/iemobile/i.test(t)}function YI(t=Ft()){return/android/i.test(t)}function XI(t=Ft()){return/blackberry/i.test(t)}function JI(t=Ft()){return/webos/i.test(t)}function ky(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BM(t=Ft()){var e;return ky(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $M(){return tL()&&document.documentMode===10}function ZI(t=Ft()){return ky(t)||YI(t)||JI(t)||XI(t)||/windows phone/i.test(t)||QI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t,e=[]){let n;switch(t){case"Browser":n=V0(Ft());break;case"Worker":n=`${V0(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t,e={}){return Wi(t,"GET","/v2/passwordPolicy",qi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=6;class GM{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:HM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F0(this),this.idTokenSubscription=new F0(this),this.beforeStateQueue=new qM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await fo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $I(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(bi(this));const n=e?et(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WM(this),n=new GM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await zM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&IM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function jr(t){return et(t)}class F0{constructor(e){this.auth=e,this.observer=null,this.addObserver=dL(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QM(t){Ah=t}function tb(t){return Ah.loadJS(t)}function YM(){return Ah.recaptchaEnterpriseScript}function XM(){return Ah.gapiScript}function JM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZM="recaptcha-enterprise",eD="NO_RECAPTCHA";class tD{constructor(e){this.type=ZM,this.auth=jr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{OM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new NM(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;O0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(eD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&O0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=YM();l.length!==0&&(l+=a),tb(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function j0(t,e,n,i=!1){const r=new tD(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ad(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await j0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await j0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t,e){const n=oc(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Cd(s,e??{}))return r;Fn(r,"already-initialized")}return n.initialize({options:e})}function iD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rD(t,e,n){const i=jr(t);ne(i._canInitEmulator,i,"emulator-config-failed"),ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=nb(e),{host:o,port:a}=sD(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),oD()}function nb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sD(t){const e=nb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:U0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:U0(o)}}}function U0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function aD(t,e){return Wi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(t,e){return lc(t,"POST","/v1/accounts:signInWithPassword",qi(t,e))}async function cD(t,e){return Wi(t,"POST","/v1/accounts:sendOobCode",qi(t,e))}async function uD(t,e){return cD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",qi(t,e))}async function hD(t,e){return lc(t,"POST","/v1/accounts:signInWithEmailLink",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Ay{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ll(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ad(e,n,"signInWithPassword",lD);case"emailLink":return dD(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ad(e,i,"signUpPassword",aD);case"emailLink":return hD(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e){return lc(t,"POST","/v1/accounts:signInWithIdp",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="http://localhost";class ms extends Ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=by(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ms(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return po(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,po(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,po(e,n)}buildRequest(){const e={requestUri:fD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Go(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mD(t){const e=Fa(ja(t)).link,n=e?Fa(ja(e)).deep_link_id:null,i=Fa(ja(t)).deep_link_id;return(i?Fa(ja(i)).link:null)||i||n||e||t}class Ry{constructor(e){var n,i,r,s,o,a;const l=Fa(ja(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(i=l.oobCode)!==null&&i!==void 0?i:null,h=pD((r=l.mode)!==null&&r!==void 0?r:null);ne(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=mD(e);try{return new Ry(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ry.parseLink(n);return ne(i,"argument-error"),Ll._fromEmailAndCode(e,i.code,i.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends ib{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends cc{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mi.credential(n,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends cc{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends cc{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ir.credential(n,i)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e){return lc(t,"POST","/v1/accounts:signUp",qi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await _i._fromIdTokenResponse(e,i,r),o=z0(i);return new gs({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=z0(i);return new gs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function z0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends ii{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Rd(e,n,i,r)}}function rb(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(t,s,e,i):s})}async function yD(t,e,n=!1){const i=await Ol(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t,e,n=!1){const{auth:i}=t;if(Hn(i.app))return Promise.reject(bi(i));const r="reauthenticate";try{const s=await Ol(t,rb(i,r,e,t),n);ne(s.idToken,i,"internal-error");const o=Py(s.idToken);ne(o,i,"internal-error");const{sub:a}=o;return ne(t.uid===a,i,"user-mismatch"),gs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(t,e,n=!1){if(Hn(t.app))return Promise.reject(bi(t));const i="signIn",r=await rb(t,i,e),s=await gs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function _D(t,e){return sb(jr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(t){const e=jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wD(t,e,n){const i=jr(t);await Ad(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uD)}async function ED(t,e,n){if(Hn(t.app))return Promise.reject(bi(t));const i=jr(t),o=await Ad(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ob(t),l}),a=await gs._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function TD(t,e,n){return Hn(t.app)?Promise.reject(bi(t)):_D(et(t),Ko.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ob(t),i})}function SD(t,e,n,i){return et(t).onIdTokenChanged(e,n,i)}function ID(t,e,n){return et(t).beforeAuthStateChanged(e,n)}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=1e3,CD=10;class lb extends ab{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);$M()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,CD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},bD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lb.type="LOCAL";const xD=lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends ab{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cb.type="SESSION";const ub=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Rh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await PD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Ny("",20);r.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function AD(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function RD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ND(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OD(){return db()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="firebaseLocalStorageDb",LD=1,Od="firebaseLocalStorage",fb="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nh(t,e){return t.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function MD(){const t=indexedDB.deleteDatabase(hb);return new uc(t).toPromise()}function zm(){const t=indexedDB.open(hb,LD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Od,{keyPath:fb})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await MD(),e(await zm()))})})}async function B0(t,e,n){const i=Nh(t,!0).put({[fb]:e,value:n});return new uc(i).toPromise()}async function DD(t,e){const n=Nh(t,!1).get(e),i=await new uc(n).toPromise();return i===void 0?null:i.value}function $0(t,e){const n=Nh(t,!0).delete(e);return new uc(n).toPromise()}const VD=800,FD=3;class pb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>FD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rh._getInstance(OD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RD(),!this.activeServiceWorker)return;this.sender=new kD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ND()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await B0(e,Nd,"1"),await $0(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>B0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>DD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Nh(r,!1).getAll();return new uc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pb.type="LOCAL";const jD=pb;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t,e){return e?wi(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends Ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,n){return po(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zD(t){return sb(t.auth,new Oy(t),t.bypassAuthState)}function BD(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),vD(n,new Oy(t),t.bypassAuthState)}async function $D(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),yD(n,new Oy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zD;case"linkViaPopup":case"linkViaRedirect":return $D;case"reauthViaPopup":case"reauthViaRedirect":return BD;default:Fn(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new ac(2e3,1e4);class no extends mb{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=Ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qD.get())};e()}}no.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="pendingRedirect",Ou=new Map;class HD extends mb{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const i=await GD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GD(t,e){const n=YD(e),i=QD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function KD(t,e){Ou.set(t._key(),e)}function QD(t){return wi(t._redirectPersistence)}function YD(t){return Nu(WD,t.config.apiKey,t.name)}async function XD(t,e,n=!1){if(Hn(t.app))return Promise.reject(bi(t));const i=jr(t),r=UD(i,e),o=await new HD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=10*60*1e3;class ZD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!gb(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JD&&this.cachedEventUids.clear(),this.cachedEventUids.has(q0(e))}saveEventToCache(e){this.cachedEventUids.add(q0(e)),this.lastProcessedEventTime=Date.now()}}function q0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(t,e={}){return Wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i4=/^https?/;async function r4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t4(t);for(const n of e)try{if(s4(n))return}catch{}Fn(t,"unauthorized-domain")}function s4(t){const e=jm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!i4.test(n))return!1;if(n4.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=new ac(3e4,6e4);function W0(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a4(t){return new Promise((e,n)=>{var i,r,s;function o(){W0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W0(),n(Xn(t,"network-request-failed"))},timeout:o4.get()})}if(!((r=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Jn().gapi)===null||s===void 0)&&s.load)o();else{const a=JM("iframefcb");return Jn()[a]=()=>{gapi.load?o():n(Xn(t,"network-request-failed"))},tb(`${XM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function l4(t){return Lu=Lu||a4(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new ac(5e3,15e3),u4="__/auth/iframe",d4="emulator/auth/iframe",h4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p4(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?xy(e,d4):`https://${t.config.authDomain}/${u4}`,i={apiKey:e.apiKey,appName:t.name,v:Fr},r=f4.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Go(i).slice(1)}`}async function m4(t){const e=await l4(t),n=Jn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:p4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Xn(t,"network-request-failed"),a=Jn().setTimeout(()=>{s(o)},c4.get());function l(){Jn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y4=500,v4=600,_4="_blank",w4="http://localhost";class H0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E4(t,e,n,i=y4,r=v4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},g4),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Ft().toLowerCase();n&&(a=KI(c)?_4:n),HI(c)&&(e=e||w4,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(BM(c)&&a!=="_self")return T4(e||"",a),new H0(null);const h=window.open(e||"",a,d);ne(h,t,"popup-blocked");try{h.focus()}catch{}return new H0(h)}function T4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="__/auth/handler",I4="emulator/auth/handler",b4=encodeURIComponent("fac");async function G0(t,e,n,i,r,s){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Fr,eventId:r};if(e instanceof ib){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Om(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof cc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${b4}=${encodeURIComponent(l)}`:"";return`${C4(t)}?${Go(a).slice(1)}${c}`}function C4({config:t}){return t.emulator?xy(t,I4):`https://${t.authDomain}/${S4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="webStorageSupport";class x4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ub,this._completeRedirectFn=XD,this._overrideRedirectResult=KD}async _openPopup(e,n,i,r){var s;Mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await G0(e,n,i,jm(),r);return E4(e,o,Ny())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await G0(e,n,i,jm(),r);return AD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Mi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await m4(e),i=new ZD(e);return n.register("authEvent",r=>(ne(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fp,{type:fp},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[fp];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZI()||GI()||ky()}}const P4=x4;var K0="@firebase/auth",Q0="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(t){xr(new Oi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eb(t)},c=new KM(i,r,s,l);return iD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xr(new Oi("auth-internal",e=>{const n=jr(e.getProvider("auth").getImmediate());return(i=>new k4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(K0,Q0,A4(t)),_n(K0,Q0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=5*60,O4=PI("authIdTokenMaxAge")||N4;let Y0=null;const L4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>O4)return;const r=n==null?void 0:n.token;Y0!==r&&(Y0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function M4(t=kh()){const e=oc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nD(t,{popupRedirectResolver:P4,persistence:[jD,xD,ub]}),i=PI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=L4(s.toString());ID(n,o,()=>o(n.currentUser)),SD(n,a=>o(a))}}const r=CI("auth");return r&&rD(n,`http://${r}`),n}function D4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}QM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Xn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",D4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");var X0={};const J0="@firebase/database",Z0="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yb="";function V4(t){yb=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Rl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return $i(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new F4(e)}}catch{}return new j4},ts=vb("localStorage"),U4=vb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Ph("@firebase/database"),z4=function(){let t=1;return function(){return t++}}(),_b=function(t){const e=pL(t),n=new uL;n.update(e);const i=n.digest();return _y.encodeByteArray(i)},dc=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=dc.apply(null,i):typeof i=="object"?e+=mt(i):e+=i,e+=" "}return e};let tl=null,eE=!0;const B4=function(t,e){q(!e,"Can't turn on custom loggers persistently."),mo.logLevel=he.VERBOSE,tl=mo.log.bind(mo)},Mt=function(...t){if(eE===!0&&(eE=!1,tl===null&&U4.get("logging_enabled")===!0&&B4()),tl){const e=dc.apply(null,t);tl(e)}},hc=function(t){return function(...e){Mt(t,...e)}},Bm=function(...t){const e="FIREBASE INTERNAL ERROR: "+dc(...t);mo.error(e)},Di=function(...t){const e=`FIREBASE FATAL ERROR: ${dc(...t)}`;throw mo.error(e),new Error(e)},en=function(...t){const e="FIREBASE WARNING: "+dc(...t);mo.warn(e)},$4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&en("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wb=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},q4=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ro="[MIN_NAME]",ys="[MAX_NAME]",Qo=function(t,e){if(t===e)return 0;if(t===Ro||e===ys)return-1;if(e===Ro||t===ys)return 1;{const n=tE(t),i=tE(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},W4=function(t,e){return t===e?0:t<e?-1:1},Ca=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},Ly=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=mt(e[i]),n+=":",n+=Ly(t[e[i]]);return n+="}",n},Eb=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function tn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Tb=function(t){q(!wb(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const d=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},H4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},G4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function K4(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const Q4=new RegExp("^-?(0*)\\d{1,10}$"),Y4=-2147483648,X4=2147483647,tE=function(t){if(Q4.test(t)){const e=Number(t);if(e>=Y4&&e<=X4)return e}return null},Yo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw en("Exception was thrown by user callback.",n),e},Math.floor(0))}},J4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){en(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',en(e)}}class Mu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Mu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="5",Sb="v",Ib="s",bb="r",Cb="f",xb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pb="ls",kb="p",$m="ac",Ab="websocket",Rb="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ts.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ts.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function tV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ob(t,e,n){q(typeof e=="string","typeof type must == string"),q(typeof n=="object","typeof params must == object");let i;if(e===Ab)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Rb)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);tV(t)&&(n.ns=t.namespace);const r=[];return tn(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.counters_={}}incrementCounter(e,n=1){$i(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return GO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp={},mp={};function Dy(t){const e=t.toString();return pp[e]||(pp[e]=new nV),pp[e]}function iV(t,e){const n=t.toString();return mp[n]||(mp[n]=e()),mp[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Yo(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="start",sV="close",oV="pLPCommand",aV="pRTLPCB",Lb="id",Mb="pw",Db="ser",lV="cb",cV="seg",uV="ts",dV="d",hV="dframe",Vb=1870,Fb=30,fV=Vb-Fb,pV=25e3,mV=3e4;class io{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(e),this.stats_=Dy(n),this.urlFn=l=>(this.appCheckToken&&(l[$m]=this.appCheckToken),Ob(n,Rb,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new rV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(mV)),q4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Vy((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===nE)this.id=a,this.password=l;else if(o===sV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[nE]="t",i[Db]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[lV]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Sb]=My,this.transportSessionId&&(i[Ib]=this.transportSessionId),this.lastSessionId&&(i[Pb]=this.lastSessionId),this.applicationId&&(i[kb]=this.applicationId),this.appCheckToken&&(i[$m]=this.appCheckToken),typeof location<"u"&&location.hostname&&xb.test(location.hostname)&&(i[bb]=Cb);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){io.forceAllow_=!0}static forceDisallow(){io.forceDisallow_=!0}static isAvailable(){return io.forceAllow_?!0:!io.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!H4()&&!G4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=II(n),r=Eb(i,fV);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[hV]="t",i[Lb]=e,i[Mb]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Vy{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=z4(),window[oV+this.uniqueCallbackIdentifier]=e,window[aV+this.uniqueCallbackIdentifier]=n,this.myIFrame=Vy.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Mt("frame writing exception"),a.stack&&Mt(a.stack),Mt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Lb]=this.myID,e[Mb]=this.myPW,e[Db]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fb+i.length<=Vb;){const o=this.pendingSegs.shift();i=i+"&"+cV+r+"="+o.seg+"&"+uV+r+"="+o.ts+"&"+dV+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(pV)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=16384,yV=45e3;let Ld=null;typeof MozWebSocket<"u"?Ld=MozWebSocket:typeof WebSocket<"u"&&(Ld=WebSocket);class An{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=Dy(n),this.connURL=An.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[Sb]=My,typeof location<"u"&&location.hostname&&xb.test(location.hostname)&&(o[bb]=Cb),n&&(o[Ib]=n),i&&(o[Pb]=i),r&&(o[$m]=r),s&&(o[kb]=s),Ob(e,Ab,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ts.set("previous_websocket_failure",!0);try{let i;AI(),this.mySock=new Ld(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){An.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Ld!==null&&!An.forceDisallow_}static previouslyFailed(){return ts.isInMemoryStorage||ts.get("previous_websocket_failure")===!0}markConnectionHealthy(){ts.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Rl(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Eb(n,gV);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(yV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}An.responsesRequiredToBeHealthy=2;An.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[io,An]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=An&&An.isAvailable();let i=n&&!An.previouslyFailed();if(e.webSocketOnly&&(n||en("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[An];else{const r=this.transports_=[];for(const s of Ml.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Ml.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ml.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=6e4,_V=5e3,wV=10*1024,EV=100*1024,gp="t",iE="d",TV="s",rE="r",SV="e",sE="o",oE="a",aE="n",lE="p",IV="h";class bV{constructor(e,n,i,r,s,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new Ml(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=nl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>EV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>wV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gp in e){const n=e[gp];n===oE?this.upgradeIfSecondaryHealthy_():n===rE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===sE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ca("t",e),i=Ca("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:oE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:aE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ca("t",e),i=Ca("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ca(gp,e);if(iE in e){const i=e[iE];if(n===IV){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===aE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===TV?this.onConnectionShutdown_(i):n===rE?this.onReset_(i):n===SV?Bm("Server Error: "+i):n===sE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),My!==i&&en("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),nl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(vV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_V))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ts.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends Ub{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ty()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Md}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=32,uE=768;class ke{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Te(){return new ke("")}function le(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Pr(t){return t.pieces_.length-t.pieceNum_}function Ae(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function zb(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function CV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Bb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $b(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function ot(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof ke)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ke(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function Yt(t,e){const n=le(t),i=le(e);if(n===null)return e;if(n===i)return Yt(Ae(t),Ae(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Fy(t,e){if(Pr(t)!==Pr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Rn(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Pr(t)>Pr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class xV{constructor(e,n){this.errorPrefix_=n,this.parts_=Bb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=xh(this.parts_[i]);qb(this)}}function PV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xh(e),qb(t)}function kV(t){const e=t.parts_.pop();t.byteLength_-=xh(e),t.parts_.length>0&&(t.byteLength_-=1)}function qb(t){if(t.byteLength_>uE)throw new Error(t.errorPrefix_+"has a key path longer than "+uE+" bytes ("+t.byteLength_+").");if(t.parts_.length>cE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cE+") or object contains a cycle "+Qr(t))}function Qr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends Ub{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new jy}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=1e3,AV=60*5*1e3,dE=30*1e3,RV=1.3,NV=3e4,OV="server_kill",hE=3;class Ci extends jb{constructor(e,n,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ci.nextPersistentConnectionId_++,this.log_=hc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xa,this.maxReconnectDelay_=AV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!AI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Md.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(mt(s)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Ch,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ci.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&$i(e,"w")){const i=Ao(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();en(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||cL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=dE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=lL(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Bm("Unrecognized action received from server: "+mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NV&&(this.reconnectDelay_=xa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ci.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){q(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new bV(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,m=>{en(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(OV)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&en(h),l())}}}interrupt(e){Mt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Mt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Om(this.interruptReasons_)&&(this.reconnectDelay_=xa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Ly(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new ke(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Mt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hE&&(this.reconnectDelay_=dE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Mt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yb.replace(/\./g,"-")]=1,Ty()?e["framework.cordova"]=1:kI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Md.getInstance().currentlyOnline();return Om(this.interruptReasons_)&&e}}Ci.nextPersistentConnectionId_=0;Ci.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ce(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new ce(Ro,e),r=new ce(Ro,n);return this.compare(i,r)!==0}minPost(){return ce.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;class Wb extends Oh{static get __EMPTY_NODE(){return uu}static set __EMPTY_NODE(e){uu=e}compare(e,n){return Qo(e.name,n.name)}isDefinedOn(e){throw Ho("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ce.MIN}maxPost(){return new ce(ys,uu)}makePost(e,n){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new ce(e,uu)}toString(){return".key"}}const go=new Wb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},sn=class Ua{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Ua.RED,this.left=r??Gn.EMPTY_NODE,this.right=s??Gn.EMPTY_NODE}copy(e,n,i,r,s){return new Ua(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Gn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ua.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ua.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};sn.RED=!0;sn.BLACK=!1;class LV{copy(e,n,i,r,s){return this}insert(e,n,i){return new sn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Gn=class Du{constructor(e,n=Du.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Du(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,sn.BLACK,null,null))}remove(e){return new Du(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sn.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new du(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new du(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new du(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new du(this.root_,null,this.comparator_,!0,e)}};Gn.EMPTY_NODE=new LV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t,e){return Qo(t.name,e.name)}function Uy(t,e){return Qo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm;function DV(t){qm=t}const Hb=function(t){return typeof t=="number"?"number:"+Tb(t):"string:"+t},Gb=function(t){if(t.isLeafNode()){const e=t.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&$i(e,".sv"),"Priority must be a string or number.")}else q(t===qm||t.isEmpty(),"priority of unexpected type.");q(t===qm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fE;class dt{constructor(e,n=dt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Gb(this.priorityNode_)}static set __childrenNodeConstructor(e){fE=e}static get __childrenNodeConstructor(){return fE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new dt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:dt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ue(e)?this:le(e)===".priority"?this.priorityNode_:dt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:dt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=le(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(q(i!==".priority"||Pr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,dt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ae(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Hb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Tb(this.value_):e+=this.value_,this.lazyHash_=_b(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===dt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof dt.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=dt.VALUE_TYPE_ORDER.indexOf(n),s=dt.VALUE_TYPE_ORDER.indexOf(i);return q(r>=0,"Unknown leaf type: "+n),q(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}dt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kb,Qb;function VV(t){Kb=t}function FV(t){Qb=t}class jV extends Oh{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Qo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ce.MIN}maxPost(){return new ce(ys,new dt("[PRIORITY-POST]",Qb))}makePost(e,n){const i=Kb(e);return new ce(n,new dt("[PRIORITY-POST]",i))}toString(){return".priority"}}const He=new jV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=Math.log(2);class zV{constructor(e){const n=s=>parseInt(Math.log(s)/UV,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Dd=function(t,e,n,i){t.sort(e);const r=function(l,c){const d=c-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new sn(f,h.node,sn.BLACK,null,null);{const m=parseInt(d/2,10)+l,v=r(l,m),S=r(m+1,c);return h=t[m],f=n?n(h):h,new sn(f,h.node,sn.BLACK,v,S)}},s=function(l){let c=null,d=null,h=t.length;const f=function(v,S){const x=h-v,_=h;h-=v;const y=r(x+1,_),E=t[x],A=n?n(E):E;m(new sn(A,E.node,S,null,y))},m=function(v){c?(c.left=v,c=v):(d=v,c=v)};for(let v=0;v<l.count;++v){const S=l.nextBitIsOne(),x=Math.pow(2,l.count-(v+1));S?f(x,sn.BLACK):(f(x,sn.BLACK),f(x,sn.RED))}return d},o=new zV(t.length),a=s(o);return new Gn(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yp;const Ds={};class Ei{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return q(Ds&&He,"ChildrenNode.ts has not been loaded"),yp=yp||new Ei({".priority":Ds},{".priority":He}),yp}get(e){const n=Ao(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gn?n:null}hasIndex(e){return $i(this.indexSet_,e.toString())}addIndex(e,n){q(e!==go,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(ce.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Dd(i,e.getCompare()):a=Ds;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new Ei(d,c)}addToIndexes(e,n){const i=bd(this.indexes_,(r,s)=>{const o=Ao(this.indexSet_,s);if(q(o,"Missing index implementation for "+s),r===Ds)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ce.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Dd(a,o.getCompare())}else return Ds;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new ce(e.name,a))),l.insert(e,e.node)}});return new Ei(i,this.indexSet_)}removeFromIndexes(e,n){const i=bd(this.indexes_,r=>{if(r===Ds)return r;{const s=n.get(e.name);return s?r.remove(new ce(e.name,s)):r}});return new Ei(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pa;class ie{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Gb(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pa||(Pa=new ie(new Gn(Uy),null,Ei.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pa}updatePriority(e){return this.children_.isEmpty()?this:new ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Pa:n}}getChild(e){const n=le(e);return n===null?this:this.getImmediateChild(n).getChild(Ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new ce(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?Pa:this.priorityNode_;return new ie(r,o,s)}}updateChild(e,n){const i=le(e);if(i===null)return n;{q(le(e)!==".priority"||Pr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Ae(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(He,(o,a)=>{n[o]=a.val(e),i++,s&&ie.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Hb(this.getPriority().val())+":"),this.forEachChild(He,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":_b(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new ce(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ce(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ce(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,ce.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,ce.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fc?-1:0}withIndex(e){if(e===go||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===go||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(He),r=n.getIterator(He);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===go?null:this.indexMap_.get(e.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class BV extends ie{constructor(){super(new Gn(Uy),ie.EMPTY_NODE,Ei.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ie.EMPTY_NODE}isEmpty(){return!1}}const fc=new BV;Object.defineProperties(ce,{MIN:{value:new ce(Ro,ie.EMPTY_NODE)},MAX:{value:new ce(ys,fc)}});Wb.__EMPTY_NODE=ie.EMPTY_NODE;dt.__childrenNodeConstructor=ie;DV(fc);FV(fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=!0;function wt(t,e=null){if(t===null)return ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new dt(n,wt(e))}if(!(t instanceof Array)&&$V){const n=[];let i=!1;if(tn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=wt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new ce(o,l)))}}),n.length===0)return ie.EMPTY_NODE;const s=Dd(n,MV,o=>o.name,Uy);if(i){const o=Dd(n,He.getCompare());return new ie(s,wt(e),new Ei({".priority":o},{".priority":He}))}else return new ie(s,wt(e),Ei.Default)}else{let n=ie.EMPTY_NODE;return tn(t,(i,r)=>{if($i(t,i)&&i.substring(0,1)!=="."){const s=wt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(wt(e))}}VV(wt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV extends Oh{constructor(e){super(),this.indexPath_=e,q(!ue(e)&&le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Qo(e.name,n.name):s}makePost(e,n){const i=wt(e),r=ie.EMPTY_NODE.updateChild(this.indexPath_,i);return new ce(n,r)}maxPost(){const e=ie.EMPTY_NODE.updateChild(this.indexPath_,fc);return new ce(ys,e)}toString(){return Bb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV extends Oh{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Qo(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ce.MIN}maxPost(){return ce.MAX}makePost(e,n){const i=wt(e);return new ce(n,i)}toString(){return".value"}}const HV=new WV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){return{type:"value",snapshotNode:t}}function No(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Dl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Vl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function GV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(Dl(n,a)):q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(No(n,i)):o.trackChildChange(Vl(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(He,(r,s)=>{n.hasChild(r)||i.trackChildChange(Dl(r,s))}),n.isLeafNode()||n.forEachChild(He,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Vl(r,s,o))}else i.trackChildChange(No(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.indexedFilter_=new zy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fl.getStartPost_(e),this.endPost_=Fl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,o){return this.matches(new ce(n,i))||(i=ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ie.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);const s=this;return n.forEachChild(He,(o,a)=>{s.matches(new ce(o,a))||(r=r.updateImmediateChild(o,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Fl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new ce(n,i))||(i=ie.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ie.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,m)=>h(m,f)}else o=this.index_.getCompare();const a=e;q(a.numChildren()===this.limit_,"");const l=new ce(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=r.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,l);if(d&&!i.isEmpty()&&m>=0)return s!=null&&s.trackChildChange(Vl(n,i,h)),a.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(Dl(n,h));const S=a.updateImmediateChild(n,ie.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(No(f.name,f.node)),S.updateImmediateChild(f.name,f.node)):S}}else return i.isEmpty()?e:d&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Dl(c.name,c.node)),s.trackChildChange(No(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=He}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ro}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ys}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===He}copy(){const e=new By;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function QV(t){return t.loadsAllData()?new zy(t.getIndex()):t.hasLimit()?new KV(t):new Fl(t)}function pE(t){const e={};if(t.isDefault())return e;let n;if(t.index_===He?n="$priority":t.index_===HV?n="$value":t.index_===go?n="$key":(q(t.index_ instanceof qV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=mt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+mt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=mt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function mE(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==He&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends jb{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Vd.getListenId_(e,i),a={};this.listens_[o]=a;const l=pE(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,i),Ao(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,n){const i=Vd.getListenId_(e,n);delete this.listens_[i]}get(e){const n=pE(e._queryParams),i=e._path.toString(),r=new Ch;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Go(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Rl(a.responseText)}catch{en("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&en("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){return{value:null,children:new Map}}function Xb(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=le(e);t.children.has(i)||t.children.set(i,Fd());const r=t.children.get(i);e=Ae(e),Xb(r,e,n)}}function Wm(t,e,n){t.value!==null?n(e,t.value):XV(t,(i,r)=>{const s=new ke(e.toString()+"/"+i);Wm(r,s,n)})}function XV(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&tn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=10*1e3,ZV=30*1e3,e5=5*60*1e3;class t5{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new JV(e);const i=gE+(ZV-gE)*Math.random();nl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;tn(e,(r,s)=>{s>0&&$i(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),nl(this.reportStats_.bind(this),Math.floor(Math.random()*2*e5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Nn||(Nn={}));function Jb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $y(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qy(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Nn.ACK_USER_WRITE,this.source=Jb()}operationForChild(e){if(ue(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ke(e));return new jd(Te(),n,this.revert)}}else return q(le(this.path)===e,"operationForChild called for unrelated child."),new jd(Ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.source=e,this.path=n,this.type=Nn.LISTEN_COMPLETE}operationForChild(e){return ue(this.path)?new jl(this.source,Te()):new jl(this.source,Ae(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Nn.OVERWRITE}operationForChild(e){return ue(this.path)?new vs(this.source,Te(),this.snap.getImmediateChild(e)):new vs(this.source,Ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Nn.MERGE}operationForChild(e){if(ue(this.path)){const n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new vs(this.source,Te(),n.value):new Ul(this.source,Te(),n)}else return q(le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ul(this.source,Ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=le(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function i5(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(GV(o.childName,o.snapshotNode))}),ka(t,r,"child_removed",e,i,n),ka(t,r,"child_added",e,i,n),ka(t,r,"child_moved",s,i,n),ka(t,r,"child_changed",e,i,n),ka(t,r,"value",e,i,n),r}function ka(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>s5(t,a,l)),o.forEach(a=>{const l=r5(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function r5(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function s5(t,e,n){if(e.childName==null||n.childName==null)throw Ho("Should only compare child_ events.");const i=new ce(e.childName,e.snapshotNode),r=new ce(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e){return{eventCache:t,serverCache:e}}function il(t,e,n,i){return Lh(new _s(e,n,i),t.serverCache)}function Zb(t,e,n,i){return Lh(t.eventCache,new _s(e,n,i))}function Hm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ws(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp;const o5=()=>(vp||(vp=new Gn(W4)),vp);class Le{constructor(e,n=o5()){this.value=e,this.children=n}static fromObject(e){let n=new Le(null);return tn(e,(i,r)=>{n=n.set(new ke(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Te(),value:this.value};if(ue(e))return null;{const i=le(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(Ae(e),n);return s!=null?{path:ot(new ke(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{const n=le(e),i=this.children.get(n);return i!==null?i.subtree(Ae(e)):new Le(null)}}set(e,n){if(ue(e))return new Le(n,this.children);{const i=le(e),s=(this.children.get(i)||new Le(null)).set(Ae(e),n),o=this.children.insert(i,s);return new Le(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new Le(null):new Le(null,this.children);{const n=le(e),i=this.children.get(n);if(i){const r=i.remove(Ae(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new Le(null):new Le(this.value,s)}else return this}}get(e){if(ue(e))return this.value;{const n=le(e),i=this.children.get(n);return i?i.get(Ae(e)):null}}setTree(e,n){if(ue(e))return n;{const i=le(e),s=(this.children.get(i)||new Le(null)).setTree(Ae(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new Le(this.value,o)}}fold(e){return this.fold_(Te(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ot(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Te(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(ue(e))return null;{const s=le(e),o=this.children.get(s);return o?o.findOnPath_(Ae(e),ot(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Te(),n)}foreachOnPath_(e,n,i){if(ue(e))return this;{this.value&&i(n,this.value);const r=le(e),s=this.children.get(r);return s?s.foreachOnPath_(Ae(e),ot(n,r),i):new Le(null)}}foreach(e){this.foreach_(Te(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ot(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.writeTree_=e}static empty(){return new Dn(new Le(null))}}function rl(t,e,n){if(ue(e))return new Dn(new Le(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=Yt(r,e);return s=s.updateChild(o,n),new Dn(t.writeTree_.set(r,s))}else{const r=new Le(n),s=t.writeTree_.setTree(e,r);return new Dn(s)}}}function yE(t,e,n){let i=t;return tn(n,(r,s)=>{i=rl(i,ot(e,r),s)}),i}function vE(t,e){if(ue(e))return Dn.empty();{const n=t.writeTree_.setTree(e,new Le(null));return new Dn(n)}}function Gm(t,e){return Ps(t,e)!=null}function Ps(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Yt(n.path,e)):null}function _E(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(He,(i,r)=>{e.push(new ce(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new ce(i,r.value))}),e}function Sr(t,e){if(ue(e))return t;{const n=Ps(t,e);return n!=null?new Dn(new Le(n)):new Dn(t.writeTree_.subtree(e))}}function Km(t){return t.writeTree_.isEmpty()}function Oo(t,e){return eC(Te(),t.writeTree_,e)}function eC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(q(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=eC(ot(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ot(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t,e){return rC(e,t)}function a5(t,e,n,i,r){q(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=rl(t.visibleWrites,e,n)),t.lastWriteId=i}function l5(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function c5(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);q(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&u5(a,i.path)?r=!1:Rn(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return d5(t),!0;if(i.snap)t.visibleWrites=vE(t.visibleWrites,i.path);else{const a=i.children;tn(a,l=>{t.visibleWrites=vE(t.visibleWrites,ot(i.path,l))})}return!0}else return!1}function u5(t,e){if(t.snap)return Rn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Rn(ot(t.path,n),e))return!0;return!1}function d5(t){t.visibleWrites=tC(t.allWrites,h5,Te()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function h5(t){return t.visible}function tC(t,e,n){let i=Dn.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)Rn(n,o)?(a=Yt(n,o),i=rl(i,a,s.snap)):Rn(o,n)&&(a=Yt(o,n),i=rl(i,Te(),s.snap.getChild(a)));else if(s.children){if(Rn(n,o))a=Yt(n,o),i=yE(i,a,s.children);else if(Rn(o,n))if(a=Yt(o,n),ue(a))i=yE(i,Te(),s.children);else{const l=Ao(s.children,le(a));if(l){const c=l.getChild(Ae(a));i=rl(i,Te(),c)}}}else throw Ho("WriteRecord should have .snap or .children")}}return i}function nC(t,e,n,i,r){if(!i&&!r){const s=Ps(t.visibleWrites,e);if(s!=null)return s;{const o=Sr(t.visibleWrites,e);if(Km(o))return n;if(n==null&&!Gm(o,Te()))return null;{const a=n||ie.EMPTY_NODE;return Oo(o,a)}}}else{const s=Sr(t.visibleWrites,e);if(!r&&Km(s))return n;if(!r&&n==null&&!Gm(s,Te()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Rn(c.path,e)||Rn(e,c.path))},a=tC(t.allWrites,o,e),l=n||ie.EMPTY_NODE;return Oo(a,l)}}}function f5(t,e,n){let i=ie.EMPTY_NODE;const r=Ps(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(He,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=Sr(t.visibleWrites,e);return n.forEachChild(He,(o,a)=>{const l=Oo(Sr(s,new ke(o)),a);i=i.updateImmediateChild(o,l)}),_E(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Sr(t.visibleWrites,e);return _E(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function p5(t,e,n,i,r){q(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ot(e,n);if(Gm(t.visibleWrites,s))return null;{const o=Sr(t.visibleWrites,s);return Km(o)?r.getChild(n):Oo(o,r.getChild(n))}}function m5(t,e,n,i){const r=ot(e,n),s=Ps(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=Sr(t.visibleWrites,r);return Oo(o,i.getNode().getImmediateChild(n))}else return null}function g5(t,e){return Ps(t.visibleWrites,e)}function y5(t,e,n,i,r,s,o){let a;const l=Sr(t.visibleWrites,e),c=Ps(l,Te());if(c!=null)a=c;else if(n!=null)a=Oo(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let m=f.getNext();for(;m&&d.length<r;)h(m,i)!==0&&d.push(m),m=f.getNext();return d}else return[]}function v5(){return{visibleWrites:Dn.empty(),allWrites:[],lastWriteId:-1}}function Ud(t,e,n,i){return nC(t.writeTree,t.treePath,e,n,i)}function Hy(t,e){return f5(t.writeTree,t.treePath,e)}function wE(t,e,n,i){return p5(t.writeTree,t.treePath,e,n,i)}function zd(t,e){return g5(t.writeTree,ot(t.treePath,e))}function _5(t,e,n,i,r,s){return y5(t.writeTree,t.treePath,e,n,i,r,s)}function Gy(t,e,n){return m5(t.writeTree,t.treePath,e,n)}function iC(t,e){return rC(ot(t.treePath,e),t.writeTree)}function rC(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),q(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Vl(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Dl(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,No(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Vl(i,e.snapshotNode,r.oldSnap));else throw Ho("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const sC=new E5;class Ky{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new _s(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gy(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ws(this.viewCache_),s=_5(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t){return{filter:t}}function S5(t,e){q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function I5(t,e,n,i,r){const s=new w5;let o,a;if(n.type===Nn.OVERWRITE){const c=n;c.source.fromUser?o=Qm(t,e,c.path,c.snap,i,r,s):(q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ue(c.path),o=Bd(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===Nn.MERGE){const c=n;c.source.fromUser?o=C5(t,e,c.path,c.children,i,r,s):(q(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Ym(t,e,c.path,c.children,i,r,a,s))}else if(n.type===Nn.ACK_USER_WRITE){const c=n;c.revert?o=k5(t,e,c.path,i,r,s):o=x5(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===Nn.LISTEN_COMPLETE)o=P5(t,e,n.path,i,s);else throw Ho("Unknown operation type: "+n.type);const l=s.getChanges();return b5(e,o,l),{viewCache:o,changes:l}}function b5(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Hm(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Yb(Hm(e)))}}function oC(t,e,n,i,r,s){const o=e.eventCache;if(zd(i,n)!=null)return e;{let a,l;if(ue(n))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ws(e),d=c instanceof ie?c:ie.EMPTY_NODE,h=Hy(i,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Ud(i,ws(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=le(n);if(c===".priority"){q(Pr(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=wE(i,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Ae(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=wE(i,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=Gy(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,d,r,s):a=o.getNode()}}return il(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function Bd(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(ue(n))c=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,i);c=d.updateFullNode(l.getNode(),m,null)}else{const m=le(n);if(!l.isCompleteForPath(n)&&Pr(n)>1)return e;const v=Ae(n),x=l.getNode().getImmediateChild(m).updateChild(v,i);m===".priority"?c=d.updatePriority(l.getNode(),x):c=d.updateChild(l.getNode(),m,x,v,sC,null)}const h=Zb(e,c,l.isFullyInitialized()||ue(n),d.filtersNodes()),f=new Ky(r,h,s);return oC(t,h,n,r,f,a)}function Qm(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const d=new Ky(r,e,s);if(ue(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=il(e,c,!0,t.filter.filtersNodes());else{const h=le(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=il(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=Ae(n),m=a.getNode().getImmediateChild(h);let v;if(ue(f))v=i;else{const S=d.getCompleteChild(h);S!=null?zb(f)===".priority"&&S.getChild($b(f)).isEmpty()?v=S:v=S.updateChild(f,i):v=ie.EMPTY_NODE}if(m.equals(v))l=e;else{const S=t.filter.updateChild(a.getNode(),h,v,f,d,o);l=il(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function EE(t,e){return t.eventCache.isCompleteForChild(e)}function C5(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const d=ot(n,l);EE(e,le(d))&&(a=Qm(t,a,d,c,r,s,o))}),i.foreach((l,c)=>{const d=ot(n,l);EE(e,le(d))||(a=Qm(t,a,d,c,r,s,o))}),a}function TE(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Ym(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ue(n)?c=i:c=new Le(null).setTree(n,i);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const m=e.serverCache.getNode().getImmediateChild(h),v=TE(t,m,f);l=Bd(t,l,new ke(h),v,r,s,o,a)}}),c.children.inorderTraversal((h,f)=>{const m=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!m){const v=e.serverCache.getNode().getImmediateChild(h),S=TE(t,v,f);l=Bd(t,l,new ke(h),S,r,s,o,a)}}),l}function x5(t,e,n,i,r,s,o){if(zd(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(ue(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Bd(t,e,n,l.getNode().getChild(n),r,s,a,o);if(ue(n)){let c=new Le(null);return l.getNode().forEachChild(go,(d,h)=>{c=c.set(new ke(d),h)}),Ym(t,e,n,c,r,s,a,o)}else return e}else{let c=new Le(null);return i.foreach((d,h)=>{const f=ot(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),Ym(t,e,n,c,r,s,a,o)}}function P5(t,e,n,i,r){const s=e.serverCache,o=Zb(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered());return oC(t,o,n,i,sC,r)}function k5(t,e,n,i,r,s){let o;if(zd(i,n)!=null)return e;{const a=new Ky(i,e,r),l=e.eventCache.getNode();let c;if(ue(n)||le(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ud(i,ws(e));else{const h=e.serverCache.getNode();q(h instanceof ie,"serverChildren would be complete if leaf node"),d=Hy(i,h)}d=d,c=t.filter.updateFullNode(l,d,s)}else{const d=le(n);let h=Gy(i,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=t.filter.updateChild(l,d,h,Ae(n),a,s):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,ie.EMPTY_NODE,Ae(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ud(i,ws(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||zd(i,Te())!=null,il(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new zy(i.getIndex()),s=QV(i);this.processor_=T5(s);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(ie.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),d=new _s(l,o.isFullyInitialized(),r.filtersNodes()),h=new _s(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Lh(h,d),this.eventGenerator_=new n5(this.query_)}get query(){return this.query_}}function R5(t){return t.viewCache_.serverCache.getNode()}function N5(t,e){const n=ws(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(le(e)).isEmpty())?n.getChild(e):null}function SE(t){return t.eventRegistrations_.length===0}function O5(t,e){t.eventRegistrations_.push(e)}function IE(t,e,n){const i=[];if(n){q(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function bE(t,e,n,i){e.type===Nn.MERGE&&e.source.queryId!==null&&(q(ws(t.viewCache_),"We should always have a full cache before handling merges"),q(Hm(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=I5(t.processor_,r,e,n,i);return S5(t.processor_,s.viewCache),q(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,aC(t,s.changes,s.viewCache.eventCache.getNode(),null)}function L5(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(He,(s,o)=>{i.push(No(s,o))}),n.isFullyInitialized()&&i.push(Yb(n.getNode())),aC(t,i,n.getNode(),e)}function aC(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return i5(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d;class M5{constructor(){this.views=new Map}}function D5(t){q(!$d,"__referenceConstructor has already been defined"),$d=t}function V5(){return q($d,"Reference.ts has not been loaded"),$d}function F5(t){return t.views.size===0}function Qy(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return q(s!=null,"SyncTree gave us an op for an invalid query."),bE(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(bE(o,e,n,i));return s}}function j5(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ud(n,r?i:null),l=!1;a?l=!0:i instanceof ie?(a=Hy(n,i),l=!1):(a=ie.EMPTY_NODE,l=!1);const c=Lh(new _s(a,l,!1),new _s(i,r,!1));return new A5(e,c)}return o}function U5(t,e,n,i,r,s){const o=j5(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),O5(o,n),L5(o,n)}function z5(t,e,n,i){const r=e._queryIdentifier,s=[];let o=[];const a=kr(t);if(r==="default")for(const[l,c]of t.views.entries())o=o.concat(IE(c,n,i)),SE(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(r);l&&(o=o.concat(IE(l,n,i)),SE(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!kr(t)&&s.push(new(V5())(e._repo,e._path)),{removed:s,events:o}}function lC(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function yo(t,e){let n=null;for(const i of t.views.values())n=n||N5(i,e);return n}function cC(t,e){if(e._queryParams.loadsAllData())return Mh(t);{const i=e._queryIdentifier;return t.views.get(i)}}function uC(t,e){return cC(t,e)!=null}function kr(t){return Mh(t)!=null}function Mh(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd;function B5(t){q(!qd,"__referenceConstructor has already been defined"),qd=t}function $5(){return q(qd,"Reference.ts has not been loaded"),qd}let q5=1;class CE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Le(null),this.pendingWriteTree_=v5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dC(t,e,n,i,r){return a5(t.pendingWriteTree_,e,n,i,r),r?pc(t,new vs(Jb(),e,n)):[]}function ns(t,e,n=!1){const i=l5(t.pendingWriteTree_,e);if(c5(t.pendingWriteTree_,e)){let s=new Le(null);return i.snap!=null?s=s.set(Te(),!0):tn(i.children,o=>{s=s.set(new ke(o),!0)}),pc(t,new jd(i.path,s,n))}else return[]}function Dh(t,e,n){return pc(t,new vs($y(),e,n))}function W5(t,e,n){const i=Le.fromObject(n);return pc(t,new Ul($y(),e,i))}function H5(t,e){return pc(t,new jl($y(),e))}function G5(t,e,n){const i=Xy(t,n);if(i){const r=Jy(i),s=r.path,o=r.queryId,a=Yt(s,e),l=new jl(qy(o),a);return Zy(t,s,l)}else return[]}function Xm(t,e,n,i,r=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||uC(o,e))){const l=z5(o,e,n,i);F5(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(s,(f,m)=>kr(m));if(d&&!h){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const m=Y5(f);for(let v=0;v<m.length;++v){const S=m[v],x=S.query,_=pC(t,S);t.listenProvider_.startListening(sl(x),Wd(t,x),_.hashFn,_.onComplete)}}}!h&&c.length>0&&!i&&(d?t.listenProvider_.stopListening(sl(e),null):c.forEach(f=>{const m=t.queryToTagMap.get(Vh(f));t.listenProvider_.stopListening(sl(f),m)}))}X5(t,c)}return a}function K5(t,e,n,i){const r=Xy(t,i);if(r!=null){const s=Jy(r),o=s.path,a=s.queryId,l=Yt(o,e),c=new vs(qy(a),l,n);return Zy(t,o,c)}else return[]}function Q5(t,e,n,i){const r=Xy(t,i);if(r){const s=Jy(r),o=s.path,a=s.queryId,l=Yt(o,e),c=Le.fromObject(n),d=new Ul(qy(a),l,c);return Zy(t,o,d)}else return[]}function xE(t,e,n,i=!1){const r=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(f,m)=>{const v=Yt(f,r);s=s||yo(m,v),o=o||kr(m)});let a=t.syncPointTree_.get(r);a?(o=o||kr(a),s=s||yo(a,Te())):(a=new M5,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((m,v)=>{const S=yo(v,Te());S&&(s=s.updateImmediateChild(m,S))}));const c=uC(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=Vh(e);q(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=J5();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const d=Wy(t.pendingWriteTree_,r);let h=U5(a,e,n,d,s,l);if(!c&&!o&&!i){const f=cC(a,e);h=h.concat(Z5(t,e,f))}return h}function Yy(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Yt(o,e),c=yo(a,l);if(c)return c});return nC(r,e,s,n,!0)}function pc(t,e){return hC(e,t.syncPointTree_,null,Wy(t.pendingWriteTree_,Te()))}function hC(t,e,n,i){if(ue(t.path))return fC(t,e,n,i);{const r=e.get(Te());n==null&&r!=null&&(n=yo(r,Te()));let s=[];const o=le(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=iC(i,o);s=s.concat(hC(a,l,c,d))}return r&&(s=s.concat(Qy(r,t,i,n))),s}}function fC(t,e,n,i){const r=e.get(Te());n==null&&r!=null&&(n=yo(r,Te()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=iC(i,o),d=t.operationForChild(o);d&&(s=s.concat(fC(d,a,l,c)))}),r&&(s=s.concat(Qy(r,t,i,n))),s}function pC(t,e){const n=e.query,i=Wd(t,n);return{hashFn:()=>(R5(e)||ie.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?G5(t,n._path,i):H5(t,n._path);{const s=K4(r,n);return Xm(t,n,null,s)}}}}function Wd(t,e){const n=Vh(e);return t.queryToTagMap.get(n)}function Vh(t){return t._path.toString()+"$"+t._queryIdentifier}function Xy(t,e){return t.tagToQueryMap.get(e)}function Jy(t){const e=t.indexOf("$");return q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function Zy(t,e,n){const i=t.syncPointTree_.get(e);q(i,"Missing sync point for query tag that we're tracking");const r=Wy(t.pendingWriteTree_,e);return Qy(i,n,r,null)}function Y5(t){return t.fold((e,n,i)=>{if(n&&kr(n))return[Mh(n)];{let r=[];return n&&(r=lC(n)),tn(i,(s,o)=>{r=r.concat(o)}),r}})}function sl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new($5())(t._repo,t._path):t}function X5(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Vh(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function J5(){return q5++}function Z5(t,e,n){const i=e._path,r=Wd(t,e),s=pC(t,n),o=t.listenProvider_.startListening(sl(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)q(!kr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,h)=>{if(!ue(c)&&d&&kr(d))return[Mh(d).query];{let f=[];return d&&(f=f.concat(lC(d).map(m=>m.query))),tn(h,(m,v)=>{f=f.concat(v)}),f}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(sl(d),Wd(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ev(n)}node(){return this.node_}}class tv{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ot(this.path_,e);return new tv(this.syncTree_,n)}node(){return Yy(this.syncTree_,this.path_)}}const eF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},PE=function(t,e,n){if(!t||typeof t!="object")return t;if(q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return tF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return nF(t[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},tF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:q(!1,"Unexpected server value: "+t)}},nF=function(t,e,n){t.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&q(!1,"Unexpected increment value: "+i);const r=e.node();if(q(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},iF=function(t,e,n,i){return nv(e,new tv(n,t),i)},mC=function(t,e,n){return nv(t,new ev(e),n)};function nv(t,e,n){const i=t.getPriority().val(),r=PE(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=PE(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new dt(a,wt(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new dt(r))),o.forEachChild(He,(a,l)=>{const c=nv(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function rv(t,e){let n=e instanceof ke?e:new ke(e),i=t,r=le(n);for(;r!==null;){const s=Ao(i.node.children,r)||{children:{},childCount:0};i=new iv(r,i,s),n=Ae(n),r=le(n)}return i}function Xo(t){return t.node.value}function gC(t,e){t.node.value=e,Jm(t)}function yC(t){return t.node.childCount>0}function rF(t){return Xo(t)===void 0&&!yC(t)}function Fh(t,e){tn(t.node.children,(n,i)=>{e(new iv(n,t,i))})}function vC(t,e,n,i){n&&!i&&e(t),Fh(t,r=>{vC(r,e,!0,i)}),n&&i&&e(t)}function sF(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function mc(t){return new ke(t.parent===null?t.name:mc(t.parent)+"/"+t.name)}function Jm(t){t.parent!==null&&oF(t.parent,t.name,t)}function oF(t,e,n){const i=rF(n),r=$i(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Jm(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,Jm(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=/[\[\].#$\/\u0000-\u001F\u007F]/,lF=/[\[\].#$\u0000-\u001F\u007F]/,_p=10*1024*1024,_C=function(t){return typeof t=="string"&&t.length!==0&&!aF.test(t)},wC=function(t){return typeof t=="string"&&t.length!==0&&!lF.test(t)},cF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wC(t)},EC=function(t,e,n,i){i&&e===void 0||sv(Sy(t,"value"),e,n)},sv=function(t,e,n){const i=n instanceof ke?new xV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Qr(i));if(typeof e=="function")throw new Error(t+"contains a function "+Qr(i)+" with contents = "+e.toString());if(wb(e))throw new Error(t+"contains "+e.toString()+" "+Qr(i));if(typeof e=="string"&&e.length>_p/3&&xh(e)>_p)throw new Error(t+"contains a string greater than "+_p+" utf8 bytes "+Qr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(tn(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!_C(o)))throw new Error(t+" contains an invalid key ("+o+") "+Qr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);PV(i,o),sv(t,a,i),kV(i)}),r&&s)throw new Error(t+' contains ".value" child '+Qr(i)+" in addition to actual children.")}},TC=function(t,e,n,i){if(!wC(n))throw new Error(Sy(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},uF=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TC(t,e,n)},ov=function(t,e){if(le(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},dF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_C(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!cF(n))throw new Error(Sy(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function av(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!Fy(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function SC(t,e,n){av(t,n),IC(t,i=>Fy(i,e))}function Vi(t,e,n){av(t,n),IC(t,i=>Rn(i,e)||Rn(e,i))}function IC(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(fF(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();tl&&Mt("event: "+n.toString()),Yo(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF="repo_interrupt",mF=25;class gF{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fd(),this.transactionQueueTree_=new iv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yF(t,e,n){if(t.stats_=Dy(t.repoInfo_),t.forceRestClient_||J4())t.server_=new Vd(t.repoInfo_,(i,r,s,o)=>{kE(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>AE(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Ci(t.repoInfo_,e,(i,r,s,o)=>{kE(t,i,r,s,o)},i=>{AE(t,i)},i=>{vF(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=iV(t.repoInfo_,()=>new t5(t.stats_,t.server_)),t.infoData_=new YV,t.infoSyncTree_=new CE({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Dh(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),cv(t,"connected",!1),t.serverSyncTree_=new CE({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);Vi(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function bC(t){const n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function lv(t){return eF({timestamp:bC(t)})}function kE(t,e,n,i,r){t.dataUpdateCount++;const s=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=bd(n,c=>wt(c));o=Q5(t.serverSyncTree_,s,l,r)}else{const l=wt(n);o=K5(t.serverSyncTree_,s,l,r)}else if(i){const l=bd(n,c=>wt(c));o=W5(t.serverSyncTree_,s,l)}else{const l=wt(n);o=Dh(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=jh(t,s)),Vi(t.eventQueue_,a,o)}function AE(t,e){cv(t,"connected",e),e===!1&&wF(t)}function vF(t,e){tn(e,(n,i)=>{cv(t,n,i)})}function cv(t,e,n){const i=new ke("/.info/"+e),r=wt(n);t.infoData_.updateSnapshot(i,r);const s=Dh(t.infoSyncTree_,i,r);Vi(t.eventQueue_,i,s)}function CC(t){return t.nextWriteId_++}function _F(t,e,n,i,r){uv(t,"set",{path:e.toString(),value:n,priority:i});const s=lv(t),o=wt(n,i),a=Yy(t.serverSyncTree_,e),l=mC(o,a,s),c=CC(t),d=dC(t.serverSyncTree_,e,l,c,!0);av(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const v=f==="ok";v||en("set at "+e+" failed: "+f);const S=ns(t.serverSyncTree_,c,!v);Vi(t.eventQueue_,e,S),SF(t,r,f,m)});const h=NC(t,e);jh(t,h),Vi(t.eventQueue_,h,[])}function wF(t){uv(t,"onDisconnectEvents");const e=lv(t),n=Fd();Wm(t.onDisconnect_,Te(),(r,s)=>{const o=iF(r,s,t.serverSyncTree_,e);Xb(n,r,o)});let i=[];Wm(n,Te(),(r,s)=>{i=i.concat(Dh(t.serverSyncTree_,r,s));const o=NC(t,r);jh(t,o)}),t.onDisconnect_=Fd(),Vi(t.eventQueue_,Te(),i)}function EF(t,e,n){let i;le(e._path)===".info"?i=xE(t.infoSyncTree_,e,n):i=xE(t.serverSyncTree_,e,n),SC(t.eventQueue_,e._path,i)}function xC(t,e,n){let i;le(e._path)===".info"?i=Xm(t.infoSyncTree_,e,n):i=Xm(t.serverSyncTree_,e,n),SC(t.eventQueue_,e._path,i)}function TF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(pF)}function uv(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mt(n,...e)}function SF(t,e,n,i){e&&Yo(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const o=new Error(s);o.code=r,e(o)}})}function PC(t,e,n){return Yy(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function dv(t,e=t.transactionQueueTree_){if(e||Uh(t,e),Xo(e)){const n=AC(t,e);q(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&IF(t,mc(e),n)}else yC(e)&&Fh(e,n=>{dv(t,n)})}function IF(t,e,n){const i=n.map(c=>c.currentWriteId),r=PC(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const d=n[c];q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Yt(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{uv(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(ns(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Uh(t,rv(t.transactionQueueTree_,e)),dv(t,t.transactionQueueTree_),Vi(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)Yo(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{en("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}jh(t,e)}},o)}function jh(t,e){const n=kC(t,e),i=mc(n),r=AC(t,n);return bF(t,r,i),i}function bF(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Yt(n,l.path);let d=!1,h;if(q(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,r=r.concat(ns(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=mF)d=!0,h="maxretry",r=r.concat(ns(t.serverSyncTree_,l.currentWriteId,!0));else{const f=PC(t,l.path,o);l.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){sv("transaction failed: Data returned ",m,l.path);let v=wt(m);typeof m=="object"&&m!=null&&$i(m,".priority")||(v=v.updatePriority(f.getPriority()));const x=l.currentWriteId,_=lv(t),y=mC(v,f,_);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=y,l.currentWriteId=CC(t),o.splice(o.indexOf(x),1),r=r.concat(dC(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),r=r.concat(ns(t.serverSyncTree_,x,!0))}else d=!0,h="nodata",r=r.concat(ns(t.serverSyncTree_,l.currentWriteId,!0))}Vi(t.eventQueue_,n,r),r=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Uh(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Yo(i[a]);dv(t,t.transactionQueueTree_)}function kC(t,e){let n,i=t.transactionQueueTree_;for(n=le(e);n!==null&&Xo(i)===void 0;)i=rv(i,n),e=Ae(e),n=le(e);return i}function AC(t,e){const n=[];return RC(t,e,n),n.sort((i,r)=>i.order-r.order),n}function RC(t,e,n){const i=Xo(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Fh(e,r=>{RC(t,r,n)})}function Uh(t,e){const n=Xo(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,gC(e,n.length>0?n:void 0)}Fh(e,i=>{Uh(t,i)})}function NC(t,e){const n=mc(kC(t,e)),i=rv(t.transactionQueueTree_,e);return sF(i,r=>{wp(t,r)}),wp(t,i),vC(i,r=>{wp(t,r)}),n}function wp(t,e){const n=Xo(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(q(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(q(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(ns(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gC(e,void 0):n.length=s+1,Vi(t.eventQueue_,mc(e),r);for(let o=0;o<i.length;o++)Yo(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function xF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):en(`Invalid query segment '${n}' in query '${t}'`)}return e}const RE=function(t,e){const n=PF(t),i=n.namespace;n.domain==="firebase.com"&&Di(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$4();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Nb(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new ke(n.pathString)}},PF=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(r=CF(t.substring(d,h)));const f=xF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const v=e.indexOf(".");i=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kF=function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let r;const s=new Array(8);for(r=7;r>=0;r--)s[r]=NE.charAt(n%64),n=Math.floor(n/64);q(n===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=NE.charAt(e[r]);return q(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class RF{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ue(this._path)?null:zb(this._path)}get ref(){return new Ur(this._repo,this._path)}get _queryIdentifier(){const e=mE(this._queryParams),n=Ly(e);return n==="{}"?"default":n}get _queryObject(){return mE(this._queryParams)}isEqual(e){if(e=et(e),!(e instanceof hv))return!1;const n=this._repo===e._repo,i=Fy(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+CV(this._path)}}class Ur extends hv{constructor(e,n){super(e,n,new By,!1)}get parent(){const e=$b(this._path);return e===null?null:new Ur(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hd{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ke(e),i=zl(this.ref,e);return new Hd(this._node.getChild(n),i,He)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Hd(r,zl(this.ref,i),He)))}hasChild(e){const n=new ke(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function vo(t,e){return t=et(t),t._checkNotDeleted("ref"),e!==void 0?zl(t._root,e):t._root}function zl(t,e){return t=et(t),le(t._path)===null?uF("child","path",e):TC("child","path",e),new Ur(t._repo,ot(t._path,e))}function OE(t,e){t=et(t),ov("push",t._path),EC("push",e,t._path,!0);const n=bC(t._repo),i=kF(n),r=zl(t,i),s=zl(t,i);let o;return o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function NF(t){return ov("remove",t._path),Gd(t,null)}function Gd(t,e){t=et(t),ov("set",t._path),EC("set",e,t._path,!1);const n=new Ch;return _F(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class zh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new AF("value",this,new Hd(e.snapshotNode,new Ur(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RF(this,e,n):null}matches(e){return e instanceof zh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function OF(t,e,n,i,r){const s=new OC(n,void 0),o=new zh(s);return EF(t._repo,t,o),()=>xC(t._repo,t,o)}function LC(t,e,n,i){return OF(t,"value",e)}function MC(t,e,n){let i=null;const r=n?new OC(n):null;i=new zh(r),xC(t._repo,t,i)}D5(Ur);B5(Ur);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF="FIREBASE_DATABASE_EMULATOR_HOST",Zm={};let MF=!1;function DF(t,e,n,i){t.repoInfo_=new Nb(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function VF(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=RE(s,r),a=o.repoInfo,l;typeof process<"u"&&X0&&(l=X0[LF]),l?(s=`http://${l}?ns=${a.namespace}`,o=RE(s,r),a=o.repoInfo):o.repoInfo.secure;const c=new eV(t.name,t.options,e);dF("Invalid Firebase Database URL",o),ue(o.path)||Di("Database URL must point to the root of a Firebase Database (not including a child path).");const d=jF(a,t,c,new Z4(t.name,n));return new UF(d,t)}function FF(t,e){const n=Zm[e];(!n||n[t.key]!==t)&&Di(`Database ${e}(${t.repoInfo_}) has already been deleted.`),TF(t),delete n[t.key]}function jF(t,e,n,i){let r=Zm[e.name];r||(r={},Zm[e.name]=r);let s=r[t.toURLString()];return s&&Di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gF(t,MF,n,i),r[t.toURLString()]=s,s}class UF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(yF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ur(this._repo,Te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(FF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Di("Cannot call "+e+" on a deleted database.")}}function zF(t=kh(),e){const n=oc(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=wy("database");i&&BF(n,...i)}return n}function BF(t,e,n,i={}){t=et(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Di("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Di('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Mu(Mu.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:Ey(i.mockUserToken,t.app.options.projectId);s=new Mu(o)}DF(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t){V4(Fr),xr(new Oi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return VF(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),_n(J0,Z0,t),_n(J0,Z0,"esm2017")}Ci.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ci.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};$F();var LE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,DC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,T){function b(){}b.prototype=T.prototype,k.D=T.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(I,N,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return T.prototype[N].apply(I,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,T,b){b||(b=0);var I=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)I[N]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(N=0;16>N;++N)I[N]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=k.g[0],b=k.g[1],N=k.g[2];var O=k.g[3],P=T+(O^b&(N^O))+I[0]+3614090360&4294967295;T=b+(P<<7&4294967295|P>>>25),P=O+(N^T&(b^N))+I[1]+3905402710&4294967295,O=T+(P<<12&4294967295|P>>>20),P=N+(b^O&(T^b))+I[2]+606105819&4294967295,N=O+(P<<17&4294967295|P>>>15),P=b+(T^N&(O^T))+I[3]+3250441966&4294967295,b=N+(P<<22&4294967295|P>>>10),P=T+(O^b&(N^O))+I[4]+4118548399&4294967295,T=b+(P<<7&4294967295|P>>>25),P=O+(N^T&(b^N))+I[5]+1200080426&4294967295,O=T+(P<<12&4294967295|P>>>20),P=N+(b^O&(T^b))+I[6]+2821735955&4294967295,N=O+(P<<17&4294967295|P>>>15),P=b+(T^N&(O^T))+I[7]+4249261313&4294967295,b=N+(P<<22&4294967295|P>>>10),P=T+(O^b&(N^O))+I[8]+1770035416&4294967295,T=b+(P<<7&4294967295|P>>>25),P=O+(N^T&(b^N))+I[9]+2336552879&4294967295,O=T+(P<<12&4294967295|P>>>20),P=N+(b^O&(T^b))+I[10]+4294925233&4294967295,N=O+(P<<17&4294967295|P>>>15),P=b+(T^N&(O^T))+I[11]+2304563134&4294967295,b=N+(P<<22&4294967295|P>>>10),P=T+(O^b&(N^O))+I[12]+1804603682&4294967295,T=b+(P<<7&4294967295|P>>>25),P=O+(N^T&(b^N))+I[13]+4254626195&4294967295,O=T+(P<<12&4294967295|P>>>20),P=N+(b^O&(T^b))+I[14]+2792965006&4294967295,N=O+(P<<17&4294967295|P>>>15),P=b+(T^N&(O^T))+I[15]+1236535329&4294967295,b=N+(P<<22&4294967295|P>>>10),P=T+(N^O&(b^N))+I[1]+4129170786&4294967295,T=b+(P<<5&4294967295|P>>>27),P=O+(b^N&(T^b))+I[6]+3225465664&4294967295,O=T+(P<<9&4294967295|P>>>23),P=N+(T^b&(O^T))+I[11]+643717713&4294967295,N=O+(P<<14&4294967295|P>>>18),P=b+(O^T&(N^O))+I[0]+3921069994&4294967295,b=N+(P<<20&4294967295|P>>>12),P=T+(N^O&(b^N))+I[5]+3593408605&4294967295,T=b+(P<<5&4294967295|P>>>27),P=O+(b^N&(T^b))+I[10]+38016083&4294967295,O=T+(P<<9&4294967295|P>>>23),P=N+(T^b&(O^T))+I[15]+3634488961&4294967295,N=O+(P<<14&4294967295|P>>>18),P=b+(O^T&(N^O))+I[4]+3889429448&4294967295,b=N+(P<<20&4294967295|P>>>12),P=T+(N^O&(b^N))+I[9]+568446438&4294967295,T=b+(P<<5&4294967295|P>>>27),P=O+(b^N&(T^b))+I[14]+3275163606&4294967295,O=T+(P<<9&4294967295|P>>>23),P=N+(T^b&(O^T))+I[3]+4107603335&4294967295,N=O+(P<<14&4294967295|P>>>18),P=b+(O^T&(N^O))+I[8]+1163531501&4294967295,b=N+(P<<20&4294967295|P>>>12),P=T+(N^O&(b^N))+I[13]+2850285829&4294967295,T=b+(P<<5&4294967295|P>>>27),P=O+(b^N&(T^b))+I[2]+4243563512&4294967295,O=T+(P<<9&4294967295|P>>>23),P=N+(T^b&(O^T))+I[7]+1735328473&4294967295,N=O+(P<<14&4294967295|P>>>18),P=b+(O^T&(N^O))+I[12]+2368359562&4294967295,b=N+(P<<20&4294967295|P>>>12),P=T+(b^N^O)+I[5]+4294588738&4294967295,T=b+(P<<4&4294967295|P>>>28),P=O+(T^b^N)+I[8]+2272392833&4294967295,O=T+(P<<11&4294967295|P>>>21),P=N+(O^T^b)+I[11]+1839030562&4294967295,N=O+(P<<16&4294967295|P>>>16),P=b+(N^O^T)+I[14]+4259657740&4294967295,b=N+(P<<23&4294967295|P>>>9),P=T+(b^N^O)+I[1]+2763975236&4294967295,T=b+(P<<4&4294967295|P>>>28),P=O+(T^b^N)+I[4]+1272893353&4294967295,O=T+(P<<11&4294967295|P>>>21),P=N+(O^T^b)+I[7]+4139469664&4294967295,N=O+(P<<16&4294967295|P>>>16),P=b+(N^O^T)+I[10]+3200236656&4294967295,b=N+(P<<23&4294967295|P>>>9),P=T+(b^N^O)+I[13]+681279174&4294967295,T=b+(P<<4&4294967295|P>>>28),P=O+(T^b^N)+I[0]+3936430074&4294967295,O=T+(P<<11&4294967295|P>>>21),P=N+(O^T^b)+I[3]+3572445317&4294967295,N=O+(P<<16&4294967295|P>>>16),P=b+(N^O^T)+I[6]+76029189&4294967295,b=N+(P<<23&4294967295|P>>>9),P=T+(b^N^O)+I[9]+3654602809&4294967295,T=b+(P<<4&4294967295|P>>>28),P=O+(T^b^N)+I[12]+3873151461&4294967295,O=T+(P<<11&4294967295|P>>>21),P=N+(O^T^b)+I[15]+530742520&4294967295,N=O+(P<<16&4294967295|P>>>16),P=b+(N^O^T)+I[2]+3299628645&4294967295,b=N+(P<<23&4294967295|P>>>9),P=T+(N^(b|~O))+I[0]+4096336452&4294967295,T=b+(P<<6&4294967295|P>>>26),P=O+(b^(T|~N))+I[7]+1126891415&4294967295,O=T+(P<<10&4294967295|P>>>22),P=N+(T^(O|~b))+I[14]+2878612391&4294967295,N=O+(P<<15&4294967295|P>>>17),P=b+(O^(N|~T))+I[5]+4237533241&4294967295,b=N+(P<<21&4294967295|P>>>11),P=T+(N^(b|~O))+I[12]+1700485571&4294967295,T=b+(P<<6&4294967295|P>>>26),P=O+(b^(T|~N))+I[3]+2399980690&4294967295,O=T+(P<<10&4294967295|P>>>22),P=N+(T^(O|~b))+I[10]+4293915773&4294967295,N=O+(P<<15&4294967295|P>>>17),P=b+(O^(N|~T))+I[1]+2240044497&4294967295,b=N+(P<<21&4294967295|P>>>11),P=T+(N^(b|~O))+I[8]+1873313359&4294967295,T=b+(P<<6&4294967295|P>>>26),P=O+(b^(T|~N))+I[15]+4264355552&4294967295,O=T+(P<<10&4294967295|P>>>22),P=N+(T^(O|~b))+I[6]+2734768916&4294967295,N=O+(P<<15&4294967295|P>>>17),P=b+(O^(N|~T))+I[13]+1309151649&4294967295,b=N+(P<<21&4294967295|P>>>11),P=T+(N^(b|~O))+I[4]+4149444226&4294967295,T=b+(P<<6&4294967295|P>>>26),P=O+(b^(T|~N))+I[11]+3174756917&4294967295,O=T+(P<<10&4294967295|P>>>22),P=N+(T^(O|~b))+I[2]+718787259&4294967295,N=O+(P<<15&4294967295|P>>>17),P=b+(O^(N|~T))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+T&4294967295,k.g[1]=k.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+O&4294967295}i.prototype.u=function(k,T){T===void 0&&(T=k.length);for(var b=T-this.blockSize,I=this.B,N=this.h,O=0;O<T;){if(N==0)for(;O<=b;)r(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<T;)if(I[N++]=k.charCodeAt(O++),N==this.blockSize){r(this,I),N=0;break}}else for(;O<T;)if(I[N++]=k[O++],N==this.blockSize){r(this,I),N=0;break}}this.h=N,this.o+=T},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var T=1;T<k.length-8;++T)k[T]=0;var b=8*this.o;for(T=k.length-8;T<k.length;++T)k[T]=b&255,b/=256;for(this.u(k),k=Array(16),T=b=0;4>T;++T)for(var I=0;32>I;I+=8)k[b++]=this.g[T]>>>I&255;return k};function s(k,T){var b=a;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=T(k)}function o(k,T){this.h=T;for(var b=[],I=!0,N=k.length-1;0<=N;N--){var O=k[N]|0;I&&O==T||(b[N]=O,I=!1)}this.g=b}var a={};function l(k){return-128<=k&&128>k?s(k,function(T){return new o([T|0],0>T?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return h;if(0>k)return x(c(-k));for(var T=[],b=1,I=0;k>=b;I++)T[I]=k/b|0,b*=4294967296;return new o(T,0)}function d(k,T){if(k.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k.charAt(0)=="-")return x(d(k.substring(1),T));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(T,8)),I=h,N=0;N<k.length;N+=8){var O=Math.min(8,k.length-N),P=parseInt(k.substring(N,N+O),T);8>O?(O=c(Math.pow(T,O)),I=I.j(O).add(c(P))):(I=I.j(b),I=I.add(c(P)))}return I}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-x(this).m();for(var k=0,T=1,b=0;b<this.g.length;b++){var I=this.i(b);k+=(0<=I?I:4294967296+I)*T,T*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(v(this))return"0";if(S(this))return"-"+x(this).toString(k);for(var T=c(Math.pow(k,6)),b=this,I="";;){var N=A(b,T).g;b=_(b,N.j(T));var O=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=N,v(b))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function v(k){if(k.h!=0)return!1;for(var T=0;T<k.g.length;T++)if(k.g[T]!=0)return!1;return!0}function S(k){return k.h==-1}t.l=function(k){return k=_(this,k),S(k)?-1:v(k)?0:1};function x(k){for(var T=k.g.length,b=[],I=0;I<T;I++)b[I]=~k.g[I];return new o(b,~k.h).add(f)}t.abs=function(){return S(this)?x(this):this},t.add=function(k){for(var T=Math.max(this.g.length,k.g.length),b=[],I=0,N=0;N<=T;N++){var O=I+(this.i(N)&65535)+(k.i(N)&65535),P=(O>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);I=P>>>16,O&=65535,P&=65535,b[N]=P<<16|O}return new o(b,b[b.length-1]&-2147483648?-1:0)};function _(k,T){return k.add(x(T))}t.j=function(k){if(v(this)||v(k))return h;if(S(this))return S(k)?x(this).j(x(k)):x(x(this).j(k));if(S(k))return x(this.j(x(k)));if(0>this.l(m)&&0>k.l(m))return c(this.m()*k.m());for(var T=this.g.length+k.g.length,b=[],I=0;I<2*T;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var N=0;N<k.g.length;N++){var O=this.i(I)>>>16,P=this.i(I)&65535,$=k.i(N)>>>16,re=k.i(N)&65535;b[2*I+2*N]+=P*re,y(b,2*I+2*N),b[2*I+2*N+1]+=O*re,y(b,2*I+2*N+1),b[2*I+2*N+1]+=P*$,y(b,2*I+2*N+1),b[2*I+2*N+2]+=O*$,y(b,2*I+2*N+2)}for(I=0;I<T;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=T;I<2*T;I++)b[I]=0;return new o(b,0)};function y(k,T){for(;(k[T]&65535)!=k[T];)k[T+1]+=k[T]>>>16,k[T]&=65535,T++}function E(k,T){this.g=k,this.h=T}function A(k,T){if(v(T))throw Error("division by zero");if(v(k))return new E(h,h);if(S(k))return T=A(x(k),T),new E(x(T.g),x(T.h));if(S(T))return T=A(k,x(T)),new E(x(T.g),T.h);if(30<k.g.length){if(S(k)||S(T))throw Error("slowDivide_ only works with positive integers.");for(var b=f,I=T;0>=I.l(k);)b=L(b),I=L(I);var N=D(b,1),O=D(I,1);for(I=D(I,2),b=D(b,2);!v(I);){var P=O.add(I);0>=P.l(k)&&(N=N.add(b),O=P),I=D(I,1),b=D(b,1)}return T=_(k,N.j(T)),new E(N,T)}for(N=h;0<=k.l(T);){for(b=Math.max(1,Math.floor(k.m()/T.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=c(b),P=O.j(T);S(P)||0<P.l(k);)b-=I,O=c(b),P=O.j(T);v(O)&&(O=f),N=N.add(O),k=_(k,P)}return new E(N,k)}t.A=function(k){return A(this,k).h},t.and=function(k){for(var T=Math.max(this.g.length,k.g.length),b=[],I=0;I<T;I++)b[I]=this.i(I)&k.i(I);return new o(b,this.h&k.h)},t.or=function(k){for(var T=Math.max(this.g.length,k.g.length),b=[],I=0;I<T;I++)b[I]=this.i(I)|k.i(I);return new o(b,this.h|k.h)},t.xor=function(k){for(var T=Math.max(this.g.length,k.g.length),b=[],I=0;I<T;I++)b[I]=this.i(I)^k.i(I);return new o(b,this.h^k.h)};function L(k){for(var T=k.g.length+1,b=[],I=0;I<T;I++)b[I]=k.i(I)<<1|k.i(I-1)>>>31;return new o(b,k.h)}function D(k,T){var b=T>>5;T%=32;for(var I=k.g.length-b,N=[],O=0;O<I;O++)N[O]=0<T?k.i(O+b)>>>T|k.i(O+b+1)<<32-T:k.i(O+b);return new o(N,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,DC=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,as=o}).apply(typeof LE<"u"?LE:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VC,FC,za,jC,Vu,eg,UC,zC,BC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var g=i;u=u.split(".");for(var C=0;C<u.length-1;C++){var V=u[C];if(!(V in g))break e;g=g[V]}u=u[u.length-1],C=g[u],p=p(C),p!=C&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var g=0,C=!1,V={next:function(){if(!C&&g<u.length){var F=g++;return{value:p(F,u[F]),done:!1}}return C=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(u){return u||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,g){return u.call.apply(u.bind,arguments)}function h(u,p,g){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,C),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function f(u,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function v(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(C,V,F){for(var W=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)W[xe-2]=arguments[xe];return p.prototype[V].apply(C,W)}}function S(u){const p=u.length;if(0<p){const g=Array(p);for(let C=0;C<p;C++)g[C]=u[C];return g}return[]}function x(u,p){for(let g=1;g<arguments.length;g++){const C=arguments[g];if(l(C)){const V=u.length||0,F=C.length||0;u.length=V+F;for(let W=0;W<F;W++)u[V+W]=C[W]}else u.push(C)}}class _{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var L=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function D(u,p,g){for(const C in u)p.call(g,u[C],C,u)}function k(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function T(u){const p={};for(const g in u)p[g]=u[g];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,p){let g,C;for(let V=1;V<arguments.length;V++){C=arguments[V];for(g in C)u[g]=C[g];for(let F=0;F<b.length;F++)g=b[F],Object.prototype.hasOwnProperty.call(C,g)&&(u[g]=C[g])}}function N(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function P(){var u=K;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ${constructor(){this.h=this.g=null}add(p,g){const C=re.get();C.set(p,g),this.h?this.h.next=C:this.g=C,this.h=C}}var re=new _(()=>new Ce,u=>u.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let it,j=!1,K=new $,Q=()=>{const u=a.Promise.resolve(void 0);it=()=>{u.then(Ee)}};var Ee=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(g){O(g)}var p=re;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}j=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ke(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var ri=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function si(u,p){if(Ke.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(L){e:{try{A(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:oi[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&si.aa.h.call(this)}}v(si,Ke);var oi={2:"touch",3:"pen",4:"mouse"};si.prototype.h=function(){si.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ai="closure_listenable_"+(1e6*Math.random()|0),XP=0;function JP(u,p,g,C,V){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!C,this.ha=V,this.key=++XP,this.da=this.fa=!1}function xc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pc(u){this.src=u,this.g={},this.h=0}Pc.prototype.add=function(u,p,g,C,V){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var W=sf(u,p,C,V);return-1<W?(p=u[W],g||(p.fa=!1)):(p=new JP(p,this.src,F,!!C,V),p.fa=g,u.push(p)),p};function rf(u,p){var g=p.type;if(g in u.g){var C=u.g[g],V=Array.prototype.indexOf.call(C,p,void 0),F;(F=0<=V)&&Array.prototype.splice.call(C,V,1),F&&(xc(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function sf(u,p,g,C){for(var V=0;V<u.length;++V){var F=u[V];if(!F.da&&F.listener==p&&F.capture==!!g&&F.ha==C)return V}return-1}var of="closure_lm_"+(1e6*Math.random()|0),af={};function e_(u,p,g,C,V){if(Array.isArray(p)){for(var F=0;F<p.length;F++)e_(u,p[F],g,C,V);return null}return g=i_(g),u&&u[ai]?u.K(p,g,c(C)?!!C.capture:!!C,V):ZP(u,p,g,!1,C,V)}function ZP(u,p,g,C,V,F){if(!p)throw Error("Invalid event type");var W=c(V)?!!V.capture:!!V,xe=cf(u);if(xe||(u[of]=xe=new Pc(u)),g=xe.add(p,g,C,W,F),g.proxy)return g;if(C=ek(),g.proxy=C,C.src=u,C.listener=g,u.addEventListener)ri||(V=W),V===void 0&&(V=!1),u.addEventListener(p.toString(),C,V);else if(u.attachEvent)u.attachEvent(n_(p.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ek(){function u(g){return p.call(u.src,u.listener,g)}const p=tk;return u}function t_(u,p,g,C,V){if(Array.isArray(p))for(var F=0;F<p.length;F++)t_(u,p[F],g,C,V);else C=c(C)?!!C.capture:!!C,g=i_(g),u&&u[ai]?(u=u.i,p=String(p).toString(),p in u.g&&(F=u.g[p],g=sf(F,g,C,V),-1<g&&(xc(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete u.g[p],u.h--)))):u&&(u=cf(u))&&(p=u.g[p.toString()],u=-1,p&&(u=sf(p,g,C,V)),(g=-1<u?p[u]:null)&&lf(g))}function lf(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ai])rf(p.i,u);else{var g=u.type,C=u.proxy;p.removeEventListener?p.removeEventListener(g,C,u.capture):p.detachEvent?p.detachEvent(n_(g),C):p.addListener&&p.removeListener&&p.removeListener(C),(g=cf(p))?(rf(g,u),g.h==0&&(g.src=null,p[of]=null)):xc(u)}}}function n_(u){return u in af?af[u]:af[u]="on"+u}function tk(u,p){if(u.da)u=!0;else{p=new si(p,this);var g=u.listener,C=u.ha||u.src;u.fa&&lf(u),u=g.call(C,p)}return u}function cf(u){return u=u[of],u instanceof Pc?u:null}var uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function i_(u){return typeof u=="function"?u:(u[uf]||(u[uf]=function(p){return u.handleEvent(p)}),u[uf])}function Ct(){ye.call(this),this.i=new Pc(this),this.M=this,this.F=null}v(Ct,ye),Ct.prototype[ai]=!0,Ct.prototype.removeEventListener=function(u,p,g,C){t_(this,u,p,g,C)};function jt(u,p){var g,C=u.F;if(C)for(g=[];C;C=C.F)g.push(C);if(u=u.M,C=p.type||p,typeof p=="string")p=new Ke(p,u);else if(p instanceof Ke)p.target=p.target||u;else{var V=p;p=new Ke(C,u),I(p,V)}if(V=!0,g)for(var F=g.length-1;0<=F;F--){var W=p.g=g[F];V=kc(W,C,!0,p)&&V}if(W=p.g=u,V=kc(W,C,!0,p)&&V,V=kc(W,C,!1,p)&&V,g)for(F=0;F<g.length;F++)W=p.g=g[F],V=kc(W,C,!1,p)&&V}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],C=0;C<g.length;C++)xc(g[C]);delete u.g[p],u.h--}}this.F=null},Ct.prototype.K=function(u,p,g,C){return this.i.add(String(u),p,!1,g,C)},Ct.prototype.L=function(u,p,g,C){return this.i.add(String(u),p,!0,g,C)};function kc(u,p,g,C){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,F=0;F<p.length;++F){var W=p[F];if(W&&!W.da&&W.capture==g){var xe=W.listener,yt=W.ha||W.src;W.fa&&rf(u.i,W),V=xe.call(yt,C)!==!1&&V}}return V&&!C.defaultPrevented}function r_(u,p,g){if(typeof u=="function")g&&(u=f(u,g));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function s_(u){u.g=r_(()=>{u.g=null,u.i&&(u.i=!1,s_(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class nk extends ye{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:s_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ia(u){ye.call(this),this.h=u,this.g={}}v(ia,ye);var o_=[];function a_(u){D(u.g,function(p,g){this.g.hasOwnProperty(g)&&lf(p)},u),u.g={}}ia.prototype.N=function(){ia.aa.N.call(this),a_(this)},ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var df=a.JSON.stringify,ik=a.JSON.parse,rk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function hf(){}hf.prototype.h=null;function l_(u){return u.h||(u.h=u.i())}function c_(){}var ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ff(){Ke.call(this,"d")}v(ff,Ke);function pf(){Ke.call(this,"c")}v(pf,Ke);var zr={},u_=null;function Ac(){return u_=u_||new Ct}zr.La="serverreachability";function d_(u){Ke.call(this,zr.La,u)}v(d_,Ke);function sa(u){const p=Ac();jt(p,new d_(p))}zr.STAT_EVENT="statevent";function h_(u,p){Ke.call(this,zr.STAT_EVENT,u),this.stat=p}v(h_,Ke);function Ut(u){const p=Ac();jt(p,new h_(p,u))}zr.Ma="timingevent";function f_(u,p){Ke.call(this,zr.Ma,u),this.size=p}v(f_,Ke);function oa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function aa(){this.g=!0}aa.prototype.xa=function(){this.g=!1};function sk(u,p,g,C,V,F){u.info(function(){if(u.g)if(F)for(var W="",xe=F.split("&"),yt=0;yt<xe.length;yt++){var ve=xe[yt].split("=");if(1<ve.length){var xt=ve[0];ve=ve[1];var Pt=xt.split("_");W=2<=Pt.length&&Pt[1]=="type"?W+(xt+"="+ve+"&"):W+(xt+"=redacted&")}}else W=null;else W=F;return"XMLHTTP REQ ("+C+") [attempt "+V+"]: "+p+`
`+g+`
`+W})}function ok(u,p,g,C,V,F,W){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+V+"]: "+p+`
`+g+`
`+F+" "+W})}function Rs(u,p,g,C){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+lk(u,g)+(C?" "+C:"")})}function ak(u,p){u.info(function(){return"TIMEOUT: "+p})}aa.prototype.info=function(){};function lk(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var C=g[u];if(!(2>C.length)){var V=C[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return df(g)}catch{return p}}var Rc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},p_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mf;function Nc(){}v(Nc,hf),Nc.prototype.g=function(){return new XMLHttpRequest},Nc.prototype.i=function(){return{}},mf=new Nc;function Hi(u,p,g,C){this.j=u,this.i=p,this.l=g,this.R=C||1,this.U=new ia(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new m_}function m_(){this.i=null,this.g="",this.h=!1}var g_={},gf={};function yf(u,p,g){u.L=1,u.v=Dc(li(p)),u.m=g,u.P=!0,y_(u,null)}function y_(u,p){u.F=Date.now(),Oc(u),u.A=li(u.v);var g=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),R_(g.i,"t",C),u.C=0,g=u.j.J,u.h=new m_,u.g=Q_(u.j,g?p:null,!u.m),0<u.O&&(u.M=new nk(f(u.Y,u,u.g),u.O)),p=u.U,g=u.g,C=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(o_[0]=V.toString()),V=o_);for(var F=0;F<V.length;F++){var W=e_(g,V[F],C||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),sa(),sk(u.i,u.u,u.A,u.l,u.R,u.m)}Hi.prototype.ca=function(u){u=u.target;const p=this.M;p&&ci(u)==3?p.j():this.Y(u)},Hi.prototype.Y=function(u){try{if(u==this.g)e:{const Pt=ci(this.g);var p=this.g.Ba();const Ls=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||F_(this.g)))){this.J||Pt!=4||p==7||(p==8||0>=Ls?sa(3):sa(2)),vf(this);var g=this.g.Z();this.X=g;t:if(v_(this)){var C=F_(this.g);u="";var V=C.length,F=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),la(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(C[p],{stream:!(F&&p==V-1)});C.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,ok(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,yt=this.g;if((xe=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(xe)){var ve=xe;break t}}ve=null}if(g=ve)Rs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_f(this,g);else{this.o=!1,this.s=3,Ut(12),Br(this),la(this);break e}}if(this.P){g=!0;let In;for(;!this.J&&this.C<W.length;)if(In=ck(this,W),In==gf){Pt==4&&(this.s=4,Ut(14),g=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(In==g_){this.s=4,Ut(15),Rs(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else Rs(this.i,this.l,In,null),_f(this,In);if(v_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||W.length!=0||this.h.h||(this.s=1,Ut(16),g=!1),this.o=this.o&&g,!g)Rs(this.i,this.l,W,"[Invalid Chunked Response]"),Br(this),la(this);else if(0<W.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),bf(xt),xt.M=!0,Ut(11))}}else Rs(this.i,this.l,W,null),_f(this,W);Pt==4&&Br(this),this.o&&!this.J&&(Pt==4?W_(this.j,this):(this.o=!1,Oc(this)))}else Ck(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Br(this),la(this)}}}catch{}finally{}};function v_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ck(u,p){var g=u.C,C=p.indexOf(`
`,g);return C==-1?gf:(g=Number(p.substring(g,C)),isNaN(g)?g_:(C+=1,C+g>p.length?gf:(p=p.slice(C,C+g),u.C=C+g,p)))}Hi.prototype.cancel=function(){this.J=!0,Br(this)};function Oc(u){u.S=Date.now()+u.I,__(u,u.I)}function __(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=oa(f(u.ba,u),p)}function vf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ak(this.i,this.A),this.L!=2&&(sa(),Ut(17)),Br(this),this.s=2,la(this)):__(this,this.S-u)};function la(u){u.j.G==0||u.J||W_(u.j,u)}function Br(u){vf(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,a_(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function _f(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||wf(g.h,u))){if(!u.K&&wf(g.h,u)&&g.G==3){try{var C=g.Da.g.parse(p)}catch{C=null}if(Array.isArray(C)&&C.length==3){var V=C;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)zc(g),jc(g);else break e;If(g),Ut(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=oa(f(g.Za,g),6e3));if(1>=T_(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else qr(g,11)}else if((u.K||g.g==u)&&zc(g),!y(p))for(V=g.Da.g.parse(p),p=0;p<V.length;p++){let ve=V[p];if(g.T=ve[0],ve=ve[1],g.G==2)if(ve[0]=="c"){g.K=ve[1],g.ia=ve[2];const xt=ve[3];xt!=null&&(g.la=xt,g.j.info("VER="+g.la));const Pt=ve[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const Ls=ve[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(C=1.5*Ls,g.L=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;const In=u.g;if(In){const $c=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($c){var F=C.h;F.g||$c.indexOf("spdy")==-1&&$c.indexOf("quic")==-1&&$c.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ef(F,F.h),F.h=null))}if(C.D){const Cf=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Cf&&(C.ya=Cf,Ne(C.I,C.D,Cf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),C=g;var W=u;if(C.qa=K_(C,C.J?C.ia:null,C.W),W.K){S_(C.h,W);var xe=W,yt=C.L;yt&&(xe.I=yt),xe.B&&(vf(xe),Oc(xe)),C.g=W}else $_(C);0<g.i.length&&Uc(g)}else ve[0]!="stop"&&ve[0]!="close"||qr(g,7);else g.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?qr(g,7):Sf(g):ve[0]!="noop"&&g.l&&g.l.ta(ve),g.v=0)}}sa(4)}catch{}}var uk=class{constructor(u,p){this.g=u,this.map=p}};function w_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function E_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function T_(u){return u.h?1:u.g?u.g.size:0}function wf(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ef(u,p){u.g?u.g.add(p):u.h=p}function S_(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}w_.prototype.cancel=function(){if(this.i=I_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function I_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return S(u.i)}function dk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,C=0;C<g;C++)p.push(u[C]);return p}p=[],g=0;for(C in u)p[g++]=u[C];return p}function hk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const C in u)p[g++]=C;return p}}}function b_(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=hk(u),C=dk(u),V=C.length,F=0;F<V;F++)p.call(void 0,C[F],g&&g[F],u)}var C_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fk(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var C=u[g].indexOf("="),V=null;if(0<=C){var F=u[g].substring(0,C);V=u[g].substring(C+1)}else F=u[g];p(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function $r(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof $r){this.h=u.h,Lc(this,u.j),this.o=u.o,this.g=u.g,Mc(this,u.s),this.l=u.l;var p=u.i,g=new da;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),x_(this,g),this.m=u.m}else u&&(p=String(u).match(C_))?(this.h=!1,Lc(this,p[1]||"",!0),this.o=ca(p[2]||""),this.g=ca(p[3]||"",!0),Mc(this,p[4]),this.l=ca(p[5]||"",!0),x_(this,p[6]||"",!0),this.m=ca(p[7]||"")):(this.h=!1,this.i=new da(null,this.h))}$r.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ua(p,P_,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ua(p,P_,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ua(g,g.charAt(0)=="/"?gk:mk,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ua(g,vk)),u.join("")};function li(u){return new $r(u)}function Lc(u,p,g){u.j=g?ca(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Mc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function x_(u,p,g){p instanceof da?(u.i=p,_k(u.i,u.h)):(g||(p=ua(p,yk)),u.i=new da(p,u.h))}function Ne(u,p,g){u.i.set(p,g)}function Dc(u){return Ne(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ca(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ua(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,pk),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var P_=/[#\/\?@]/g,mk=/[#\?:]/g,gk=/[#\?]/g,yk=/[#\?@]/g,vk=/#/g;function da(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Gi(u){u.g||(u.g=new Map,u.h=0,u.i&&fk(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=da.prototype,t.add=function(u,p){Gi(this),this.i=null,u=Ns(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function k_(u,p){Gi(u),p=Ns(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function A_(u,p){return Gi(u),p=Ns(u,p),u.g.has(p)}t.forEach=function(u,p){Gi(this),this.g.forEach(function(g,C){g.forEach(function(V){u.call(p,V,C,this)},this)},this)},t.na=function(){Gi(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let C=0;C<p.length;C++){const V=u[C];for(let F=0;F<V.length;F++)g.push(p[C])}return g},t.V=function(u){Gi(this);let p=[];if(typeof u=="string")A_(this,u)&&(p=p.concat(this.g.get(Ns(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return Gi(this),this.i=null,u=Ns(this,u),A_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function R_(u,p,g){k_(u,p),0<g.length&&(u.i=null,u.g.set(Ns(u,p),S(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var C=p[g];const F=encodeURIComponent(String(C)),W=this.V(C);for(C=0;C<W.length;C++){var V=F;W[C]!==""&&(V+="="+encodeURIComponent(String(W[C]))),u.push(V)}}return this.i=u.join("&")};function Ns(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function _k(u,p){p&&!u.j&&(Gi(u),u.i=null,u.g.forEach(function(g,C){var V=C.toLowerCase();C!=V&&(k_(this,C),R_(this,V,g))},u)),u.j=p}function wk(u,p){const g=new aa;if(a.Image){const C=new Image;C.onload=m(Ki,g,"TestLoadImage: loaded",!0,p,C),C.onerror=m(Ki,g,"TestLoadImage: error",!1,p,C),C.onabort=m(Ki,g,"TestLoadImage: abort",!1,p,C),C.ontimeout=m(Ki,g,"TestLoadImage: timeout",!1,p,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else p(!1)}function Ek(u,p){const g=new aa,C=new AbortController,V=setTimeout(()=>{C.abort(),Ki(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:C.signal}).then(F=>{clearTimeout(V),F.ok?Ki(g,"TestPingServer: ok",!0,p):Ki(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Ki(g,"TestPingServer: error",!1,p)})}function Ki(u,p,g,C,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),C(g)}catch{}}function Tk(){this.g=new rk}function Sk(u,p,g){const C=g||"";try{b_(u,function(V,F){let W=V;c(V)&&(W=df(V)),p.push(C+F+"="+encodeURIComponent(W))})}catch(V){throw p.push(C+"type="+encodeURIComponent("_badmap")),V}}function ha(u){this.l=u.Ub||null,this.j=u.eb||!1}v(ha,hf),ha.prototype.g=function(){return new Vc(this.l,this.j)},ha.prototype.i=function(u){return function(){return u}}({});function Vc(u,p){Ct.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Vc,Ct),t=Vc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,pa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;N_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function N_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?fa(this):pa(this),this.readyState==3&&N_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,fa(this))},t.Qa=function(u){this.g&&(this.response=u,fa(this))},t.ga=function(){this.g&&fa(this)};function fa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,pa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function pa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function O_(u){let p="";return D(u,function(g,C){p+=C,p+=":",p+=g,p+=`\r
`}),p}function Tf(u,p,g){e:{for(C in g){var C=!1;break e}C=!0}C||(g=O_(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ne(u,p,g))}function $e(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v($e,Ct);var Ik=/^https?$/i,bk=["POST","PUT"];t=$e.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mf.g(),this.v=this.o?l_(this.o):l_(mf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){L_(this,F);return}if(u=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var V in C)g.set(V,C[V]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const F of C.keys())g.set(F,C.get(F));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(bk,p,void 0))||C||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,W]of g)this.g.setRequestHeader(F,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{V_(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){L_(this,F)}};function L_(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,M_(u),Fc(u)}function M_(u){u.A||(u.A=!0,jt(u,"complete"),jt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,jt(this,"complete"),jt(this,"abort"),Fc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fc(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?D_(this):this.bb())},t.bb=function(){D_(this)};function D_(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ci(u)!=4||u.Z()!=2)){if(u.u&&ci(u)==4)r_(u.Ea,0,u);else if(jt(u,"readystatechange"),ci(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var C;if(C=W===0){var V=String(u.D).match(C_)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),C=!Ik.test(V?V.toLowerCase():"")}g=C}if(g)jt(u,"complete"),jt(u,"success");else{u.m=6;try{var F=2<ci(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",M_(u)}}finally{Fc(u)}}}}function Fc(u,p){if(u.g){V_(u);const g=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||jt(u,"ready");try{g.onreadystatechange=C}catch{}}}function V_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ci(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),ik(p)}};function F_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ck(u){const p={};u=(u.g&&2<=ci(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(y(u[C]))continue;var g=N(u[C]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=p[V]||[];p[V]=F,F.push(g)}k(p,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function j_(u){this.Aa=0,this.i=[],this.j=new aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,u),this.cb=ma("retryDelaySeedMs",1e4,u),this.Wa=ma("forwardChannelMaxRetries",2,u),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new w_(u&&u.concurrentRequestLimit),this.Da=new Tk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=j_.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,C){Ut(0),this.W=u,this.H=p||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.I=K_(this,null,this.W),Uc(this)};function Sf(u){if(U_(u),u.G==3){var p=u.U++,g=li(u.I);if(Ne(g,"SID",u.K),Ne(g,"RID",p),Ne(g,"TYPE","terminate"),ga(u,g),p=new Hi(u,u.j,p),p.L=2,p.v=Dc(li(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Q_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Oc(p)}G_(u)}function jc(u){u.g&&(bf(u),u.g.cancel(),u.g=null)}function U_(u){jc(u),u.u&&(a.clearTimeout(u.u),u.u=null),zc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Uc(u){if(!E_(u.h)&&!u.s){u.s=!0;var p=u.Ga;it||Q(),j||(it(),j=!0),K.add(p,u),u.B=0}}function xk(u,p){return T_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=oa(f(u.Ga,u,p),H_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Hi(this,this.j,u);let F=this.o;if(this.S&&(F?(F=T(F),I(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(p+=C,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=B_(this,V,p),g=li(this.I),Ne(g,"RID",u),Ne(g,"CVER",22),this.D&&Ne(g,"X-HTTP-Session-Id",this.D),ga(this,g),F&&(this.O?p="headers="+encodeURIComponent(String(O_(F)))+"&"+p:this.m&&Tf(g,this.m,F)),Ef(this.h,V),this.Ua&&Ne(g,"TYPE","init"),this.P?(Ne(g,"$req",p),Ne(g,"SID","null"),V.T=!0,yf(V,g,null)):yf(V,g,p),this.G=2}}else this.G==3&&(u?z_(this,u):this.i.length==0||E_(this.h)||z_(this))};function z_(u,p){var g;p?g=p.l:g=u.U++;const C=li(u.I);Ne(C,"SID",u.K),Ne(C,"RID",g),Ne(C,"AID",u.T),ga(u,C),u.m&&u.o&&Tf(C,u.m,u.o),g=new Hi(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=B_(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ef(u.h,g),yf(g,C,p)}function ga(u,p){u.H&&D(u.H,function(g,C){Ne(p,C,g)}),u.l&&b_({},function(g,C){Ne(p,C,g)})}function B_(u,p,g){g=Math.min(u.i.length,g);var C=u.l?f(u.l.Na,u.l,u):null;e:{var V=u.i;let F=-1;for(;;){const W=["count="+g];F==-1?0<g?(F=V[0].g,W.push("ofs="+F)):F=0:W.push("ofs="+F);let xe=!0;for(let yt=0;yt<g;yt++){let ve=V[yt].g;const xt=V[yt].map;if(ve-=F,0>ve)F=Math.max(0,V[yt].g-100),xe=!1;else try{Sk(xt,W,"req"+ve+"_")}catch{C&&C(xt)}}if(xe){C=W.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,C}function $_(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;it||Q(),j||(it(),j=!0),K.add(p,u),u.v=0}}function If(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=oa(f(u.Fa,u),H_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,q_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=oa(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),jc(this),q_(this))};function bf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function q_(u){u.g=new Hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=li(u.qa);Ne(p,"RID","rpc"),Ne(p,"SID",u.K),Ne(p,"AID",u.T),Ne(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ne(p,"TO",u.ja),Ne(p,"TYPE","xmlhttp"),ga(u,p),u.m&&u.o&&Tf(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Dc(li(p)),g.m=null,g.P=!0,y_(g,u)}t.Za=function(){this.C!=null&&(this.C=null,jc(this),If(this),Ut(19))};function zc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function W_(u,p){var g=null;if(u.g==p){zc(u),bf(u),u.g=null;var C=2}else if(wf(u.h,p))g=p.D,S_(u.h,p),C=1;else return;if(u.G!=0){if(p.o)if(C==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;C=Ac(),jt(C,new f_(C,g)),Uc(u)}else $_(u);else if(V=p.s,V==3||V==0&&0<p.X||!(C==1&&xk(u,p)||C==2&&If(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),V){case 1:qr(u,5);break;case 4:qr(u,10);break;case 3:qr(u,6);break;default:qr(u,2)}}}function H_(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function qr(u,p){if(u.j.info("Error code "+p),p==2){var g=f(u.fb,u),C=u.Xa;const V=!C;C=new $r(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lc(C,"https"),Dc(C),V?wk(C.toString(),g):Ek(C.toString(),g)}else Ut(2);u.G=0,u.l&&u.l.sa(p),G_(u),U_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function G_(u){if(u.G=0,u.ka=[],u.l){const p=I_(u.h);(p.length!=0||u.i.length!=0)&&(x(u.ka,p),x(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function K_(u,p,g){var C=g instanceof $r?li(g):new $r(g);if(C.g!="")p&&(C.g=p+"."+C.g),Mc(C,C.s);else{var V=a.location;C=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var F=new $r(null);C&&Lc(F,C),p&&(F.g=p),V&&Mc(F,V),g&&(F.l=g),C=F}return g=u.D,p=u.ya,g&&p&&Ne(C,g,p),Ne(C,"VER",u.la),ga(u,C),C}function Q_(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new $e(new ha({eb:g})):new $e(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Y_(){}t=Y_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bc(){}Bc.prototype.g=function(u,p){return new nn(u,p)};function nn(u,p){Ct.call(this),this.g=new j_(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!y(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Os(this)}v(nn,Ct),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Sf(this.g)},nn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=df(u),u=g);p.i.push(new uk(p.Ya++,u)),p.G==3&&Uc(p)},nn.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,nn.aa.N.call(this)};function X_(u){ff.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}v(X_,ff);function J_(){pf.call(this),this.status=1}v(J_,pf);function Os(u){this.g=u}v(Os,Y_),Os.prototype.ua=function(){jt(this.g,"a")},Os.prototype.ta=function(u){jt(this.g,new X_(u))},Os.prototype.sa=function(u){jt(this.g,new J_)},Os.prototype.ra=function(){jt(this.g,"b")},Bc.prototype.createWebChannel=Bc.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,BC=function(){return new Bc},zC=function(){return Ac()},UC=zr,eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rc.NO_ERROR=0,Rc.TIMEOUT=8,Rc.HTTP_ERROR=6,Vu=Rc,p_.COMPLETE="complete",jC=p_,c_.EventType=ra,ra.OPEN="a",ra.CLOSE="b",ra.ERROR="c",ra.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,za=c_,FC=ha,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,VC=$e}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const ME="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Ph("@firebase/firestore");function Aa(){return Es.logLevel}function X(t,...e){if(Es.logLevel<=he.DEBUG){const n=e.map(fv);Es.debug(`Firestore (${Jo}): ${t}`,...n)}}function Fi(t,...e){if(Es.logLevel<=he.ERROR){const n=e.map(fv);Es.error(`Firestore (${Jo}): ${t}`,...n)}}function Lo(t,...e){if(Es.logLevel<=he.WARN){const n=e.map(fv);Es.warn(`Firestore (${Jo}): ${t}`,...n)}}function fv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: `+t;throw Fi(e),new Error(e)}function Pe(t,e){t||se()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class WF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HF{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ir,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Pe(typeof i.accessToken=="string"),new $C(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Ot(e)}}class GF{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KF{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new GF(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new QF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=XF(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function we(t,e){return t<e?-1:t>e?1:0}function Mo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new ct(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ct(0,0))}static max(){return new oe(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,i){n===void 0?n=0:n>e.length&&se(),i===void 0?i=e.length-n:i>e.length-n&&se(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Bl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class We extends Bl{construct(e,n,i){return new We(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new J(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new We(n)}static emptyPath(){return new We([])}}const JF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Bl{construct(e,n,i){return new Et(e,n,i)}static isValidIdentifier(e){return JF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new J(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new J(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new J(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(We.fromString(e))}static fromName(e){return new Z(We.fromString(e).popFirst(5))}static empty(){return new Z(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new We(e.slice()))}}function ZF(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=oe.fromTimestamp(i===1e9?new ct(n+1,0):new ct(n,i));return new Ar(r,Z.empty(),e)}function e3(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ar(oe.min(),Z.empty(),-1)}static max(){return new Ar(oe.max(),Z.empty(),-1)}}function t3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==n3)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,n){return new U((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function r3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}pv.oe=-1;function Bh(t){return t==null}function Kd(t){return t===0&&1/t==-1/0}function s3(t){return typeof t=="number"&&Number.isInteger(t)&&!Kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??_t.RED,this.left=r??_t.EMPTY,this.right=s??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new _t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return _t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,i,r,s){return this}insert(e,n,i){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new On([])}unionWith(e){let n=new St(Et.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HC("Invalid base64 string: "+s):s}}(e);return new bt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const o3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=o3.exec(t);if(Pe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gv(t){const e=t.mapValue.fields.__previous_value__;return mv(e)?gv(e):e}function $l(t){const e=Rr(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ql{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mv(t)?4:c3(t)?9007199254740991:l3(t)?10:11:se()}function ti(t,e){if(t===e)return!0;const n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $l(t).isEqual($l(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Rr(r.timestampValue),a=Rr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ts(r.bytesValue).isEqual(Ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Je(r.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(r.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Je(r.integerValue)===Je(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Je(r.doubleValue),a=Je(s.doubleValue);return o===a?Kd(o)===Kd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Mo(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(DE(o)!==DE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function Wl(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function Do(t,e){if(t===e)return 0;const n=Ss(t),i=Ss(e);if(n!==i)return we(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Je(s.integerValue||s.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return FE(t.timestampValue,e.timestampValue);case 4:return FE($l(t),$l(e));case 5:return we(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ts(s),l=Ts(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=we(a[c],l[c]);if(d!==0)return d}return we(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=we(Je(s.latitude),Je(o.latitude));return a!==0?a:we(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},f=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,S=we(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:jE(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=we(l[h],d[h]);if(f!==0)return f;const m=Do(a[l[h]],c[d[h]]);if(m!==0)return m}return we(l.length,d.length)}(t.mapValue,e.mapValue);default:throw se()}}function FE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Rr(t),i=Rr(e),r=we(n.seconds,i.seconds);return r!==0?r:we(n.nanos,i.nanos)}function jE(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Do(n[r],i[r]);if(s)return s}return we(n.length,i.length)}function Vo(t){return tg(t)}function tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Rr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=tg(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${tg(n.fields[o])}`;return r+"}"}(t.mapValue):se()}function ng(t){return!!t&&"integerValue"in t}function yv(t){return!!t&&"arrayValue"in t}function UE(t){return!!t&&"nullValue"in t}function zE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function l3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ol(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ol(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ol(t.arrayValue.values[n]);return e}return Object.assign({},t)}function c3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(n)}setAll(e){let n=Et.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ol(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Zo(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new gn(ol(this.value))}}function GC(t){const e=[];return Zo(t.fields,(n,i)=>{const r=new Et([n]);if(Fu(i)){const s=GC(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,oe.min(),oe.min(),oe.min(),gn.empty(),0)}static newFoundDocument(e,n,i,r){return new Dt(e,1,n,oe.min(),i,r,0)}static newNoDocument(e,n){return new Dt(e,2,n,oe.min(),oe.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,oe.min(),oe.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.position=e,this.inclusive=n}}function BE(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Z.comparator(Z.fromName(o.referenceValue),n.key):i=Do(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function $E(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n="asc"){this.field=e,this.dir=n}}function u3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class at extends KC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new h3(e,n,i):n==="array-contains"?new m3(e,i):n==="in"?new g3(e,i):n==="not-in"?new y3(e,i):n==="array-contains-any"?new v3(e,i):new at(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new f3(e,i):new p3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Do(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ni(e,n)}matches(e){return QC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function QC(t){return t.op==="and"}function YC(t){return d3(t)&&QC(t)}function d3(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function ig(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+Vo(t.value);if(YC(t))return t.filters.map(e=>ig(e)).join(",");{const e=t.filters.map(n=>ig(n)).join(",");return`${t.op}(${e})`}}function XC(t,e){return t instanceof at?function(i,r){return r instanceof at&&i.op===r.op&&i.field.isEqual(r.field)&&ti(i.value,r.value)}(t,e):t instanceof ni?function(i,r){return r instanceof ni&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&XC(o,r.filters[a]),!0):!1}(t,e):void se()}function JC(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(JC).join(" ,")+"}"}(t):"Filter"}class h3 extends at{constructor(e,n,i){super(e,n,i),this.key=Z.fromName(i.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class f3 extends at{constructor(e,n){super(e,"in",n),this.keys=ZC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p3 extends at{constructor(e,n){super(e,"not-in",n),this.keys=ZC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Z.fromName(i.referenceValue))}class m3 extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yv(n)&&Wl(n.arrayValue,this.value)}}class g3 extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wl(this.value.arrayValue,n)}}class y3 extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Wl(this.value.arrayValue,n)}}class v3 extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Wl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function qE(t,e=null,n=[],i=[],r=null,s=null,o=null){return new _3(t,e,n,i,r,s,o)}function vv(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ig(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Vo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Vo(i)).join(",")),e.ue=n}return e.ue}function _v(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!u3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$E(t.startAt,e.startAt)&&$E(t.endAt,e.endAt)}function rg(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function w3(t,e,n,i,r,s,o,a){return new $h(t,e,n,i,r,s,o,a)}function wv(t){return new $h(t)}function WE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function E3(t){return t.collectionGroup!==null}function al(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(Et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Yd(s,i))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Yd(Et.keyField(),i))}return e.ce}function Zn(t){const e=ae(t);return e.le||(e.le=T3(e,al(t))),e.le}function T3(t,e){if(t.limitType==="F")return qE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Yd(r.field,s)});const n=t.endAt?new Qd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Qd(t.startAt.position,t.startAt.inclusive):null;return qE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function sg(t,e,n){return new $h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qh(t,e){return _v(Zn(t),Zn(e))&&t.limitType===e.limitType}function ex(t){return`${vv(Zn(t))}|lt:${t.limitType}`}function js(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>JC(r)).join(", ")}]`),Bh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Vo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Vo(r)).join(",")),`Target(${i})`}(Zn(t))}; limitType=${t.limitType})`}function Wh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of al(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=BE(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,al(i),r)||i.endAt&&!function(o,a,l){const c=BE(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,al(i),r))}(t,e)}function S3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tx(t){return(e,n)=>{let i=!1;for(const r of al(t)){const s=I3(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function I3(t,e,n){const i=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Do(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return WC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=new ze(Z.comparator);function ji(){return b3}const nx=new ze(Z.comparator);function Ba(...t){let e=nx;for(const n of t)e=e.insert(n.key,n);return e}function ix(t){let e=nx;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function is(){return ll()}function rx(){return ll()}function ll(){return new ea(t=>t.toString(),(t,e)=>t.isEqual(e))}const C3=new ze(Z.comparator),x3=new St(Z.comparator);function fe(...t){let e=x3;for(const n of t)e=e.add(n);return e}const P3=new St(we);function k3(){return P3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function sx(t){return{integerValue:""+t}}function A3(t,e){return s3(e)?sx(e):Ev(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this._=void 0}}function R3(t,e,n){return t instanceof Xd?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&mv(s)&&(s=gv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hl?ax(t,e):t instanceof Gl?lx(t,e):function(r,s){const o=ox(r,s),a=HE(o)+HE(r.Pe);return ng(o)&&ng(r.Pe)?sx(a):Ev(r.serializer,a)}(t,e)}function N3(t,e,n){return t instanceof Hl?ax(t,e):t instanceof Gl?lx(t,e):n}function ox(t,e){return t instanceof Jd?function(i){return ng(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Xd extends Hh{}class Hl extends Hh{constructor(e){super(),this.elements=e}}function ax(t,e){const n=cx(e);for(const i of t.elements)n.some(r=>ti(r,i))||n.push(i);return{arrayValue:{values:n}}}class Gl extends Hh{constructor(e){super(),this.elements=e}}function lx(t,e){let n=cx(e);for(const i of t.elements)n=n.filter(r=>!ti(r,i));return{arrayValue:{values:n}}}class Jd extends Hh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function HE(t){return Je(t.integerValue||t.doubleValue)}function cx(t){return yv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function O3(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Hl&&r instanceof Hl||i instanceof Gl&&r instanceof Gl?Mo(i.elements,r.elements,ti):i instanceof Jd&&r instanceof Jd?ti(i.Pe,r.Pe):i instanceof Xd&&r instanceof Xd}(t.transform,e.transform)}class L3{constructor(e,n){this.version=e,this.transformResults=n}}class xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gh{}function ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hx(t.key,xi.none()):new vc(t.key,t.data,xi.none());{const n=t.data,i=gn.empty();let r=new St(Et.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ks(t.key,i,new On(r.toArray()),xi.none())}}function M3(t,e,n){t instanceof vc?function(r,s,o){const a=r.value.clone(),l=KE(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ks?function(r,s,o){if(!ju(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=KE(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(dx(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cl(t,e,n,i){return t instanceof vc?function(s,o,a,l){if(!ju(s.precondition,o))return a;const c=s.value.clone(),d=QE(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof ks?function(s,o,a,l){if(!ju(s.precondition,o))return a;const c=QE(s.fieldTransforms,l,o),d=o.data;return d.setAll(dx(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,i):function(s,o,a){return ju(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function D3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=ox(i.transform,r||null);s!=null&&(n===null&&(n=gn.empty()),n.set(i.field,s))}return n||null}function GE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Mo(i,r,(s,o)=>O3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vc extends Gh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ks extends Gh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function KE(t,e,n){const i=new Map;Pe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,N3(o,a,n[r]))}return i}function QE(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,R3(s,o,e))}return i}class hx extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V3 extends Gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&M3(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=cl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=cl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=rx();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=ux(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(n,i)=>GE(n,i))&&Mo(this.baseMutations,e.baseMutations,(n,i)=>GE(n,i))}}class Tv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Pe(e.mutations.length===i.length);let r=function(){return C3}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Tv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,pe;function z3(t){switch(t){default:return se();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function fx(t){if(t===void 0)return Fi("GRPC error has no .code"),z.UNKNOWN;switch(t){case tt.OK:return z.OK;case tt.CANCELLED:return z.CANCELLED;case tt.UNKNOWN:return z.UNKNOWN;case tt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case tt.INTERNAL:return z.INTERNAL;case tt.UNAVAILABLE:return z.UNAVAILABLE;case tt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case tt.NOT_FOUND:return z.NOT_FOUND;case tt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case tt.ABORTED:return z.ABORTED;case tt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case tt.DATA_LOSS:return z.DATA_LOSS;default:return se()}}(pe=tt||(tt={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new as([4294967295,4294967295],0);function YE(t){const e=B3().encode(t),n=new DC;return n.update(e),new Uint8Array(n.digest())}function XE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new as([n,i],0),new as([r,s],0)]}class Sv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $a(`Invalid padding: ${n}`);if(i<0)throw new $a(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $a(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $a(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=as.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(as.fromNumber(i)));return r.compare($3)===1&&(r=new as([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=YE(e),[i,r]=XE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Sv(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=YE(e),[i,r]=XE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $a extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Kh(oe.min(),r,new ze(we),ji(),fe())}}class _c{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new _c(i,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class px{constructor(e,n){this.targetId=e,this.me=n}}class mx{constructor(e,n,i=bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class JE{constructor(){this.fe=0,this.ge=eT(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),i=fe();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:se()}}),new _c(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=eT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class q3{constructor(e){this.Le=e,this.Be=new Map,this.ke=ji(),this.qe=ZE(),this.Qe=new ze(we)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(rg(s))if(i===0){const o=new Z(s.path);this.Ue(n,o,Dt.newNoDocument(o,oe.min()))}else Pe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Ts(i).toUint8Array()}catch(l){if(l instanceof HC)return Lo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Sv(o,r,s)}catch(l){return Lo(l instanceof $a?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&rg(a.target)){const l=new Z(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Dt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=fe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Kh(e,n,this.Qe,this.ke,i);return this.ke=ji(),this.qe=ZE(),this.Qe=new ze(we),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new JE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(we),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new JE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ZE(){return new ze(Z.comparator)}function eT(){return new ze(Z.comparator)}const W3={asc:"ASCENDING",desc:"DESCENDING"},H3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G3={and:"AND",or:"OR"};class K3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function og(t,e){return t.useProto3Json||Bh(e)?e:{value:e}}function Zd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q3(t,e){return Zd(t,e.toTimestamp())}function ei(t){return Pe(!!t),oe.fromTimestamp(function(n){const i=Rr(n);return new ct(i.seconds,i.nanos)}(t))}function Iv(t,e){return ag(t,e).canonicalString()}function ag(t,e){const n=function(r){return new We(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yx(t){const e=We.fromString(t);return Pe(Tx(e)),e}function lg(t,e){return Iv(t.databaseId,e.path)}function Ep(t,e){const n=yx(e);if(n.get(1)!==t.databaseId.projectId)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(_x(n))}function vx(t,e){return Iv(t.databaseId,e)}function Y3(t){const e=yx(t);return e.length===4?We.emptyPath():_x(e)}function cg(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _x(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tT(t,e,n){return{name:lg(t,e),fields:n.value.mapValue.fields}}function X3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?z.UNKNOWN:fx(c.code);return new J(d,c.message||"")}(o);n=new mx(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ep(t,i.document.name),s=ei(i.document.updateTime),o=i.document.createTime?ei(i.document.createTime):oe.min(),a=new gn({mapValue:{fields:i.document.fields}}),l=Dt.newFoundDocument(r,s,o,a),c=i.targetIds||[],d=i.removedTargetIds||[];n=new Uu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ep(t,i.document),s=i.readTime?ei(i.readTime):oe.min(),o=Dt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Uu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ep(t,i.document),s=i.removedTargetIds||[];n=new Uu([],s,r,null)}else{if(!("filter"in e))return se();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new U3(r,s),a=i.targetId;n=new px(a,o)}}return n}function J3(t,e){let n;if(e instanceof vc)n={update:tT(t,e.key,e.value)};else if(e instanceof hx)n={delete:lg(t,e.key)};else if(e instanceof ks)n={update:tT(t,e.key,e.data),updateMask:aj(e.fieldMask)};else{if(!(e instanceof V3))return se();n={verify:lg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Xd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw se()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Q3(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(t,e.precondition)),n}function Z3(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?ei(r.updateTime):ei(s);return o.isEqual(oe.min())&&(o=ei(s)),new L3(o,r.transformResults||[])}(n,e))):[]}function ej(t,e){return{documents:[vx(t,e.path)]}}function tj(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=vx(t,r);const s=function(c){if(c.length!==0)return Ex(ni.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Us(f.field),direction:rj(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=og(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function nj(t){let e=Y3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Pe(i===1);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=wx(h);return f instanceof ni&&YC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new Yd(zs(v.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Bh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Qd(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Qd(m,f)}(n.endAt)),w3(e,r,o,s,a,"F",l,c)}function ij(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=zs(n.unaryFilter.field);return at.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=zs(n.unaryFilter.field);return at.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zs(n.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zs(n.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return at.create(zs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(i=>wx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function rj(t){return W3[t]}function sj(t){return H3[t]}function oj(t){return G3[t]}function Us(t){return{fieldPath:t.canonicalString()}}function zs(t){return Et.fromServerFormat(t.fieldPath)}function Ex(t){return t instanceof at?function(n){if(n.op==="=="){if(zE(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(UE(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zE(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(UE(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:sj(n.op),value:n.value}}}(t):t instanceof ni?function(n){const i=n.getFilters().map(r=>Ex(r));return i.length===1?i[0]:{compositeFilter:{op:oj(n.op),filters:i}}}(t):se()}function aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,i,r,s=oe.min(),o=oe.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.ct=e}}function cj(t){const e=nj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.un=new dj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Ar.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class dj{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new St(We.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new St(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fo(0)}static kn(){return new Fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.changes=new ea(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&cl(i.mutation,r,On.empty(),ct.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,fe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=fe()){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Ba();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=is();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,fe()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ji();const o=ll(),a=function(){return ll()}();return n.forEach((l,c)=>{const d=i.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof ks)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),cl(d.mutation,c,d.mutation.getFieldMask(),ct.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new fj(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ll();let r=new ze((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=i.get(l)||On.empty();d=a.applyToLocalView(c,d),i.set(l,d);const h=(r.get(a.batchId)||fe()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=rx();d.forEach(f=>{if(!s.has(f)){const m=ux(n.get(f),i.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):U.resolve(is());let a=-1,l=s;return o.next(c=>U.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,fe())).next(d=>({batchId:a,changes:ix(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(i=>{let r=Ba();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Ba();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(h,f){return new $h(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Dt.newInvalidDocument(d)))});let a=Ba();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&cl(d.mutation,c,On.empty(),ct.now()),Wh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ei(r.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:cj(r.bundledQuery),readTime:ei(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.overlays=new ze(Z.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=is();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const r=is(),s=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ze((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let d=s.get(c.largestBatchId);d===null&&(d=is(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=is(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=r)););return U.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new j3(n,i));let s=this.Ir.get(n);s===void 0&&(s=fe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.Tr=new St(ht.Er),this.dr=new St(ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new ht(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new ht(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Z(new We([])),i=new ht(n,e),r=new ht(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new We([])),i=new ht(n,e),r=new ht(n,e+1);let s=fe();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ht(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ht{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||we(e.wr,n.wr)}static Ar(e,n){return we(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(ht.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F3(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ht(n,0),r=new ht(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new St(we);return n.forEach(r=>{const s=new ht(r,0),o=new ht(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Z.isDocumentKey(s)||(s=s.child(""));const o=new ht(new Z(s),0);let a=new St(we);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return U.forEach(n.mutations,r=>{const s=new ht(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new ht(n,0),r=this.br.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.Mr=e,this.docs=function(){return new ze(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let i=ji();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Dt.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ji();const o=n.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||t3(e3(d),i)<=0||(r.has(d.key)||Wh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,i,r){se()}Or(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new wj(this)}getSize(e){return U.resolve(this.size)}}class wj extends hj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.persistence=e,this.Nr=new ea(n=>vv(n),_v),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bv,this.targetCount=0,this.kr=Fo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Fo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new pv(0),this.Kr=!1,this.Kr=!0,this.$r=new yj,this.referenceDelegate=e(this),this.Ur=new Ej(this),this.indexManager=new uj,this.remoteDocumentCache=function(r){return new _j(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new lj(n),this.Gr=new mj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new vj(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){X("MemoryPersistence","Starting transaction:",e);const r=new Sj(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class Sj extends i3{constructor(e){super(),this.currentSequenceNumber=e}}class Cv{constructor(e){this.persistence=e,this.Jr=new bv,this.Yr=null}static Zr(e){return new Cv(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,i=>{const r=Z.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=fe(),r=fe();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return nL()?8:r3(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Ij;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Aa()<=he.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Aa()<=he.DEBUG&&X("QueryEngine","Query:",js(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Aa()<=he.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):U.resolve())}Yi(e,n){if(WE(n))return U.resolve(null);let i=Zn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=sg(n,null,"F"),i=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=fe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,sg(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return WE(n)||r.isEqual(oe.min())?U.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?U.resolve(null):(Aa()<=he.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),js(n)),this.rs(e,o,n,ZF(r,-1)).next(a=>a))})}ts(e,n){let i=new St(tx(e));return n.forEach((r,s)=>{Wh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Aa()<=he.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",js(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ar.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ze(we),this._s=new ea(s=>vv(s),_v),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function xj(t,e,n,i){return new Cj(t,e,n,i)}async function Sx(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=fe();for(const c of r){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Pj(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=U.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(l,v)).next(S=>{const x=c.docVersions.get(v);Pe(x!==null),S.version.compareTo(x)<0&&(h.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),d.addEntry(S)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=fe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Ix(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function kj(t,e){const n=ae(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=r.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(bt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,i)),r=r.insert(h,m),function(S,x,_){return S.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,d)&&a.push(n.Ur.updateTargetData(s,m))});let l=ji(),c=fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Aj(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!i.isEqual(oe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function Aj(t,e,n){let i=fe(),r=fe();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ji();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function Rj(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Nj(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new ur(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function ug(t,e,n){const i=ae(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!yc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function nT(t,e,n){const i=ae(t);let r=oe.min(),s=fe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=ae(l),f=h._s.get(d);return f!==void 0?U.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(i,o,Zn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:oe.min(),n?s:fe())).next(a=>(Oj(i,S3(e),a),{documents:a,Ts:s})))}function Oj(t,e,n){let i=t.us.get(e)||oe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class iT{constructor(){this.activeTargetIds=k3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lj{constructor(){this.so=new iT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new iT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function Tp(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="WebChannelConnection";class Fj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Tp(),l=this.xo(n,i.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Lo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=Dj[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Tp();return new Promise((o,a)=>{const l=new VC;l.setWithCredentials(!0),l.listenOnce(jC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vu.NO_ERROR:const d=l.getResponseJson();X(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Vu.TIMEOUT:X(Rt,`RPC '${e}' ${s} timed out`),a(new J(z.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const h=l.getStatus();if(X(Rt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(m.status);a(new J(v,m.message))}else a(new J(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new J(z.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{X(Rt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);X(Rt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Tp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BC(),a=zC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new FC({})),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const d=s.join("");X(Rt,`Creating RPC '${e}' stream ${r}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,m=!1;const v=new Vj({Io:x=>{m?X(Rt,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(f||(X(Rt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),X(Rt,`RPC '${e}' stream ${r} sending:`,x),h.send(x))},To:()=>h.close()}),S=(x,_,y)=>{x.listen(_,E=>{try{y(E)}catch(A){setTimeout(()=>{throw A},0)}})};return S(h,za.EventType.OPEN,()=>{m||(X(Rt,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),S(h,za.EventType.CLOSE,()=>{m||(m=!0,X(Rt,`RPC '${e}' stream ${r} transport closed`),v.So())}),S(h,za.EventType.ERROR,x=>{m||(m=!0,Lo(Rt,`RPC '${e}' stream ${r} transport errored:`,x),v.So(new J(z.UNAVAILABLE,"The operation could not be completed")))}),S(h,za.EventType.MESSAGE,x=>{var _;if(!m){const y=x.data[0];Pe(!!y);const E=y,A=E.error||((_=E[0])===null||_===void 0?void 0:_.error);if(A){X(Rt,`RPC '${e}' stream ${r} received error:`,A);const L=A.status;let D=function(b){const I=tt[b];if(I!==void 0)return fx(I)}(L),k=A.message;D===void 0&&(D=z.INTERNAL,k="Unknown error status: "+L+" with message "+A.message),m=!0,v.So(new J(D,k)),h.close()}else X(Rt,`RPC '${e}' stream ${r} received:`,y),v.bo(y)}}),S(a,UC.STAT_EVENT,x=>{x.stat===eg.PROXY?X(Rt,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===eg.NOPROXY&&X(Rt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){return new K3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&X("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new J(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jj extends Cx{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=X3(this.serializer,e),i=function(s){if(!("targetChange"in s))return oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?ei(o.readTime):oe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=cg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=rg(l)?{documents:ej(s,l)}:{query:tj(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gx(s,o.resumeToken);const c=og(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Zd(s,o.snapshotVersion.toTimestamp());const c=og(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=ij(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.a_(n)}}class Uj extends Cx{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Z3(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=cg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>J3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ag(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(z.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ag(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Bj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fi(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{As(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ae(l);c.L_.add(4),await wc(c),c.q_.set("Unknown"),c.L_.delete(4),await Yh(c)}(this))})}),this.q_=new Bj(i,r)}}async function Yh(t){if(As(t))for(const e of t.B_)await e(!0)}async function wc(t){for(const e of t.B_)await e(!1)}function xx(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rv(n)?Av(n):ta(n).r_()&&kv(n,e))}function Pv(t,e){const n=ae(t),i=ta(n);n.N_.delete(e),i.r_()&&Px(n,e),n.N_.size===0&&(i.r_()?i.o_():As(n)&&n.q_.set("Unknown"))}function kv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ta(t).A_(e)}function Px(t,e){t.Q_.xe(e),ta(t).R_(e)}function Av(t){t.Q_=new q3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ta(t).start(),t.q_.v_()}function Rv(t){return As(t)&&!ta(t).n_()&&t.N_.size>0}function As(t){return ae(t).L_.size===0}function kx(t){t.Q_=void 0}async function qj(t){t.q_.set("Online")}async function Wj(t){t.N_.forEach((e,n)=>{kv(t,e)})}async function Hj(t,e){kx(t),Rv(t)?(t.q_.M_(e),Av(t)):t.q_.set("Unknown")}async function Gj(t,e,n){if(t.q_.set("Online"),e instanceof mx&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await eh(t,i)}else if(e instanceof Uu?t.Q_.Ke(e):e instanceof px?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const i=await Ix(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),Px(s,l);const h=new ur(d.target,l,c,d.sequenceNumber);kv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){X("RemoteStore","Failed to raise snapshot:",i),await eh(t,i)}}async function eh(t,e,n){if(!yc(e))throw e;t.L_.add(1),await wc(t),t.q_.set("Offline"),n||(n=()=>Ix(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Yh(t)})}function Ax(t,e){return e().catch(n=>eh(t,n,e))}async function Xh(t){const e=ae(t),n=Nr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Kj(e);)try{const r=await Rj(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,Qj(e,r)}catch(r){await eh(e,r)}Rx(e)&&Nx(e)}function Kj(t){return As(t)&&t.O_.length<10}function Qj(t,e){t.O_.push(e);const n=Nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Rx(t){return As(t)&&!Nr(t).n_()&&t.O_.length>0}function Nx(t){Nr(t).start()}async function Yj(t){Nr(t).p_()}async function Xj(t){const e=Nr(t);for(const n of t.O_)e.m_(n.mutations)}async function Jj(t,e,n){const i=t.O_.shift(),r=Tv.from(i,e,n);await Ax(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Xh(t)}async function Zj(t,e){e&&Nr(t).V_&&await async function(i,r){if(function(o){return z3(o)&&o!==z.ABORTED}(r.code)){const s=i.O_.shift();Nr(i).s_(),await Ax(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Xh(i)}}(t,e),Rx(t)&&Nx(t)}async function sT(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const i=As(n);n.L_.add(3),await wc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Yh(n)}async function eU(t,e){const n=ae(t);e?(n.L_.delete(2),await Yh(n)):e||(n.L_.add(2),await wc(n),n.q_.set("Unknown"))}function ta(t){return t.K_||(t.K_=function(n,i,r){const s=ae(n);return s.w_(),new jj(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:qj.bind(null,t),Ro:Wj.bind(null,t),mo:Hj.bind(null,t),d_:Gj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rv(t)?Av(t):t.q_.set("Unknown")):(await t.K_.stop(),kx(t))})),t.K_}function Nr(t){return t.U_||(t.U_=function(n,i,r){const s=ae(n);return s.w_(),new Uj(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Yj.bind(null,t),mo:Zj.bind(null,t),f_:Xj.bind(null,t),g_:Jj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Xh(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Nv(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ov(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),yc(t))return new J(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Z.comparator(n.key,i.key):(n,i)=>Z.comparator(n.key,i.key),this.keyedMap=Ba(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new _o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new _o;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.W_=new ze(Z.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class jo{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new jo(e,n,_o.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nU{constructor(){this.queries=aT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ae(n),s=r.queries;r.queries=aT(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new J(z.ABORTED,"Firestore shutting down"))}}function aT(){return new ea(t=>ex(t),qh)}async function iU(t,e){const n=ae(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new tU,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Ov(o,`Initialization of query '${js(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Lv(n)}async function rU(t,e){const n=ae(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function sU(t,e){const n=ae(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Lv(n)}function oU(t,e,n){const i=ae(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Lv(t){t.Y_.forEach(e=>{e.next()})}var dg,lT;(lT=dg||(dg={})).ea="default",lT.Cache="cache";class aU{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new jo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.key=e}}class Lx{constructor(e){this.key=e}}class lU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=tx(e),this.Ra=new _o(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new oT,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,h)=>{const f=r.get(d),m=Wh(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?v!==S&&(i.track({type:3,doc:m}),x=!0):this.ga(f,m)||(i.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),x=!0):f&&!m&&(i.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=S?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(m,v){const S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return S(m)-S(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new jo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new Lx(i))}),this.da.forEach(i=>{e.has(i)||n.push(new Ox(i))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class cU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class uU{constructor(e){this.key=e,this.va=!1}}class dU{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ea(a=>ex(a),qh),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(Z.comparator),this.Na=new Map,this.La=new bv,this.Ba={},this.ka=new Map,this.qa=Fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hU(t,e,n=!0){const i=Ux(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await Mx(i,e,n,!0),r}async function fU(t,e){const n=Ux(t);await Mx(n,e,!0,!1)}async function Mx(t,e,n,i){const r=await Nj(t.localStore,Zn(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await pU(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&xx(t.remoteStore,r),a}async function pU(t,e,n,i,r){t.Ka=(h,f,m)=>async function(S,x,_,y){let E=x.view.ma(_);E.ns&&(E=await nT(S.localStore,x.query,!1).then(({documents:k})=>x.view.ma(k,E)));const A=y&&y.targetChanges.get(x.targetId),L=y&&y.targetMismatches.get(x.targetId)!=null,D=x.view.applyChanges(E,S.isPrimaryClient,A,L);return uT(S,x.targetId,D.wa),D.snapshot}(t,h,f,m);const s=await nT(t.localStore,e,!0),o=new lU(e,s.Ts),a=o.ma(s.documents),l=_c.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);uT(t,n,c.wa);const d=new cU(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function mU(t,e,n){const i=ae(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!qh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ug(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Pv(i.remoteStore,r.targetId),hg(i,r.targetId)}).catch(gc)):(hg(i,r.targetId),await ug(i.localStore,r.targetId,!0))}async function gU(t,e){const n=ae(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Pv(n.remoteStore,i.targetId))}async function yU(t,e,n){const i=IU(t);try{const r=await function(o,a){const l=ae(o),c=ct.now(),d=a.reduce((m,v)=>m.add(v.key),fe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ji(),S=fe();return l.cs.getEntries(m,d).next(x=>{v=x,v.forEach((_,y)=>{y.isValidDocument()||(S=S.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(x=>{h=x;const _=[];for(const y of a){const E=D3(y,h.get(y.key).overlayedDocument);E!=null&&_.push(new ks(y.key,E,GC(E.value.mapValue),xi.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(x=>{f=x;const _=x.applyToLocalDocumentSet(h,S);return l.documentOverlayCache.saveOverlays(m,x.batchId,_)})}).then(()=>({batchId:f.batchId,changes:ix(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ze(we)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await Ec(i,r.changes),await Xh(i.remoteStore)}catch(r){const s=Ov(r,"Failed to persist write");n.reject(s)}}async function Dx(t,e){const n=ae(t);try{const i=await kj(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Pe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Pe(o.va):r.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await Ec(n,i,e)}catch(i){await gc(i)}}function cT(t,e,n){const i=ae(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ae(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&Lv(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vU(t,e,n){const i=ae(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new ze(Z.comparator);o=o.insert(s,Dt.newNoDocument(s,oe.min()));const a=fe().add(s),l=new Kh(oe.min(),new Map,new ze(we),o,a);await Dx(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Mv(i)}else await ug(i.localStore,e,!1).then(()=>hg(i,e,n)).catch(gc)}async function _U(t,e){const n=ae(t),i=e.batch.batchId;try{const r=await Pj(n.localStore,e);Fx(n,i,null),Vx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Ec(n,r)}catch(r){await gc(r)}}async function wU(t,e,n){const i=ae(t);try{const r=await function(o,a){const l=ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Pe(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(i.localStore,e);Fx(i,e,n),Vx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Ec(i,r)}catch(r){await gc(r)}}function Vx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Fx(t,e,n){const i=ae(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function hg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||jx(t,i)})}function jx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Pv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mv(t))}function uT(t,e,n){for(const i of n)i instanceof Ox?(t.La.addReference(i.key,e),EU(t,i)):i instanceof Lx?(X("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||jx(t,i.key)):se()}function EU(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(i),Mv(t))}function Mv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z(We.fromString(e)),i=t.qa.next();t.Na.set(i,new uU(n)),t.Oa=t.Oa.insert(n,i),xx(t.remoteStore,new ur(Zn(wv(n.path)),i,"TargetPurposeLimboResolution",pv.oe))}}async function Ec(t,e,n){const i=ae(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var d;if((c||n)&&i.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);const h=xv.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const d=ae(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(c,f=>U.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>U.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!yc(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),v=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(f,S)}}}(i.localStore,s))}async function TU(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const i=await Sx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new J(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ec(n,i.hs)}}function SU(t,e){const n=ae(t),i=n.Na.get(e);if(i&&i.va)return fe().add(i.key);{let r=fe();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Ux(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vU.bind(null,e),e.Ca.d_=sU.bind(null,e.eventManager),e.Ca.$a=oU.bind(null,e.eventManager),e}function IU(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wU.bind(null,e),e}class dT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xj(this.persistence,new bj,e.initialUser,this.serializer)}createPersistence(e){return new Tj(Cv.Zr,this.serializer)}createSharedClientState(e){return new Lj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TU.bind(null,this.syncEngine),await eU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nU}()}createDatastore(e){const n=Qh(e.databaseInfo.databaseId),i=function(s){return new Fj(s)}(e.databaseInfo);return function(s,o,a,l){return new zj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new $j(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cT(this.syncEngine,n,0),function(){return rT.D()?new rT:new Mj}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,d){const h=new dU(r,s,o,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ae(r);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await wc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=qC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{X("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ov(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ip(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Sx(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kU(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>sT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>sT(e.remoteStore,r)),t._onlineComponents=e}function PU(t){return t.name==="FirebaseError"?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function kU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ip(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!PU(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await Ip(t,new dT)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Ip(t,new dT);return t._offlineComponents}async function zx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await hT(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await hT(t,new bU))),t._onlineComponents}function AU(t){return zx(t).then(e=>e.syncEngine)}async function RU(t){const e=await zx(t),n=e.eventManager;return n.onListen=hU.bind(null,e.syncEngine),n.onUnlisten=mU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gU.bind(null,e.syncEngine),n}function NU(t,e,n={}){const i=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new CU({next:f=>{o.enqueueAndForget(()=>rU(s,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new J(z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?c.reject(new J(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new aU(wv(a.path),d,{includeMetadataChanges:!0,_a:!0});return iU(s,h)}(await RU(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e,n){if(!n)throw new J(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LU(t,e,n,i){if(e===!0&&i===!0)throw new J(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pT(t){if(!Z.isDocumentKey(t))throw new J(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function Kl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dv(t);throw new J(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new J(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mT(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new qF;switch(i.type){case"firstParty":return new KF(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new J(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=fT.get(n);i&&(X("ComponentProvider","Removing Datastore"),fT.delete(n),i.terminate())}(this),Promise.resolve()}}function MU(t,e,n,i={}){var r;const s=(t=Kl(t,Vv))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Ot.MOCK_USER;else{a=Ey(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new J(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ot(c)}t._authCredentials=new WF(new $C(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fv(this.firestore,e,this._query)}}class wn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ql(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class Ql extends Fv{constructor(e,n,i){super(e,n,wv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Z(e))}withConverter(e){return new Ql(this.firestore,e,this._path)}}function Yr(t,e,...n){if(t=et(t),arguments.length===1&&(e=qC.newId()),OU("doc","path",e),t instanceof Vv){const i=We.fromString(e,...n);return pT(i),new wn(t,null,new Z(i))}{if(!(t instanceof wn||t instanceof Ql))throw new J(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(We.fromString(e,...n));return pT(i),new wn(t.firestore,t instanceof Ql?t.converter:null,new Z(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new bx(this,"async_queue_retry"),this.Eu=()=>{const n=Sp();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Sp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Ir;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Fi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=n,n}enqueueAfterDelay(e,n,i){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const r=Nv.createAndSchedule(this,e,n,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&se()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class jv extends Vv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new DU}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qx(this),this._firestoreClient.terminate()}}function VU(t,e){const n=typeof t=="object"?t:kh(),i=typeof t=="string"?t:"(default)",r=oc(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=wy("firestore");s&&MU(r,...s)}return r}function $x(t){return t._firestoreClient||qx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qx(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,d){return new a3(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Bx(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new xU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uo(bt.fromBase64String(e))}catch(n){throw new J(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Uo(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=/^__.*__$/;class jU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,n,this.fieldTransforms):new vc(e,this.data,n,this.fieldTransforms)}}function Hx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class $v{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new $v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return th(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Hx(this.wu)&&FU.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class UU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Qh(e)}Nu(e,n,i,r=!1){return new $v({wu:e,methodName:n,Ou:i,path:Et.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zU(t){const e=t._freezeSettings(),n=Qh(t._databaseId);return new UU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BU(t,e,n,i,r,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,r);Yx("Data must be an object, but it was:",o,i);const a=Kx(i,o);let l,c;if(s.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=$U(e,h,n);if(!o.contains(f))throw new J(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);WU(d,f)||d.push(f)}l=new On(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new jU(new gn(a),l,c)}function Gx(t,e){if(Qx(t=et(t)))return Yx("Unsupported field value:",e,t),Kx(t,e);if(t instanceof Wx)return function(i,r){if(!Hx(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Gx(a,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return A3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ct.fromDate(i);return{timestampValue:Zd(r.serializer,s)}}if(i instanceof ct){const s=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Zd(r.serializer,s)}}if(i instanceof zv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Uo)return{bytesValue:gx(r.serializer,i._byteString)};if(i instanceof wn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Iv(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Bv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Ev(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${Dv(i)}`)}(t,e)}function Kx(t,e){const n={};return WC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(i,r)=>{const s=Gx(r,e.bu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof zv||t instanceof Uo||t instanceof wn||t instanceof Wx||t instanceof Bv)}function Yx(t,e,n){if(!Qx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Dv(n);throw i==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+i)}}function $U(t,e,n){if((e=et(e))instanceof Uv)return e._internalPath;if(typeof e=="string")return Xx(t,e);throw th("Field path arguments must be of type string or ",t,!1,void 0,n)}const qU=new RegExp("[~\\*/\\[\\]]");function Xx(t,e,n){if(e.search(qU)>=0)throw th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uv(...e.split("."))._internalPath}catch{throw th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function th(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new J(z.INVALID_ARGUMENT,a+t+l)}function WU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HU extends Jx{data(){return super.data()}}function Zx(t,e){return typeof e=="string"?Xx(t,e):e instanceof Uv?e._internalPath:e._delegate._internalPath}class GU{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Zo(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Je(o.doubleValue));return new Bv(s)}convertGeoPoint(e){return new zv(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=We.fromString(e);Pe(Tx(i));const r=new ql(i.get(1),i.get(3)),s=new Z(i.popFirst(5));return r.isEqual(n)||Fi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eP extends Jx{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new YU(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Zx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class YU extends eP{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){t=Kl(t,wn);const e=Kl(t.firestore,jv);return NU($x(e),t._key).then(n=>e6(e,t,n))}class JU extends GU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function Bs(t,e,n){t=Kl(t,wn);const i=Kl(t.firestore,jv),r=KU(t.converter,e,n);return ZU(i,[BU(zU(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,xi.none())])}function ZU(t,e){return function(i,r){const s=new Ir;return i.asyncQueue.enqueueAndForget(async()=>yU(await AU(i),r,s)),s.promise}($x(t),e)}function e6(t,e,n){const i=n.docs.get(e._key),r=new JU(t);return new eP(t,r,e._key,i,new QU(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Jo=r})(Fr),xr(new Oi("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new jv(new HF(i.getProvider("auth-internal")),new YF(i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(c.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_n(ME,"4.7.0",e),_n(ME,"4.7.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebasestorage.googleapis.com",nP="storageBucket",t6=2*60*1e3,n6=10*60*1e3,i6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends ii{constructor(e,n,i=0){super(bp(e),`Firebase Storage: ${n} (${bp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function bp(t){return"storage/"+t}function qv(){const t="An unknown error occurred, please check the error payload for server response.";return new Be(De.UNKNOWN,t)}function r6(t){return new Be(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function s6(t){return new Be(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function o6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(De.UNAUTHENTICATED,t)}function a6(){return new Be(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function l6(t){return new Be(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iP(){return new Be(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rP(){return new Be(De.CANCELED,"User canceled the upload/download.")}function c6(t){return new Be(De.INVALID_URL,"Invalid URL '"+t+"'.")}function u6(t){return new Be(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function d6(){return new Be(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nP+"' property when initializing the app?")}function sP(){return new Be(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function h6(){return new Be(De.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function f6(){return new Be(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function p6(t){return new Be(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fg(t){return new Be(De.INVALID_ARGUMENT,t)}function oP(){return new Be(De.APP_DELETED,"The Firebase app was deleted.")}function m6(t){return new Be(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ul(t,e){return new Be(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ra(t){throw new Be(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(i.path==="")return i;throw u6(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${r}/o${f}`,"i"),v={bucket:1,path:3},S=n===tP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",_=new RegExp(`^https?://${S}/${r}/${x}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:m,indices:v,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<E.length;A++){const L=E[A],D=L.regex.exec(e);if(D){const k=D[L.indices.bucket];let T=D[L.indices.path];T||(T=""),i=new ln(k,T),L.postModify(i);break}}if(i==null)throw c6(e);return i}}class g6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...x){c||(c=!0,e.apply(null,x))}function h(x){r=setTimeout(()=>{r=null,t(m,l())},x)}function f(){s&&clearTimeout(s)}function m(x,..._){if(c){f();return}if(x){f(),d.call(null,x,..._);return}if(l()||o){f(),d.call(null,x,..._);return}i<64&&(i*=2);let E;a===1?(a=2,E=0):E=(i+Math.random())*1e3,h(E)}let v=!1;function S(x){v||(v=!0,f(),!c&&(r!==null?(x||(a=2),clearTimeout(r),h(0)):x||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function v6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t){return t!==void 0}function w6(t){return typeof t=="function"}function E6(t){return typeof t=="object"&&!Array.isArray(t)}function Jh(t){return typeof t=="string"||t instanceof String}function gT(t){return Wv()&&t instanceof Blob}function Wv(){return typeof Blob<"u"}function yT(t,e,n,i){if(i<e)throw fg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw fg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function aP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ls;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ls||(ls={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,n,i,r,s,o,a,l,c,d,h,f=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new gu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ls.NO_ERROR,l=s.getStatus();if(!a||lP(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===ls.ABORT;i(!1,new gu(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new gu(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());_6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=qv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?oP():rP();o(l)}else{const l=iP();o(l)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=y6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&v6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function S6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function C6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x6(t,e,n,i,r,s,o=!0){const a=aP(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return b6(c,e),S6(c,n),I6(c,s),C6(c,i),new T6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function k6(...t){const e=P6();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Wv())return new Blob(t);throw new Be(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function A6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(t){if(typeof atob>"u")throw p6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cp{constructor(e,n){this.data=e,this.contentType=n||null}}function N6(t,e){switch(t){case Kn.RAW:return new Cp(cP(e));case Kn.BASE64:case Kn.BASE64URL:return new Cp(uP(t,e));case Kn.DATA_URL:return new Cp(L6(e),M6(e))}throw qv()}function cP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function O6(t){let e;try{e=decodeURIComponent(t)}catch{throw ul(Kn.DATA_URL,"Malformed data URL.")}return cP(e)}function uP(t,e){switch(t){case Kn.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw ul(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Kn.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw ul(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=R6(e)}catch(r){throw r.message.includes("polyfill")?r:ul(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class dP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ul(Kn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=D6(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function L6(t){const e=new dP(t);return e.base64?uP(Kn.BASE64,e.rest):O6(e.rest)}function M6(t){return new dP(t).contentType}function D6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){let i=0,r="";gT(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(gT(this.data_)){const i=this.data_,r=A6(i,e,n);return r===null?null:new rr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new rr(i,!0)}}static getBlob(...e){if(Wv()){const n=e.map(i=>i instanceof rr?i.data_:i);return new rr(k6.apply(null,n))}else{const n=e.map(o=>Jh(o)?N6(Kn.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new rr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){let e;try{e=JSON.parse(t)}catch{return null}return E6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F6(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function fP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t,e){return e}class zt{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||j6}}let yu=null;function U6(t){return!Jh(t)||t.length<2?t:fP(t)}function pP(){if(yu)return yu;const t=[];t.push(new zt("bucket")),t.push(new zt("generation")),t.push(new zt("metageneration")),t.push(new zt("name","fullPath",!0));function e(s,o){return U6(o)}const n=new zt("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new zt("size");return r.xform=i,t.push(r),t.push(new zt("timeCreated")),t.push(new zt("updated")),t.push(new zt("md5Hash",null,!0)),t.push(new zt("cacheControl",null,!0)),t.push(new zt("contentDisposition",null,!0)),t.push(new zt("contentEncoding",null,!0)),t.push(new zt("contentLanguage",null,!0)),t.push(new zt("contentType",null,!0)),t.push(new zt("metadata","customMetadata",!0)),yu=t,yu}function z6(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new ln(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function B6(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return z6(i,t),i}function mP(t,e,n){const i=hP(e);return i===null?null:B6(t,i,n)}function $6(t,e,n,i){const r=hP(e);if(r===null||!Jh(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=Tc(f,n,i),v=aP({alt:"media",token:c});return m+v})[0]}function gP(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class na{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){if(!t)throw qv()}function Hv(t,e){function n(i,r){const s=mP(t,r,e);return Pi(s!==null),s}return n}function q6(t,e){function n(i,r){const s=mP(t,r,e);return Pi(s!==null),$6(s,r,t.host,t._protocol)}return n}function Sc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=a6():r=o6():n.getStatus()===402?r=s6(t.bucket):n.getStatus()===403?r=l6(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function yP(t){const e=Sc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=r6(t.path)),s.serverResponse=r.serverResponse,s}return n}function W6(t,e,n){const i=e.fullServerUrl(),r=Tc(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new na(r,s,Hv(t,n),o);return a.errorHandler=yP(e),a}function H6(t,e,n){const i=e.fullServerUrl(),r=Tc(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new na(r,s,q6(t,n),o);return a.errorHandler=yP(e),a}function G6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vP(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=G6(null,e)),i}function K6(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let A=0;A<2;A++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=vP(e,i,r),d=gP(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",m=rr.getBlob(h,i,f);if(m===null)throw sP();const v={name:c.fullPath},S=Tc(s,t.host,t._protocol),x="POST",_=t.maxUploadRetryTime,y=new na(S,x,Hv(t,n),_);return y.urlParams=v,y.headers=o,y.body=m.uploadData(),y.errorHandler=Sc(e),y}class nh{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Gv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Pi(!1)}return Pi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Q6(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o=vP(e,i,r),a={name:o.fullPath},l=Tc(s,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=gP(o,n),f=t.maxUploadRetryTime;function m(S){Gv(S);let x;try{x=S.getResponseHeader("X-Goog-Upload-URL")}catch{Pi(!1)}return Pi(Jh(x)),x}const v=new na(l,c,m,f);return v.urlParams=a,v.headers=d,v.body=h,v.errorHandler=Sc(e),v}function Y6(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const d=Gv(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pi(!1)}h||Pi(!1);const f=Number(h);return Pi(!isNaN(f)),new nh(f,i.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new na(n,o,s,a);return l.headers=r,l.errorHandler=Sc(e),l}const vT=256*1024;function X6(t,e,n,i,r,s,o,a){const l=new nh(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw h6();const c=l.total-l.current;let d=c;r>0&&(d=Math.min(d,r));const h=l.current,f=h+d;let m="";d===0?m="finalize":c===d?m="upload, finalize":m="upload";const v={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},S=i.slice(h,f);if(S===null)throw sP();function x(A,L){const D=Gv(A,["active","final"]),k=l.current+d,T=i.size();let b;return D==="final"?b=Hv(e,s)(A,L):b=null,new nh(k,T,D==="final",b)}const _="POST",y=e.maxUploadRetryTime,E=new na(n,_,x,y);return E.headers=v,E.body=S.uploadData(),E.progressCallback=a||null,E.errorHandler=Sc(t),E}const Gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function xp(t){switch(t){case"running":case"pausing":case"canceling":return Gt.RUNNING;case"paused":return Gt.PAUSED;case"success":return Gt.SUCCESS;case"canceled":return Gt.CANCELED;case"error":return Gt.ERROR;default:return Gt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n,i){if(w6(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Z6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ls.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ls.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ls.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Ra("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ra("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ra("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ra("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ra("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e9 extends Z6{initXhr(){this.xhr_.responseType="text"}}function $s(){return new e9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=pP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(De.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(lP(r.status,[]))if(s)r=iP();else{this.sleepTime=Math.max(this.sleepTime*2,i6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(De.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=Q6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,$s,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=Y6(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,$s,n,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=vT*this._chunkMultiplier,n=new nh(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=X6(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,$s,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){vT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=W6(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,$s,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=K6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,$s,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=xp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new J6(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(xp(this._state)){case Gt.SUCCESS:Vs(this._resolve.bind(null,this.snapshot))();break;case Gt.CANCELED:case Gt.ERROR:const n=this._reject;Vs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(xp(this._state)){case Gt.RUNNING:case Gt.PAUSED:e.next&&Vs(e.next.bind(e,this.snapshot))();break;case Gt.SUCCESS:e.complete&&Vs(e.complete.bind(e))();break;case Gt.CANCELED:case Gt.ERROR:e.error&&Vs(e.error.bind(e,this._error))();break;default:e.error&&Vs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Is(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fP(this._location.path)}get storage(){return this._service}get parent(){const e=V6(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new Is(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw m6(e)}}function n9(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new t9(t,new rr(e),n)}function i9(t){t._throwIfRoot("getDownloadURL");const e=H6(t.storage,t._location,pP());return t.storage.makeRequestWithTokens(e,$s).then(n=>{if(n===null)throw f6();return n})}function r9(t,e){const n=F6(t._location.path,e),i=new ln(t._location.bucket,n);return new Is(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t){return/^[A-Za-z]+:\/\//.test(t)}function o9(t,e){return new Is(t,e)}function _P(t,e){if(t instanceof Kv){const n=t;if(n._bucket==null)throw d6();const i=new Is(n,n._bucket);return e!=null?_P(i,e):i}else return e!==void 0?r9(t,e):t}function a9(t,e){if(e&&s9(e)){if(t instanceof Kv)return o9(t,e);throw fg("To use ref(service, url), the first argument must be a Storage instance.")}else return _P(t,e)}function _T(t,e){const n=e==null?void 0:e[nP];return n==null?null:ln.makeFromBucketSpec(n,t)}function l9(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Ey(r,t.app.options.projectId))}class Kv{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=tP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=t6,this._maxUploadRetryTime=n6,this._requests=new Set,r!=null?this._bucket=ln.makeFromBucketSpec(r,this._host):this._bucket=_T(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=_T(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Is(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new g6(oP());{const o=x6(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const wT="@firebase/storage",ET="0.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="storage";function c9(t,e,n){return t=et(t),n9(t,e,n)}function u9(t){return t=et(t),i9(t)}function d9(t,e){return t=et(t),a9(t,e)}function h9(t=kh(),e){t=et(t);const i=oc(t,wP).getImmediate({identifier:e}),r=wy("storage");return r&&f9(i,...r),i}function f9(t,e,n,i={}){l9(t,e,n,i)}function p9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Kv(n,i,r,e,Fr)}function m9(){xr(new Oi(wP,p9,"PUBLIC").setMultipleInstances(!0)),_n(wT,ET,""),_n(wT,ET,"esm2017")}m9();const g9={apiKey:"AIzaSyDTeUPlMVgXYt60SAUE7y5COkCxywRJbeQ",authDomain:"moviza-db6ad.firebaseapp.com",databaseURL:"https://moviza-db6ad-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"moviza-db6ad",storageBucket:"moviza-db6ad.appspot.com",messagingSenderId:"1088122486336",appId:"1:1088122486336:web:38f3550ca70e818a2969a5",measurementId:"G-XLQ7BYLPQG"},Zh=LI(g9),Pp=M4(Zh);new mi;const wo=zF(Zh),Xr=VU(Zh),y9=h9(Zh);function v9({enforceGoogleSignIn:t=!1,handleUpdate:e}){const n=Vr(),i=M.useRef(null),r=M.useRef(null),s=M.useRef(null),[o,a]=M.useState(""),[l,c]=M.useState(""),[d,h]=M.useState(""),[f,m]=M.useState(""),[v,S]=M.useState(!1),[x,_]=M.useState(!1),[y,E]=M.useState("");M.useEffect(()=>{i.current&&i.current.classList.contains("error")&&i.current.classList.remove("error"),r.current&&r.current.classList.contains("error")&&r.current.classList.remove("error"),s.current&&s.current.classList.contains("error")&&s.current.classList.remove("error"),E("")},[v,x]);const A=P=>a(P.target.value),L=P=>c(P.target.value),D=P=>h(P.target.value),k=P=>m(P.target.value),T=()=>S(P=>!P),b=()=>_(P=>!P),I=async P=>{if(P.preventDefault(),d.length<6){E("Password should be at least 6 characters"),r.current.classList.contains("error")&&r.current.classList.remove("error"),setTimeout(()=>{r.current.classList.add("error")},100);return}if(d===f)try{const $=await ED(Pp,l,d);window.localStorage.setItem("user",JSON.stringify($.user)),console.log("signed up"),e($.user.email,o,["start"],["start"]),n("/",{state:{message:"Welcome to Moviza!",fromSignIn:!0},replace:!0})}catch($){$.message==="Firebase: Password should be at least 6 characters (auth/weak-password)."?(E("Password should be at least 6 characters"),r.current.classList.contains("error")&&r.current.classList.remove("error"),setTimeout(()=>{r.current.classList.add("error")},100)):$.message==="Firebase: Error (auth/email-already-in-use)."?(E("This Email already in use"),i.current.classList.contains("error")&&i.current.classList.remove("error"),setTimeout(()=>{i.current.classList.add("error")},100)):(E("An unexpected error occurred. Please try again."),console.error("Error Signing Up:",$.message))}else E("Confirm Password Not Matched"),r.current.classList.contains("error")&&r.current.classList.remove("error"),s.current.classList.contains("error")&&s.current.classList.remove("error"),setTimeout(()=>{r.current.classList.add("error"),s.current.classList.add("error")},100)},N=async P=>{P.preventDefault();try{const $=await TD(Pp,l,d);console.log($.user),window.localStorage.setItem("user",JSON.stringify($.user)),n("/",{state:{message:"Welcome back!",fromSignIn:!0},replace:!0})}catch($){console.error("Error Logging In:",$.message),$.message=="Firebase: Error (auth/invalid-credential)."&&(E("Invalid Email or Password"),i.current.classList.contains("error")&&i.current.classList.remove("error"),r.current.classList.contains("error")&&r.current.classList.remove("error"),setTimeout(()=>{i.current.classList.add("error"),r.current.classList.add("error")},100))}},O=async P=>{P.preventDefault();try{await wD(Pp,l),alert("Password reset email sent!")}catch($){console.error("Error sending password reset email:",$.message)}};return w.jsx("div",{className:"container form-container mt-5 pt-5",children:w.jsxs("div",{className:"row justify-content-center py-5 my-5 align-items-center h-100",children:[w.jsxs("div",{className:"col-11 col-md-5 d-flex flex-column bg-black p-md-5 p-4 rounded-3",children:[w.jsx("img",{className:"w-100 mx-auto",style:{"max-width":"150px"},src:EI,alt:"Moviza"}),w.jsx("h2",{className:"text-center mb-3",children:x?"Reset Password":v?"Sign Up":"Login"}),w.jsx("h6",{className:"text-danger mb-2",children:y}),x?w.jsxs("form",{className:"d-flex flex-column gap-4 my-3",onSubmit:O,children:[w.jsx("input",{className:"form-control py-3",type:"email",value:l,onChange:L,placeholder:"Email",required:!0}),w.jsx("button",{className:"custom-btn py-2 rounded-1",type:"submit",children:"Send Password Reset Email"})]}):w.jsxs("form",{className:"d-flex flex-column gap-4 my-3",onSubmit:v?I:N,children:[!t&&v&&w.jsx("div",{children:w.jsx("input",{className:"form-control py-3",type:"text",value:o,onChange:A,placeholder:"Display Name",required:!0})}),w.jsx("input",{ref:i,className:"form-control py-3",type:"email",value:l,onChange:L,placeholder:"Email",required:!0}),!t&&w.jsx("div",{children:w.jsx("input",{ref:r,className:"form-control py-3",type:"password",value:d,onChange:D,placeholder:"Password",required:!0})}),!t&&v&&w.jsx("div",{children:w.jsx("input",{ref:s,className:"form-control py-3",type:"password",value:f,onChange:k,placeholder:"Confirm Password",required:!0})}),!t&&w.jsx("button",{className:"custom-btn py-2 rounded-1",type:"submit",children:v?"Sign Up":"Login"})]}),!t&&!x&&w.jsxs(w.Fragment,{children:[v?"":w.jsx("p",{className:"text-end cursor",onClick:b,children:"Forgot your password?"}),w.jsx("p",{className:"text-center mt-5 cursor",onClick:T,children:v?"Already have an account? Login":"Don't have an account? Sign Up"})]}),x&&w.jsxs("p",{className:"text-end cursor",onClick:b,children:["Back to ",v?"Sign Up":"Login"]})]}),w.jsxs("div",{className:"col-11 mt-5",children:[t&&w.jsx("p",{children:"You can only sign in with Google."}),!x&&w.jsx(w.Fragment,{})]})]})})}function _9({loading:t,error:e,moviza:n,Imdb:i}){return w.jsx("section",{className:"container",children:w.jsx("div",{className:"row",children:w.jsx("div",{className:"col-12 gridItems",children:n&&n.length>0?n.map((r,s)=>w.jsx(vy,{item:r,Imdb:i},s)):w.jsx("h1",{className:"no-data",children:"No Data Found"})})})})}function TT({useMoviza:t,forWhat:e}){const{fav:n,watchList:i,handleFav:r,handleWatchList:s}=Sn(),[o,a]=rI(),[l,c]=M.useState([{filter:"All",type:"all",active:!0},{filter:"Movie",type:"type",active:!1},{filter:"Series",type:"type",active:!1},{filter:"Anime",type:"cinematography",active:!1},{filter:"Animation",type:"cinematography",active:!1},{filter:"Live-Action",type:"cinematography",active:!1}]),{loading:d,error:h,moviza:f,Imdb:m}=t(),[v,S]=M.useState([]),[x,_]=M.useState([]);return M.useEffect(()=>{c([{filter:"All",type:"all",active:!0},{filter:"Movie",type:"type",active:!1},{filter:"Series",type:"type",active:!1},{filter:"Anime",type:"cinematography",active:!1},{filter:"Animation",type:"cinematography",active:!1},{filter:"Live-Action",type:"cinematography",active:!1}])},[e]),M.useEffect(()=>{if(S(f),_(m),o.get("filter")){const y=l.map(E=>E.filter===o.get("filter")?{...E,active:!0}:{...E,active:!1});c(y),o.get("filter")!="All"&&o.get("filter")!=""?e=="fav"?S(f.filter(E=>E[o.get("type")]==o.get("filter")&&n.includes(E.imdb_id))):S(f.filter(E=>E[o.get("type")]==o.get("filter")&&i.includes(E.imdb_id))):e=="fav"?S(f.filter(E=>n.includes(E.imdb_id))):S(f.filter(E=>i.includes(E.imdb_id)))}else e=="fav"?S(f.filter(y=>n.includes(y.imdb_id))):S(f.filter(y=>i.includes(y.imdb_id)))},[d,o,n,i,e]),w.jsxs(w.Fragment,{children:[w.jsx("section",{className:"mt-5 pt-5 container",children:w.jsx("div",{className:"row",children:w.jsx("div",{className:"col-12 py-5",children:w.jsx("h6",{className:"d-flex flex-wrap gap-3 genre",children:l.map((y,E)=>w.jsx("span",{role:"button",onClick:()=>{a({filter:y.filter,type:y.type})},className:y.active?"active":"",children:y.filter},E))})})})}),w.jsx(_9,{loading:d,error:h,moviza:v,Imdb:x,range:99})]})}function G(t,e,n){return(e=E9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E9(t){var e=w9(t,"string");return typeof e=="symbol"?e:String(e)}function T9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ST(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S9(t,e,n){return e&&ST(t.prototype,e),n&&ST(t,n),t}function I9(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IT(Object(n),!0).forEach(function(i){I9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var CT={addCSS:!0,thumbWidth:15,watch:!0};function b9(t,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function C9(t,e){if(t&&e){var n=new Event(e,{bubbles:!0});t.dispatchEvent(n)}}var Ic=function(t){return t!=null?t.constructor:null},Qv=function(t,e){return!!(t&&e&&t instanceof e)},EP=function(t){return t==null},TP=function(t){return Ic(t)===Object},x9=function(t){return Ic(t)===Number&&!Number.isNaN(t)},SP=function(t){return Ic(t)===String},P9=function(t){return Ic(t)===Boolean},k9=function(t){return Ic(t)===Function},IP=function(t){return Array.isArray(t)},bP=function(t){return Qv(t,NodeList)},A9=function(t){return Qv(t,Element)},R9=function(t){return Qv(t,Event)},N9=function(t){return EP(t)||(SP(t)||IP(t)||bP(t))&&!t.length||TP(t)&&!Object.keys(t).length},Nt={nullOrUndefined:EP,object:TP,number:x9,string:SP,boolean:P9,function:k9,array:IP,nodeList:bP,element:A9,event:R9,empty:N9};function O9(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function L9(t,e){if(1>e){var n=O9(e);return parseFloat(t.toFixed(n))}return Math.round(t/e)*e}var M9=function(){function t(e,n){T9(this,t),Nt.element(e)?this.element=e:Nt.string(e)&&(this.element=document.querySelector(e)),Nt.element(this.element)&&Nt.empty(this.element.rangeTouch)&&(this.config=bT({},CT,{},n),this.init())}return S9(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var n=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(r){n.element[i](r,function(s){return n.set(s)},!1)})}},{key:"get",value:function(e){if(!t.enabled||!Nt.event(e))return null;var n,i=e.target,r=e.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,o=parseFloat(i.getAttribute("max"))||100,a=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(r.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),s+L9(n/100*(o-s),a)}},{key:"set",value:function(e){t.enabled&&Nt.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),C9(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;if(Nt.empty(e)||Nt.string(e)?i=Array.from(document.querySelectorAll(Nt.string(e)?e:'input[type="range"]')):Nt.element(e)?i=[e]:Nt.nodeList(e)?i=Array.from(e):Nt.array(e)&&(i=e.filter(Nt.element)),Nt.empty(i))return null;var r=bT({},CT,{},n);if(Nt.string(e)&&r.watch){var s=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(l){Nt.element(l)&&b9(l,e)&&new t(l,r)})})});s.observe(document.body,{childList:!0,subtree:!0})}return i.map(function(o){return new t(o,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}();const bc=t=>t!=null?t.constructor:null,Ui=(t,e)=>!!(t&&e&&t instanceof e),Yv=t=>t==null,CP=t=>bc(t)===Object,D9=t=>bc(t)===Number&&!Number.isNaN(t),ef=t=>bc(t)===String,V9=t=>bc(t)===Boolean,xP=t=>typeof t=="function",PP=t=>Array.isArray(t),F9=t=>Ui(t,WeakMap),kP=t=>Ui(t,NodeList),j9=t=>bc(t)===Text,U9=t=>Ui(t,Event),z9=t=>Ui(t,KeyboardEvent),B9=t=>Ui(t,window.TextTrackCue)||Ui(t,window.VTTCue),$9=t=>Ui(t,TextTrack)||!Yv(t)&&ef(t.kind),q9=t=>Ui(t,Promise)&&xP(t.then),W9=t=>t!==null&&typeof t=="object"&&t.nodeType===1&&typeof t.style=="object"&&typeof t.ownerDocument=="object",AP=t=>Yv(t)||(ef(t)||PP(t)||kP(t))&&!t.length||CP(t)&&!Object.keys(t).length,H9=t=>{if(Ui(t,window.URL))return!0;if(!ef(t))return!1;let e=t;t.startsWith("http://")&&t.startsWith("https://")||(e=`http://${t}`);try{return!AP(new URL(e).hostname)}catch{return!1}};var R={nullOrUndefined:Yv,object:CP,number:D9,string:ef,boolean:V9,function:xP,array:PP,weakMap:F9,nodeList:kP,element:W9,textNode:j9,event:U9,keyboardEvent:z9,cue:B9,track:$9,promise:q9,url:H9,empty:AP};const pg=(()=>{const t=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(e).find(i=>t.style[i]!==void 0);return!!R.string(n)&&e[n]})();function RP(t,e){setTimeout(()=>{try{t.hidden=!0,t.offsetHeight,t.hidden=!1}catch{}},e)}const G9=!!window.document.documentMode,K9=/Edge/g.test(navigator.userAgent),Q9="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),Y9=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,X9=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,J9=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var pt={isIE:G9,isEdge:K9,isWebKit:Q9,isIPhone:Y9,isIPadOS:X9,isIos:J9};function Z9(t){return JSON.parse(JSON.stringify(t))}function NP(t,e){return e.split(".").reduce((n,i)=>n&&n[i],t)}function Qe(t={},...e){if(!e.length)return t;const n=e.shift();return R.object(n)?(Object.keys(n).forEach(i=>{R.object(n[i])?(Object.keys(t).includes(i)||Object.assign(t,{[i]:{}}),Qe(t[i],n[i])):Object.assign(t,{[i]:n[i]})}),Qe(t,...e)):t}function OP(t,e){const n=t.length?t:[t];Array.from(n).reverse().forEach((i,r)=>{const s=r>0?e.cloneNode(!0):e,o=i.parentNode,a=i.nextSibling;s.appendChild(i),a?o.insertBefore(s,a):o.appendChild(s)})}function mg(t,e){R.element(t)&&!R.empty(e)&&Object.entries(e).filter(([,n])=>!R.nullOrUndefined(n)).forEach(([n,i])=>t.setAttribute(n,i))}function ee(t,e,n){const i=document.createElement(t);return R.object(e)&&mg(i,e),R.string(n)&&(i.innerText=n),i}function ez(t,e){R.element(t)&&R.element(e)&&e.parentNode.insertBefore(t,e.nextSibling)}function xT(t,e,n,i){R.element(e)&&e.appendChild(ee(t,n,i))}function Ti(t){R.nodeList(t)||R.array(t)?Array.from(t).forEach(Ti):R.element(t)&&R.element(t.parentNode)&&t.parentNode.removeChild(t)}function zu(t){if(!R.element(t))return;let{length:e}=t.childNodes;for(;e>0;)t.removeChild(t.lastChild),e-=1}function ih(t,e){return R.element(e)&&R.element(e.parentNode)&&R.element(t)?(e.parentNode.replaceChild(t,e),t):null}function Bn(t,e){if(!R.string(t)||R.empty(t))return{};const n={},i=Qe({},e);return t.split(",").forEach(r=>{const s=r.trim(),o=s.replace(".",""),a=s.replace(/[[\]]/g,"").split("="),[l]=a,c=a.length>1?a[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":R.string(i.class)?n.class=`${i.class} ${o}`:n.class=o;break;case"#":n.id=s.replace("#","");break;case"[":n[l]=c}}),Qe(i,n)}function Wr(t,e){if(!R.element(t))return;let n=e;R.boolean(n)||(n=!t.hidden),t.hidden=n}function Se(t,e,n){if(R.nodeList(t))return Array.from(t).map(i=>Se(i,e,n));if(R.element(t)){let i="toggle";return n!==void 0&&(i=n?"add":"remove"),t.classList[i](e),t.classList.contains(e)}return!1}function rh(t,e){return R.element(t)&&t.classList.contains(e)}function rs(t,e){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function tz(t,e){const{prototype:n}=Element;return(n.closest||function(){let i=this;do{if(rs.matches(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}).call(t,e)}function Yl(t){return this.elements.container.querySelectorAll(t)}function rt(t){return this.elements.container.querySelector(t)}function kp(t=null,e=!1){R.element(t)&&t.focus({preventScroll:!0,focusVisible:e})}const PT={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Xe={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(t,e){const n=Xe[t]||e!=="html5";return{api:n,ui:n&&Xe.rangeInput}},pip:!(pt.isIPhone||!R.function(ee("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||ee("video").disablePictureInPicture)),airplay:R.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(t){if(R.empty(t))return!1;const[e]=t.split("/");let n=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys(PT).includes(n)&&(n+=`; codecs="${PT[t]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const t=document.createElement("input");return t.type="range",t.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:pg!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},nz=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t})();function Xl(t,e,n,i=!1,r=!0,s=!1){if(!t||!("addEventListener"in t)||R.empty(e)||!R.function(n))return;const o=e.split(" ");let a=s;nz&&(a={passive:r,capture:s}),o.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:t,type:l,callback:n,options:a}),t[i?"addEventListener":"removeEventListener"](l,n,a)})}function me(t,e="",n,i=!0,r=!1){Xl.call(this,t,e,n,!0,i,r)}function tf(t,e="",n,i=!0,r=!1){Xl.call(this,t,e,n,!1,i,r)}function Xv(t,e="",n,i=!0,r=!1){const s=(...o)=>{tf(t,e,s,i,r),n.apply(this,o)};Xl.call(this,t,e,s,!0,i,r)}function te(t,e="",n=!1,i={}){if(!R.element(t)||R.empty(e))return;const r=new CustomEvent(e,{bubbles:n,detail:{...i,plyr:this}});t.dispatchEvent(r)}function iz(){this&&this.eventListeners&&(this.eventListeners.forEach(t=>{const{element:e,type:n,callback:i,options:r}=t;e.removeEventListener(n,i,r)}),this.eventListeners=[])}function rz(){return new Promise(t=>this.ready?setTimeout(t,0):me.call(this,this.elements.container,"ready",t)).then(()=>{})}function qn(t){R.promise(t)&&t.then(null,()=>{})}function gg(t){return R.array(t)?t.filter((e,n)=>t.indexOf(e)===n):t}function LP(t,e){return R.array(t)&&t.length?t.reduce((n,i)=>Math.abs(i-e)<Math.abs(n-e)?i:n):null}function MP(t){return!(!window||!window.CSS)&&window.CSS.supports(t)}const kT=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((t,[e,n])=>({...t,[e/n]:[e,n]}),{});function DP(t){return R.array(t)||R.string(t)&&t.includes(":")?(R.array(t)?t:t.split(":")).map(Number).every(R.number):!1}function sh(t){if(!R.array(t)||!t.every(R.number))return null;const[e,n]=t,i=(s,o)=>o===0?s:i(o,s%o),r=i(e,n);return[e/r,n/r]}function Jv(t){const e=i=>DP(i)?i.split(":").map(Number):null;let n=e(t);if(n===null&&(n=e(this.config.ratio)),n===null&&!R.empty(this.embed)&&R.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:i,videoHeight:r}=this.media;n=[i,r]}return sh(n)}function zo(t){if(!this.isVideo)return{};const{wrapper:e}=this.elements,n=Jv.call(this,t);if(!R.array(n))return{};const[i,r]=sh(n),s=100/i*r;if(MP(`aspect-ratio: ${i}/${r}`)?e.style.aspectRatio=`${i}/${r}`:e.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-s)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function VP(t,e,n=.05){const i=t/e,r=LP(Object.keys(kT),i);return Math.abs(r-i)<=n?kT[r]:[t,e]}function sz(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const dr={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(t=>{const e=t.getAttribute("type");return!!R.empty(e)||Xe.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:dr.getSources.call(this).map(t=>Number(t.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const t=this;t.options.speed=t.config.speed.options,R.empty(this.config.ratio)||zo.call(t),Object.defineProperty(t.media,"quality",{get(){const e=dr.getSources.call(t).find(n=>n.getAttribute("src")===t.source);return e&&Number(e.getAttribute("size"))},set(e){if(t.quality!==e){if(t.config.quality.forced&&R.function(t.config.quality.onChange))t.config.quality.onChange(e);else{const n=dr.getSources.call(t).find(l=>Number(l.getAttribute("size"))===e);if(!n)return;const{currentTime:i,paused:r,preload:s,readyState:o,playbackRate:a}=t.media;t.media.src=n.getAttribute("src"),(s!=="none"||o)&&(t.once("loadedmetadata",()=>{t.speed=a,t.currentTime=i,r||qn(t.play())}),t.media.load())}te.call(t,t.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(Ti(dr.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function oz(t){return`${t}-${Math.floor(1e4*Math.random())}`}function yg(t,...e){return R.empty(t)?t:t.toString().replace(/{(\d+)}/g,(n,i)=>e[i].toString())}function az(t,e){return t===0||e===0||Number.isNaN(t)||Number.isNaN(e)?0:(t/e*100).toFixed(2)}const dl=(t="",e="",n="")=>t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),FP=(t="")=>t.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function lz(t=""){let e=t.toString();return e=dl(e,"-"," "),e=dl(e,"_"," "),e=FP(e),dl(e," ","")}function cz(t=""){let e=t.toString();return e=lz(e),e.charAt(0).toLowerCase()+e.slice(1)}function uz(t){const e=document.createDocumentFragment(),n=document.createElement("div");return e.appendChild(n),n.innerHTML=t,e.firstChild.innerText}function dz(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}const AT={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ut={get(t="",e={}){if(R.empty(t)||R.empty(e))return"";let n=NP(e.i18n,t);if(R.empty(n))return Object.keys(AT).includes(t)?AT[t]:"";const i={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(i).forEach(([r,s])=>{n=dl(n,r,s)}),n}};class Jl{constructor(e){G(this,"get",n=>{if(!Jl.supported||!this.enabled)return null;const i=window.localStorage.getItem(this.key);if(R.empty(i))return null;const r=JSON.parse(i);return R.string(n)&&n.length?r[n]:r}),G(this,"set",n=>{if(!Jl.supported||!this.enabled||!R.object(n))return;let i=this.get();R.empty(i)&&(i={}),Qe(i,n);try{window.localStorage.setItem(this.key,JSON.stringify(i))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function Cc(t,e="text"){return new Promise((n,i)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",()=>{if(e==="text")try{n(JSON.parse(r.responseText))}catch{n(r.responseText)}else n(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",t,!0),r.responseType=e,r.send()}catch(r){i(r)}})}function jP(t,e){if(!R.string(t))return;const n="cache",i=R.string(e);let r=!1;const s=()=>document.getElementById(e)!==null,o=(a,l)=>{a.innerHTML=l,i&&s()||document.body.insertAdjacentElement("afterbegin",a)};if(!i||!s()){const a=Jl.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),i&&l.setAttribute("id",e),a){const c=window.localStorage.getItem(`${n}-${e}`);if(r=c!==null,r){const d=JSON.parse(c);o(l,d.content)}}Cc(t).then(c=>{if(!R.empty(c)){if(a)try{window.localStorage.setItem(`${n}-${e}`,JSON.stringify({content:c}))}catch{}o(l,c)}}).catch(()=>{})}}const UP=t=>Math.trunc(t/60/60%60,10),hz=t=>Math.trunc(t/60%60,10),fz=t=>Math.trunc(t%60,10);function nf(t=0,e=!1,n=!1){if(!R.number(t))return nf(void 0,e,n);const i=a=>`0${a}`.slice(-2);let r=UP(t);const s=hz(t),o=fz(t);return r=e||r>0?`${r}:`:"",`${n&&t>0?"-":""}${r}${i(s)}:${i(o)}`}const H={getIconUrl(){const t=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,n=t.host!==e||pt.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=rt.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Yl.call(this,this.config.selectors.buttons.play),pause:rt.call(this,this.config.selectors.buttons.pause),restart:rt.call(this,this.config.selectors.buttons.restart),rewind:rt.call(this,this.config.selectors.buttons.rewind),fastForward:rt.call(this,this.config.selectors.buttons.fastForward),mute:rt.call(this,this.config.selectors.buttons.mute),pip:rt.call(this,this.config.selectors.buttons.pip),airplay:rt.call(this,this.config.selectors.buttons.airplay),settings:rt.call(this,this.config.selectors.buttons.settings),captions:rt.call(this,this.config.selectors.buttons.captions),fullscreen:rt.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=rt.call(this,this.config.selectors.progress),this.elements.inputs={seek:rt.call(this,this.config.selectors.inputs.seek),volume:rt.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:rt.call(this,this.config.selectors.display.buffer),currentTime:rt.call(this,this.config.selectors.display.currentTime),duration:rt.call(this,this.config.selectors.display.duration)},R.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon(t,e){const n="http://www.w3.org/2000/svg",i=H.getIconUrl.call(this),r=`${i.cors?"":i.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");mg(s,Qe(e,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${r}-${t}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(t,e={}){const n=ut.get(t,this.config);return ee("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(t){if(R.empty(t))return null;const e=ee("span",{class:this.config.classNames.menu.value});return e.appendChild(ee("span",{class:this.config.classNames.menu.badge},t)),e},createButton(t,e){const n=Qe({},e);let i=cz(t);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(n).includes(o)&&(r[o]=n[o],delete n[o])}),r.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some(o=>o===this.config.classNames.control)||Qe(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,t){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,i="play",r.label="play",r.icon="play";break;default:R.empty(r.label)&&(r.label=i),R.empty(r.icon)&&(r.icon=t)}const s=ee(r.element);return r.toggle?(s.appendChild(H.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(H.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(H.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(H.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(H.createIcon.call(this,r.icon)),s.appendChild(H.createLabel.call(this,r.label))),Qe(n,Bn(this.config.selectors.buttons[i],n)),mg(s,n),i==="play"?(R.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(s)):this.elements.buttons[i]=s,s},createRange(t,e){const n=ee("input",Qe(Bn(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":ut.get(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=n,H.updateRangeFill.call(this,n),M9.setup(n),n},createProgress(t,e){const n=ee("progress",Qe(Bn(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(t!=="volume"){n.appendChild(ee("span",null,"0"));const i={played:"played",buffer:"buffered"}[t],r=i?ut.get(i,this.config):"";n.innerText=`% ${r.toLowerCase()}`}return this.elements.display[t]=n,n},createTime(t,e){const n=Bn(this.config.selectors.display[t],e),i=ee("div",Qe(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":ut.get(t,this.config),role:"timer"}),"00:00");return this.elements.display[t]=i,i},bindMenuItemShortcuts(t,e){me.call(this,t,"keydown keyup",n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const i=rs(t,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(n.key))H.showMenuPanel.call(this,e,!0);else{let r;n.key!==" "&&(n.key==="ArrowDown"||i&&n.key==="ArrowRight"?(r=t.nextElementSibling,R.element(r)||(r=t.parentNode.firstElementChild)):(r=t.previousElementSibling,R.element(r)||(r=t.parentNode.lastElementChild)),kp.call(this,r,!0))}},!1),me.call(this,t,"keyup",n=>{n.key==="Return"&&H.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:t,list:e,type:n,title:i,badge:r=null,checked:s=!1}){const o=Bn(this.config.selectors.inputs[n]),a=ee("button",Qe(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:t})),l=ee("span");l.innerHTML=i,R.element(r)&&l.appendChild(r),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(c){c&&Array.from(a.parentNode.children).filter(d=>rs(d,'[role="menuitemradio"]')).forEach(d=>d.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",c?"true":"false")}}),this.listeners.bind(a,"click keyup",c=>{if(!R.keyboardEvent(c)||c.key===" "){switch(c.preventDefault(),c.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(t);break;case"quality":this.quality=t;break;case"speed":this.speed=parseFloat(t)}H.showMenuPanel.call(this,"home",R.keyboardEvent(c))}},n,!1),H.bindMenuItemShortcuts.call(this,a,n),e.appendChild(a)},formatTime(t=0,e=!1){return R.number(t)?nf(t,UP(this.duration)>0,e):t},updateTimeDisplay(t=null,e=0,n=!1){R.element(t)&&R.number(e)&&(t.innerText=H.formatTime(e,n))},updateVolume(){this.supported.ui&&(R.element(this.elements.inputs.volume)&&H.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),R.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(t,e=0){R.element(t)&&(t.value=e,H.updateRangeFill.call(this,t))},updateProgress(t){if(!this.supported.ui||!R.event(t))return;let e=0;const n=(i,r)=>{const s=R.number(r)?r:0,o=R.element(i)?i:this.elements.display.buffer;if(R.element(o)){o.value=s;const a=o.getElementsByTagName("span")[0];R.element(a)&&(a.childNodes[0].nodeValue=s)}};if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":e=az(this.currentTime,this.duration),t.type==="timeupdate"&&H.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(t){const e=R.event(t)?t.target:t;if(R.element(e)&&e.getAttribute("type")==="range"){if(rs(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const n=H.formatTime(this.currentTime),i=H.formatTime(this.duration),r=ut.get("seekLabel",this.config);e.setAttribute("aria-valuetext",r.replace("{currentTime}",n).replace("{duration}",i))}else if(rs(e,this.config.selectors.inputs.volume)){const n=100*e.value;e.setAttribute("aria-valuenow",n),e.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(pt.isWebKit||pt.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(t){var e,n;if(!this.config.tooltips.seek||!R.element(this.elements.inputs.seek)||!R.element(this.elements.display.seekTooltip)||this.duration===0)return;const i=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=d=>Se(i,r,d);if(this.touch)return void s(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(R.event(t))o=100/a.width*(t.pageX-a.left);else{if(!rh(i,r))return;o=parseFloat(i.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;i.innerText=H.formatTime(l);const c=(e=this.config.markers)===null||e===void 0||(n=e.points)===null||n===void 0?void 0:n.find(({time:d})=>d===Math.round(l));c&&i.insertAdjacentHTML("afterbegin",`${c.label}<br>`),i.style.left=`${o}%`,R.event(t)&&["mouseenter","mouseleave"].includes(t.type)&&s(t.type==="mouseenter")},timeUpdate(t){const e=!R.element(this.elements.display.duration)&&this.config.invertTime;H.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&t.type==="timeupdate"&&this.media.seeking||H.updateProgress.call(this,t)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Wr(this.elements.display.currentTime,!0),void Wr(this.elements.progress,!0);R.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const t=R.element(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&H.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&H.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&H.setMarkers.call(this),H.updateSeekTooltip.call(this)},toggleMenuButton(t,e){Wr(this.elements.settings.buttons[t],!e)},updateSetting(t,e,n){const i=this.elements.settings.panels[t];let r=null,s=e;if(t==="captions")r=this.currentTrack;else{if(r=R.empty(n)?this[t]:n,R.empty(r)&&(r=this.config[t].default),!R.empty(this.options[t])&&!this.options[t].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${t}`);if(!this.config[t].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${t}`)}if(R.element(s)||(s=i&&i.querySelector('[role="menu"]')),!R.element(s))return;this.elements.settings.buttons[t].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=H.getLabel.call(this,t,r);const o=s&&s.querySelector(`[value="${r}"]`);R.element(o)&&(o.checked=!0)},getLabel(t,e){switch(t){case"speed":return e===1?ut.get("normal",this.config):`${e}&times;`;case"quality":if(R.number(e)){const n=ut.get(`qualityLabel.${e}`,this.config);return n.length?n:`${e}p`}return FP(e);case"captions":return _e.getLabel.call(this);default:return null}},setQualityMenu(t){if(!R.element(this.elements.settings.panels.quality))return;const e="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');R.array(t)&&(this.options.quality=gg(t).filter(s=>this.config.quality.options.includes(s)));const i=!R.empty(this.options.quality)&&this.options.quality.length>1;if(H.toggleMenuButton.call(this,e,i),zu(n),H.checkMenu.call(this),!i)return;const r=s=>{const o=ut.get(`qualityBadge.${s}`,this.config);return o.length?H.createBadge.call(this,o):null};this.options.quality.sort((s,o)=>{const a=this.config.quality.options;return a.indexOf(s)>a.indexOf(o)?1:-1}).forEach(s=>{H.createMenuItem.call(this,{value:s,list:n,type:e,title:H.getLabel.call(this,"quality",s),badge:r(s)})}),H.updateSetting.call(this,e,n)},setCaptionsMenu(){if(!R.element(this.elements.settings.panels.captions))return;const t="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=_e.getTracks.call(this),i=!!n.length;if(H.toggleMenuButton.call(this,t,i),zu(e),H.checkMenu.call(this),!i)return;const r=n.map((s,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:_e.getLabel.call(this,s),badge:s.language&&H.createBadge.call(this,s.language.toUpperCase()),list:e,type:"language"}));r.unshift({value:-1,checked:!this.captions.toggled,title:ut.get("disabled",this.config),list:e,type:"language"}),r.forEach(H.createMenuItem.bind(this)),H.updateSetting.call(this,t,e)},setSpeedMenu(){if(!R.element(this.elements.settings.panels.speed))return;const t="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(i=>i>=this.minimumSpeed&&i<=this.maximumSpeed);const n=!R.empty(this.options.speed)&&this.options.speed.length>1;H.toggleMenuButton.call(this,t,n),zu(e),H.checkMenu.call(this),n&&(this.options.speed.forEach(i=>{H.createMenuItem.call(this,{value:i,list:e,type:t,title:H.getLabel.call(this,"speed",i)})}),H.updateSetting.call(this,t,e))},checkMenu(){const{buttons:t}=this.elements.settings,e=!R.empty(t)&&Object.values(t).some(n=>!n.hidden);Wr(this.elements.settings.menu,!e)},focusFirstMenuItem(t,e=!1){if(this.elements.settings.popup.hidden)return;let n=t;R.element(n)||(n=Object.values(this.elements.settings.panels).find(r=>!r.hidden));const i=n.querySelector('[role^="menuitem"]');kp.call(this,i,e)},toggleMenu(t){const{popup:e}=this.elements.settings,n=this.elements.buttons.settings;if(!R.element(e)||!R.element(n))return;const{hidden:i}=e;let r=i;if(R.boolean(t))r=t;else if(R.keyboardEvent(t)&&t.key==="Escape")r=!1;else if(R.event(t)){const s=R.function(t.composedPath)?t.composedPath()[0]:t.target,o=e.contains(s);if(o||!o&&t.target!==n&&r)return}n.setAttribute("aria-expanded",r),Wr(e,!r),Se(this.elements.container,this.config.classNames.menu.open,r),r&&R.keyboardEvent(t)?H.focusFirstMenuItem.call(this,null,!0):r||i||kp.call(this,n,R.keyboardEvent(t))},getMenuSize(t){const e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);const n=e.scrollWidth,i=e.scrollHeight;return Ti(e),{width:n,height:i}},showMenuPanel(t="",e=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${t}`);if(!R.element(n))return;const i=n.parentNode,r=Array.from(i.children).find(s=>!s.hidden);if(Xe.transitions&&!Xe.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const s=H.getMenuSize.call(this,n),o=a=>{a.target===i&&["width","height"].includes(a.propertyName)&&(i.style.width="",i.style.height="",tf.call(this,i,pg,o))};me.call(this,i,pg,o),i.style.width=`${s.width}px`,i.style.height=`${s.height}px`}Wr(r,!0),Wr(n,!1),H.focusFirstMenuItem.call(this,n,e)},setDownloadUrl(){const t=this.elements.buttons.download;R.element(t)&&t.setAttribute("href",this.download)},create(t){const{bindMenuItemShortcuts:e,createButton:n,createProgress:i,createRange:r,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=H;this.elements.controls=null,R.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const c=ee("div",Bn(this.config.selectors.controls.wrapper));this.elements.controls=c;const d={class:"plyr__controls__item"};return gg(R.array(this.config.controls)?this.config.controls:[]).forEach(h=>{if(h==="restart"&&c.appendChild(n.call(this,"restart",d)),h==="rewind"&&c.appendChild(n.call(this,"rewind",d)),h==="play"&&c.appendChild(n.call(this,"play",d)),h==="fast-forward"&&c.appendChild(n.call(this,"fast-forward",d)),h==="progress"){const f=ee("div",{class:`${d.class} plyr__progress__container`}),m=ee("div",Bn(this.config.selectors.progress));if(m.appendChild(r.call(this,"seek",{id:`plyr-seek-${t.id}`})),m.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const v=ee("span",{class:this.config.classNames.tooltip},"00:00");m.appendChild(v),this.elements.display.seekTooltip=v}this.elements.progress=m,f.appendChild(this.elements.progress),c.appendChild(f)}if(h==="current-time"&&c.appendChild(s.call(this,"currentTime",d)),h==="duration"&&c.appendChild(s.call(this,"duration",d)),h==="mute"||h==="volume"){let{volume:f}=this.elements;if(R.element(f)&&c.contains(f)||(f=ee("div",Qe({},d,{class:`${d.class} plyr__volume`.trim()})),this.elements.volume=f,c.appendChild(f)),h==="mute"&&f.appendChild(n.call(this,"mute")),h==="volume"&&!pt.isIos&&!pt.isIPadOS){const m={max:1,step:.05,value:this.config.volume};f.appendChild(r.call(this,"volume",Qe(m,{id:`plyr-volume-${t.id}`})))}}if(h==="captions"&&c.appendChild(n.call(this,"captions",d)),h==="settings"&&!R.empty(this.config.settings)){const f=ee("div",Qe({},d,{class:`${d.class} plyr__menu`.trim(),hidden:""}));f.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${t.id}`,"aria-expanded":!1}));const m=ee("div",{class:"plyr__menu__container",id:`plyr-settings-${t.id}`,hidden:""}),v=ee("div"),S=ee("div",{id:`plyr-settings-${t.id}-home`}),x=ee("div",{role:"menu"});S.appendChild(x),v.appendChild(S),this.elements.settings.panels.home=S,this.config.settings.forEach(_=>{const y=ee("button",Qe(Bn(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,y,_),me.call(this,y,"click",()=>{l.call(this,_,!1)});const E=ee("span",null,ut.get(_,this.config)),A=ee("span",{class:this.config.classNames.menu.value});A.innerHTML=t[_],E.appendChild(A),y.appendChild(E),x.appendChild(y);const L=ee("div",{id:`plyr-settings-${t.id}-${_}`,hidden:""}),D=ee("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});D.appendChild(ee("span",{"aria-hidden":!0},ut.get(_,this.config))),D.appendChild(ee("span",{class:this.config.classNames.hidden},ut.get("menuBack",this.config))),me.call(this,L,"keydown",k=>{k.key==="ArrowLeft"&&(k.preventDefault(),k.stopPropagation(),l.call(this,"home",!0))},!1),me.call(this,D,"click",()=>{l.call(this,"home",!1)}),L.appendChild(D),L.appendChild(ee("div",{role:"menu"})),v.appendChild(L),this.elements.settings.buttons[_]=y,this.elements.settings.panels[_]=L}),m.appendChild(v),f.appendChild(m),c.appendChild(f),this.elements.settings.popup=m,this.elements.settings.menu=f}if(h==="pip"&&Xe.pip&&c.appendChild(n.call(this,"pip",d)),h==="airplay"&&Xe.airplay&&c.appendChild(n.call(this,"airplay",d)),h==="download"){const f=Qe({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:m}=this.config.urls;!R.url(m)&&this.isEmbed&&Qe(f,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(n.call(this,"download",f))}h==="fullscreen"&&c.appendChild(n.call(this,"fullscreen",d))}),this.isHTML5&&o.call(this,dr.getQualityOptions.call(this)),a.call(this),c},inject(){if(this.config.loadSprite){const r=H.getIconUrl.call(this);r.cors&&jP(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let t=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;R.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),R.element(this.config.controls)||R.string(this.config.controls)?t=this.config.controls:(t=H.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:_e.getLabel.call(this)}),n=!1);let i;if(n&&R.string(this.config.controls)&&(t=(r=>{let s=r;return Object.entries(e).forEach(([o,a])=>{s=dl(s,`{${o}}`,a)}),s})(t)),R.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),R.element(i)||(i=this.elements.container),i[R.element(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),R.element(this.elements.controls)||H.findElements.call(this),!R.empty(this.elements.buttons)){const r=s=>{const o=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>rh(s,o),set(a=!1){Se(s,o,a),s.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{R.array(s)||R.nodeList(s)?Array.from(s).filter(Boolean).forEach(r):r(s)})}if(pt.isEdge&&RP(i),this.config.tooltips.controls){const{classNames:r,selectors:s}=this.config,o=`${s.controls.wrapper} ${s.labels} .${r.hidden}`,a=Yl.call(this,o);Array.from(a).forEach(l=>{Se(l,this.config.classNames.hidden,!1),Se(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var t,e;if(!this.duration||this.elements.markers)return;const n=(t=this.config.markers)===null||t===void 0||(e=t.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(n==null||!n.length)return;const i=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const o=`${this.config.classNames.tooltip}--visible`,a=l=>Se(s,o,l);n.forEach(l=>{const c=ee("span",{class:this.config.classNames.marker},""),d=l.time/this.duration*100+"%";s&&(c.addEventListener("mouseenter",()=>{l.label||(s.style.left=d,s.innerHTML=l.label,a(!0))}),c.addEventListener("mouseleave",()=>{a(!1)})),c.addEventListener("click",()=>{this.currentTime=l.time}),c.style.left=d,r.appendChild(c)}),i.appendChild(r),this.config.tooltips.seek||(s=ee("span",{class:this.config.classNames.tooltip},""),i.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(i)}};function zP(t,e=!0){let n=t;if(e){const i=document.createElement("a");i.href=n,n=i.href}try{return new URL(n)}catch{return null}}function BP(t){const e=new URLSearchParams;return R.object(t)&&Object.entries(t).forEach(([n,i])=>{e.set(n,i)}),e}const _e={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Xe.textTracks)return void(R.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&H.setCaptionsMenu.call(this));if(R.element(this.elements.captions)||(this.elements.captions=ee("div",Bn(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),ez(this.elements.captions,this.elements.wrapper)),pt.isIE&&window.URL){const i=this.media.querySelectorAll("track");Array.from(i).forEach(r=>{const s=r.getAttribute("src"),o=zP(s);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&Cc(s,"blob").then(a=>{r.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{Ti(r)})})}const t=gg((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(i=>i.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=t);let n=this.storage.get("captions");if(R.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:e,languages:t}),this.isHTML5){const i=this.config.captions.update?"addtrack removetrack":"removetrack";me.call(this,this.media.textTracks,i,_e.update.bind(this))}setTimeout(_e.update.bind(this),0)},update(){const t=_e.getTracks.call(this,!0),{active:e,language:n,meta:i,currentTrackNode:r}=this.captions,s=!!t.find(o=>o.language===n);this.isHTML5&&this.isVideo&&t.filter(o=>!i.get(o)).forEach(o=>{this.debug.log("Track added",o),i.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),me.call(this,o,"cuechange",()=>_e.updateCues.call(this))}),(s&&this.language!==n||!t.includes(r))&&(_e.setLanguage.call(this,n),_e.toggle.call(this,e&&s)),this.elements&&Se(this.elements.container,this.config.classNames.captions.enabled,!R.empty(t)),R.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&H.setCaptionsMenu.call(this)},toggle(t,e=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,i=this.config.classNames.captions.active,r=R.nullOrUndefined(t)?!n:t;if(r!==n){if(e||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!e){const s=_e.getTracks.call(this),o=_e.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void _e.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),Se(this.elements.container,i,r),this.captions.toggled=r,H.updateSetting.call(this,"captions"),te.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout(()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(t,e=!0){const n=_e.getTracks.call(this);if(t!==-1)if(R.number(t))if(t in n){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;const i=n[t],{language:r}=i||{};this.captions.currentTrackNode=i,H.updateSetting.call(this,"captions"),e||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),te.call(this,this.media,"languagechange")}_e.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&_e.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else _e.toggle.call(this,!1,e)},setLanguage(t,e=!0){if(!R.string(t))return void this.debug.warn("Invalid language argument",t);const n=t.toLowerCase();this.captions.language=n;const i=_e.getTracks.call(this),r=_e.findTrack.call(this,[n]);_e.set.call(this,i.indexOf(r),e)},getTracks(t=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||t||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(t,e=!1){const n=_e.getTracks.call(this),i=o=>Number((this.captions.meta.get(o)||{}).default),r=Array.from(n).sort((o,a)=>i(a)-i(o));let s;return t.every(o=>(s=r.find(a=>a.language===o),!s)),s||(e?r[0]:void 0)},getCurrentTrack(){return _e.getTracks.call(this)[this.currentTrack]},getLabel(t){let e=t;return!R.track(e)&&Xe.textTracks&&this.captions.toggled&&(e=_e.getCurrentTrack.call(this)),R.track(e)?R.empty(e.label)?R.empty(e.language)?ut.get("enabled",this.config):t.language.toUpperCase():e.label:ut.get("disabled",this.config)},updateCues(t){if(!this.supported.ui)return;if(!R.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!R.nullOrUndefined(t)&&!Array.isArray(t))return void this.debug.warn("updateCues: Invalid input",t);let e=t;if(!e){const i=_e.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map(r=>r.getCueAsHTML()).map(dz)}const n=e.map(i=>i.trim()).join(`
`);if(n!==this.elements.captions.innerHTML){zu(this.elements.captions);const i=ee("span",Bn(this.config.selectors.caption));i.innerHTML=n,this.elements.captions.appendChild(i),te.call(this,this.media,"cuechange")}}},$P={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Ap={active:"picture-in-picture",inactive:"inline"},sr={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Rp={audio:"audio",video:"video"};function pz(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?sr.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?sr.vimeo:null}const Np=()=>{};class mz{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Np}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Np}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Np}}class Cn{constructor(e){G(this,"onChange",()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;R.element(n)&&(n.pressed=this.active);const i=this.target===this.player.media?this.target:this.player.elements.container;te.call(this.player,i,this.active?"enterfullscreen":"exitfullscreen",!0)}),G(this,"toggleFallback",(n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",Se(this.target,this.player.config.classNames.fullscreen.fallback,n),pt.isIos){let i=document.head.querySelector('meta[name="viewport"]');const r="viewport-fit=cover";i||(i=document.createElement("meta"),i.setAttribute("name","viewport"));const s=R.string(i.content)&&i.content.includes(r);n?(this.cleanupViewport=!s,s||(i.content+=`,${r}`)):this.cleanupViewport&&(i.content=i.content.split(",").filter(o=>o.trim()!==r).join(","))}this.onChange()}),G(this,"trapFocus",n=>{if(pt.isIos||pt.isIPadOS||!this.active||n.key!=="Tab")return;const i=document.activeElement,r=Yl.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=r,o=r[r.length-1];i!==o||n.shiftKey?i===s&&n.shiftKey&&(o.focus(),n.preventDefault()):(s.focus(),n.preventDefault())}),G(this,"update",()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":Cn.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");Se(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),G(this,"enter",()=>{this.supported&&(pt.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Cn.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?R.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),G(this,"exit",()=>{if(this.supported)if(pt.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),qn(this.player.play());else if(!Cn.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!R.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),G(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=Cn.prefix,this.property=Cn.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&tz(this.player.elements.container,e.config.fullscreen.container),me.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),me.call(this.player,this.player.elements.container,"dblclick",n=>{R.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")}),me.call(this,this.player.elements.container,"keydown",n=>this.trapFocus(n)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Cn.nativeSupported&&!this.forceFallback}static get prefix(){if(R.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(n=>!(!R.function(document[`${n}ExitFullscreen`])&&!R.function(document[`${n}CancelFullScreen`]))&&(e=n,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Cn.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Cn.nativeSupported||!pt.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Cn.nativeSupported||this.forceFallback)return rh(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return pt.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Bu(t,e=1){return new Promise((n,i)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=e?n:i)(r)};Object.assign(r,{onload:s,onerror:s,src:t})})}const be={addStyleHook(){Se(this.elements.container,this.config.selectors.container.replace(".",""),!0),Se(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(t=!1){t&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void be.toggleNativeControls.call(this,!0);R.element(this.elements.controls)||(H.inject.call(this),this.listeners.controls()),be.toggleNativeControls.call(this),this.isHTML5&&_e.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,H.updateVolume.call(this),H.timeUpdate.call(this),H.durationUpdate.call(this),be.checkPlaying.call(this),Se(this.elements.container,this.config.classNames.pip.supported,Xe.pip&&this.isHTML5&&this.isVideo),Se(this.elements.container,this.config.classNames.airplay.supported,Xe.airplay&&this.isHTML5),Se(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{te.call(this,this.media,"ready")},0),be.setTitle.call(this),this.poster&&be.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&H.durationUpdate.call(this),this.config.mediaMetadata&&H.setMediaMetadata.call(this)},setTitle(){let t=ut.get("play",this.config);if(R.string(this.config.title)&&!R.empty(this.config.title)&&(t+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",t)}),this.isEmbed){const e=rt.call(this,"iframe");if(!R.element(e))return;const n=R.empty(this.config.title)?"video":this.config.title,i=ut.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",n))}},togglePoster(t){Se(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster(t,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),rz.call(this).then(()=>Bu(t)).catch(n=>{throw t===this.poster&&be.togglePoster.call(this,!1),n}).then(()=>{if(t!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${t}')`,backgroundSize:""}),be.togglePoster.call(this,!0),t)))},checkPlaying(t){Se(this.elements.container,this.config.classNames.playing,this.playing),Se(this.elements.container,this.config.classNames.paused,this.paused),Se(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",ut.get(this.playing?"pause":"play",this.config))}),R.event(t)&&t.type==="timeupdate"||be.toggleControls.call(this)},checkLoading(t){this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Se(this.elements.container,this.config.classNames.loading,this.loading),be.toggleControls.call(this)},this.loading?250:0)},toggleControls(t){const{controls:e}=this.elements;if(e&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(t||this.loading||this.paused||e.pressed||e.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter(t=>!R.empty(t)&&R.string(t)&&t.startsWith("--plyr")).forEach(t=>{this.elements.container.style.setProperty(t,this.media.style.getPropertyValue(t)),this.media.style.removeProperty(t)}),R.empty(this.media.style)&&this.media.removeAttribute("style")}};class gz{constructor(e){G(this,"firstTouch",()=>{const{player:n}=this,{elements:i}=n;n.touch=!0,Se(i.container,n.config.classNames.isTouch,!0)}),G(this,"global",(n=!0)=>{const{player:i}=this;i.config.keyboard.global&&Xl.call(i,window,"keydown keyup",this.handleKey,n,!1),Xl.call(i,document.body,"click",this.toggleMenu,n),Xv.call(i,document.body,"touchstart",this.firstTouch)}),G(this,"container",()=>{const{player:n}=this,{config:i,elements:r,timers:s}=n;!i.keyboard.global&&i.keyboard.focused&&me.call(n,r.container,"keydown keyup",this.handleKey,!1),me.call(n,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:c}=r;c&&l.type==="enterfullscreen"&&(c.pressed=!1,c.hover=!1);let d=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(be.toggleControls.call(n,!0),d=n.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>be.toggleControls.call(n,!1),d)});const o=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const l=r.wrapper,{active:c}=n.fullscreen,[d,h]=Jv.call(n),f=MP(`aspect-ratio: ${d} / ${h}`);if(!c)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[m,v]=sz(),S=m/v>d/h;f?(l.style.width=S?"auto":"100%",l.style.height=S?"100%":"auto"):(l.style.maxWidth=S?v/h*d+"px":null,l.style.margin=S?"0 auto":null)},a=()=>{clearTimeout(s.resized),s.resized=setTimeout(o,50)};me.call(n,r.container,"enterfullscreen exitfullscreen",l=>{const{target:c}=n.fullscreen;c===r.container&&(!n.isEmbed&&R.empty(n.config.ratio)||(o(),(l.type==="enterfullscreen"?me:tf).call(n,window,"resize",a)))})}),G(this,"media",()=>{const{player:n}=this,{elements:i}=n;if(me.call(n,n.media,"timeupdate seeking seeked",s=>H.timeUpdate.call(n,s)),me.call(n,n.media,"durationchange loadeddata loadedmetadata",s=>H.durationUpdate.call(n,s)),me.call(n,n.media,"ended",()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())}),me.call(n,n.media,"progress playing seeking seeked",s=>H.updateProgress.call(n,s)),me.call(n,n.media,"volumechange",s=>H.updateVolume.call(n,s)),me.call(n,n.media,"playing play pause ended emptied timeupdate",s=>be.checkPlaying.call(n,s)),me.call(n,n.media,"waiting canplay seeked playing",s=>be.checkLoading.call(n,s)),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const s=rt.call(n,`.${n.config.classNames.video}`);if(!R.element(s))return;me.call(n,i.container,"click",o=>{([i.container,s].includes(o.target)||s.contains(o.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(o,n.restart,"restart"),this.proxy(o,()=>{qn(n.play())},"play")):this.proxy(o,()=>{qn(n.togglePlay())},"play")))})}n.supported.ui&&n.config.disableContextMenu&&me.call(n,i.wrapper,"contextmenu",s=>{s.preventDefault()},!1),me.call(n,n.media,"volumechange",()=>{n.storage.set({volume:n.volume,muted:n.muted})}),me.call(n,n.media,"ratechange",()=>{H.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),me.call(n,n.media,"qualitychange",s=>{H.updateSetting.call(n,"quality",null,s.detail.quality)}),me.call(n,n.media,"ready qualitychange",()=>{H.setDownloadUrl.call(n)});const r=n.config.events.concat(["keyup","keydown"]).join(" ");me.call(n,n.media,r,s=>{let{detail:o={}}=s;s.type==="error"&&(o=n.media.error),te.call(n,i.container,s.type,!0,o)})}),G(this,"proxy",(n,i,r)=>{const{player:s}=this,o=s.config.listeners[r];let a=!0;R.function(o)&&(a=o.call(s,n)),a!==!1&&R.function(i)&&i.call(s,n)}),G(this,"bind",(n,i,r,s,o=!0)=>{const{player:a}=this,l=a.config.listeners[s],c=R.function(l);me.call(a,n,i,d=>this.proxy(d,r,s),o&&!c)}),G(this,"controls",()=>{const{player:n}=this,{elements:i}=n,r=pt.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(s=>{this.bind(s,"click",()=>{qn(n.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",n.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{n.lastSeekTime=Date.now(),n.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{n.lastSeekTime=Date.now(),n.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{n.muted=!n.muted},"mute"),this.bind(i.buttons.captions,"click",()=>n.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{te.call(n,n.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{n.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{n.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",n.airplay,"airplay"),this.bind(i.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),H.toggleMenu.call(n,s)},null,!1),this.bind(i.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),H.toggleMenu.call(n,s)):H.focusFirstMenuItem.call(n,null,!0))},null,!1),this.bind(i.settings.menu,"keydown",s=>{s.key==="Escape"&&H.toggleMenu.call(n,s)}),this.bind(i.inputs.seek,"mousedown mousemove",s=>{const o=i.progress.getBoundingClientRect(),a=100/o.width*(s.pageX-o.left);s.currentTarget.setAttribute("seek-value",a)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const o=s.currentTarget,a="play-on-seeked";if(R.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;n.lastSeekTime=Date.now();const l=o.hasAttribute(a),c=["mouseup","touchend","keyup"].includes(s.type);l&&c?(o.removeAttribute(a),qn(n.play())):!c&&n.playing&&(o.setAttribute(a,""),n.pause())}),pt.isIos){const s=Yl.call(n,'input[type="range"]');Array.from(s).forEach(o=>this.bind(o,r,a=>RP(a.target)))}this.bind(i.inputs.seek,r,s=>{const o=s.currentTarget;let a=o.getAttribute("seek-value");R.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),n.currentTime=a/o.max*n.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",s=>H.updateSeekTooltip.call(n,s)),this.bind(i.progress,"mousemove touchmove",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startMove(s)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=n;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startScrubbing(s)}),this.bind(i.progress,"mouseup touchend",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.endScrubbing(s)}),pt.isWebKit&&Array.from(Yl.call(n,'input[type="range"]')).forEach(s=>{this.bind(s,"input",o=>H.updateRangeFill.call(n,o.target))}),n.config.toggleInvert&&!R.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,H.timeUpdate.call(n))}),this.bind(i.inputs.volume,r,s=>{n.volume=s.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",s=>{i.controls.hover=!n.touch&&s.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(s=>!s.contains(i.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",o=>{i.controls&&(i.controls.hover=!n.touch&&o.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{i.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(i.controls,"focusin",()=>{const{config:s,timers:o}=n;Se(i.controls,s.classNames.noTransition,!0),be.toggleControls.call(n,!0),setTimeout(()=>{Se(i.controls,s.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>be.toggleControls.call(n,!1),a)}),this.bind(i.inputs.volume,"wheel",s=>{const o=s.webkitDirectionInvertedFromDevice,[a,l]=[s.deltaX,-s.deltaY].map(h=>o?-h:h),c=Math.sign(Math.abs(a)>Math.abs(l)?a:l);n.increaseVolume(c/50);const{volume:d}=n.media;(c===1&&d<1||c===-1&&d>0)&&s.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:n}=this,{elements:i}=n,{key:r,type:s,altKey:o,ctrlKey:a,metaKey:l,shiftKey:c}=e,d=s==="keydown",h=d&&r===this.lastKey;if(!(o||a||l||c)&&r){if(d){const m=document.activeElement;if(R.element(m)){const{editable:v}=n.config.selectors,{seek:S}=i.inputs;if(m!==S&&rs(m,v)||e.key===" "&&rs(m,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(r)&&(e.preventDefault(),e.stopPropagation()),r){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h||(f=parseInt(r,10),n.currentTime=n.duration/10*f);break;case" ":case"k":h||qn(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":h||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":h||n.toggleCaptions();break;case"l":n.loop=!n.loop}r==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null;var f}}toggleMenu(e){H.toggleMenu.call(this.player,e)}}function yz(t,e){return t(e={exports:{}},e.exports),e.exports}var vz=yz(function(t,e){t.exports=function(){var n=function(){},i={},r={},s={};function o(f,m){f=f.push?f:[f];var v,S,x,_=[],y=f.length,E=y;for(v=function(A,L){L.length&&_.push(A),--E||m(_)};y--;)S=f[y],(x=r[S])?v(S,x):(s[S]=s[S]||[]).push(v)}function a(f,m){if(f){var v=s[f];if(r[f]=m,v)for(;v.length;)v[0](f,m),v.splice(0,1)}}function l(f,m){f.call&&(f={success:f}),m.length?(f.error||n)(m):(f.success||n)(f)}function c(f,m,v,S){var x,_,y=document,E=v.async,A=(v.numRetries||0)+1,L=v.before||n,D=f.replace(/[\?|#].*$/,""),k=f.replace(/^(css|img)!/,"");S=S||0,/(^css!|\.css$)/.test(D)?((_=y.createElement("link")).rel="stylesheet",_.href=k,(x="hideFocus"in _)&&_.relList&&(x=0,_.rel="preload",_.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(D)?(_=y.createElement("img")).src=k:((_=y.createElement("script")).src=f,_.async=E===void 0||E),_.onload=_.onerror=_.onbeforeload=function(T){var b=T.type[0];if(x)try{_.sheet.cssText.length||(b="e")}catch(I){I.code!=18&&(b="e")}if(b=="e"){if((S+=1)<A)return c(f,m,v,S)}else if(_.rel=="preload"&&_.as=="style")return _.rel="stylesheet";m(f,b,T.defaultPrevented)},L(f,_)!==!1&&y.head.appendChild(_)}function d(f,m,v){var S,x,_=(f=f.push?f:[f]).length,y=_,E=[];for(S=function(A,L,D){if(L=="e"&&E.push(A),L=="b"){if(!D)return;E.push(A)}--_||m(E)},x=0;x<y;x++)c(f[x],S,v)}function h(f,m,v){var S,x;if(m&&m.trim&&(S=m),x=(S?v:m)||{},S){if(S in i)throw"LoadJS";i[S]=!0}function _(y,E){d(f,function(A){l(x,A),y&&l({success:y,error:E},A),a(S,A)},x)}if(x.returnPromise)return new Promise(_);_()}return h.ready=function(f,m){return o(f,function(v){l(m,v)}),h},h.done=function(f){a(f,[])},h.reset=function(){i={},r={},s={}},h.isDefined=function(f){return f in i},h}()});function Zv(t){return new Promise((e,n)=>{vz(t,{success:e,error:n})})}function _z(t){return R.empty(t)?null:R.number(Number(t))?t:t.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:t}function wz(t){const e=t.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Na(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,te.call(this,this.media,t?"play":"pause"))}const vg={setup(){const t=this;Se(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,zo.call(t),R.object(window.Vimeo)?vg.ready.call(t):Zv(t.config.urls.vimeo.sdk).then(()=>{vg.ready.call(t)}).catch(e=>{t.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const t=this,e=t.config.vimeo,{premium:n,referrerPolicy:i,...r}=e;let s=t.media.getAttribute("src"),o="";R.empty(s)?(s=t.media.getAttribute(t.config.attributes.embed.id),o=t.media.getAttribute(t.config.attributes.embed.hash)):o=wz(s);const a=o?{h:o}:{};n&&Object.assign(r,{controls:!1,sidedock:!1});const l=BP({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:t.config.playsinline,...a,...r}),c=_z(s),d=ee("iframe"),h=yg(t.config.urls.vimeo.iframe,c,l);if(d.setAttribute("src",h),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),R.empty(i)||d.setAttribute("referrerPolicy",i),n||!e.customControls)d.setAttribute("data-poster",t.poster),t.media=ih(d,t.media);else{const y=ee("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});y.appendChild(d),t.media=ih(y,t.media)}e.customControls||Cc(yg(t.config.urls.vimeo.api,h)).then(y=>{!R.empty(y)&&y.thumbnail_url&&be.setPoster.call(t,y.thumbnail_url).catch(()=>{})}),t.embed=new window.Vimeo.Player(d,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=()=>(Na.call(t,!0),t.embed.play()),t.media.pause=()=>(Na.call(t,!1),t.embed.pause()),t.media.stop=()=>{t.pause(),t.currentTime=0};let{currentTime:f}=t.media;Object.defineProperty(t.media,"currentTime",{get:()=>f,set(y){const{embed:E,media:A,paused:L,volume:D}=t,k=L&&!E.hasPlayed;A.seeking=!0,te.call(t,A,"seeking"),Promise.resolve(k&&E.setVolume(0)).then(()=>E.setCurrentTime(y)).then(()=>k&&E.pause()).then(()=>k&&E.setVolume(D)).catch(()=>{})}});let m=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:()=>m,set(y){t.embed.setPlaybackRate(y).then(()=>{m=y,te.call(t,t.media,"ratechange")}).catch(()=>{t.options.speed=[1]})}});let{volume:v}=t.config;Object.defineProperty(t.media,"volume",{get:()=>v,set(y){t.embed.setVolume(y).then(()=>{v=y,te.call(t,t.media,"volumechange")})}});let{muted:S}=t.config;Object.defineProperty(t.media,"muted",{get:()=>S,set(y){const E=!!R.boolean(y)&&y;t.embed.setMuted(!!E||t.config.muted).then(()=>{S=E,te.call(t,t.media,"volumechange")})}});let x,{loop:_}=t.config;Object.defineProperty(t.media,"loop",{get:()=>_,set(y){const E=R.boolean(y)?y:t.config.loop.active;t.embed.setLoop(E).then(()=>{_=E})}}),t.embed.getVideoUrl().then(y=>{x=y,H.setDownloadUrl.call(t)}).catch(y=>{this.debug.warn(y)}),Object.defineProperty(t.media,"currentSrc",{get:()=>x}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then(y=>{const[E,A]=y;t.embed.ratio=VP(E,A),zo.call(this)}),t.embed.setAutopause(t.config.autopause).then(y=>{t.config.autopause=y}),t.embed.getVideoTitle().then(y=>{t.config.title=y,be.setTitle.call(this)}),t.embed.getCurrentTime().then(y=>{f=y,te.call(t,t.media,"timeupdate")}),t.embed.getDuration().then(y=>{t.media.duration=y,te.call(t,t.media,"durationchange")}),t.embed.getTextTracks().then(y=>{t.media.textTracks=y,_e.setup.call(t)}),t.embed.on("cuechange",({cues:y=[]})=>{const E=y.map(A=>uz(A.text));_e.updateCues.call(t,E)}),t.embed.on("loaded",()=>{t.embed.getPaused().then(y=>{Na.call(t,!y),y||te.call(t,t.media,"playing")}),R.element(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)}),t.embed.on("bufferstart",()=>{te.call(t,t.media,"waiting")}),t.embed.on("bufferend",()=>{te.call(t,t.media,"playing")}),t.embed.on("play",()=>{Na.call(t,!0),te.call(t,t.media,"playing")}),t.embed.on("pause",()=>{Na.call(t,!1)}),t.embed.on("timeupdate",y=>{t.media.seeking=!1,f=y.seconds,te.call(t,t.media,"timeupdate")}),t.embed.on("progress",y=>{t.media.buffered=y.percent,te.call(t,t.media,"progress"),parseInt(y.percent,10)===1&&te.call(t,t.media,"canplaythrough"),t.embed.getDuration().then(E=>{E!==t.media.duration&&(t.media.duration=E,te.call(t,t.media,"durationchange"))})}),t.embed.on("seeked",()=>{t.media.seeking=!1,te.call(t,t.media,"seeked")}),t.embed.on("ended",()=>{t.media.paused=!0,te.call(t,t.media,"ended")}),t.embed.on("error",y=>{t.media.error=y,te.call(t,t.media,"error")}),e.customControls&&setTimeout(()=>be.build.call(t),0)}};function Ez(t){return R.empty(t)?null:t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:t}function Oa(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,te.call(this,this.media,t?"play":"pause"))}function Tz(t){return t.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const $u={setup(){if(Se(this.elements.wrapper,this.config.classNames.embed,!0),R.object(window.YT)&&R.function(window.YT.Player))$u.ready.call(this);else{const t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{R.function(t)&&t(),$u.ready.call(this)},Zv(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(t){Cc(yg(this.config.urls.youtube.api,t)).then(e=>{if(R.object(e)){const{title:n,height:i,width:r}=e;this.config.title=n,be.setTitle.call(this),this.embed.ratio=VP(r,i)}zo.call(this)}).catch(()=>{zo.call(this)})},ready(){const t=this,e=t.config.youtube,n=t.media&&t.media.getAttribute("id");if(!R.empty(n)&&n.startsWith("youtube-"))return;let i=t.media.getAttribute("src");R.empty(i)&&(i=t.media.getAttribute(this.config.attributes.embed.id));const r=Ez(i),s=ee("div",{id:oz(t.provider),"data-poster":e.customControls?t.poster:void 0});if(t.media=ih(s,t.media),e.customControls){const o=a=>`https://i.ytimg.com/vi/${r}/${a}default.jpg`;Bu(o("maxres"),121).catch(()=>Bu(o("sd"),121)).catch(()=>Bu(o("hq"))).then(a=>be.setPoster.call(t,a.src)).then(a=>{a.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}t.embed=new window.YT.Player(t.media,{videoId:r,host:Tz(e),playerVars:Qe({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.playsinline&&!t.config.fullscreen.iosNative?1:0,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(o){if(!t.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";t.media.error={code:a,message:l},te.call(t,t.media,"error")}},onPlaybackRateChange(o){const a=o.target;t.media.playbackRate=a.getPlaybackRate(),te.call(t,t.media,"ratechange")},onReady(o){if(R.function(t.media.play))return;const a=o.target;$u.getTitle.call(t,r),t.media.play=()=>{Oa.call(t,!0),a.playVideo()},t.media.pause=()=>{Oa.call(t,!1),a.pauseVideo()},t.media.stop=()=>{a.stopVideo()},t.media.duration=a.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(h){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,te.call(t,t.media,"seeking"),a.seekTo(h)}}),Object.defineProperty(t.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(h){a.setPlaybackRate(h)}});let{volume:l}=t.config;Object.defineProperty(t.media,"volume",{get:()=>l,set(h){l=h,a.setVolume(100*l),te.call(t,t.media,"volumechange")}});let{muted:c}=t.config;Object.defineProperty(t.media,"muted",{get:()=>c,set(h){const f=R.boolean(h)?h:c;c=f,a[f?"mute":"unMute"](),a.setVolume(100*l),te.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration});const d=a.getAvailablePlaybackRates();t.options.speed=d.filter(h=>t.config.speed.options.includes(h)),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),te.call(t,t.media,"timeupdate"),te.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval(()=>{t.media.buffered=a.getVideoLoadedFraction(),(t.media.lastBuffered===null||t.media.lastBuffered<t.media.buffered)&&te.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,t.media.buffered===1&&(clearInterval(t.timers.buffering),te.call(t,t.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>be.build.call(t),50)},onStateChange(o){const a=o.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(o.data)&&(t.media.seeking=!1,te.call(t,t.media,"seeked")),o.data){case-1:te.call(t,t.media,"timeupdate"),t.media.buffered=a.getVideoLoadedFraction(),te.call(t,t.media,"progress");break;case 0:Oa.call(t,!1),t.media.loop?(a.stopVideo(),a.playVideo()):te.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(Oa.call(t,!0),te.call(t,t.media,"playing"),t.timers.playing=setInterval(()=>{te.call(t,t.media,"timeupdate")},50),t.media.duration!==a.getDuration()&&(t.media.duration=a.getDuration(),te.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),Oa.call(t,!1);break;case 3:te.call(t,t.media,"waiting")}te.call(t,t.elements.container,"statechange",!1,{code:o.data})}}})}},qP={setup(){this.media?(Se(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Se(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Se(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=ee("div",{class:this.config.classNames.video}),OP(this.media,this.elements.wrapper),this.elements.poster=ee("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?dr.setup.call(this):this.isYouTube?$u.setup.call(this):this.isVimeo&&vg.setup.call(this)):this.debug.warn("No media element found!")}};class Sz{constructor(e){G(this,"load",()=>{this.enabled&&(R.object(window.google)&&R.object(window.google.ima)?this.ready():Zv(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),G(this,"ready",()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),G(this,"setupIMA",()=>{this.elements.container=ee("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n=>this.onAdsManagerLoaded(n),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n=>this.onAdError(n),!1),this.requestAds()}),G(this,"requestAds",()=>{const{container:n}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=n.offsetWidth,i.linearAdSlotHeight=n.offsetHeight,i.nonLinearAdSlotWidth=n.offsetWidth,i.nonLinearAdSlotHeight=n.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),G(this,"pollCountdown",(n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const i=nf(Math.max(this.manager.getRemainingTime(),0)),r=`${ut.get("advertisement",this.player.config)} - ${i}`;this.elements.container.setAttribute("data-badge-text",r)},100)}),G(this,"onAdsManagerLoaded",n=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=n.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r=>this.onAdError(r)),Object.keys(google.ima.AdEvent.Type).forEach(r=>{this.manager.addEventListener(google.ima.AdEvent.Type[r],s=>this.onAdEvent(s))}),this.trigger("loaded")}),G(this,"addCuePoints",()=>{R.empty(this.cuePoints)||this.cuePoints.forEach(n=>{if(n!==0&&n!==-1&&n<this.player.duration){const i=this.player.elements.progress;if(R.element(i)){const r=100/this.player.duration*n,s=ee("span",{class:this.player.config.classNames.cues});s.style.left=`${r.toString()}%`,i.appendChild(s)}}})}),G(this,"onAdEvent",n=>{const{container:i}=this.player.elements,r=n.getAd(),s=n.getAdData();switch((o=>{te.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=i.offsetWidth,r.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),G(this,"onAdError",n=>{this.cancel(),this.player.debug.warn("Ads error",n)}),G(this,"listeners",()=>{const{container:n}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const r=this.player.currentTime;R.empty(this.cuePoints)||this.cuePoints.forEach((s,o)=>{i<s&&s<r&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)})}),G(this,"play",()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),G(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,qn(this.player.media.play())}),G(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),G(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),G(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(n=>{this.on("loaded",n),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),G(this,"trigger",(n,...i)=>{const r=this.events[n];R.array(r)&&r.forEach(s=>{R.function(s)&&s.apply(this,i)})}),G(this,"on",(n,i)=>(R.array(this.events[n])||(this.events[n]=[]),this.events[n].push(i),this)),G(this,"startSafetyTimer",(n,i)=>{this.player.debug.log(`Safety timer invoked from: ${i}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},n)}),G(this,"clearSafetyTimer",n=>{R.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((n,i)=>{this.on("loaded",n),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!R.empty(e.publisherId)||R.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return R.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${BP({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function WP(t=0,e=0,n=255){return Math.min(Math.max(t,e),n)}const Iz=t=>{const e=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach(n=>{const i={};n.split(/\r\n|\n|\r/).forEach(r=>{if(R.number(i.startTime)){if(!R.empty(r.trim())&&R.empty(i.text)){const s=r.trim().split("#xywh=");[i.text]=s,s[1]&&([i.x,i.y,i.w,i.h]=s[1].split(","))}}else{const s=r.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(i.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,i.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),i.text&&e.push(i)}),e},RT=(t,e)=>{const n={};return t>e.width/e.height?(n.width=e.width,n.height=1/t*e.width):(n.height=e.height,n.width=t*e.height),n};class _g{constructor(e){G(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),G(this,"getThumbnails",()=>new Promise(n=>{const{src:i}=this.player.config.previewThumbnails;if(R.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const r=()=>{this.thumbnails.sort((s,o)=>s.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(R.function(i))i(s=>{this.thumbnails=s,r()});else{const s=(R.string(i)?[i]:i).map(o=>this.getThumbnail(o));Promise.all(s).then(r)}})),G(this,"getThumbnail",n=>new Promise(i=>{Cc(n).then(r=>{const s={frames:Iz(r),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{s.height=o.naturalHeight,s.width=o.naturalWidth,this.thumbnails.push(s),i()},o.src=s.urlPrefix+s.frames[0].text})})),G(this,"startMove",n=>{if(this.loaded&&R.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,r;const s=this.player.elements.progress.getBoundingClientRect(),o=100/s.width*(n.pageX-s.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=nf(this.seekTime);const a=(i=this.player.config.markers)===null||i===void 0||(r=i.points)===null||r===void 0?void 0:r.find(({time:l})=>l===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),G(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),G(this,"startScrubbing",n=>{(R.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),G(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Xv.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),G(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),G(this,"render",()=>{this.elements.thumb.container=ee("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=ee("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=ee("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=ee("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),R.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=ee("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),G(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),G(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),i=n>=0;let r=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((s,o)=>{this.loadedImages.includes(s.frames[n].text)&&(r=o)}),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(r)))}),G(this,"loadImage",(n=0)=>{const i=this.showingThumb,r=this.thumbnails[n],{urlPrefix:s}=r,o=r.frames[i],a=r.frames[i].text,l=s+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,n,i,a,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const c=new Image;c.src=l,c.dataset.index=i,c.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${l}`),c.onload=()=>this.showImage(c,o,n,i,a,!0),this.loadingImage=c,this.removeOldImages(c)}}),G(this,"showImage",(n,i,r,s,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${s}. qual: ${r}. newimg: ${a}`),this.setImageSizeAndOffset(n,i),a&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(r,n,i,o))}),G(this,"removeOldImages",n=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const r=this.usingSprites?500:1e3;if(i.dataset.index!==n.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(i),this.player.debug.log(`Removing thumb: ${i.dataset.filename}`)},r)}})}),G(this,"preloadNearby",(n,i=!0)=>new Promise(r=>{setTimeout(()=>{const s=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===s){let o;o=i?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let a=!1;o.forEach(l=>{const c=l.text;if(c!==s&&!this.loadedImages.includes(c)){a=!0,this.player.debug.log(`Preloading thumb filename: ${c}`);const{urlPrefix:d}=this.thumbnails[0],h=d+c,f=new Image;f.src=h,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${c}`),this.loadedImages.includes(c)||this.loadedImages.push(c),r()}}}),a||r()}},300)})),G(this,"getHigherQuality",(n,i,r,s)=>{if(n<this.thumbnails.length-1){let o=i.naturalHeight;this.usingSprites&&(o=r.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(n+1))},300)}}),G(this,"toggleThumbContainer",(n=!1,i=!1)=>{const r=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,n),!n&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),G(this,"toggleScrubbingContainer",(n=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,n),n||(this.showingThumb=null,this.showingThumbFilename=null)}),G(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),G(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const i=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${i}px`}else if(n.clientHeight<20&&n.clientWidth>20){const i=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${i}px`}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${i}px`}this.setThumbContainerPos()}),G(this,"setThumbContainerPos",()=>{const n=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,s=i.left-n.left+10,o=i.right-n.left-r.clientWidth-10,a=this.mousePosX-n.left-r.clientWidth/2,l=WP(a,s,o);r.style.left=`${l}px`,r.style.setProperty("--preview-arrow-offset",a-l+"px")}),G(this,"setScrubbingContainerSize",()=>{const{width:n,height:i}=RT(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${i}px`}),G(this,"setImageSizeAndOffset",(n,i)=>{if(!this.usingSprites)return;const r=this.thumbContainerHeight/i.h;n.style.height=n.naturalHeight*r+"px",n.style.width=n.naturalWidth*r+"px",n.style.left=`-${i.x*r}px`,n.style.top=`-${i.y*r}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=RT(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const wg={insertElements(t,e){R.string(e)?xT(t,this.media,{src:e}):R.array(e)&&e.forEach(n=>{xT(t,this.media,n)})},change(t){NP(t,"sources.length")?(dr.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],Ti(this.media),this.media=null,R.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:n}=t,[{provider:i=sr.html5,src:r}]=e,s=i==="html5"?n:"div",o=i==="html5"?{}:{src:r};Object.assign(this,{provider:i,type:n,supported:Xe.check(n,i,this.config.playsinline),media:ee(s,o)}),this.elements.container.appendChild(this.media),R.boolean(t.autoplay)&&(this.config.autoplay=t.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),R.empty(t.poster)||(this.poster=t.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),be.addStyleHook.call(this),this.isHTML5&&wg.insertElements.call(this,"source",e),this.config.title=t.title,qP.setup.call(this),this.isHTML5&&Object.keys(t).includes("tracks")&&wg.insertElements.call(this,"track",t.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&be.build.call(this),this.isHTML5&&this.media.load(),R.empty(t.previewThumbnails)||(Object.assign(this.config.previewThumbnails,t.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new _g(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};let HP=class Eg{constructor(e,n){if(G(this,"play",()=>R.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>qn(this.media.play())),this.media.play()):null),G(this,"pause",()=>this.playing&&R.function(this.media.pause)?this.media.pause():null),G(this,"togglePlay",a=>(R.boolean(a)?a:!this.playing)?this.play():this.pause()),G(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):R.function(this.media.stop)&&this.media.stop()}),G(this,"restart",()=>{this.currentTime=0}),G(this,"rewind",a=>{this.currentTime-=R.number(a)?a:this.config.seekTime}),G(this,"forward",a=>{this.currentTime+=R.number(a)?a:this.config.seekTime}),G(this,"increaseVolume",a=>{const l=this.media.muted?0:this.volume;this.volume=l+(R.number(a)?a:0)}),G(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),G(this,"airplay",()=>{Xe.airplay&&this.media.webkitShowPlaybackTargetPicker()}),G(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const l=rh(this.elements.container,this.config.classNames.hideControls),c=a===void 0?void 0:!a,d=Se(this.elements.container,this.config.classNames.hideControls,c);if(d&&R.array(this.config.controls)&&this.config.controls.includes("settings")&&!R.empty(this.config.settings)&&H.toggleMenu.call(this,!1),d!==l){const h=d?"controlshidden":"controlsshown";te.call(this,this.media,h)}return!d}return!1}),G(this,"on",(a,l)=>{me.call(this,this.elements.container,a,l)}),G(this,"once",(a,l)=>{Xv.call(this,this.elements.container,a,l)}),G(this,"off",(a,l)=>{tf(this.elements.container,a,l)}),G(this,"destroy",(a,l=!1)=>{if(!this.ready)return;const c=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(Ti(this.elements.buttons.play),Ti(this.elements.captions),Ti(this.elements.controls),Ti(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),R.function(a)&&a()):(iz.call(this),dr.cancelRequests.call(this),ih(this.elements.original,this.elements.container),te.call(this,this.elements.original,"destroyed",!0),R.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(be.toggleNativeControls.call(this,!0),c()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&R.function(this.embed.destroy)&&this.embed.destroy(),c()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(c),setTimeout(c,200))}),G(this,"supports",a=>Xe.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Xe.touch,this.media=e,R.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||R.nodeList(this.media)||R.array(this.media))&&(this.media=this.media[0]),this.config=Qe({},$P,Eg.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new mz(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Xe),R.nullOrUndefined(this.media)||!R.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Xe.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const r=this.media.tagName.toLowerCase();let s=null,o=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),R.element(s)){if(o=zP(s.getAttribute("src")),this.provider=pz(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(R.empty(this.provider)||!Object.values(sr).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Rp.video;break;case"video":case"audio":this.type=r,this.provider=sr.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Xe.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new gz(this),this.storage=new Jl(this),this.media.plyr=this,R.element(this.elements.container)||(this.elements.container=ee("div"),OP(this.media,this.elements.container)),be.migrateStyles.call(this),be.addStyleHook.call(this),qP.setup.call(this),this.config.debug&&me.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log(`event: ${a.type}`)}),this.fullscreen=new Cn(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&be.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Sz(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>qn(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new _g(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===sr.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===sr.youtube}get isVimeo(){return this.provider===sr.vimeo}get isVideo(){return this.type===Rp.video}get isAudio(){return this.type===Rp.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const n=R.number(e)&&e>0;this.media.currentTime=n?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return R.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),n=(this.media||{}).duration,i=R.number(n)&&n!==1/0?n:0;return e||i}set volume(e){let n=e;R.string(n)&&(n=Number(n)),R.number(n)||(n=this.storage.get("volume")),R.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!R.empty(e)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let n=e;R.boolean(n)||(n=this.storage.get("muted")),R.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let n=null;R.number(e)&&(n=e),R.number(n)||(n=this.storage.get("speed")),R.number(n)||(n=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:r}=this;n=WP(n,i,r),this.config.speed.selected=n,setTimeout(()=>{this.media&&(this.media.playbackRate=n)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const n=this.config.quality,i=this.options.quality;if(!i.length)return;let r=[!R.empty(e)&&Number(e),this.storage.get("quality"),n.selected,n.default].find(R.number),s=!0;if(!i.includes(r)){const o=LP(i,r);this.debug.warn(`Unsupported quality option: ${r}, using ${o} instead`),r=o,s=!1}n.selected=r,this.media.quality=r,s&&this.storage.set({quality:r})}get quality(){return this.media.quality}set loop(e){const n=R.boolean(e)?e:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(e){wg.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return R.url(e)?e:this.source}set download(e){R.url(e)&&(this.config.urls.download=e,H.setDownloadUrl.call(this))}set poster(e){this.isVideo?be.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=sh(Jv.call(this));return R.array(e)?e.join(":"):e}set ratio(e){this.isVideo?R.string(e)&&DP(e)?(this.config.ratio=sh(e),zo.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=R.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){_e.toggle.call(this,e,!1)}set currentTrack(e){_e.set.call(this,e,!1),_e.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:n}=this.captions;return e?n:-1}set language(e){_e.setLanguage.call(this,e,!1)}get language(){return(_e.getCurrentTrack.call(this)||{}).language}set pip(e){if(!Xe.pip)return;const n=R.boolean(e)?e:!this.pip;R.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?Ap.active:Ap.inactive),R.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return Xe.pip?R.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ap.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new _g(this))}static supported(e,n){return Xe.check(e,n)}static loadSprite(e,n){return jP(e,n)}static setup(e,n={}){let i=null;return R.string(e)?i=Array.from(document.querySelectorAll(e)):R.nodeList(e)?i=Array.from(e):R.array(e)&&(i=e.filter(R.element)),R.empty(i)?null:i.map(r=>new Eg(r,n))}};HP.defaults=Z9($P);var GP={exports:{}},bz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cz=bz,xz=Cz;function KP(){}function QP(){}QP.resetWarningCache=KP;var Pz=function(){function t(i,r,s,o,a,l){if(l!==xz){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:QP,resetWarningCache:KP};return n.PropTypes=n,n};GP.exports=Pz();var kz=GP.exports;const NT=OT(kz);function Az(t,e,n=[]){const[i,r]=M.useState(null),s=M.useRef(null),{instantiate:o,destroy:a,getAPI:l,params:c}=e;M.useEffect(()=>{const h=o(s.current,c);return r(h),()=>{a&&a(h,c)}},n);const d=M.useMemo(()=>l(i,c),[i]);return M.useImperativeHandle(t,d,[d]),s}const Rz={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Nz=(t,e)=>{const n=new HP(".plyr-react",e.options||{});return e.source&&(n.source=e.source),n},Oz=t=>{t&&t.destroy()},Lz=()=>{},Mz=t=>t?()=>({plyr:t}):()=>new Proxy({plyr:{source:null}},{get:(e,n)=>n==="plyr"?e[n]:Lz});function Dz(t,e,n=null){return Az(t,{instantiate:Nz,getAPI:Mz,destroy:Oz,params:e},n||[e.options,e.source])}const qu=M.forwardRef((t,e)=>{const{source:n,options:i=null,...r}=t,s=Dz(e,{source:n,options:i});return w.jsx("video",{ref:s,className:"plyr-react plyr",...r})});(Rz&&"production")!=="production"&&(qu.displayName="Plyr",qu.defaultProps={options:{controls:["rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop"}},source:{type:"video",sources:[{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:720},{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:1080}]}},qu.propTypes={options:NT.object,source:NT.any});const Vz=({item:t})=>{const e=M.useRef(null),[n,i]=M.useState(null),[r,s]=M.useState("https://placehold.co/1920x1080/black/yellow?text=Moviza+App"),[o,a]=M.useState([]);M.useCallback((h,f)=>{const m=t.seasons.find(S=>S.season===h);if(!m)return null;const v=m.episodes.find(S=>S.episode===f);return v?v.source:null},[t]);const l=M.useCallback(h=>{i(f=>f.map(m=>({...m,active:m.season===h?!m.active:m.active})))},[]),c=M.useCallback((h,f)=>{i(m=>m.map(v=>({...v,episodes:v.episodes.map(S=>{if(S.episode===h){window.localStorage.setItem(`play-${t.imdb_id}`,JSON.stringify([{season:v.season,episode:S.episode}])),s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0ASeason${v.season}+Episode${S.episode}`);const x=S.source.map(_=>({src:_.src,type:"video/mp4",size:_.quality}));return a(x),{...S,active:!0}}else return{...S,active:!1}})}))),f||setTimeout(()=>{e.current.plyr.play()},1e3)},[t]);M.useEffect(()=>{if(t.type==="Movie"&&s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0A`),t.type==="Series"&&s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0ASeason1+Episode1`),t.type==="Movie"){const h=t.source.map(f=>({src:f.src,type:"video/mp4",size:f.quality}));a(h)}if(t.type==="Series")if(window.localStorage.getItem(`play-${t.imdb_id}`)){const h=JSON.parse(window.localStorage.getItem(`play-${t.imdb_id}`));s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0ASeason${h[0].season}+Episode${h[0].episode}`),h[0].episode!==1&&setTimeout(()=>{c(h[0].episode,!0)},500);const f=t.seasons[h[0].season-1].episodes[h[0].episode-1].source.map(m=>({src:m.src,type:"video/mp4",size:m.quality}));a(f)}else{const h=t.seasons[0].episodes[0].source.map(f=>({src:f.src,type:"video/mp4",size:f.quality}));a(h)}t.type==="Series"&&i(t.seasons.map((h,f)=>{const m=h.episodes.map((v,S)=>({...v,active:f===0&&S===0}));return{season:h.season,episodes:m,active:f===0}}))},[t,c]);const d=M.useMemo(()=>({type:"video",sources:o,poster:r}),[o,r]);return w.jsxs("div",{children:[w.jsx(qu,{ref:e,source:d}),w.jsx("div",{className:"d-flex gap-3 flex-column mt-3",children:t.type==="Series"&&n&&n.map(h=>w.jsxs("div",{children:[w.jsxs("button",{onClick:()=>l(h.season),className:h.active?"active btn seasons p-2 rounded-2 w-100":"btn seasons p-2 rounded-2 w-100",children:["Season ",h.season]}),w.jsx("div",{className:"d-flex justify-content-center gap-3 flex-wrap mt-3",children:h.active&&h.episodes.map(f=>w.jsxs("button",{onClick:()=>c(f.episode,!1),className:f.active?"active btn seasons p-2 rounded-2":"btn seasons p-2 rounded-2",children:["Ep ",f.episode]},f.episode))})]},h.season))})]})};function Fz(){const t=Vr(),e=()=>{window.localStorage.removeItem("user"),t("/login",{replace:!0})},{documentData:n}=Sn(),[i,r]=M.useState(null),[s,o]=M.useState(""),[a,l]=M.useState(""),[c,d]=M.useState(!1),h=M.useCallback(D=>{l(D.target.value),i.displayName==D.target.value?d(!1):d(!0)},[a]),f=()=>{d(!1);const D=JSON.parse(window.localStorage.getItem("user"));D.displayName=a,window.localStorage.setItem("user",JSON.stringify(D)),L({name:a})},[m,v]=M.useState(null),[S,x]=M.useState(null),[_,y]=M.useState(0);M.useState("");const E=D=>{const k=D.target.files[0];k&&(v(k),x(URL.createObjectURL(k)))},A=()=>{if(!m)return;const D=d9(y9,`moviza-profile/${s.replace("@gmail.com","")}`),k=c9(D,m);k.on("state_changed",T=>{const b=T.bytesTransferred/T.totalBytes*100;y(Math.floor(b))},T=>{console.error("Upload error:",T)},()=>{u9(k.snapshot.ref).then(T=>{L({url:T})})})},L=async D=>{try{await Bs(Yr(Xr,"moviza_user_data",i.email),{...D.url&&{profile:D.url},...D.name&&{name:D.name}},{merge:!0}),window.location.reload()}catch(k){alert("Error Updating User Data: "+k.message)}};return M.useEffect(()=>{if(window.localStorage.getItem("user")){const D=JSON.parse(window.localStorage.getItem("user"));r(D)}console.log(n)},[n]),M.useEffect(()=>{console.log(i),l(n?n.name:i?i.displayName:""),o(i?i.email:"")},[i,n]),w.jsx("section",{className:"container mt-5",children:w.jsx("div",{className:"row py-5",children:w.jsx("div",{className:"col-12 p-4",children:w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-12 pt-5",children:w.jsx("h1",{children:"Profile Setting"})}),w.jsxs("div",{className:"col-12 col-md-6",children:[w.jsxs("div",{className:"d-flex gap-3 align-items-center mt-3",children:[w.jsxs("div",{className:"profile-img position-relative w-max overflow-hidden",children:[w.jsx("input",{className:"d-none",hidden:!0,id:"uploadProfileImg",type:"file",onChange:E}),w.jsx("label",{for:"uploadProfileImg",className:"imageUpload"}),w.jsx("img",{src:n!=null?n.profile?n.profile:`https://placehold.co/150x150/yellow/black?text=${n.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:i!=null?i.displayName:"admin"})]}),S&&w.jsxs("div",{className:"d-flex gap-3 align-items-center profile-img",children:[w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",children:[w.jsx("circle",{cx:"4",cy:"12",r:"3",fill:"#ddff00",children:w.jsx("animate",{id:"svgSpinners3DotsScale0",attributeName:"r",begin:"0;svgSpinners3DotsScale1.end-0.25s",dur:"0.75s",values:"3;.2;3"})}),w.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#ddff00",children:w.jsx("animate",{attributeName:"r",begin:"svgSpinners3DotsScale0.end-0.6s",dur:"0.75s",values:"3;.2;3"})}),w.jsx("circle",{cx:"20",cy:"12",r:"3",fill:"#ddff00",children:w.jsx("animate",{id:"svgSpinners3DotsScale1",attributeName:"r",begin:"svgSpinners3DotsScale0.end-0.45s",dur:"0.75s",values:"3;.2;3"})})]}),w.jsx("img",{src:S,alt:"Selected"})]})]}),S&&w.jsxs("div",{className:"d-flex mt-4",children:[w.jsx("button",{className:"custom-btn px-3",onClick:A,children:"Upload"}),_>0&&w.jsxs("h1",{className:"theme-clr ms-3",children:[_,"%"]})]}),w.jsxs("div",{className:"row mt-3",children:[w.jsxs("div",{className:"col-12 col-md-6 mt-4 d-flex flex-column gap-2",children:[w.jsxs("div",{className:"theme-clr d-flex align-items-center",children:[w.jsx("span",{children:"Name"})," ",c&&w.jsx("div",{onClick:f,className:"tick ms-auto"})," "]}),w.jsx("input",{value:a,onChange:D=>h(D),placeholder:"Name",className:"profile-inputs fs-6 rounded-2 py-2 px-3 w-100",type:"text"})]}),w.jsxs("div",{className:"col-12 col-md-6 mt-4 d-flex flex-column gap-2",children:[w.jsx("div",{className:"theme-clr",children:w.jsx("span",{children:"Email"})}),w.jsx("input",{value:s,disabled:!0,placeholder:"Email",className:"profile-inputs fs-6 rounded-2 py-2 px-3 w-100",type:"text"})]})]})]}),w.jsxs("div",{className:"col-12 pt-5",children:[w.jsx("h1",{className:"mb-4",children:"Account"}),w.jsx("button",{onClick:e,className:"custom-btn w-max px-4 fs-5",children:"Log Out"})]})]})})})})}function jz(){const t=Vr(),e=Bi(),[n,i]=M.useState(!1);e.state==null&&t("/",{replace:!0});const r=()=>{i(!0),document.documentElement.scrollTop=0},{fav:s,watchList:o,handleFav:a,handleWatchList:l,documentData:c}=Sn(),{item:d,imdbData:h}=e.state||{};M.useEffect(()=>{if(e.state!=null){let T=document.createElement("style");return T.innerHTML=`body {
                    background-image: url(${d["banner-img"]});
                    background-size: cover;
                    background-repeat: no-repeat;
                    background-position: center;
                    min-height: 100vh;
                    position: relative;
                    isolation: isolate;
                    background-attachment: fixed;
                }
                body::before {
                    content: '';
                    position: fixed;
                    left:0;
                    top:0;
                    width: 100vw;
                    height: 100vh;
                    background-color: rgba(0, 0, 0, 0.8);
                    z-index: -1;
                    backdrop-filter: blur(5px);
                }
                header {
                    background-color: transparent !important;
                }`,document.head.append(T),()=>{T.remove()}}},[]);const[f,m]=M.useState(""),[v,S]=M.useState(""),[x,_]=M.useState(null),[y,E]=M.useState(null);M.useEffect(()=>{console.log(c)},[c]);const A=()=>{const T=new Date,b=String(T.getDate()).padStart(2,"0"),I=String(T.getMonth()+1).padStart(2,"0"),N=T.getFullYear();let O=T.getHours();const P=String(T.getMinutes()).padStart(2,"0"),$=O>=12?"PM":"AM";return O=O%12,O=O?String(O).padStart(2,"0"):"12",`${b}/${I}/${N} : ${O}:${P} ${$}`},L=(T,b,I)=>{const N=vo(wo,`comments/${T}`),O=OE(N);new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});const P=Date.now();Gd(O,{userId:b,profile:c!=null?c.profile?c.profile:`https://placehold.co/40x40/yellow/black?text=${c.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",comment:I,timestamp:A(),numericalTimestamp:P}).then(()=>{console.log("Comment added successfully!"),m("")}).catch($=>{console.error("Error adding comment:",$)})},D=(T,b,I,N,O=null)=>{const P=vo(wo,`comments/${T}/${b}/reply`),$=OE(P);new Date().toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});const re=Date.now();Gd($,{userId:I,profile:c!=null?c.profile?c.profile:`https://placehold.co/40x40/yellow/black?text=${c.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",comment:N,timestamp:A(),for:O,numericalTimestamp:re}).then(()=>{console.log("Comment added successfully!"),document.querySelectorAll(".reply").forEach(Ce=>{Ce.classList.remove("active")}),S("")}).catch(Ce=>{console.error("Error adding comment:",Ce)})};M.useEffect(()=>{const T=vo(wo,"/comments/"+d.imdb_id),b=LC(T,I=>{const N=I.val();if(N){const O=Object.values(N),P=Object.keys(N);_(O),E(P)}else _([])});return()=>MC(T,"value",b)},[d.imdb_id]);const k=T=>{T.target.classList.contains("active")?T.target.classList.remove("active"):(document.querySelectorAll(".reply").forEach(b=>{b.classList.remove("active")}),T.target.classList.add("active"))};return w.jsxs(w.Fragment,{children:[w.jsx("section",{className:"container pt-5",children:e.state!=null&&w.jsx("div",{className:"row pt-5",children:w.jsx("div",{className:"col-12 mt-xl-5",children:w.jsxs("div",{className:"row justify-content-center",children:[n&&w.jsx("div",{className:"col-12 mb-5",children:w.jsx(Vz,{item:d})}),w.jsx("div",{className:"col-xl-4 p-xl-5 py-5 d-flex justify-content-center align-items-start",children:w.jsx("img",{src:h.Poster,alt:""})}),w.jsxs("div",{className:"col-xl-8 p-xl-5 p-3 d-flex flex-column gap-2",children:[w.jsx("h4",{className:"theme-clr",children:d.type}),h!=null&&w.jsx("h6",{className:"d-flex flex-wrap gap-3 genre",children:h.Genre.split(", ").map((T,b)=>w.jsx("span",{role:"button",children:T},b))}),w.jsx("h1",{className:"display-3 fw-bold text-balance",children:d.title}),h!=null&&w.jsxs(w.Fragment,{children:[w.jsx("p",{className:"text-balance",children:h.Plot}),w.jsxs("div",{className:"info d-flex gap-1 align-items-center",children:[w.jsx("h6",{className:"m-0",children:h.Released}),w.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:w.jsxs("g",{fill:"currentColor",children:[w.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),w.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),w.jsx("h6",{className:"m-0",children:h.Rated}),w.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:w.jsxs("g",{fill:"currentColor",children:[w.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),w.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),w.jsx("h6",{className:"m-0",children:h.Runtime})]})]}),h!=null&&w.jsxs("div",{style:{"--rating":h.imdbRating/2},className:"rating d-flex gap-2 align-items-center",children:[w.jsx("div",{}),h.imdbRating,"/10 Rating"]}),w.jsxs("div",{className:"d-xl-flex d-none flex-column gap-2 mt-3",children:[w.jsxs("h6",{className:"text-balance",children:[w.jsx("span",{className:"theme-clr",children:"Director :"})," ",h.Director]}),w.jsxs("h6",{className:"text-balance",children:[w.jsx("span",{className:"theme-clr",children:"Actors :"})," ",h.Actors]}),w.jsxs("h6",{className:"text-balance",children:[w.jsx("span",{className:"theme-clr",children:"BoxOffice :"})," ",h.BoxOffice]})]}),w.jsxs("div",{className:"d-flex gap-4 align-items-center mt-4",children:[w.jsx("button",{onClick:r,className:"custom-btn w-max px-4 py-2 full-radius",children:"Play Now"}),s.length>0&&w.jsx("div",{onClick:()=>a(d.imdb_id),role:"button",className:s.includes(d.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),o.length>0&&w.jsx("div",{onClick:()=>l(d.imdb_id),role:"button",className:o.includes(d.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[w.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),w.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})})]})]})]})})})}),w.jsx("section",{className:"container py-5",children:w.jsxs("div",{className:"row",children:[w.jsx("div",{className:"col-12",children:w.jsx("h1",{children:"Comments"})}),w.jsxs("div",{className:"col-12 d-flex flex-column",children:[w.jsxs("div",{className:"comments d-flex gap-3 my-4",children:[w.jsx("img",{src:c!=null?c.profile?c.profile:`https://placehold.co/40x40/yellow/black?text=${c.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:"Profile"}),w.jsx("textarea",{className:"form-control",value:f,onChange:T=>m(T.target.value),rows:5,placeholder:"Write a Comments",name:"message",id:"comments-msg"})]}),f!=""&&w.jsx("button",{className:"custom-btn w-max px-3 py-1 full-radius ms-auto",onClick:()=>L(d.imdb_id,c!=null&&c.name,f),children:"Send Comment"})]}),w.jsx("div",{className:"col-12",children:c&&x&&x.map((T,b)=>w.jsx("div",{className:"comments my-5 w-100",children:w.jsxs("div",{className:"d-flex w-100 gap-3",children:[w.jsx("img",{src:T.profile,alt:T.userId}),w.jsxs("div",{className:"d-flex flex-column w-100",children:[w.jsx("h5",{className:"m-0",children:T.userId}),w.jsx("span",{className:"small-font",children:T.timestamp}),w.jsxs("h6",{onClick:I=>{I.target.classList.toggle("active")},className:"mt-3 mb-0 d-flex align-items-center gap-2 reply p-2",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"#ddff00",d:"m4.825 11l3.9 3.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-4.6-4.6q-.15-.15-.213-.325T2.426 11t.063-.375t.212-.325l4.6-4.6q.275-.275.688-.275T8.7 5.7q.3.3.3.713t-.3.712zm6 1l2.9 2.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-4.6-4.6q-.15-.15-.213-.325T7.426 11t.063-.375t.212-.325l4.6-4.6q.275-.275.688-.275t.712.275q.3.3.3.713t-.3.712L10.825 10H17q2.075 0 3.538 1.463T22 15v3q0 .425-.288.713T21 19t-.712-.288T20 18v-3q0-1.25-.875-2.125T17 12z"})})," Reply "]}),w.jsx("div",{className:"message p-md-3 p-2 w-100 mt-3",children:w.jsx("p",{className:"m-0",children:T.comment})}),w.jsxs("div",{className:"replyField d-flex flex-column",children:[w.jsxs("div",{className:" comments d-flex gap-3 my-4",children:[w.jsx("img",{src:c!=null?c.profile?c.profile:`https://placehold.co/40x40/yellow/black?text=${c.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:"Profile"}),w.jsx("textarea",{className:"form-control",value:v,onChange:I=>S(I.target.value),rows:5,placeholder:"Write a Comments",name:"message",id:"comments-msg"})]}),v!=""&&w.jsx("button",{className:"custom-btn w-max px-3 py-1 full-radius ms-auto",onClick:()=>D(d.imdb_id,y&&y[b],c!=null&&c.name,v,T.userId),children:"Reply"})]}),T.reply&&w.jsxs("h6",{onClick:I=>k(I),className:"mt-3 mb-0 d-flex align-items-center gap-2 replies p-2",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"#ddff00",d:"m4.825 11l3.9 3.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-4.6-4.6q-.15-.15-.213-.325T2.426 11t.063-.375t.212-.325l4.6-4.6q.275-.275.688-.275T8.7 5.7q.3.3.3.713t-.3.712zm6 1l2.9 2.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-4.6-4.6q-.15-.15-.213-.325T7.426 11t.063-.375t.212-.325l4.6-4.6q.275-.275.688-.275t.712.275q.3.3.3.713t-.3.712L10.825 10H17q2.075 0 3.538 1.463T22 15v3q0 .425-.288.713T21 19t-.712-.288T20 18v-3q0-1.25-.875-2.125T17 12z"})})," ",Object.values(T.reply).length," Replies "]}),T.reply&&w.jsx("div",{className:"repliesList",children:Object.values(T.reply).map(I=>w.jsx("div",{className:"comments mt-5 w-100",children:w.jsxs("div",{className:"d-flex w-100 gap-3",children:[w.jsx("img",{src:I.profile,alt:I.userId}),w.jsxs("div",{className:"d-flex flex-column w-100",children:[w.jsx("h5",{className:"m-0",children:I.userId}),w.jsx("span",{className:"small-font",children:I.timestamp}),w.jsxs("h6",{onClick:N=>k(N),className:"mt-3 mb-0 d-flex align-items-center gap-2 reply p-2",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",children:w.jsx("path",{fill:"#ddff00",d:"m4.825 11l3.9 3.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-4.6-4.6q-.15-.15-.213-.325T2.426 11t.063-.375t.212-.325l4.6-4.6q.275-.275.688-.275T8.7 5.7q.3.3.3.713t-.3.712zm6 1l2.9 2.9q.3.3.288.7t-.313.7q-.3.275-.7.288t-.7-.288l-4.6-4.6q-.15-.15-.213-.325T7.426 11t.063-.375t.212-.325l4.6-4.6q.275-.275.688-.275t.712.275q.3.3.3.713t-.3.712L10.825 10H17q2.075 0 3.538 1.463T22 15v3q0 .425-.288.713T21 19t-.712-.288T20 18v-3q0-1.25-.875-2.125T17 12z"})})," Reply "]}),w.jsx("div",{className:"message p-3 w-100 mt-3",children:w.jsxs("p",{className:"m-0",children:[I.for?w.jsxs("span",{className:"theme-clr",children:["@",I.for]}):w.jsxs("span",{className:"theme-clr",children:["@",T.userId]})," ",I.comment]})}),w.jsxs("div",{className:"replyField d-flex flex-column",children:[w.jsxs("div",{className:"comments d-flex gap-3 my-4",children:[w.jsx("img",{src:c!=null?c.profile?c.profile:`https://placehold.co/40x40/yellow/black?text=${c.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:"Profile"}),w.jsx("textarea",{className:"form-control",value:v,onChange:N=>S(N.target.value),rows:5,placeholder:"@"+I.userId,name:"message",id:"comments-msg"})]}),v!=""&&w.jsx("button",{className:"custom-btn w-max px-3 py-1 full-radius ms-auto",onClick:()=>D(d.imdb_id,y&&y[b],c!=null&&c.name,v,I.userId),children:"Reply"})]})]})]})}))})]})]})}))})]})})]})}function Uz(){Vr();const t=Bi(),{searchText:e}=t.state||"",[n,i]=M.useState(""),[r,s]=M.useState([]),{loading:o,error:a,moviza:l,Imdb:c}=zn();M.useEffect(()=>{if(t.state!=null){i(e);const A=l.filter(L=>L.title.toLowerCase().includes(e.toLowerCase())||L.detail.toLowerCase().includes(e.toLowerCase()));s(A)}},[t,l,c]);const{fav:d,watchList:h,handleFav:f,handleWatchList:m}=Sn(),[v,S]=M.useState(null),[x,_]=M.useState(null);M.useEffect(()=>{S(d),_(h)},[d,h]);const y=A=>{const L=l.filter(k=>k.imdb_id==A),D=c.filter(k=>k.imdbID==A);return{moviza:L,imdb:D}},E=A=>{if(s([]),i(A.target.value),A.target.value.trim()!=""){const L=l.filter(D=>D.title.toLowerCase().includes(A.target.value.toLowerCase())||D.detail.toLowerCase().includes(A.target.value.toLowerCase()));s(L)}};return w.jsxs("section",{className:"container mt-5 search-page",children:[w.jsx("div",{className:"row py-5",children:w.jsx("div",{className:"col-12 col-xl-6 py-5 px-4",children:w.jsx("input",{value:n,onChange:A=>E(A),placeholder:"Search Movies , Series , Anime.....",className:"search fs-5 full-radius py-2 px-3 w-100",type:"text"})})}),w.jsx("div",{className:"row",children:w.jsx("div",{className:"col-12 gridItems",children:r.length>0?r.map((A,L)=>{const D=y(A.imdb_id);return console.log(D),w.jsx(vy,{item:A,Imdb:c},L)}):w.jsx("h1",{className:"no-data",children:"No Data Found"})})})]})}const zz=()=>{const[t,e]=M.useState(""),[n,i]=M.useState(null);M.useEffect(()=>{const o=vo(wo,"/comments/id"),a=LC(o,l=>{i(l.val())});return()=>MC(o,"value",a)},[]);const r=()=>{const o=vo(wo,"/comments/id/karthi");Gd(o,{message:t,date:"dd"}).then(()=>{console.log("Data written successfully!")}).catch(a=>{console.error("Error writing data:",a)})},s=o=>{const a=vo(wo,`/0/${o}`);NF(a).then(()=>{console.log("User data deleted successfully!")}).catch(l=>{console.error("Error deleting user data:",l)})};return w.jsxs("div",{children:[w.jsx("h1",{children:"Real-time Data:"}),w.jsx("pre",{children:JSON.stringify(n,null,2)}),w.jsx("input",{type:"text",value:t,onChange:o=>e(o.target.value),placeholder:"Enter data"}),w.jsx("button",{onClick:r,children:"Write Data"}),w.jsx("button",{onClick:()=>s("banner-img"),children:"Delete"})]})},YP=M.createContext(),Sn=()=>M.useContext(YP);function Bz(){const t=Vr();M.useEffect(()=>{window.localStorage.getItem("user")||t("/login",{replace:!0})},[t]);const[e,n]=M.useState(null),i=Bi(),{message:r,fromSignIn:s}=i.state||{},[o,a]=M.useState(null),[l,c]=M.useState([]),[d,h]=M.useState([]),[f,m]=M.useState(""),v=()=>{window.location.reload(),t("/",{replace:!0})},S=async E=>{if(l.includes(E)){let A=l.filter(D=>D!=E),L=[...new Set(A)];c(L);try{await Bs(Yr(Xr,"moviza_user_data",e.email),{favData:L},{merge:!0})}catch(D){alert("Error Updating User Data: "+D.message)}}else{let A=[...new Set([...l,E])];c(A);try{await Bs(Yr(Xr,"moviza_user_data",e.email),{favData:A},{merge:!0})}catch(L){alert("Error Updating User Data: "+L.message)}}},x=async E=>{if(d.includes(E)){let A=d.filter(D=>D!=E),L=[...new Set(A)];h(L);try{await Bs(Yr(Xr,"moviza_user_data",e.email),{watchList:L},{merge:!0})}catch(D){alert("Error Updating User Data: "+D.message)}}else{let A=[...new Set([...l,E])];h(A);try{await Bs(Yr(Xr,"moviza_user_data",e.email),{watchList:A},{merge:!0})}catch(L){alert("Error Updating User Data: "+L.message)}}},_=async(E,A=null,L=null,D=null)=>{try{await Bs(Yr(Xr,"moviza_user_data",E),{...A&&{name:A},...L&&{favData:L},...D&&{watchList:D}},{merge:!0})}catch(k){alert("Error Updating User Data: "+k.message)}},y=async E=>{if(E)try{const A=Yr(Xr,"moviza_user_data",E),L=await XU(A);L.exists()?(a(L.data()),console.log(L.data()),c(L.data().favData),h(L.data().watchList),m("")):m("No such document!")}catch(A){console.error("Error reading document: ",A),m("Error reading document: "+A.message)}else m("Please provide a document ID.")};return M.useEffect(()=>{if(window.localStorage.getItem("user")){const A=JSON.parse(window.localStorage.getItem("user"));n(A),y(A.email)}[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(A=>new window.bootstrap.Tooltip(A))},[t]),w.jsxs(YP.Provider,{value:{fav:l,watchList:d,handleFav:S,handleWatchList:x,documentData:o,handleRead:y},children:[i.pathname!="/login"&&w.jsx(qO,{user:e}),w.jsxs(BN,{children:[w.jsx(Bt,{path:"/",element:w.jsx(BO,{useMoviza:zn})}),w.jsx(Bt,{path:"/about",element:w.jsx($O,{})}),w.jsx(Bt,{path:"/movies",element:w.jsx(ba,{useMoviza:zn,queryCheck:["cinematography","cat"],check:"type",types:"Movie"})}),w.jsx(Bt,{path:"/series",element:w.jsx(ba,{useMoviza:zn,queryCheck:["cinematography","cat"],check:"type",types:"Series"})}),w.jsx(Bt,{path:"/anime",element:w.jsx(ba,{useMoviza:zn,queryCheck:["type","type"],check:"cinematography",types:"Anime"})}),w.jsx(Bt,{path:"/animation",element:w.jsx(ba,{useMoviza:zn,queryCheck:["type","type"],check:"cinematography",types:"Animation"})}),w.jsx(Bt,{path:"/live-action",element:w.jsx(ba,{useMoviza:zn,queryCheck:["type","type"],check:"cinematography",types:"Live-Action"})}),w.jsx(Bt,{path:"/favorite",element:w.jsx(TT,{useMoviza:zn,forWhat:"fav"})}),w.jsx(Bt,{path:"/watch-list",element:w.jsx(TT,{useMoviza:zn,forWhat:"watchList"})}),w.jsx(Bt,{path:"/play",element:w.jsx(jz,{})}),w.jsx(Bt,{path:"/login",element:w.jsx(v9,{handleUpdate:_})}),w.jsx(Bt,{path:"/search",element:w.jsx(Uz,{handleUpdate:_})}),w.jsx(Bt,{path:"/profile",element:w.jsx(Fz,{})}),w.jsx(Bt,{path:"/realtime",element:w.jsx(zz,{})})]}),w.jsxs("h1",{children:[" ",s&&w.jsxs("div",{className:"startApp",children:[r,w.jsx("button",{onClick:v,className:"custom-btn fs-5 w-max px-4 py-2 full-radius",children:"Start"})]})]})]})}const $z=Op.createRoot(document.getElementById("root"));$z.render(w.jsx(Ye.StrictMode,{children:w.jsx(XN,{children:w.jsx(Bz,{})})}));
