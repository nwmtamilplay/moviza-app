function zk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ZE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eT={exports:{}},$d={},tT={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),Bk=Symbol.for("react.portal"),$k=Symbol.for("react.fragment"),Wk=Symbol.for("react.strict_mode"),Hk=Symbol.for("react.profiler"),qk=Symbol.for("react.provider"),Gk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Qk=Symbol.for("react.suspense"),Yk=Symbol.for("react.memo"),Xk=Symbol.for("react.lazy"),w_=Symbol.iterator;function Jk(t){return t===null||typeof t!="object"?null:(t=w_&&t[w_]||t["@@iterator"],typeof t=="function"?t:null)}var nT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iT=Object.assign,rT={};function Do(t,e,n){this.props=t,this.context=e,this.refs=rT,this.updater=n||nT}Do.prototype.isReactComponent={};Do.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Do.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sT(){}sT.prototype=Do.prototype;function eg(t,e,n){this.props=t,this.context=e,this.refs=rT,this.updater=n||nT}var tg=eg.prototype=new sT;tg.constructor=eg;iT(tg,Do.prototype);tg.isPureReactComponent=!0;var E_=Array.isArray,oT=Object.prototype.hasOwnProperty,ng={current:null},aT={key:!0,ref:!0,__self:!0,__source:!0};function lT(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oT.call(e,i)&&!aT.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:zl,type:t,key:s,ref:o,props:r,_owner:ng.current}}function Zk(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ig(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function eP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var T_=/\/+/g;function of(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eP(""+t.key):e.toString(36)}function au(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zl:case Bk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+of(o,0):i,E_(r)?(n="",t!=null&&(n=t.replace(T_,"$&/")+"/"),au(r,e,n,"",function(u){return u})):r!=null&&(ig(r)&&(r=Zk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(T_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",E_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+of(s,a);o+=au(s,e,n,l,r)}else if(l=Jk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+of(s,a++),o+=au(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nc(t,e,n){if(t==null)return t;var i=[],r=0;return au(t,i,"","",function(s){return e.call(n,s,r++)}),i}function tP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},lu={transition:null},nP={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:lu,ReactCurrentOwner:ng};function cT(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Nc,forEach:function(t,e,n){Nc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nc(t,function(){e++}),e},toArray:function(t){return Nc(t,function(e){return e})||[]},only:function(t){if(!ig(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Do;ae.Fragment=$k;ae.Profiler=Hk;ae.PureComponent=eg;ae.StrictMode=Wk;ae.Suspense=Qk;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nP;ae.act=cT;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=iT({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ng.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oT.call(e,l)&&!aT.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:zl,type:t.type,key:r,ref:s,props:i,_owner:o}};ae.createContext=function(t){return t={$$typeof:Gk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qk,_context:t},t.Consumer=t};ae.createElement=lT;ae.createFactory=function(t){var e=lT.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:Kk,render:t}};ae.isValidElement=ig;ae.lazy=function(t){return{$$typeof:Xk,_payload:{_status:-1,_result:t},_init:tP}};ae.memo=function(t,e){return{$$typeof:Yk,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=lu.transition;lu.transition={};try{t()}finally{lu.transition=e}};ae.unstable_act=cT;ae.useCallback=function(t,e){return Ht.current.useCallback(t,e)};ae.useContext=function(t){return Ht.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Ht.current.useEffect(t,e)};ae.useId=function(){return Ht.current.useId()};ae.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Ht.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};ae.useRef=function(t){return Ht.current.useRef(t)};ae.useState=function(t){return Ht.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Ht.current.useTransition()};ae.version="18.3.1";tT.exports=ae;var M=tT.exports;const Qe=ZE(M),iP=zk({__proto__:null,default:Qe},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rP=M,sP=Symbol.for("react.element"),oP=Symbol.for("react.fragment"),aP=Object.prototype.hasOwnProperty,lP=rP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cP={key:!0,ref:!0,__self:!0,__source:!0};function uT(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)aP.call(e,i)&&!cP.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:sP,type:t,key:s,ref:o,props:r,_owner:lP.current}}$d.Fragment=oP;$d.jsx=uT;$d.jsxs=uT;eT.exports=$d;var T=eT.exports,dp={},dT={exports:{}},cn={},hT={exports:{}},fT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var Q=U.length;U.push(K);e:for(;0<Q;){var we=Q-1>>>1,ge=U[we];if(0<r(ge,K))U[we]=K,U[Q]=ge,Q=we;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var K=U[0],Q=U.pop();if(Q!==K){U[0]=Q;e:for(var we=0,ge=U.length,Ge=ge>>>1;we<Ge;){var ri=2*(we+1)-1,si=U[ri],oi=ri+1,ai=U[oi];if(0>r(si,Q))oi<ge&&0>r(ai,si)?(U[we]=ai,U[oi]=Q,we=oi):(U[we]=si,U[ri]=Q,we=ri);else if(oi<ge&&0>r(ai,Q))U[we]=ai,U[oi]=Q,we=oi;else break e}}return K}function r(U,K){var Q=U.sortIndex-K.sortIndex;return Q!==0?Q:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,g=!1,_=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var K=n(u);K!==null;){if(K.callback===null)i(u);else if(K.startTime<=U)i(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(u)}}function P(U){if(E=!1,w(U),!_)if(n(l)!==null)_=!0,Pe(O);else{var K=n(u);K!==null&&tt(P,K.startTime-U)}}function O(U,K){_=!1,E&&(E=!1,v(S),S=-1),g=!0;var Q=f;try{for(w(K),h=n(l);h!==null&&(!(h.expirationTime>K)||U&&!N());){var we=h.callback;if(typeof we=="function"){h.callback=null,f=h.priorityLevel;var ge=we(h.expirationTime<=K);K=t.unstable_now(),typeof ge=="function"?h.callback=ge:h===n(l)&&i(l),w(K)}else i(l);h=n(l)}if(h!==null)var Ge=!0;else{var ri=n(u);ri!==null&&tt(P,ri.startTime-K),Ge=!1}return Ge}finally{h=null,f=Q,g=!1}}var D=!1,k=null,S=-1,b=5,C=-1;function N(){return!(t.unstable_now()-C<b)}function L(){if(k!==null){var U=t.unstable_now();C=U;var K=!0;try{K=k(!0,U)}finally{K?x():(D=!1,k=null)}}else D=!1}var x;if(typeof y=="function")x=function(){y(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,J=z.port2;z.port1.onmessage=L,x=function(){J.postMessage(null)}}else x=function(){A(L,0)};function Pe(U){k=U,D||(D=!0,x())}function tt(U,K){S=A(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,Pe(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var Q=f;f=K;try{return U()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=f;f=U;try{return K()}finally{f=Q}},t.unstable_scheduleCallback=function(U,K,Q){var we=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?we+Q:we):Q=we,U){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Q+ge,U={id:d++,callback:K,priorityLevel:U,startTime:Q,expirationTime:ge,sortIndex:-1},Q>we?(U.sortIndex=Q,e(u,U),n(l)===null&&U===n(u)&&(E?(v(S),S=-1):E=!0,tt(P,Q-we))):(U.sortIndex=ge,e(l,U),_||g||(_=!0,Pe(O))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var K=f;return function(){var Q=f;f=K;try{return U.apply(this,arguments)}finally{f=Q}}}})(fT);hT.exports=fT;var uP=hT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dP=M,ln=uP;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pT=new Set,sl={};function Es(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(sl[t]=e,t=0;t<e.length;t++)pT.add(e[t])}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hp=Object.prototype.hasOwnProperty,hP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S_={},I_={};function fP(t){return hp.call(I_,t)?!0:hp.call(S_,t)?!1:hP.test(t)?I_[t]=!0:(S_[t]=!0,!1)}function pP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mP(t,e,n,i){if(e===null||typeof e>"u"||pP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rg=/[\-:]([a-z])/g;function sg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rg,sg);Et[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rg,sg);Et[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rg,sg);Et[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function og(t,e,n,i){var r=Et.hasOwnProperty(e)?Et[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mP(e,n,r,i)&&(n=null),i||r===null?fP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ji=dP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oc=Symbol.for("react.element"),zs=Symbol.for("react.portal"),Bs=Symbol.for("react.fragment"),ag=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),mT=Symbol.for("react.provider"),gT=Symbol.for("react.context"),lg=Symbol.for("react.forward_ref"),pp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),cg=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),yT=Symbol.for("react.offscreen"),b_=Symbol.iterator;function da(t){return t===null||typeof t!="object"?null:(t=b_&&t[b_]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,af;function ka(t){if(af===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);af=e&&e[1]||""}return`
`+af+t}var lf=!1;function cf(t,e){if(!t||lf)return"";lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ka(t):""}function gP(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=cf(t.type,!1),t;case 11:return t=cf(t.type.render,!1),t;case 1:return t=cf(t.type,!0),t;default:return""}}function gp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bs:return"Fragment";case zs:return"Portal";case fp:return"Profiler";case ag:return"StrictMode";case pp:return"Suspense";case mp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gT:return(t.displayName||"Context")+".Consumer";case mT:return(t._context.displayName||"Context")+".Provider";case lg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cg:return e=t.displayName||null,e!==null?e:gp(t.type)||"Memo";case Xi:e=t._payload,t=t._init;try{return gp(t(e))}catch{}}return null}function yP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gp(e);case 8:return e===ag?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vP(t){var e=vT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lc(t){t._valueTracker||(t._valueTracker=vP(t))}function _T(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=vT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yp(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function C_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wT(t,e){e=e.checked,e!=null&&og(t,"checked",e,!1)}function vp(t,e){wT(t,e);var n=br(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_p(t,e.type,n):e.hasOwnProperty("defaultValue")&&_p(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function A_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _p(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pa=Array.isArray;function to(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function k_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Pa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function ET(t,e){var n=br(e.value),i=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function P_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ep(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mc,ST=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mc=Mc||document.createElement("div"),Mc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ol(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_P=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(t){_P.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fa[e]=Fa[t]})});function IT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fa.hasOwnProperty(t)&&Fa[t]?(""+e).trim():e+"px"}function bT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=IT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var wP=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tp(t,e){if(e){if(wP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=null;function ug(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bp=null,no=null,io=null;function x_(t){if(t=Wl(t)){if(typeof bp!="function")throw Error($(280));var e=t.stateNode;e&&(e=Kd(e),bp(t.stateNode,t.type,e))}}function CT(t){no?io?io.push(t):io=[t]:no=t}function AT(){if(no){var t=no,e=io;if(io=no=null,x_(t),e)for(t=0;t<e.length;t++)x_(e[t])}}function kT(t,e){return t(e)}function PT(){}var uf=!1;function xT(t,e,n){if(uf)return t(e,n);uf=!0;try{return kT(t,e,n)}finally{uf=!1,(no!==null||io!==null)&&(PT(),AT())}}function al(t,e){var n=t.stateNode;if(n===null)return null;var i=Kd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Cp=!1;if(Pi)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{Cp=!1}function EP(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ua=!1,Mu=null,Du=!1,Ap=null,TP={onError:function(t){Ua=!0,Mu=t}};function SP(t,e,n,i,r,s,o,a,l){Ua=!1,Mu=null,EP.apply(TP,arguments)}function IP(t,e,n,i,r,s,o,a,l){if(SP.apply(this,arguments),Ua){if(Ua){var u=Mu;Ua=!1,Mu=null}else throw Error($(198));Du||(Du=!0,Ap=u)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R_(t){if(Ts(t)!==t)throw Error($(188))}function bP(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return R_(r),t;if(s===i)return R_(r),e;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function NT(t){return t=bP(t),t!==null?OT(t):null}function OT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OT(t);if(e!==null)return e;t=t.sibling}return null}var LT=ln.unstable_scheduleCallback,N_=ln.unstable_cancelCallback,CP=ln.unstable_shouldYield,AP=ln.unstable_requestPaint,Je=ln.unstable_now,kP=ln.unstable_getCurrentPriorityLevel,dg=ln.unstable_ImmediatePriority,MT=ln.unstable_UserBlockingPriority,Vu=ln.unstable_NormalPriority,PP=ln.unstable_LowPriority,DT=ln.unstable_IdlePriority,Wd=null,Yn=null;function xP(t){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Wd,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:OP,RP=Math.log,NP=Math.LN2;function OP(t){return t>>>=0,t===0?32:31-(RP(t)/NP|0)|0}var Dc=64,Vc=4194304;function xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=xa(a):(s&=o,s!==0&&(i=xa(s)))}else o=n&~r,o!==0?i=xa(o):s!==0&&(i=xa(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Mn(e),r=1<<n,i|=t[n],e&=~r;return i}function LP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Mn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=LP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function kp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VT(){var t=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),t}function df(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function DP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Mn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function hg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Mn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Se=0;function FT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UT,fg,jT,zT,BT,Pp=!1,Fc=[],hr=null,fr=null,pr=null,ll=new Map,cl=new Map,Zi=[],VP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function O_(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":ll.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(e.pointerId)}}function fa(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Wl(e),e!==null&&fg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function FP(t,e,n,i,r){switch(e){case"focusin":return hr=fa(hr,t,e,n,i,r),!0;case"dragenter":return fr=fa(fr,t,e,n,i,r),!0;case"mouseover":return pr=fa(pr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ll.set(s,fa(ll.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,cl.set(s,fa(cl.get(s)||null,t,e,n,i,r)),!0}return!1}function $T(t){var e=Qr(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=RT(n),e!==null){t.blockedOn=e,BT(t.priority,function(){jT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ip=i,n.target.dispatchEvent(i),Ip=null}else return e=Wl(n),e!==null&&fg(e),t.blockedOn=n,!1;e.shift()}return!0}function L_(t,e,n){cu(t)&&n.delete(e)}function UP(){Pp=!1,hr!==null&&cu(hr)&&(hr=null),fr!==null&&cu(fr)&&(fr=null),pr!==null&&cu(pr)&&(pr=null),ll.forEach(L_),cl.forEach(L_)}function pa(t,e){t.blockedOn===e&&(t.blockedOn=null,Pp||(Pp=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,UP)))}function ul(t){function e(r){return pa(r,t)}if(0<Fc.length){pa(Fc[0],t);for(var n=1;n<Fc.length;n++){var i=Fc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(hr!==null&&pa(hr,t),fr!==null&&pa(fr,t),pr!==null&&pa(pr,t),ll.forEach(e),cl.forEach(e),n=0;n<Zi.length;n++)i=Zi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Zi.length&&(n=Zi[0],n.blockedOn===null);)$T(n),n.blockedOn===null&&Zi.shift()}var ro=ji.ReactCurrentBatchConfig,Uu=!0;function jP(t,e,n,i){var r=Se,s=ro.transition;ro.transition=null;try{Se=1,pg(t,e,n,i)}finally{Se=r,ro.transition=s}}function zP(t,e,n,i){var r=Se,s=ro.transition;ro.transition=null;try{Se=4,pg(t,e,n,i)}finally{Se=r,ro.transition=s}}function pg(t,e,n,i){if(Uu){var r=xp(t,e,n,i);if(r===null)Ef(t,e,i,ju,n),O_(t,i);else if(FP(r,t,e,n,i))i.stopPropagation();else if(O_(t,i),e&4&&-1<VP.indexOf(t)){for(;r!==null;){var s=Wl(r);if(s!==null&&UT(s),s=xp(t,e,n,i),s===null&&Ef(t,e,i,ju,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ef(t,e,i,null,n)}}var ju=null;function xp(t,e,n,i){if(ju=null,t=ug(i),t=Qr(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ju=t,null}function WT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kP()){case dg:return 1;case MT:return 4;case Vu:case PP:return 16;case DT:return 536870912;default:return 16}default:return 16}}var or=null,mg=null,uu=null;function HT(){if(uu)return uu;var t,e=mg,n=e.length,i,r="value"in or?or.value:or.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return uu=r.slice(t,1<i?1-i:void 0)}function du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uc(){return!0}function M_(){return!1}function un(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uc:M_,this.isPropagationStopped=M_,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uc)},persist:function(){},isPersistent:Uc}),e}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gg=un(Vo),$l=je({},Vo,{view:0,detail:0}),BP=un($l),hf,ff,ma,Hd=je({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(hf=t.screenX-ma.screenX,ff=t.screenY-ma.screenY):ff=hf=0,ma=t),hf)},movementY:function(t){return"movementY"in t?t.movementY:ff}}),D_=un(Hd),$P=je({},Hd,{dataTransfer:0}),WP=un($P),HP=je({},$l,{relatedTarget:0}),pf=un(HP),qP=je({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),GP=un(qP),KP=je({},Vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QP=un(KP),YP=je({},Vo,{data:0}),V_=un(YP),XP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZP[t])?!!e[t]:!1}function yg(){return ex}var tx=je({},$l,{key:function(t){if(t.key){var e=XP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yg,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nx=un(tx),ix=je({},Hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F_=un(ix),rx=je({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yg}),sx=un(rx),ox=je({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ax=un(ox),lx=je({},Hd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cx=un(lx),ux=[9,13,27,32],vg=Pi&&"CompositionEvent"in window,ja=null;Pi&&"documentMode"in document&&(ja=document.documentMode);var dx=Pi&&"TextEvent"in window&&!ja,qT=Pi&&(!vg||ja&&8<ja&&11>=ja),U_=" ",j_=!1;function GT(t,e){switch(t){case"keyup":return ux.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $s=!1;function hx(t,e){switch(t){case"compositionend":return KT(e);case"keypress":return e.which!==32?null:(j_=!0,U_);case"textInput":return t=e.data,t===U_&&j_?null:t;default:return null}}function fx(t,e){if($s)return t==="compositionend"||!vg&&GT(t,e)?(t=HT(),uu=mg=or=null,$s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qT&&e.locale!=="ko"?null:e.data;default:return null}}var px={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!px[t.type]:e==="textarea"}function QT(t,e,n,i){CT(i),e=zu(e,"onChange"),0<e.length&&(n=new gg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var za=null,dl=null;function mx(t){o1(t,0)}function qd(t){var e=qs(t);if(_T(e))return t}function gx(t,e){if(t==="change")return e}var YT=!1;if(Pi){var mf;if(Pi){var gf="oninput"in document;if(!gf){var B_=document.createElement("div");B_.setAttribute("oninput","return;"),gf=typeof B_.oninput=="function"}mf=gf}else mf=!1;YT=mf&&(!document.documentMode||9<document.documentMode)}function $_(){za&&(za.detachEvent("onpropertychange",XT),dl=za=null)}function XT(t){if(t.propertyName==="value"&&qd(dl)){var e=[];QT(e,dl,t,ug(t)),xT(mx,e)}}function yx(t,e,n){t==="focusin"?($_(),za=e,dl=n,za.attachEvent("onpropertychange",XT)):t==="focusout"&&$_()}function vx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qd(dl)}function _x(t,e){if(t==="click")return qd(e)}function wx(t,e){if(t==="input"||t==="change")return qd(e)}function Ex(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:Ex;function hl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!hp.call(e,r)||!Un(t[r],e[r]))return!1}return!0}function W_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H_(t,e){var n=W_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W_(n)}}function JT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZT(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function _g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Tx(t){var e=ZT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JT(n.ownerDocument.documentElement,n)){if(i!==null&&_g(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=H_(n,s);var o=H_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sx=Pi&&"documentMode"in document&&11>=document.documentMode,Ws=null,Rp=null,Ba=null,Np=!1;function q_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Np||Ws==null||Ws!==Lu(i)||(i=Ws,"selectionStart"in i&&_g(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ba&&hl(Ba,i)||(Ba=i,i=zu(Rp,"onSelect"),0<i.length&&(e=new gg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ws)))}function jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hs={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionend:jc("Transition","TransitionEnd")},yf={},e1={};Pi&&(e1=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Gd(t){if(yf[t])return yf[t];if(!Hs[t])return t;var e=Hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e1)return yf[t]=e[n];return t}var t1=Gd("animationend"),n1=Gd("animationiteration"),i1=Gd("animationstart"),r1=Gd("transitionend"),s1=new Map,G_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){s1.set(t,e),Es(e,[t])}for(var vf=0;vf<G_.length;vf++){var _f=G_[vf],Ix=_f.toLowerCase(),bx=_f[0].toUpperCase()+_f.slice(1);Nr(Ix,"on"+bx)}Nr(t1,"onAnimationEnd");Nr(n1,"onAnimationIteration");Nr(i1,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(r1,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function K_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,IP(i,e,void 0,t),t.currentTarget=null}function o1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;K_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;K_(r,a,u),s=l}}}if(Du)throw t=Ap,Du=!1,Ap=null,t}function Re(t,e){var n=e[Vp];n===void 0&&(n=e[Vp]=new Set);var i=t+"__bubble";n.has(i)||(a1(e,t,2,!1),n.add(i))}function wf(t,e,n){var i=0;e&&(i|=4),a1(n,t,i,e)}var zc="_reactListening"+Math.random().toString(36).slice(2);function fl(t){if(!t[zc]){t[zc]=!0,pT.forEach(function(n){n!=="selectionchange"&&(Cx.has(n)||wf(n,!1,t),wf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zc]||(e[zc]=!0,wf("selectionchange",!1,e))}}function a1(t,e,n,i){switch(WT(e)){case 1:var r=jP;break;case 4:r=zP;break;default:r=pg}n=r.bind(null,e,n,t),r=void 0,!Cp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ef(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Qr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}xT(function(){var u=s,d=ug(n),h=[];e:{var f=s1.get(t);if(f!==void 0){var g=gg,_=t;switch(t){case"keypress":if(du(n)===0)break e;case"keydown":case"keyup":g=nx;break;case"focusin":_="focus",g=pf;break;case"focusout":_="blur",g=pf;break;case"beforeblur":case"afterblur":g=pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=D_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=WP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=sx;break;case t1:case n1:case i1:g=GP;break;case r1:g=ax;break;case"scroll":g=BP;break;case"wheel":g=cx;break;case"copy":case"cut":case"paste":g=QP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=F_}var E=(e&4)!==0,A=!E&&t==="scroll",v=E?f!==null?f+"Capture":null:f;E=[];for(var y=u,w;y!==null;){w=y;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,v!==null&&(P=al(y,v),P!=null&&E.push(pl(y,P,w)))),A)break;y=y.return}0<E.length&&(f=new g(f,_,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ip&&(_=n.relatedTarget||n.fromElement)&&(Qr(_)||_[xi]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?Qr(_):null,_!==null&&(A=Ts(_),_!==A||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(E=D_,P="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=F_,P="onPointerLeave",v="onPointerEnter",y="pointer"),A=g==null?f:qs(g),w=_==null?f:qs(_),f=new E(P,y+"leave",g,n,d),f.target=A,f.relatedTarget=w,P=null,Qr(d)===u&&(E=new E(v,y+"enter",_,n,d),E.target=w,E.relatedTarget=A,P=E),A=P,g&&_)t:{for(E=g,v=_,y=0,w=E;w;w=Ns(w))y++;for(w=0,P=v;P;P=Ns(P))w++;for(;0<y-w;)E=Ns(E),y--;for(;0<w-y;)v=Ns(v),w--;for(;y--;){if(E===v||v!==null&&E===v.alternate)break t;E=Ns(E),v=Ns(v)}E=null}else E=null;g!==null&&Q_(h,f,g,E,!1),_!==null&&A!==null&&Q_(h,A,_,E,!0)}}e:{if(f=u?qs(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var O=gx;else if(z_(f))if(YT)O=wx;else{O=vx;var D=yx}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=_x);if(O&&(O=O(t,u))){QT(h,O,n,d);break e}D&&D(t,f,u),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&_p(f,"number",f.value)}switch(D=u?qs(u):window,t){case"focusin":(z_(D)||D.contentEditable==="true")&&(Ws=D,Rp=u,Ba=null);break;case"focusout":Ba=Rp=Ws=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,q_(h,n,d);break;case"selectionchange":if(Sx)break;case"keydown":case"keyup":q_(h,n,d)}var k;if(vg)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else $s?GT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(qT&&n.locale!=="ko"&&($s||S!=="onCompositionStart"?S==="onCompositionEnd"&&$s&&(k=HT()):(or=d,mg="value"in or?or.value:or.textContent,$s=!0)),D=zu(u,S),0<D.length&&(S=new V_(S,t,null,n,d),h.push({event:S,listeners:D}),k?S.data=k:(k=KT(n),k!==null&&(S.data=k)))),(k=dx?hx(t,n):fx(t,n))&&(u=zu(u,"onBeforeInput"),0<u.length&&(d=new V_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}o1(h,e)})}function pl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=al(t,n),s!=null&&i.unshift(pl(t,s,r)),s=al(t,e),s!=null&&i.push(pl(t,s,r))),t=t.return}return i}function Ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=al(n,s),l!=null&&o.unshift(pl(n,l,a))):r||(l=al(n,s),l!=null&&o.push(pl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ax=/\r\n?/g,kx=/\u0000|\uFFFD/g;function Y_(t){return(typeof t=="string"?t:""+t).replace(Ax,`
`).replace(kx,"")}function Bc(t,e,n){if(e=Y_(e),Y_(t)!==e&&n)throw Error($(425))}function Bu(){}var Op=null,Lp=null;function Mp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,Px=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,xx=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(t){return X_.resolve(null).then(t).catch(Rx)}:Dp;function Rx(t){setTimeout(function(){throw t})}function Tf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ul(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ul(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function J_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Fo,ml="__reactProps$"+Fo,xi="__reactContainer$"+Fo,Vp="__reactEvents$"+Fo,Nx="__reactListeners$"+Fo,Ox="__reactHandles$"+Fo;function Qr(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xi]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J_(t);t!==null;){if(n=t[Wn])return n;t=J_(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[Wn]||t[xi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Kd(t){return t[ml]||null}var Fp=[],Gs=-1;function Or(t){return{current:t}}function Le(t){0>Gs||(t.current=Fp[Gs],Fp[Gs]=null,Gs--)}function ke(t,e){Gs++,Fp[Gs]=t.current,t.current=e}var Cr={},Vt=Or(Cr),Yt=Or(!1),os=Cr;function yo(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Xt(t){return t=t.childContextTypes,t!=null}function $u(){Le(Yt),Le(Vt)}function Z_(t,e,n){if(Vt.current!==Cr)throw Error($(168));ke(Vt,e),ke(Yt,n)}function l1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,yP(t)||"Unknown",r));return je({},n,i)}function Wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,os=Vt.current,ke(Vt,t),ke(Yt,Yt.current),!0}function ew(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=l1(t,e,os),i.__reactInternalMemoizedMergedChildContext=t,Le(Yt),Le(Vt),ke(Vt,t)):Le(Yt),ke(Yt,n)}var pi=null,Qd=!1,Sf=!1;function c1(t){pi===null?pi=[t]:pi.push(t)}function Lx(t){Qd=!0,c1(t)}function Lr(){if(!Sf&&pi!==null){Sf=!0;var t=0,e=Se;try{var n=pi;for(Se=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}pi=null,Qd=!1}catch(r){throw pi!==null&&(pi=pi.slice(t+1)),LT(dg,Lr),r}finally{Se=e,Sf=!1}}return null}var Ks=[],Qs=0,Hu=null,qu=0,hn=[],fn=0,as=null,gi=1,yi="";function $r(t,e){Ks[Qs++]=qu,Ks[Qs++]=Hu,Hu=t,qu=e}function u1(t,e,n){hn[fn++]=gi,hn[fn++]=yi,hn[fn++]=as,as=t;var i=gi;t=yi;var r=32-Mn(i)-1;i&=~(1<<r),n+=1;var s=32-Mn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,gi=1<<32-Mn(e)+r|n<<r|i,yi=s+t}else gi=1<<s|n<<r|i,yi=t}function wg(t){t.return!==null&&($r(t,1),u1(t,1,0))}function Eg(t){for(;t===Hu;)Hu=Ks[--Qs],Ks[Qs]=null,qu=Ks[--Qs],Ks[Qs]=null;for(;t===as;)as=hn[--fn],hn[fn]=null,yi=hn[--fn],hn[fn]=null,gi=hn[--fn],hn[fn]=null}var on=null,rn=null,Ve=!1,xn=null;function d1(t,e){var n=mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,rn=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:gi,overflow:yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,rn=null,!0):!1;default:return!1}}function Up(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jp(t){if(Ve){var e=rn;if(e){var n=e;if(!tw(t,e)){if(Up(t))throw Error($(418));e=mr(n.nextSibling);var i=on;e&&tw(t,e)?d1(i,n):(t.flags=t.flags&-4097|2,Ve=!1,on=t)}}else{if(Up(t))throw Error($(418));t.flags=t.flags&-4097|2,Ve=!1,on=t}}}function nw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function $c(t){if(t!==on)return!1;if(!Ve)return nw(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mp(t.type,t.memoizedProps)),e&&(e=rn)){if(Up(t))throw h1(),Error($(418));for(;e;)d1(t,e),e=mr(e.nextSibling)}if(nw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=on?mr(t.stateNode.nextSibling):null;return!0}function h1(){for(var t=rn;t;)t=mr(t.nextSibling)}function vo(){rn=on=null,Ve=!1}function Tg(t){xn===null?xn=[t]:xn.push(t)}var Mx=ji.ReactCurrentBatchConfig;function ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Wc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iw(t){var e=t._init;return e(t._payload)}function f1(t){function e(v,y){if(t){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=_r(v,y),v.index=0,v.sibling=null,v}function s(v,y,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,w,P){return y===null||y.tag!==6?(y=xf(w,v.mode,P),y.return=v,y):(y=r(y,w),y.return=v,y)}function l(v,y,w,P){var O=w.type;return O===Bs?d(v,y,w.props.children,P,w.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xi&&iw(O)===y.type)?(P=r(y,w.props),P.ref=ga(v,y,w),P.return=v,P):(P=vu(w.type,w.key,w.props,null,v.mode,P),P.ref=ga(v,y,w),P.return=v,P)}function u(v,y,w,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Rf(w,v.mode,P),y.return=v,y):(y=r(y,w.children||[]),y.return=v,y)}function d(v,y,w,P,O){return y===null||y.tag!==7?(y=is(w,v.mode,P,O),y.return=v,y):(y=r(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xf(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Oc:return w=vu(y.type,y.key,y.props,null,v.mode,w),w.ref=ga(v,null,y),w.return=v,w;case zs:return y=Rf(y,v.mode,w),y.return=v,y;case Xi:var P=y._init;return h(v,P(y._payload),w)}if(Pa(y)||da(y))return y=is(y,v.mode,w,null),y.return=v,y;Wc(v,y)}return null}function f(v,y,w,P){var O=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(v,y,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oc:return w.key===O?l(v,y,w,P):null;case zs:return w.key===O?u(v,y,w,P):null;case Xi:return O=w._init,f(v,y,O(w._payload),P)}if(Pa(w)||da(w))return O!==null?null:d(v,y,w,P,null);Wc(v,w)}return null}function g(v,y,w,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(w)||null,a(y,v,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Oc:return v=v.get(P.key===null?w:P.key)||null,l(y,v,P,O);case zs:return v=v.get(P.key===null?w:P.key)||null,u(y,v,P,O);case Xi:var D=P._init;return g(v,y,w,D(P._payload),O)}if(Pa(P)||da(P))return v=v.get(w)||null,d(y,v,P,O,null);Wc(y,P)}return null}function _(v,y,w,P){for(var O=null,D=null,k=y,S=y=0,b=null;k!==null&&S<w.length;S++){k.index>S?(b=k,k=null):b=k.sibling;var C=f(v,k,w[S],P);if(C===null){k===null&&(k=b);break}t&&k&&C.alternate===null&&e(v,k),y=s(C,y,S),D===null?O=C:D.sibling=C,D=C,k=b}if(S===w.length)return n(v,k),Ve&&$r(v,S),O;if(k===null){for(;S<w.length;S++)k=h(v,w[S],P),k!==null&&(y=s(k,y,S),D===null?O=k:D.sibling=k,D=k);return Ve&&$r(v,S),O}for(k=i(v,k);S<w.length;S++)b=g(k,v,S,w[S],P),b!==null&&(t&&b.alternate!==null&&k.delete(b.key===null?S:b.key),y=s(b,y,S),D===null?O=b:D.sibling=b,D=b);return t&&k.forEach(function(N){return e(v,N)}),Ve&&$r(v,S),O}function E(v,y,w,P){var O=da(w);if(typeof O!="function")throw Error($(150));if(w=O.call(w),w==null)throw Error($(151));for(var D=O=null,k=y,S=y=0,b=null,C=w.next();k!==null&&!C.done;S++,C=w.next()){k.index>S?(b=k,k=null):b=k.sibling;var N=f(v,k,C.value,P);if(N===null){k===null&&(k=b);break}t&&k&&N.alternate===null&&e(v,k),y=s(N,y,S),D===null?O=N:D.sibling=N,D=N,k=b}if(C.done)return n(v,k),Ve&&$r(v,S),O;if(k===null){for(;!C.done;S++,C=w.next())C=h(v,C.value,P),C!==null&&(y=s(C,y,S),D===null?O=C:D.sibling=C,D=C);return Ve&&$r(v,S),O}for(k=i(v,k);!C.done;S++,C=w.next())C=g(k,v,S,C.value,P),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?S:C.key),y=s(C,y,S),D===null?O=C:D.sibling=C,D=C);return t&&k.forEach(function(L){return e(v,L)}),Ve&&$r(v,S),O}function A(v,y,w,P){if(typeof w=="object"&&w!==null&&w.type===Bs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Oc:e:{for(var O=w.key,D=y;D!==null;){if(D.key===O){if(O=w.type,O===Bs){if(D.tag===7){n(v,D.sibling),y=r(D,w.props.children),y.return=v,v=y;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Xi&&iw(O)===D.type){n(v,D.sibling),y=r(D,w.props),y.ref=ga(v,D,w),y.return=v,v=y;break e}n(v,D);break}else e(v,D);D=D.sibling}w.type===Bs?(y=is(w.props.children,v.mode,P,w.key),y.return=v,v=y):(P=vu(w.type,w.key,w.props,null,v.mode,P),P.ref=ga(v,y,w),P.return=v,v=P)}return o(v);case zs:e:{for(D=w.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=r(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Rf(w,v.mode,P),y.return=v,v=y}return o(v);case Xi:return D=w._init,A(v,y,D(w._payload),P)}if(Pa(w))return _(v,y,w,P);if(da(w))return E(v,y,w,P);Wc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,w),y.return=v,v=y):(n(v,y),y=xf(w,v.mode,P),y.return=v,v=y),o(v)):n(v,y)}return A}var _o=f1(!0),p1=f1(!1),Gu=Or(null),Ku=null,Ys=null,Sg=null;function Ig(){Sg=Ys=Ku=null}function bg(t){var e=Gu.current;Le(Gu),t._currentValue=e}function zp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function so(t,e){Ku=t,Sg=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Sg!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(Ku===null)throw Error($(308));Ys=t,Ku.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var Yr=null;function Cg(t){Yr===null?Yr=[t]:Yr.push(t)}function m1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Cg(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ji=!1;function Ag(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ri(t,n)}return r=i.interleaved,r===null?(e.next=e,Cg(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ri(t,n)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hg(t,n)}}function rw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qu(t,e,n,i){var r=t.updateQueue;Ji=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(f=e,g=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){h=_.call(g,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,f=typeof _=="function"?_.call(g,h,f):_,f==null)break e;h=je({},h,f);break e;case 2:Ji=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);cs|=o,t.lanes=o,t.memoizedState=h}}function sw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var Hl={},Xn=Or(Hl),gl=Or(Hl),yl=Or(Hl);function Xr(t){if(t===Hl)throw Error($(174));return t}function kg(t,e){switch(ke(yl,e),ke(gl,t),ke(Xn,Hl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ep(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ep(e,t)}Le(Xn),ke(Xn,e)}function wo(){Le(Xn),Le(gl),Le(yl)}function y1(t){Xr(yl.current);var e=Xr(Xn.current),n=Ep(e,t.type);e!==n&&(ke(gl,t),ke(Xn,n))}function Pg(t){gl.current===t&&(Le(Xn),Le(gl))}var Fe=Or(0);function Yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var If=[];function xg(){for(var t=0;t<If.length;t++)If[t]._workInProgressVersionPrimary=null;If.length=0}var fu=ji.ReactCurrentDispatcher,bf=ji.ReactCurrentBatchConfig,ls=0,Ue=null,it=null,ut=null,Xu=!1,$a=!1,vl=0,Dx=0;function At(){throw Error($(321))}function Rg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function Ng(t,e,n,i,r,s){if(ls=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fu.current=t===null||t.memoizedState===null?jx:zx,t=n(i,r),$a){s=0;do{if($a=!1,vl=0,25<=s)throw Error($(301));s+=1,ut=it=null,e.updateQueue=null,fu.current=Bx,t=n(i,r)}while($a)}if(fu.current=Ju,e=it!==null&&it.next!==null,ls=0,ut=it=Ue=null,Xu=!1,e)throw Error($(300));return t}function Og(){var t=vl!==0;return vl=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Ue.memoizedState=ut=t:ut=ut.next=t,ut}function En(){if(it===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ut===null?Ue.memoizedState:ut.next;if(e!==null)ut=e,it=t;else{if(t===null)throw Error($(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ut===null?Ue.memoizedState=ut=t:ut=ut.next=t}return ut}function _l(t,e){return typeof e=="function"?e(t):e}function Cf(t){var e=En(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=it,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((ls&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Ue.lanes|=d,cs|=d}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Un(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ue.lanes|=s,cs|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Af(t){var e=En(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Un(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function v1(){}function _1(t,e){var n=Ue,i=En(),r=e(),s=!Un(i.memoizedState,r);if(s&&(i.memoizedState=r,Qt=!0),i=i.queue,Lg(T1.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,wl(9,E1.bind(null,n,i,r,e),void 0,null),ft===null)throw Error($(349));ls&30||w1(n,e,r)}return r}function w1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E1(t,e,n,i){e.value=n,e.getSnapshot=i,S1(e)&&I1(t)}function T1(t,e,n){return n(function(){S1(e)&&I1(t)})}function S1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function I1(t){var e=Ri(t,1);e!==null&&Dn(e,t,1,-1)}function ow(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_l,lastRenderedState:t},e.queue=t,t=t.dispatch=Ux.bind(null,Ue,t),[e.memoizedState,t]}function wl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function b1(){return En().memoizedState}function pu(t,e,n,i){var r=zn();Ue.flags|=t,r.memoizedState=wl(1|e,n,void 0,i===void 0?null:i)}function Yd(t,e,n,i){var r=En();i=i===void 0?null:i;var s=void 0;if(it!==null){var o=it.memoizedState;if(s=o.destroy,i!==null&&Rg(i,o.deps)){r.memoizedState=wl(e,n,s,i);return}}Ue.flags|=t,r.memoizedState=wl(1|e,n,s,i)}function aw(t,e){return pu(8390656,8,t,e)}function Lg(t,e){return Yd(2048,8,t,e)}function C1(t,e){return Yd(4,2,t,e)}function A1(t,e){return Yd(4,4,t,e)}function k1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P1(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4,4,k1.bind(null,e,t),n)}function Mg(){}function x1(t,e){var n=En();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Rg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function R1(t,e){var n=En();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Rg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function N1(t,e,n){return ls&21?(Un(n,e)||(n=VT(),Ue.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function Vx(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var i=bf.transition;bf.transition={};try{t(!1),e()}finally{Se=n,bf.transition=i}}function O1(){return En().memoizedState}function Fx(t,e,n){var i=vr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},L1(t))M1(e,n);else if(n=m1(t,e,n,i),n!==null){var r=Wt();Dn(n,t,i,r),D1(n,e,i)}}function Ux(t,e,n){var i=vr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(L1(t))M1(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Un(a,o)){var l=e.interleaved;l===null?(r.next=r,Cg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=m1(t,e,r,i),n!==null&&(r=Wt(),Dn(n,t,i,r),D1(n,e,i))}}function L1(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function M1(t,e){$a=Xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,hg(t,n)}}var Ju={readContext:wn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},jx={readContext:wn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:aw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pu(4194308,4,k1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return pu(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=zn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Fx.bind(null,Ue,t),[i.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:ow,useDebugValue:Mg,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=ow(!1),e=t[0];return t=Vx.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ue,r=zn();if(Ve){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ft===null)throw Error($(349));ls&30||w1(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,aw(T1.bind(null,i,s,t),[t]),i.flags|=2048,wl(9,E1.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=ft.identifierPrefix;if(Ve){var n=yi,i=gi;n=(i&~(1<<32-Mn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zx={readContext:wn,useCallback:x1,useContext:wn,useEffect:Lg,useImperativeHandle:P1,useInsertionEffect:C1,useLayoutEffect:A1,useMemo:R1,useReducer:Cf,useRef:b1,useState:function(){return Cf(_l)},useDebugValue:Mg,useDeferredValue:function(t){var e=En();return N1(e,it.memoizedState,t)},useTransition:function(){var t=Cf(_l)[0],e=En().memoizedState;return[t,e]},useMutableSource:v1,useSyncExternalStore:_1,useId:O1,unstable_isNewReconciler:!1},Bx={readContext:wn,useCallback:x1,useContext:wn,useEffect:Lg,useImperativeHandle:P1,useInsertionEffect:C1,useLayoutEffect:A1,useMemo:R1,useReducer:Af,useRef:b1,useState:function(){return Af(_l)},useDebugValue:Mg,useDeferredValue:function(t){var e=En();return it===null?e.memoizedState=t:N1(e,it.memoizedState,t)},useTransition:function(){var t=Af(_l)[0],e=En().memoizedState;return[t,e]},useMutableSource:v1,useSyncExternalStore:_1,useId:O1,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xd={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=vr(t),s=Si(i,r);s.payload=e,n!=null&&(s.callback=n),e=gr(t,s,r),e!==null&&(Dn(e,t,r,i),hu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wt(),r=vr(t),s=Si(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=gr(t,s,r),e!==null&&(Dn(e,t,r,i),hu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wt(),i=vr(t),r=Si(n,i);r.tag=2,e!=null&&(r.callback=e),e=gr(t,r,i),e!==null&&(Dn(e,t,i,n),hu(e,t,i))}};function lw(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hl(n,i)||!hl(r,s):!0}function V1(t,e,n){var i=!1,r=Cr,s=e.contextType;return typeof s=="object"&&s!==null?s=wn(s):(r=Xt(e)?os:Vt.current,i=e.contextTypes,s=(i=i!=null)?yo(t,r):Cr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xd,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function cw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Xd.enqueueReplaceState(e,e.state,null)}function $p(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ag(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=wn(s):(s=Xt(e)?os:Vt.current,r.context=yo(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bp(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Xd.enqueueReplaceState(r,r.state,null),Qu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",i=e;do n+=gP(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function kf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $x=typeof WeakMap=="function"?WeakMap:Map;function F1(t,e,n){n=Si(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ed||(ed=!0,em=i),Wp(t,e)},n}function U1(t,e,n){n=Si(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Wp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wp(t,e),typeof i!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new $x;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=iR.bind(null,t,e,n),e.then(t,t))}function dw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hw(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Si(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var Wx=ji.ReactCurrentOwner,Qt=!1;function $t(t,e,n,i){e.child=t===null?p1(e,null,n,i):_o(e,t.child,n,i)}function fw(t,e,n,i,r){n=n.render;var s=e.ref;return so(e,r),i=Ng(t,e,n,i,s,r),n=Og(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ni(t,e,r)):(Ve&&n&&wg(e),e.flags|=1,$t(t,e,i,r),e.child)}function pw(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!$g(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,j1(t,e,s,i,r)):(t=vu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hl,n(o,i)&&t.ref===e.ref)return Ni(t,e,r)}return e.flags|=1,t=_r(s,i),t.ref=e.ref,t.return=e,e.child=t}function j1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(hl(s,i)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Ni(t,e,r)}return Hp(t,e,n,i,r)}function z1(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Js,en),en|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Js,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ke(Js,en),en|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ke(Js,en),en|=i;return $t(t,e,r,n),e.child}function B1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hp(t,e,n,i,r){var s=Xt(n)?os:Vt.current;return s=yo(e,s),so(e,r),n=Ng(t,e,n,i,s,r),i=Og(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ni(t,e,r)):(Ve&&i&&wg(e),e.flags|=1,$t(t,e,n,r),e.child)}function mw(t,e,n,i,r){if(Xt(n)){var s=!0;Wu(e)}else s=!1;if(so(e,r),e.stateNode===null)mu(t,e),V1(e,n,i),$p(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=wn(u):(u=Xt(n)?os:Vt.current,u=yo(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&cw(e,o,i,u),Ji=!1;var f=e.memoizedState;o.state=f,Qu(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Yt.current||Ji?(typeof d=="function"&&(Bp(e,n,d,i),l=e.memoizedState),(a=Ji||lw(e,n,a,i,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,g1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:kn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=wn(l):(l=Xt(n)?os:Vt.current,l=yo(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&cw(e,o,i,l),Ji=!1,f=e.memoizedState,o.state=f,Qu(e,i,o,r);var _=e.memoizedState;a!==h||f!==_||Yt.current||Ji?(typeof g=="function"&&(Bp(e,n,g,i),_=e.memoizedState),(u=Ji||lw(e,n,u,i,f,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return qp(t,e,n,i,s,r)}function qp(t,e,n,i,r,s){B1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&ew(e,n,!1),Ni(t,e,s);i=e.stateNode,Wx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=_o(e,t.child,null,s),e.child=_o(e,null,a,s)):$t(t,e,a,s),e.memoizedState=i.state,r&&ew(e,n,!0),e.child}function $1(t){var e=t.stateNode;e.pendingContext?Z_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Z_(t,e.context,!1),kg(t,e.containerInfo)}function gw(t,e,n,i,r){return vo(),Tg(r),e.flags|=256,$t(t,e,n,i),e.child}var Gp={dehydrated:null,treeContext:null,retryLane:0};function Kp(t){return{baseLanes:t,cachePool:null,transitions:null}}function W1(t,e,n){var i=e.pendingProps,r=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ke(Fe,r&1),t===null)return jp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=eh(o,i,0,null),t=is(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kp(n),e.memoizedState=Gp,t):Dg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Hx(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=_r(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=_r(a,s):(s=is(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Kp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gp,i}return s=t.child,t=s.sibling,i=_r(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Dg(t,e){return e=eh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hc(t,e,n,i){return i!==null&&Tg(i),_o(e,t.child,null,n),t=Dg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hx(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=kf(Error($(422))),Hc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=eh({mode:"visible",children:i.children},r,0,null),s=is(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&_o(e,t.child,null,o),e.child.memoizedState=Kp(o),e.memoizedState=Gp,s);if(!(e.mode&1))return Hc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error($(419)),i=kf(s,i,void 0),Hc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Qt||a){if(i=ft,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ri(t,r),Dn(i,t,r,-1))}return Bg(),i=kf(Error($(421))),Hc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=rR.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,rn=mr(r.nextSibling),on=e,Ve=!0,xn=null,t!==null&&(hn[fn++]=gi,hn[fn++]=yi,hn[fn++]=as,gi=t.id,yi=t.overflow,as=e),e=Dg(e,i.children),e.flags|=4096,e)}function yw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zp(t.return,e,n)}function Pf(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function H1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if($t(t,e,i.children,n),i=Fe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yw(t,n,e);else if(t.tag===19)yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ke(Fe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Yu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Pf(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Yu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Pf(e,!0,n,null,s);break;case"together":Pf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=_r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qx(t,e,n){switch(e.tag){case 3:$1(e),vo();break;case 5:y1(e);break;case 1:Xt(e.type)&&Wu(e);break;case 4:kg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ke(Gu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ke(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?W1(t,e,n):(ke(Fe,Fe.current&1),t=Ni(t,e,n),t!==null?t.sibling:null);ke(Fe,Fe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return H1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ke(Fe,Fe.current),i)break;return null;case 22:case 23:return e.lanes=0,z1(t,e,n)}return Ni(t,e,n)}var q1,Qp,G1,K1;q1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qp=function(){};G1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Xr(Xn.current);var s=null;switch(n){case"input":r=yp(t,r),i=yp(t,i),s=[];break;case"select":r=je({},r,{value:void 0}),i=je({},i,{value:void 0}),s=[];break;case"textarea":r=wp(t,r),i=wp(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Bu)}Tp(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(sl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(sl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Re("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};K1=function(t,e,n,i){n!==i&&(e.flags|=4)};function ya(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Gx(t,e,n){var i=e.pendingProps;switch(Eg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Xt(e.type)&&$u(),kt(e),null;case 3:return i=e.stateNode,wo(),Le(Yt),Le(Vt),xg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(im(xn),xn=null))),Qp(t,e),kt(e),null;case 5:Pg(e);var r=Xr(yl.current);if(n=e.type,t!==null&&e.stateNode!=null)G1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return kt(e),null}if(t=Xr(Xn.current),$c(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Wn]=e,i[ml]=s,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",i),Re("close",i);break;case"iframe":case"object":case"embed":Re("load",i);break;case"video":case"audio":for(r=0;r<Ra.length;r++)Re(Ra[r],i);break;case"source":Re("error",i);break;case"img":case"image":case"link":Re("error",i),Re("load",i);break;case"details":Re("toggle",i);break;case"input":C_(i,s),Re("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Re("invalid",i);break;case"textarea":k_(i,s),Re("invalid",i)}Tp(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bc(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bc(i.textContent,a,t),r=["children",""+a]):sl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",i)}switch(n){case"input":Lc(i),A_(i,s,!0);break;case"textarea":Lc(i),P_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Bu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Wn]=e,t[ml]=i,q1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sp(n,i),n){case"dialog":Re("cancel",t),Re("close",t),r=i;break;case"iframe":case"object":case"embed":Re("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ra.length;r++)Re(Ra[r],t);r=i;break;case"source":Re("error",t),r=i;break;case"img":case"image":case"link":Re("error",t),Re("load",t),r=i;break;case"details":Re("toggle",t),r=i;break;case"input":C_(t,i),r=yp(t,i),Re("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=je({},i,{value:void 0}),Re("invalid",t);break;case"textarea":k_(t,i),r=wp(t,i),Re("invalid",t);break;default:r=i}Tp(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ST(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ol(t,l):typeof l=="number"&&ol(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Re("scroll",t):l!=null&&og(t,s,l,o))}switch(n){case"input":Lc(t),A_(t,i,!1);break;case"textarea":Lc(t),P_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+br(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?to(t,!!i.multiple,s,!1):i.defaultValue!=null&&to(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Bu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)K1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=Xr(yl.current),Xr(Xn.current),$c(e)){if(i=e.stateNode,n=e.memoizedProps,i[Wn]=e,(s=i.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:Bc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Wn]=e,e.stateNode=i}return kt(e),null;case 13:if(Le(Fe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&rn!==null&&e.mode&1&&!(e.flags&128))h1(),vo(),e.flags|=98560,s=!1;else if(s=$c(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Wn]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else xn!==null&&(im(xn),xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?st===0&&(st=3):Bg())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return wo(),Qp(t,e),t===null&&fl(e.stateNode.containerInfo),kt(e),null;case 10:return bg(e.type._context),kt(e),null;case 17:return Xt(e.type)&&$u(),kt(e),null;case 19:if(Le(Fe),s=e.memoizedState,s===null)return kt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ya(s,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yu(t),o!==null){for(e.flags|=128,ya(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ke(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>To&&(e.flags|=128,i=!0,ya(s,!1),e.lanes=4194304)}else{if(!i)if(t=Yu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ya(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return kt(e),null}else 2*Je()-s.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,i=!0,ya(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=Fe.current,ke(Fe,i?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return zg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?en&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Kx(t,e){switch(Eg(e),e.tag){case 1:return Xt(e.type)&&$u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),Le(Yt),Le(Vt),xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pg(e),null;case 13:if(Le(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Fe),null;case 4:return wo(),null;case 10:return bg(e.type._context),null;case 22:case 23:return zg(),null;case 24:return null;default:return null}}var qc=!1,Nt=!1,Qx=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){We(t,e,i)}else n.current=null}function Yp(t,e,n){try{n()}catch(i){We(t,e,i)}}var vw=!1;function Yx(t,e){if(Op=Uu,t=ZT(),_g(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++d===i&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lp={focusedElem:t,selectionRange:n},Uu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,A=_.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:kn(e.type,E),A);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(P){We(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return _=vw,vw=!1,_}function Wa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Yp(e,n,s)}r=r.next}while(r!==i)}}function Jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Xp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q1(t){var e=t.alternate;e!==null&&(t.alternate=null,Q1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[ml],delete e[Vp],delete e[Nx],delete e[Ox])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y1(t){return t.tag===5||t.tag===3||t.tag===4}function _w(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bu));else if(i!==4&&(t=t.child,t!==null))for(Jp(t,e,n),t=t.sibling;t!==null;)Jp(t,e,n),t=t.sibling}function Zp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zp(t,e,n),t=t.sibling;t!==null;)Zp(t,e,n),t=t.sibling}var mt=null,Pn=!1;function Qi(t,e,n){for(n=n.child;n!==null;)X1(t,e,n),n=n.sibling}function X1(t,e,n){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Wd,n)}catch{}switch(n.tag){case 5:Nt||Xs(n,e);case 6:var i=mt,r=Pn;mt=null,Qi(t,e,n),mt=i,Pn=r,mt!==null&&(Pn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(Pn?(t=mt,n=n.stateNode,t.nodeType===8?Tf(t.parentNode,n):t.nodeType===1&&Tf(t,n),ul(t)):Tf(mt,n.stateNode));break;case 4:i=mt,r=Pn,mt=n.stateNode.containerInfo,Pn=!0,Qi(t,e,n),mt=i,Pn=r;break;case 0:case 11:case 14:case 15:if(!Nt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yp(n,e,o),r=r.next}while(r!==i)}Qi(t,e,n);break;case 1:if(!Nt&&(Xs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){We(n,e,a)}Qi(t,e,n);break;case 21:Qi(t,e,n);break;case 22:n.mode&1?(Nt=(i=Nt)||n.memoizedState!==null,Qi(t,e,n),Nt=i):Qi(t,e,n);break;default:Qi(t,e,n)}}function ww(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Qx),e.forEach(function(i){var r=sR.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,Pn=!1;break e;case 3:mt=a.stateNode.containerInfo,Pn=!0;break e;case 4:mt=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(mt===null)throw Error($(160));X1(s,o,r),mt=null,Pn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){We(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J1(e,t),e=e.sibling}function J1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),jn(t),i&4){try{Wa(3,t,t.return),Jd(3,t)}catch(E){We(t,t.return,E)}try{Wa(5,t,t.return)}catch(E){We(t,t.return,E)}}break;case 1:Cn(e,t),jn(t),i&512&&n!==null&&Xs(n,n.return);break;case 5:if(Cn(e,t),jn(t),i&512&&n!==null&&Xs(n,n.return),t.flags&32){var r=t.stateNode;try{ol(r,"")}catch(E){We(t,t.return,E)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wT(r,s),Sp(a,o);var u=Sp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?bT(r,h):d==="dangerouslySetInnerHTML"?ST(r,h):d==="children"?ol(r,h):og(r,d,h,u)}switch(a){case"input":vp(r,s);break;case"textarea":ET(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?to(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?to(r,!!s.multiple,s.defaultValue,!0):to(r,!!s.multiple,s.multiple?[]:"",!1))}r[ml]=s}catch(E){We(t,t.return,E)}}break;case 6:if(Cn(e,t),jn(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(E){We(t,t.return,E)}}break;case 3:if(Cn(e,t),jn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ul(e.containerInfo)}catch(E){We(t,t.return,E)}break;case 4:Cn(e,t),jn(t);break;case 13:Cn(e,t),jn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ug=Je())),i&4&&ww(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(u=Nt)||d,Cn(e,t),Nt=u):Cn(e,t),jn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Y=t,d=t.child;d!==null;){for(h=Y=d;Y!==null;){switch(f=Y,g=f.child,f.tag){case 0:case 11:case 14:case 15:Wa(4,f,f.return);break;case 1:Xs(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){We(i,n,E)}}break;case 5:Xs(f,f.return);break;case 22:if(f.memoizedState!==null){Tw(h);continue}}g!==null?(g.return=f,Y=g):Tw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IT("display",o))}catch(E){We(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(E){We(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cn(e,t),jn(t),i&4&&ww(t);break;case 21:break;default:Cn(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Y1(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ol(r,""),i.flags&=-33);var s=_w(t);Zp(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=_w(t);Jp(t,a,o);break;default:throw Error($(161))}}catch(l){We(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Xx(t,e,n){Y=t,Z1(t)}function Z1(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||qc;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Nt;a=qc;var u=Nt;if(qc=o,(Nt=l)&&!u)for(Y=r;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?Sw(r):l!==null?(l.return=o,Y=l):Sw(r);for(;s!==null;)Y=s,Z1(s),s=s.sibling;Y=r,qc=a,Nt=u}Ew(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):Ew(t)}}function Ew(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Jd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Nt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ul(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Nt||e.flags&512&&Xp(e)}catch(f){We(e,e.return,f)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Tw(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Sw(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jd(4,e)}catch(l){We(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){We(e,r,l)}}var s=e.return;try{Xp(e)}catch(l){We(e,s,l)}break;case 5:var o=e.return;try{Xp(e)}catch(l){We(e,o,l)}}}catch(l){We(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var Jx=Math.ceil,Zu=ji.ReactCurrentDispatcher,Vg=ji.ReactCurrentOwner,yn=ji.ReactCurrentBatchConfig,me=0,ft=null,et=null,_t=0,en=0,Js=Or(0),st=0,El=null,cs=0,Zd=0,Fg=0,Ha=null,Kt=null,Ug=0,To=1/0,fi=null,ed=!1,em=null,yr=null,Gc=!1,ar=null,td=0,qa=0,tm=null,gu=-1,yu=0;function Wt(){return me&6?Je():gu!==-1?gu:gu=Je()}function vr(t){return t.mode&1?me&2&&_t!==0?_t&-_t:Mx.transition!==null?(yu===0&&(yu=VT()),yu):(t=Se,t!==0||(t=window.event,t=t===void 0?16:WT(t.type)),t):1}function Dn(t,e,n,i){if(50<qa)throw qa=0,tm=null,Error($(185));Bl(t,n,i),(!(me&2)||t!==ft)&&(t===ft&&(!(me&2)&&(Zd|=n),st===4&&er(t,_t)),Jt(t,i),n===1&&me===0&&!(e.mode&1)&&(To=Je()+500,Qd&&Lr()))}function Jt(t,e){var n=t.callbackNode;MP(t,e);var i=Fu(t,t===ft?_t:0);if(i===0)n!==null&&N_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&N_(n),e===1)t.tag===0?Lx(Iw.bind(null,t)):c1(Iw.bind(null,t)),xx(function(){!(me&6)&&Lr()}),n=null;else{switch(FT(i)){case 1:n=dg;break;case 4:n=MT;break;case 16:n=Vu;break;case 536870912:n=DT;break;default:n=Vu}n=aS(n,eS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eS(t,e){if(gu=-1,yu=0,me&6)throw Error($(327));var n=t.callbackNode;if(oo()&&t.callbackNode!==n)return null;var i=Fu(t,t===ft?_t:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=nd(t,i);else{e=i;var r=me;me|=2;var s=nS();(ft!==t||_t!==e)&&(fi=null,To=Je()+500,ns(t,e));do try{tR();break}catch(a){tS(t,a)}while(!0);Ig(),Zu.current=s,me=r,et!==null?e=0:(ft=null,_t=0,e=st)}if(e!==0){if(e===2&&(r=kp(t),r!==0&&(i=r,e=nm(t,r))),e===1)throw n=El,ns(t,0),er(t,i),Jt(t,Je()),n;if(e===6)er(t,i);else{if(r=t.current.alternate,!(i&30)&&!Zx(r)&&(e=nd(t,i),e===2&&(s=kp(t),s!==0&&(i=s,e=nm(t,s))),e===1))throw n=El,ns(t,0),er(t,i),Jt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:Wr(t,Kt,fi);break;case 3:if(er(t,i),(i&130023424)===i&&(e=Ug+500-Je(),10<e)){if(Fu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Wt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Dp(Wr.bind(null,t,Kt,fi),e);break}Wr(t,Kt,fi);break;case 4:if(er(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Mn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Jx(i/1960))-i,10<i){t.timeoutHandle=Dp(Wr.bind(null,t,Kt,fi),i);break}Wr(t,Kt,fi);break;case 5:Wr(t,Kt,fi);break;default:throw Error($(329))}}}return Jt(t,Je()),t.callbackNode===n?eS.bind(null,t):null}function nm(t,e){var n=Ha;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=nd(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&im(e)),t}function im(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function Zx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Un(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~Fg,e&=~Zd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),i=1<<n;t[n]=-1,e&=~i}}function Iw(t){if(me&6)throw Error($(327));oo();var e=Fu(t,0);if(!(e&1))return Jt(t,Je()),null;var n=nd(t,e);if(t.tag!==0&&n===2){var i=kp(t);i!==0&&(e=i,n=nm(t,i))}if(n===1)throw n=El,ns(t,0),er(t,e),Jt(t,Je()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wr(t,Kt,fi),Jt(t,Je()),null}function jg(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(To=Je()+500,Qd&&Lr())}}function us(t){ar!==null&&ar.tag===0&&!(me&6)&&oo();var e=me;me|=1;var n=yn.transition,i=Se;try{if(yn.transition=null,Se=1,t)return t()}finally{Se=i,yn.transition=n,me=e,!(me&6)&&Lr()}}function zg(){en=Js.current,Le(Js)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Px(n)),et!==null)for(n=et.return;n!==null;){var i=n;switch(Eg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$u();break;case 3:wo(),Le(Yt),Le(Vt),xg();break;case 5:Pg(i);break;case 4:wo();break;case 13:Le(Fe);break;case 19:Le(Fe);break;case 10:bg(i.type._context);break;case 22:case 23:zg()}n=n.return}if(ft=t,et=t=_r(t.current,null),_t=en=e,st=0,El=null,Fg=Zd=cs=0,Kt=Ha=null,Yr!==null){for(e=0;e<Yr.length;e++)if(n=Yr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Yr=null}return t}function tS(t,e){do{var n=et;try{if(Ig(),fu.current=Ju,Xu){for(var i=Ue.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Xu=!1}if(ls=0,ut=it=Ue=null,$a=!1,vl=0,Vg.current=null,n===null||n.return===null){st=1,El=e,et=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=dw(o);if(g!==null){g.flags&=-257,hw(g,o,a,s,e),g.mode&1&&uw(s,u,e),e=g,l=u;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){uw(s,u,e),Bg();break e}l=Error($(426))}}else if(Ve&&a.mode&1){var A=dw(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),hw(A,o,a,s,e),Tg(Eo(l,a));break e}}s=l=Eo(l,a),st!==4&&(st=2),Ha===null?Ha=[s]:Ha.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=F1(s,l,e);rw(s,v);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(yr===null||!yr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=U1(s,a,e);rw(s,P);break e}}s=s.return}while(s!==null)}rS(n)}catch(O){e=O,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function nS(){var t=Zu.current;return Zu.current=Ju,t===null?Ju:t}function Bg(){(st===0||st===3||st===2)&&(st=4),ft===null||!(cs&268435455)&&!(Zd&268435455)||er(ft,_t)}function nd(t,e){var n=me;me|=2;var i=nS();(ft!==t||_t!==e)&&(fi=null,ns(t,e));do try{eR();break}catch(r){tS(t,r)}while(!0);if(Ig(),me=n,Zu.current=i,et!==null)throw Error($(261));return ft=null,_t=0,st}function eR(){for(;et!==null;)iS(et)}function tR(){for(;et!==null&&!CP();)iS(et)}function iS(t){var e=oS(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?rS(t):et=e,Vg.current=null}function rS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Kx(n,e),n!==null){n.flags&=32767,et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,et=null;return}}else if(n=Gx(n,e,en),n!==null){et=n;return}if(e=e.sibling,e!==null){et=e;return}et=e=t}while(e!==null);st===0&&(st=5)}function Wr(t,e,n){var i=Se,r=yn.transition;try{yn.transition=null,Se=1,nR(t,e,n,i)}finally{yn.transition=r,Se=i}return null}function nR(t,e,n,i){do oo();while(ar!==null);if(me&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DP(t,s),t===ft&&(et=ft=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gc||(Gc=!0,aS(Vu,function(){return oo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yn.transition,yn.transition=null;var o=Se;Se=1;var a=me;me|=4,Vg.current=null,Yx(t,n),J1(n,t),Tx(Lp),Uu=!!Op,Lp=Op=null,t.current=n,Xx(n),AP(),me=a,Se=o,yn.transition=s}else t.current=n;if(Gc&&(Gc=!1,ar=t,td=r),s=t.pendingLanes,s===0&&(yr=null),xP(n.stateNode),Jt(t,Je()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ed)throw ed=!1,t=em,em=null,t;return td&1&&t.tag!==0&&oo(),s=t.pendingLanes,s&1?t===tm?qa++:(qa=0,tm=t):qa=0,Lr(),null}function oo(){if(ar!==null){var t=FT(td),e=yn.transition,n=Se;try{if(yn.transition=null,Se=16>t?16:t,ar===null)var i=!1;else{if(t=ar,ar=null,td=0,me&6)throw Error($(331));var r=me;for(me|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Y=u;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Wa(8,d,s)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var f=d.sibling,g=d.return;if(Q1(d),d===u){Y=null;break}if(f!==null){f.return=g,Y=f;break}Y=g}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wa(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Y=v;break e}Y=s.return}}var y=t.current;for(Y=y;Y!==null;){o=Y;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Y=w;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Jd(9,a)}}catch(O){We(a,a.return,O)}if(a===o){Y=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,Y=P;break e}Y=a.return}}if(me=r,Lr(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Wd,t)}catch{}i=!0}return i}finally{Se=n,yn.transition=e}}return!1}function bw(t,e,n){e=Eo(n,e),e=F1(t,e,1),t=gr(t,e,1),e=Wt(),t!==null&&(Bl(t,1,e),Jt(t,e))}function We(t,e,n){if(t.tag===3)bw(t,t,n);else for(;e!==null;){if(e.tag===3){bw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(yr===null||!yr.has(i))){t=Eo(n,t),t=U1(e,t,1),e=gr(e,t,1),t=Wt(),e!==null&&(Bl(e,1,t),Jt(e,t));break}}e=e.return}}function iR(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Wt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(_t&n)===n&&(st===4||st===3&&(_t&130023424)===_t&&500>Je()-Ug?ns(t,0):Fg|=n),Jt(t,e)}function sS(t,e){e===0&&(t.mode&1?(e=Vc,Vc<<=1,!(Vc&130023424)&&(Vc=4194304)):e=1);var n=Wt();t=Ri(t,e),t!==null&&(Bl(t,e,n),Jt(t,n))}function rR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sS(t,n)}function sR(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),sS(t,n)}var oS;oS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,qx(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Ve&&e.flags&1048576&&u1(e,qu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;mu(t,e),t=e.pendingProps;var r=yo(e,Vt.current);so(e,n),r=Ng(null,e,i,t,r,n);var s=Og();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(i)?(s=!0,Wu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ag(e),r.updater=Xd,e.stateNode=r,r._reactInternals=e,$p(e,i,t,n),e=qp(null,e,i,!0,s,n)):(e.tag=0,Ve&&s&&wg(e),$t(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(mu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=aR(i),t=kn(i,t),r){case 0:e=Hp(null,e,i,t,n);break e;case 1:e=mw(null,e,i,t,n);break e;case 11:e=fw(null,e,i,t,n);break e;case 14:e=pw(null,e,i,kn(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:kn(i,r),Hp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:kn(i,r),mw(t,e,i,r,n);case 3:e:{if($1(e),t===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,g1(t,e),Qu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Eo(Error($(423)),e),e=gw(t,e,i,n,r);break e}else if(i!==r){r=Eo(Error($(424)),e),e=gw(t,e,i,n,r);break e}else for(rn=mr(e.stateNode.containerInfo.firstChild),on=e,Ve=!0,xn=null,n=p1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),i===r){e=Ni(t,e,n);break e}$t(t,e,i,n)}e=e.child}return e;case 5:return y1(e),t===null&&jp(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Mp(i,r)?o=null:s!==null&&Mp(i,s)&&(e.flags|=32),B1(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&jp(e),null;case 13:return W1(t,e,n);case 4:return kg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=_o(e,null,i,n):$t(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:kn(i,r),fw(t,e,i,r,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ke(Gu,i._currentValue),i._currentValue=o,s!==null)if(Un(s.value,o)){if(s.children===r.children&&!Yt.current){e=Ni(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Si(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,so(e,n),r=wn(r),i=i(r),e.flags|=1,$t(t,e,i,n),e.child;case 14:return i=e.type,r=kn(i,e.pendingProps),r=kn(i.type,r),pw(t,e,i,r,n);case 15:return j1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:kn(i,r),mu(t,e),e.tag=1,Xt(i)?(t=!0,Wu(e)):t=!1,so(e,n),V1(e,i,r),$p(e,i,r,n),qp(null,e,i,!0,t,n);case 19:return H1(t,e,n);case 22:return z1(t,e,n)}throw Error($(156,e.tag))};function aS(t,e){return LT(t,e)}function oR(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,e,n,i){return new oR(t,e,n,i)}function $g(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aR(t){if(typeof t=="function")return $g(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lg)return 11;if(t===cg)return 14}return 2}function _r(t,e){var n=t.alternate;return n===null?(n=mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")$g(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bs:return is(n.children,r,s,e);case ag:o=8,r|=8;break;case fp:return t=mn(12,n,e,r|2),t.elementType=fp,t.lanes=s,t;case pp:return t=mn(13,n,e,r),t.elementType=pp,t.lanes=s,t;case mp:return t=mn(19,n,e,r),t.elementType=mp,t.lanes=s,t;case yT:return eh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mT:o=10;break e;case gT:o=9;break e;case lg:o=11;break e;case cg:o=14;break e;case Xi:o=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=mn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function is(t,e,n,i){return t=mn(7,t,i,e),t.lanes=n,t}function eh(t,e,n,i){return t=mn(22,t,i,e),t.elementType=yT,t.lanes=n,t.stateNode={isHidden:!1},t}function xf(t,e,n){return t=mn(6,t,null,e),t.lanes=n,t}function Rf(t,e,n){return e=mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lR(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=df(0),this.expirationTimes=df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=df(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Wg(t,e,n,i,r,s,o,a,l){return t=new lR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ag(s),t}function cR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function lS(t){if(!t)return Cr;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Xt(n))return l1(t,n,e)}return e}function cS(t,e,n,i,r,s,o,a,l){return t=Wg(n,i,!0,t,r,s,o,a,l),t.context=lS(null),n=t.current,i=Wt(),r=vr(n),s=Si(i,r),s.callback=e??null,gr(n,s,r),t.current.lanes=r,Bl(t,r,i),Jt(t,i),t}function th(t,e,n,i){var r=e.current,s=Wt(),o=vr(r);return n=lS(n),e.context===null?e.context=n:e.pendingContext=n,e=Si(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=gr(r,e,o),t!==null&&(Dn(t,r,o,s),hu(t,r,o)),o}function id(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hg(t,e){Cw(t,e),(t=t.alternate)&&Cw(t,e)}function uR(){return null}var uS=typeof reportError=="function"?reportError:function(t){console.error(t)};function qg(t){this._internalRoot=t}nh.prototype.render=qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));th(t,e,null,null)};nh.prototype.unmount=qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){th(null,t,null,null)}),e[xi]=null}};function nh(t){this._internalRoot=t}nh.prototype.unstable_scheduleHydration=function(t){if(t){var e=zT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zi.length&&e!==0&&e<Zi[n].priority;n++);Zi.splice(n,0,t),n===0&&$T(t)}};function Gg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Aw(){}function dR(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=id(o);s.call(u)}}var o=cS(e,i,t,0,null,!1,!1,"",Aw);return t._reactRootContainer=o,t[xi]=o.current,fl(t.nodeType===8?t.parentNode:t),us(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=id(l);a.call(u)}}var l=Wg(t,0,!1,null,null,!1,!1,"",Aw);return t._reactRootContainer=l,t[xi]=l.current,fl(t.nodeType===8?t.parentNode:t),us(function(){th(e,l,n,i)}),l}function rh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=id(o);a.call(l)}}th(e,o,t,r)}else o=dR(n,e,t,r,i);return id(o)}UT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xa(e.pendingLanes);n!==0&&(hg(e,n|1),Jt(e,Je()),!(me&6)&&(To=Je()+500,Lr()))}break;case 13:us(function(){var i=Ri(t,1);if(i!==null){var r=Wt();Dn(i,t,1,r)}}),Hg(t,1)}};fg=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=Wt();Dn(e,t,134217728,n)}Hg(t,134217728)}};jT=function(t){if(t.tag===13){var e=vr(t),n=Ri(t,e);if(n!==null){var i=Wt();Dn(n,t,e,i)}Hg(t,e)}};zT=function(){return Se};BT=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};bp=function(t,e,n){switch(e){case"input":if(vp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Kd(i);if(!r)throw Error($(90));_T(i),vp(i,r)}}}break;case"textarea":ET(t,n);break;case"select":e=n.value,e!=null&&to(t,!!n.multiple,e,!1)}};kT=jg;PT=us;var hR={usingClientEntryPoint:!1,Events:[Wl,qs,Kd,CT,AT,jg]},va={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fR={bundleType:va.bundleType,version:va.version,rendererPackageName:va.rendererPackageName,rendererConfig:va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NT(t),t===null?null:t.stateNode},findFiberByHostInstance:va.findFiberByHostInstance||uR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{Wd=Kc.inject(fR),Yn=Kc}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gg(e))throw Error($(200));return cR(t,e,null,n)};cn.createRoot=function(t,e){if(!Gg(t))throw Error($(299));var n=!1,i="",r=uS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Wg(t,1,!1,null,null,n,!1,i,r),t[xi]=e.current,fl(t.nodeType===8?t.parentNode:t),new qg(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=NT(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return us(t)};cn.hydrate=function(t,e,n){if(!ih(e))throw Error($(200));return rh(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!Gg(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=uS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cS(e,null,t,1,n??null,r,!1,s,o),t[xi]=e.current,fl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new nh(e)};cn.render=function(t,e,n){if(!ih(e))throw Error($(200));return rh(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!ih(t))throw Error($(40));return t._reactRootContainer?(us(function(){rh(null,null,t,!1,function(){t._reactRootContainer=null,t[xi]=null})}),!0):!1};cn.unstable_batchedUpdates=jg;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ih(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return rh(t,e,n,!1,i)};cn.version="18.3.1-next-f1338f8080-20240426";function dS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dS)}catch(t){console.error(t)}}dS(),dT.exports=cn;var pR=dT.exports,kw=pR;dp.createRoot=kw.createRoot,dp.hydrateRoot=kw.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tl(){return Tl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Tl.apply(this,arguments)}var lr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(lr||(lr={}));const Pw="popstate";function mR(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return rm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:rd(r)}return yR(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gR(){return Math.random().toString(36).substr(2,8)}function xw(t,e){return{usr:t.state,key:t.key,idx:e}}function rm(t,e,n,i){return n===void 0&&(n=null),Tl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Uo(e):e,{state:n,key:e&&e.key||i||gR()})}function rd(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function yR(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=lr.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Tl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=lr.Pop;let A=d(),v=A==null?null:A-u;u=A,l&&l({action:a,location:E.location,delta:v})}function f(A,v){a=lr.Push;let y=rm(E.location,A,v);u=d()+1;let w=xw(y,u),P=E.createHref(y);try{o.pushState(w,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;r.location.assign(P)}s&&l&&l({action:a,location:E.location,delta:1})}function g(A,v){a=lr.Replace;let y=rm(E.location,A,v);u=d();let w=xw(y,u),P=E.createHref(y);o.replaceState(w,"",P),s&&l&&l({action:a,location:E.location,delta:0})}function _(A){let v=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof A=="string"?A:rd(A);return y=y.replace(/ $/,"%20"),qe(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let E={get action(){return a},get location(){return t(r,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Pw,h),l=A,()=>{r.removeEventListener(Pw,h),l=null}},createHref(A){return e(r,A)},createURL:_,encodeLocation(A){let v=_(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(A){return o.go(A)}};return E}var Rw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rw||(Rw={}));function vR(t,e,n){return n===void 0&&(n="/"),_R(t,e,n,!1)}function _R(t,e,n,i){let r=typeof e=="string"?Uo(e):e,s=So(r.pathname||"/",n);if(s==null)return null;let o=fS(t);wR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=RR(s);a=PR(o[l],u,i)}return a}function fS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=wr([i,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fS(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:AR(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of pS(s.path))r(s,o,l)}),e}function pS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=pS(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function wR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kR(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const ER=/^:[\w-]+$/,TR=3,SR=2,IR=1,bR=10,CR=-2,Nw=t=>t==="*";function AR(t,e){let n=t.split("/"),i=n.length;return n.some(Nw)&&(i+=CR),e&&(i+=SR),n.filter(r=>!Nw(r)).reduce((r,s)=>r+(ER.test(s)?TR:s===""?IR:bR),i)}function kR(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function PR(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=sd({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!i[i.length-1].route.index&&(h=sd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:wr([s,h.pathname]),pathnameBase:MR(wr([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=wr([s,h.pathnameBase]))}return o}function sd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=xR(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let E=a[h]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const _=a[h];return g&&!_?u[f]=void 0:u[f]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function xR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function RR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function So(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function NR(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Uo(t):t;return{pathname:n?n.startsWith("/")?n:OR(n,e):e,search:DR(i),hash:VR(r)}}function OR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Nf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mS(t,e){let n=LR(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function gS(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Uo(t):(r=Tl({},t),qe(!r.pathname||!r.pathname.includes("?"),Nf("?","pathname","search",r)),qe(!r.pathname||!r.pathname.includes("#"),Nf("#","pathname","hash",r)),qe(!r.search||!r.search.includes("#"),Nf("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=NR(r,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),MR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yS=["post","put","patch","delete"];new Set(yS);const UR=["get",...yS];new Set(UR);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sl.apply(this,arguments)}const sh=M.createContext(null),vS=M.createContext(null),Mr=M.createContext(null),oh=M.createContext(null),Ss=M.createContext({outlet:null,matches:[],isDataRoute:!1}),_S=M.createContext(null);function jR(t,e){let{relative:n}=e===void 0?{}:e;ql()||qe(!1);let{basename:i,navigator:r}=M.useContext(Mr),{hash:s,pathname:o,search:a}=ah(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:wr([i,o])),r.createHref({pathname:l,search:a,hash:s})}function ql(){return M.useContext(oh)!=null}function zi(){return ql()||qe(!1),M.useContext(oh).location}function wS(t){M.useContext(Mr).static||M.useLayoutEffect(t)}function Dr(){let{isDataRoute:t}=M.useContext(Ss);return t?ZR():zR()}function zR(){ql()||qe(!1);let t=M.useContext(sh),{basename:e,future:n,navigator:i}=M.useContext(Mr),{matches:r}=M.useContext(Ss),{pathname:s}=zi(),o=JSON.stringify(mS(r,n.v7_relativeSplatPath)),a=M.useRef(!1);return wS(()=>{a.current=!0}),M.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let h=gS(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wr([e,h.pathname])),(d.replace?i.replace:i.push)(h,d.state,d)},[e,i,o,s,t])}function ah(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=M.useContext(Mr),{matches:r}=M.useContext(Ss),{pathname:s}=zi(),o=JSON.stringify(mS(r,i.v7_relativeSplatPath));return M.useMemo(()=>gS(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function BR(t,e){return $R(t,e)}function $R(t,e,n,i){ql()||qe(!1);let{navigator:r}=M.useContext(Mr),{matches:s}=M.useContext(Ss),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=zi(),d;if(e){var h;let A=typeof e=="string"?Uo(e):e;l==="/"||(h=A.pathname)!=null&&h.startsWith(l)||qe(!1),d=A}else d=u;let f=d.pathname||"/",g=f;if(l!=="/"){let A=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(A.length).join("/")}let _=vR(t,{pathname:g}),E=KR(_&&_.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:wr([l,r.encodeLocation?r.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:wr([l,r.encodeLocation?r.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,i);return e&&E?M.createElement(oh.Provider,{value:{location:Sl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:lr.Pop}},E):E}function WR(){let t=JR(),e=FR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,null)}const HR=M.createElement(WR,null);class qR extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Ss.Provider,{value:this.props.routeContext},M.createElement(_S.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GR(t){let{routeContext:e,match:n,children:i}=t,r=M.useContext(sh);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Ss.Provider,{value:e},i)}function KR(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||qe(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=n,_=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,_=!1,E=null,A=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,E=h.route.errorElement||HR,l&&(u<0&&f===0?(_=!0,A=null):u===f&&(_=!0,A=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),y=()=>{let w;return g?w=E:_?w=A:h.route.Component?w=M.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,M.createElement(GR,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?M.createElement(qR,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var ES=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ES||{}),od=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(od||{});function QR(t){let e=M.useContext(sh);return e||qe(!1),e}function YR(t){let e=M.useContext(vS);return e||qe(!1),e}function XR(t){let e=M.useContext(Ss);return e||qe(!1),e}function TS(t){let e=XR(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function JR(){var t;let e=M.useContext(_S),n=YR(od.UseRouteError),i=TS(od.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function ZR(){let{router:t}=QR(ES.UseNavigateStable),e=TS(od.UseNavigateStable),n=M.useRef(!1);return wS(()=>{n.current=!0}),M.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Sl({fromRouteId:e},s)))},[t,e])}function Bt(t){qe(!1)}function eN(t){let{basename:e="/",children:n=null,location:i,navigationType:r=lr.Pop,navigator:s,static:o=!1,future:a}=t;ql()&&qe(!1);let l=e.replace(/^\/*/,"/"),u=M.useMemo(()=>({basename:l,navigator:s,static:o,future:Sl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Uo(i));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:_="default"}=i,E=M.useMemo(()=>{let A=So(d,l);return A==null?null:{location:{pathname:A,search:h,hash:f,state:g,key:_},navigationType:r}},[l,d,h,f,g,_,r]);return E==null?null:M.createElement(Mr.Provider,{value:u},M.createElement(oh.Provider,{children:n,value:E}))}function tN(t){let{children:e,location:n}=t;return BR(sm(e),n)}new Promise(()=>{});function sm(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let s=[...e,r];if(i.type===M.Fragment){n.push.apply(n,sm(i.props.children,s));return}i.type!==Bt&&qe(!1),!i.props.index||!i.props.children||qe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=sm(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ad.apply(this,arguments)}function SS(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function nN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iN(t,e){return t.button===0&&(!e||e==="_self")&&!nN(t)}function om(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function rN(t,e){let n=om(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}const sN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],oN=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],aN="6";try{window.__reactRouterVersion=aN}catch{}const lN=M.createContext({isTransitioning:!1}),cN="startTransition",Ow=iP[cN];function uN(t){let{basename:e,children:n,future:i,window:r}=t,s=M.useRef();s.current==null&&(s.current=mR({window:r,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},d=M.useCallback(h=>{u&&Ow?Ow(()=>l(h)):l(h)},[l,u]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.createElement(eN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const dN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Io=M.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,f=SS(e,sN),{basename:g}=M.useContext(Mr),_,E=!1;if(typeof u=="string"&&hN.test(u)&&(_=u,dN))try{let w=new URL(window.location.href),P=u.startsWith("//")?new URL(w.protocol+u):new URL(u),O=So(P.pathname,g);P.origin===w.origin&&O!=null?u=O+P.search+P.hash:E=!0}catch{}let A=jR(u,{relative:r}),v=pN(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:r,unstable_viewTransition:h});function y(w){i&&i(w),w.defaultPrevented||v(w)}return M.createElement("a",ad({},f,{href:_||A,onClick:E||s?i:y,ref:n,target:l}))}),ui=M.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:u,children:d}=e,h=SS(e,oN),f=ah(l,{relative:h.relative}),g=zi(),_=M.useContext(vS),{navigator:E,basename:A}=M.useContext(Mr),v=_!=null&&mN(f)&&u===!0,y=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,w=g.pathname,P=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(w=w.toLowerCase(),P=P?P.toLowerCase():null,y=y.toLowerCase()),P&&A&&(P=So(P,A)||P);const O=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let D=w===y||!o&&w.startsWith(y)&&w.charAt(O)==="/",k=P!=null&&(P===y||!o&&P.startsWith(y)&&P.charAt(y.length)==="/"),S={isActive:D,isPending:k,isTransitioning:v},b=D?i:void 0,C;typeof s=="function"?C=s(S):C=[s,D?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(S):a;return M.createElement(Io,ad({},h,{"aria-current":b,className:C,ref:n,style:N,to:l,unstable_viewTransition:u}),typeof d=="function"?d(S):d)});var am;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(am||(am={}));var Lw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lw||(Lw={}));function fN(t){let e=M.useContext(sh);return e||qe(!1),e}function pN(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Dr(),u=zi(),d=ah(t,{relative:o});return M.useCallback(h=>{if(iN(h,n)){h.preventDefault();let f=i!==void 0?i:rd(u)===rd(d);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,d,i,r,n,t,s,o,a])}function IS(t){let e=M.useRef(om(t)),n=M.useRef(!1),i=zi(),r=M.useMemo(()=>rN(i.search,n.current?null:e.current),[i.search]),s=Dr(),o=M.useCallback((a,l)=>{const u=om(typeof a=="function"?a(r):a);n.current=!0,s("?"+u,l)},[s,r]);return[r,o]}function mN(t,e){e===void 0&&(e={});let n=M.useContext(lN);n==null&&qe(!1);let{basename:i}=fN(am.useViewTransitionState),r=ah(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=So(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=So(n.nextLocation.pathname,i)||n.nextLocation.pathname;return sd(r.pathname,o)!=null||sd(r.pathname,s)!=null}function Mw(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Kg(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:Mw(e[n])&&Mw(t[n])&&Object.keys(e[n]).length>0&&Kg(t[n],e[n])})}const bS={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Ii(){const t=typeof document<"u"?document:{};return Kg(t,bS),t}const gN={document:bS,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function dn(){const t=typeof window<"u"?window:{};return Kg(t,gN),t}function yN(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function vN(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function lm(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function ld(){return Date.now()}function _N(t){const e=dn();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function wN(t,e){e===void 0&&(e="x");const n=dn();let i,r,s;const o=_N(t);return n.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(n.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Qc(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function EN(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function nn(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(i!=null&&!EN(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,o=r.length;s<o;s+=1){const a=r[s],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(Qc(t[a])&&Qc(i[a])?i[a].__swiper__?t[a]=i[a]:nn(t[a],i[a]):!Qc(t[a])&&Qc(i[a])?(t[a]={},i[a].__swiper__?t[a]=i[a]:nn(t[a],i[a])):t[a]=i[a])}}}return t}function Yc(t,e,n){t.style.setProperty(e,n)}function CS(t){let{swiper:e,targetPosition:n,side:i}=t;const r=dn(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const u=n>s?"next":"prev",d=(f,g)=>u==="next"&&f>=g||u==="prev"&&f<=g,h=()=>{a=new Date().getTime(),o===null&&(o=a);const f=Math.max(Math.min((a-o)/l,1),0),g=.5-Math.cos(f*Math.PI)/2;let _=s+g*(n-s);if(d(_,n)&&(_=n),e.wrapperEl.scrollTo({[i]:_}),d(_,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:_})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(h)};h()}function AS(t){return t.querySelector(".swiper-slide-transform")||t.shadowRoot&&t.shadowRoot.querySelector(".swiper-slide-transform")||t}function qn(t,e){e===void 0&&(e="");const n=[...t.children];return t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),e?n.filter(i=>i.matches(e)):n}function TN(t,e){const n=e.contains(t);return!n&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(t):n}function cd(t){try{console.warn(t);return}catch{}}function ud(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:yN(e)),n}function SN(t,e){const n=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function IN(t,e){const n=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&n.push(i):n.push(i),t=i}return n}function cr(t,e){return dn().getComputedStyle(t,null).getPropertyValue(e)}function Dw(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function bN(t,e){const n=[];let i=t.parentElement;for(;i;)n.push(i),i=i.parentElement;return n}function CN(t,e){function n(i){i.target===t&&(e.call(t,i),t.removeEventListener("transitionend",n))}e&&t.addEventListener("transitionend",n)}function Vw(t,e,n){const i=dn();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function di(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}let Of;function AN(){const t=dn(),e=Ii();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function kS(){return Of||(Of=AN()),Of}let Lf;function kN(t){let{userAgent:e}=t===void 0?{}:t;const n=kS(),i=dn(),r=i.navigator.platform,s=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=r==="Win32";let _=r==="MacIntel";const E=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&_&&n.touch&&E.indexOf(`${a}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),_=!1),u&&!g&&(o.os="android",o.android=!0),(d||f||h)&&(o.os="ios",o.ios=!0),o}function PS(t){return t===void 0&&(t={}),Lf||(Lf=kN(t)),Lf}let Mf;function PN(){const t=dn(),e=PS();let n=!1;function i(){const a=t.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){const a=String(t.navigator.userAgent);if(a.includes("Version/")){const[l,u]=a.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));n=l<16||l===16&&u<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),s=i(),o=s||r&&e.ios;return{isSafari:n||s,needPerspectiveFix:n,need3dFix:o,isWebView:r}}function xN(){return Mf||(Mf=PN()),Mf}function RN(t){let{swiper:e,on:n,emit:i}=t;const r=dn();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=r.requestAnimationFrame(()=>{const{width:f,height:g}=e;let _=f,E=g;h.forEach(A=>{let{contentBoxSize:v,contentRect:y,target:w}=A;w&&w!==e.el||(_=y?y.width:(v[0]||v).inlineSize,E=y?y.height:(v[0]||v).blockSize)}),(_!==f||E!==g)&&a()})}),s.observe(e.el))},u=()=>{o&&r.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",a),r.addEventListener("orientationchange",d)}),n("destroy",()=>{u(),r.removeEventListener("resize",a),r.removeEventListener("orientationchange",d)})}function NN(t){let{swiper:e,extendParams:n,on:i,emit:r}=t;const s=[],o=dn(),a=function(d,h){h===void 0&&(h={});const f=o.MutationObserver||o.WebkitMutationObserver,g=new f(_=>{if(e.__preventObserver__)return;if(_.length===1){r("observerUpdate",_[0]);return}const E=function(){r("observerUpdate",_[0])};o.requestAnimationFrame?o.requestAnimationFrame(E):o.setTimeout(E,0)});g.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(g)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=bN(e.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},u=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",u)}var ON={on(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=n?"unshift":"push";return t.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(t,e,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(t,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(i,o)}return r.__emitterProxy=e,i.on(t,r,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const i=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[i](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(i=>{typeof e>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[i].splice(s,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,i;for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],n=s.slice(1,s.length),i=t):(e=s[0].events,n=s[0].data,i=s[0].context||t),n.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(i,[l,...n])}),t.eventsListeners&&t.eventsListeners[l]&&t.eventsListeners[l].forEach(u=>{u.apply(i,n)})}),t}};function LN(){const t=this;let e,n;const i=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=i.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=i.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(cr(i,"padding-left")||0,10)-parseInt(cr(i,"padding-right")||0,10),n=n-parseInt(cr(i,"padding-top")||0,10)-parseInt(cr(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function MN(){const t=this;function e(C,N){return parseFloat(C.getPropertyValue(t.getDirectionLabel(N))||0)}const n=t.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:o,wrongRTL:a}=t,l=t.virtual&&n.virtual.enabled,u=l?t.virtual.slides.length:t.slides.length,d=qn(r,`.${t.params.slideClass}, swiper-slide`),h=l?t.virtual.slides.length:d.length;let f=[];const g=[],_=[];let E=n.slidesOffsetBefore;typeof E=="function"&&(E=n.slidesOffsetBefore.call(t));let A=n.slidesOffsetAfter;typeof A=="function"&&(A=n.slidesOffsetAfter.call(t));const v=t.snapGrid.length,y=t.slidesGrid.length;let w=n.spaceBetween,P=-E,O=0,D=0;if(typeof s>"u")return;typeof w=="string"&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*s:typeof w=="string"&&(w=parseFloat(w)),t.virtualSize=-w,d.forEach(C=>{o?C.style.marginLeft="":C.style.marginRight="",C.style.marginBottom="",C.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Yc(i,"--swiper-centered-offset-before",""),Yc(i,"--swiper-centered-offset-after",""));const k=n.grid&&n.grid.rows>1&&t.grid;k?t.grid.initSlides(d):t.grid&&t.grid.unsetSlides();let S;const b=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(C=>typeof n.breakpoints[C].slidesPerView<"u").length>0;for(let C=0;C<h;C+=1){S=0;let N;if(d[C]&&(N=d[C]),k&&t.grid.updateSlide(C,N,d),!(d[C]&&cr(N,"display")==="none")){if(n.slidesPerView==="auto"){b&&(d[C].style[t.getDirectionLabel("width")]="");const L=getComputedStyle(N),x=N.style.transform,z=N.style.webkitTransform;if(x&&(N.style.transform="none"),z&&(N.style.webkitTransform="none"),n.roundLengths)S=t.isHorizontal()?Vw(N,"width"):Vw(N,"height");else{const J=e(L,"width"),Pe=e(L,"padding-left"),tt=e(L,"padding-right"),U=e(L,"margin-left"),K=e(L,"margin-right"),Q=L.getPropertyValue("box-sizing");if(Q&&Q==="border-box")S=J+U+K;else{const{clientWidth:we,offsetWidth:ge}=N;S=J+Pe+tt+U+K+(ge-we)}}x&&(N.style.transform=x),z&&(N.style.webkitTransform=z),n.roundLengths&&(S=Math.floor(S))}else S=(s-(n.slidesPerView-1)*w)/n.slidesPerView,n.roundLengths&&(S=Math.floor(S)),d[C]&&(d[C].style[t.getDirectionLabel("width")]=`${S}px`);d[C]&&(d[C].swiperSlideSize=S),_.push(S),n.centeredSlides?(P=P+S/2+O/2+w,O===0&&C!==0&&(P=P-s/2-w),C===0&&(P=P-s/2-w),Math.abs(P)<1/1e3&&(P=0),n.roundLengths&&(P=Math.floor(P)),D%n.slidesPerGroup===0&&f.push(P),g.push(P)):(n.roundLengths&&(P=Math.floor(P)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&f.push(P),g.push(P),P=P+S+w),t.virtualSize+=S+w,O=S,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+A,o&&a&&(n.effect==="slide"||n.effect==="coverflow")&&(i.style.width=`${t.virtualSize+w}px`),n.setWrapperSize&&(i.style[t.getDirectionLabel("width")]=`${t.virtualSize+w}px`),k&&t.grid.updateWrapperSize(S,f),!n.centeredSlides){const C=[];for(let N=0;N<f.length;N+=1){let L=f[N];n.roundLengths&&(L=Math.floor(L)),f[N]<=t.virtualSize-s&&C.push(L)}f=C,Math.floor(t.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-s)}if(l&&n.loop){const C=_[0]+w;if(n.slidesPerGroup>1){const N=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),L=C*n.slidesPerGroup;for(let x=0;x<N;x+=1)f.push(f[f.length-1]+L)}for(let N=0;N<t.virtual.slidesBefore+t.virtual.slidesAfter;N+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+C),g.push(g[g.length-1]+C),t.virtualSize+=C}if(f.length===0&&(f=[0]),w!==0){const C=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");d.filter((N,L)=>!n.cssMode||n.loop?!0:L!==d.length-1).forEach(N=>{N.style[C]=`${w}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let C=0;_.forEach(L=>{C+=L+(w||0)}),C-=w;const N=C>s?C-s:0;f=f.map(L=>L<=0?-E:L>N?N+A:L)}if(n.centerInsufficientSlides){let C=0;_.forEach(L=>{C+=L+(w||0)}),C-=w;const N=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(C+N<s){const L=(s-C-N)/2;f.forEach((x,z)=>{f[z]=x-L}),g.forEach((x,z)=>{g[z]=x+L})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:g,slidesSizesGrid:_}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Yc(i,"--swiper-centered-offset-before",`${-f[0]}px`),Yc(i,"--swiper-centered-offset-after",`${t.size/2-_[_.length-1]/2}px`);const C=-t.snapGrid[0],N=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(L=>L+C),t.slidesGrid=t.slidesGrid.map(L=>L+N)}if(h!==u&&t.emit("slidesLengthChange"),f.length!==v&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),g.length!==y&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const C=`${n.containerModifierClass}backface-hidden`,N=t.el.classList.contains(C);h<=n.maxBackfaceHiddenSlides?N||t.el.classList.add(C):N&&t.el.classList.remove(C)}}function DN(t){const e=this,n=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!i)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;r=a>r?a:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function VN(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-n-t.cssOverflowAdjustment()}const Fw=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function FN(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;r&&(o=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=n.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){const u=i[l];let d=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(d-=i[0].swiperSlideOffset);const h=(o+(n.centeredSlides?e.minTranslate():0)-d)/(u.swiperSlideSize+a),f=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-d)/(u.swiperSlideSize+a),g=-(o-d),_=g+e.slidesSizesGrid[l],E=g>=0&&g<=e.size-e.slidesSizesGrid[l],A=g>=0&&g<e.size-1||_>1&&_<=e.size||g<=0&&_>=e.size;A&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l)),Fw(u,A,n.slideVisibleClass),Fw(u,E,n.slideFullyVisibleClass),u.progress=r?-h:h,u.originalProgress=r?-f:f}}function UN(t){const e=this;if(typeof t>"u"){const d=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*d||0}const n=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,u=o;if(i===0)r=0,s=!0,o=!0;else{r=(t-e.minTranslate())/i;const d=Math.abs(t-e.minTranslate())<1,h=Math.abs(t-e.maxTranslate())<1;s=d||r<=0,o=h||r>=1,d&&(r=0),h&&(r=1)}if(n.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],g=e.slidesGrid[h],_=e.slidesGrid[e.slidesGrid.length-1],E=Math.abs(t);E>=f?a=(E-f)/_:a=(E+_-g)/_,a>1&&(a-=1)}Object.assign(e,{progress:r,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(l&&!s||u&&!o)&&e.emit("fromEdge"),e.emit("progress",r)}const Df=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function jN(){const t=this,{slides:e,params:n,slidesEl:i,activeIndex:r}=t,s=t.virtual&&n.virtual.enabled,o=t.grid&&n.grid&&n.grid.rows>1,a=h=>qn(i,`.${n.slideClass}${h}, swiper-slide${h}`)[0];let l,u,d;if(s)if(n.loop){let h=r-t.virtual.slidesBefore;h<0&&(h=t.virtual.slides.length+h),h>=t.virtual.slides.length&&(h-=t.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${r}"]`);else o?(l=e.filter(h=>h.column===r)[0],d=e.filter(h=>h.column===r+1)[0],u=e.filter(h=>h.column===r-1)[0]):l=e[r];l&&(o||(d=IN(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d&&(d=e[0]),u=SN(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(h=>{Df(h,h===l,n.slideActiveClass),Df(h,h===d,n.slideNextClass),Df(h,h===u,n.slidePrevClass)}),t.emitSlidesClasses()}const _u=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,i=e.closest(n());if(i){let r=i.querySelector(`.${t.params.lazyPreloaderClass}`);!r&&t.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Vf=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},cm=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const i=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),r=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const o=r,a=[o-e];a.push(...Array.from({length:e}).map((l,u)=>o+i+u)),t.slides.forEach((l,u)=>{a.includes(l.column)&&Vf(t,u)});return}const s=r+i-1;if(t.params.rewind||t.params.loop)for(let o=r-e;o<=s+e;o+=1){const a=(o%n+n)%n;(a<r||a>s)&&Vf(t,a)}else for(let o=Math.max(r-e,0);o<=Math.min(s+e,n-1);o+=1)o!==r&&(o>s||o<r)&&Vf(t,o)};function zN(t){const{slidesGrid:e,params:n}=t,i=t.rtlTranslate?t.translate:-t.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function BN(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=t,u;const d=g=>{let _=g-e.virtual.slidesBefore;return _<0&&(_=e.virtual.slides.length+_),_>=e.virtual.slides.length&&(_-=e.virtual.slides.length),_};if(typeof l>"u"&&(l=zN(e)),i.indexOf(n)>=0)u=i.indexOf(n);else{const g=Math.min(r.slidesPerGroupSkip,l);u=g+Math.floor((l-g)/r.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),l===s&&!e.params.loop){u!==a&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&r.grid&&r.grid.rows>1;let f;if(e.virtual&&r.virtual.enabled&&r.loop)f=d(l);else if(h){const g=e.slides.filter(E=>E.column===l)[0];let _=parseInt(g.getAttribute("data-swiper-slide-index"),10);Number.isNaN(_)&&(_=Math.max(e.slides.indexOf(g),0)),f=Math.floor(_/r.grid.rows)}else if(e.slides[l]){const g=e.slides[l].getAttribute("data-swiper-slide-index");g?f=parseInt(g,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:u,previousRealIndex:o,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&cm(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function $N(t,e){const n=this,i=n.params;let r=t.closest(`.${i.slideClass}, swiper-slide`);!r&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(a=>{!r&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(r=a)});let s=!1,o;if(r){for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===r){s=!0,o=a;break}}if(r&&s)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}i.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var WN={updateSize:LN,updateSlides:MN,updateAutoHeight:DN,updateSlidesOffset:VN,updateSlidesProgress:FN,updateProgress:UN,updateSlidesClasses:jN,updateActiveIndex:BN,updateClickedSlide:$N};function HN(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let o=wN(s,t);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function qN(t,e){const n=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=n;let a=0,l=0;const u=0;n.isHorizontal()?a=i?-t:t:l=t,r.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l,r.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:r.virtualTranslate||(n.isHorizontal()?a-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${u}px)`);let d;const h=n.maxTranslate()-n.minTranslate();h===0?d=0:d=(t-n.minTranslate())/h,d!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function GN(){return-this.snapGrid[0]}function KN(){return-this.snapGrid[this.snapGrid.length-1]}function QN(t,e,n,i,r){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),i===void 0&&(i=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),u=s.maxTranslate();let d;if(i&&t>l?d=l:i&&t<u?d=u:d=t,s.updateProgress(d),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return CS({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var YN={getTranslate:HN,setTranslate:qN,minTranslate:GN,maxTranslate:KN,translateTo:QN};function XN(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function xS(t){let{swiper:e,runCallbacks:n,direction:i,step:r}=t;const{activeIndex:s,previousIndex:o}=e;let a=i;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${r}`),n&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),a==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function JN(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),xS({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function ZN(t,e){t===void 0&&(t=!0);const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),xS({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var e2={setTransition:XN,transitionStart:JN,transitionEnd:ZN};function t2(t,e,n,i,r){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:u,previousIndex:d,activeIndex:h,rtlTranslate:f,wrapperEl:g,enabled:_}=s;if(!_&&!i&&!r||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const E=Math.min(s.params.slidesPerGroupSkip,o);let A=E+Math.floor((o-E)/s.params.slidesPerGroup);A>=l.length&&(A=l.length-1);const v=-l[A];if(a.normalizeSlideIndex)for(let O=0;O<u.length;O+=1){const D=-Math.floor(v*100),k=Math.floor(u[O]*100),S=Math.floor(u[O+1]*100);typeof u[O+1]<"u"?D>=k&&D<S-(S-k)/2?o=O:D>=k&&D<S&&(o=O+1):D>=k&&(o=O)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(f?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate())||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(v);let y;o>h?y="next":o<h?y="prev":y="reset";const w=s.virtual&&s.params.virtual.enabled;if(!(w&&r)&&(f&&-v===s.translate||!f&&v===s.translate))return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(v),y!=="reset"&&(s.transitionStart(n,y),s.transitionEnd(n,y)),!1;if(a.cssMode){const O=s.isHorizontal(),D=f?v:-v;if(e===0)w&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),w&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{g[O?"scrollLeft":"scrollTop"]=D})):g[O?"scrollLeft":"scrollTop"]=D,w&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return CS({swiper:s,targetPosition:D,side:O?"left":"top"}),!0;g.scrollTo({[O?"left":"top"]:D,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(v),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(n,y),e===0?s.transitionEnd(n,y):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(D){!s||s.destroyed||D.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,y))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function n2(t,e,n,i){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=t;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let a;if(s){const f=o*r.params.grid.rows;a=r.slides.filter(g=>g.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=r.getSlideIndexByData(o);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:u}=r.params;let d=r.params.slidesPerView;d==="auto"?d=r.slidesPerViewDynamic():(d=Math.ceil(parseFloat(r.params.slidesPerView,10)),u&&d%2===0&&(d=d+1));let h=l-a<d;if(u&&(h=h||a<Math.ceil(d/2)),i&&u&&r.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=u?a<r.activeIndex?"prev":"next":a-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?r.realIndex:void 0})}if(s){const f=o*r.params.grid.rows;o=r.slides.filter(g=>g.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,n,i)}),r}function i2(t,e,n){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:a,u=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!u&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,t,e,n)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,t,e,n):i.slideTo(i.activeIndex+l,t,e,n)}function r2(t,e,n){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:u}=i;if(!l||i.destroyed)return i;typeof t>"u"&&(t=i.params.speed);const d=i.virtual&&r.virtual.enabled;if(r.loop){if(u&&!d&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const h=a?i.translate:-i.translate;function f(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const g=f(h),_=s.map(v=>f(v));let E=s[_.indexOf(g)-1];if(typeof E>"u"&&r.cssMode){let v;s.forEach((y,w)=>{g>=y&&(v=w)}),typeof v<"u"&&(E=s[v>0?v-1:v])}let A=0;if(typeof E<"u"&&(A=o.indexOf(E),A<0&&(A=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(A=A-i.slidesPerViewDynamic("previous",!0)+1,A=Math.max(A,0))),r.rewind&&i.isBeginning){const v=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(v,t,e,n)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(A,t,e,n)}),!0;return i.slideTo(A,t,e,n)}function s2(t,e,n){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof t>"u"&&(t=i.params.speed),i.slideTo(i.activeIndex,t,e,n)}function o2(t,e,n,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[a]){const u=r.snapGrid[a],d=r.snapGrid[a+1];l-u>(d-u)*i&&(s+=r.params.slidesPerGroup)}else{const u=r.snapGrid[a-1],d=r.snapGrid[a];l-u<=(d-u)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,t,e,n)}function a2(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,i=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let r=t.clickedIndex,s;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<t.loopedSlides-i/2||r>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),r=t.getSlideIndex(qn(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),lm(()=>{t.slideTo(r)})):t.slideTo(r):r>t.slides.length-i?(t.loopFix(),r=t.getSlideIndex(qn(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),lm(()=>{t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}var l2={slideTo:t2,slideToLoop:n2,slideNext:i2,slidePrev:r2,slideReset:s2,slideToClosest:o2,slideToClickedSlide:a2};function c2(t){const e=this,{params:n,slidesEl:i}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{qn(i,`.${n.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&n.grid&&n.grid.rows>1,o=n.slidesPerGroup*(s?n.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%n.grid.rows!==0,u=d=>{for(let h=0;h<d;h+=1){const f=e.isElement?ud("swiper-slide",[n.slideBlankClass]):ud("div",[n.slideClass,n.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(n.loopAddBlankSlides){const d=o-e.slides.length%o;u(d),e.recalcSlides(),e.updateSlides()}else cd("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(n.loopAddBlankSlides){const d=n.grid.rows-e.slides.length%n.grid.rows;u(d),e.recalcSlides(),e.updateSlides()}else cd("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function u2(t){let{slideRealIndex:e,slideTo:n=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:o,byMousewheel:a}=t===void 0?{}:t;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:d,allowSlideNext:h,slidesEl:f,params:g}=l,{centeredSlides:_}=g;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&g.virtual.enabled){n&&(!g.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):g.centeredSlides&&l.snapIndex<g.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let E=g.slidesPerView;E==="auto"?E=l.slidesPerViewDynamic():(E=Math.ceil(parseFloat(g.slidesPerView,10)),_&&E%2===0&&(E=E+1));const A=g.slidesPerGroupAuto?E:g.slidesPerGroup;let v=A;v%A!==0&&(v+=A-v%A),v+=g.loopAdditionalSlides,l.loopedSlides=v;const y=l.grid&&g.grid&&g.grid.rows>1;u.length<E+v?cd("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):y&&g.grid.fill==="row"&&cd("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],P=[];let O=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(u.filter(x=>x.classList.contains(g.slideActiveClass))[0]):O=s;const D=i==="next"||!i,k=i==="prev"||!i;let S=0,b=0;const C=y?Math.ceil(u.length/g.grid.rows):u.length,L=(y?u[s].column:s)+(_&&typeof r>"u"?-E/2+.5:0);if(L<v){S=Math.max(v-L,A);for(let x=0;x<v-L;x+=1){const z=x-Math.floor(x/C)*C;if(y){const J=C-z-1;for(let Pe=u.length-1;Pe>=0;Pe-=1)u[Pe].column===J&&w.push(Pe)}else w.push(C-z-1)}}else if(L+E>C-v){b=Math.max(L-(C-v*2),A);for(let x=0;x<b;x+=1){const z=x-Math.floor(x/C)*C;y?u.forEach((J,Pe)=>{J.column===z&&P.push(Pe)}):P.push(z)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),k&&w.forEach(x=>{u[x].swiperLoopMoveDOM=!0,f.prepend(u[x]),u[x].swiperLoopMoveDOM=!1}),D&&P.forEach(x=>{u[x].swiperLoopMoveDOM=!0,f.append(u[x]),u[x].swiperLoopMoveDOM=!1}),l.recalcSlides(),g.slidesPerView==="auto"?l.updateSlides():y&&(w.length>0&&k||P.length>0&&D)&&l.slides.forEach((x,z)=>{l.grid.updateSlide(z,x,l.slides)}),g.watchSlidesProgress&&l.updateSlidesOffset(),n){if(w.length>0&&k){if(typeof e>"u"){const x=l.slidesGrid[O],J=l.slidesGrid[O+S]-x;a?l.setTranslate(l.translate-J):(l.slideTo(O+Math.ceil(S),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-J,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-J))}else if(r){const x=y?w.length/g.grid.rows:w.length;l.slideTo(l.activeIndex+x,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(P.length>0&&D)if(typeof e>"u"){const x=l.slidesGrid[O],J=l.slidesGrid[O-b]-x;a?l.setTranslate(l.translate-J):(l.slideTo(O-b,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-J,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-J))}else{const x=y?P.length/g.grid.rows:P.length;l.slideTo(l.activeIndex-x,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){const x={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(z=>{!z.destroyed&&z.params.loop&&z.loopFix({...x,slideTo:z.params.slidesPerView===g.slidesPerView?n:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...x,slideTo:l.controller.control.params.slidesPerView===g.slidesPerView?n:!1})}l.emit("loopFix")}function d2(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),t.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{n.append(r)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var h2={loopCreate:c2,loopFix:u2,loopDestroy:d2};function f2(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function p2(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var m2={setGrabCursor:f2,unsetGrabCursor:p2};function g2(t,e){e===void 0&&(e=this);function n(i){if(!i||i===Ii()||i===dn())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(t);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(e)}function Uw(t,e,n){const i=dn(),{params:r}=t,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(n<=o||n>=i.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function y2(t){const e=this,n=Ii();let i=t;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){Uw(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!TN(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;u&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(f?g2(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const g=o.currentX,_=o.currentY;if(!Uw(e,i,g))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=g,o.startY=_,r.touchStartTime=ld(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let E=!0;l.matches(r.focusableElements)&&(E=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&n.activeElement.blur();const A=E&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||A)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function v2(t){const e=Ii(),n=this,i=n.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:a}=n;if(!a||!r.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].filter(D=>D.identifier===i.touchId)[0],!u||u.identifier!==i.touchId)return}else u=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l);return}const d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!n.allowTouchMove){l.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),i.touchStartTime=ld());return}if(r.touchReleaseOnEdges&&!r.loop){if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}i.allowTouchCallbacks&&n.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,g=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+g**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let D;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:f*f+g*g>=25&&(D=Math.atan2(Math.abs(g),Math.abs(f))*180/Math.PI,i.isScrolling=n.isHorizontal()?D>r.touchAngle:90-D>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let _=n.isHorizontal()?f:g,E=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(_=Math.abs(_)*(o?1:-1),E=Math.abs(E)*(o?1:-1)),s.diff=_,_*=r.touchRatio,o&&(_=-_,E=-E);const A=n.touchesDirection;n.swipeDirection=_>0?"prev":"next",n.touchesDirection=E>0?"prev":"next";const v=n.params.loop&&!r.cssMode,y=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!i.isMoved){if(v&&y&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(D)}i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let w;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&A!==n.touchesDirection&&v&&y&&Math.abs(_)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}n.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=_+i.startTranslate;let P=!0,O=r.resistanceRatio;if(r.touchReleaseOnEdges&&(O=0),_>0?(v&&y&&!w&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(P=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+_)**O))):_<0&&(v&&y&&!w&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(P=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-_)**O))),P&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(_)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function _2(t){const e=this,n=e.touchEventsData;let i=t;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].filter(O=>O.identifier===n.touchId)[0],!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:u,enabled:d}=e;if(!d||!o.simulateTouch&&i.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=ld(),f=h-n.touchStartTime;if(e.allowClick){const O=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(O&&O[0]||i.target,O),e.emit("tap click",i),f<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(n.lastClickTime=ld(),lm(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||a.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let g;if(o.followFinger?g=l?e.translate:-e.translate:g=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:g});return}const _=g>=-e.maxTranslate()&&!e.params.loop;let E=0,A=e.slidesSizesGrid[0];for(let O=0;O<u.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const D=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[O+D]<"u"?(_||g>=u[O]&&g<u[O+D])&&(E=O,A=u[O+D]-u[O]):(_||g>=u[O])&&(E=O,A=u[u.length-1]-u[u.length-2])}let v=null,y=null;o.rewind&&(e.isBeginning?y=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(v=0));const w=(g-u[E])/A,P=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(w>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?v:E+P):e.slideTo(E)),e.swipeDirection==="prev"&&(w>1-o.longSwipesRatio?e.slideTo(E+P):y!==null&&w<0&&Math.abs(w)>o.longSwipesRatio?e.slideTo(y):e.slideTo(E))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(E+P):e.slideTo(E):(e.swipeDirection==="next"&&e.slideTo(v!==null?v:E+P),e.swipeDirection==="prev"&&e.slideTo(y!==null?y:E))}}function jw(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=r,t.allowSlideNext=i,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function w2(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function E2(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:i}=t;if(!i)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let r;const s=t.maxTranslate()-t.minTranslate();s===0?r=0:r=(t.translate-t.minTranslate())/s,r!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function T2(t){const e=this;_u(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function S2(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const RS=(t,e)=>{const n=Ii(),{params:i,el:r,wrapperEl:s,device:o}=t,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;!r||typeof r=="string"||(n[l]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:a}),r[l]("touchstart",t.onTouchStart,{passive:!1}),r[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("touchmove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("touchend",t.onTouchEnd,{passive:!0}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("touchcancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),n[l]("contextmenu",t.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",t.onClick,!0),i.cssMode&&s[l]("scroll",t.onScroll),i.updateOnWindowResize?t[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",jw,!0):t[u]("observerUpdate",jw,!0),r[l]("load",t.onLoad,{capture:!0}))};function I2(){const t=this,{params:e}=t;t.onTouchStart=y2.bind(t),t.onTouchMove=v2.bind(t),t.onTouchEnd=_2.bind(t),t.onDocumentTouchStart=S2.bind(t),e.cssMode&&(t.onScroll=E2.bind(t)),t.onClick=w2.bind(t),t.onLoad=T2.bind(t),RS(t,"on")}function b2(){RS(this,"off")}var C2={attachEvents:I2,detachEvents:b2};const zw=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function A2(){const t=this,{realIndex:e,initialized:n,params:i,el:r}=t,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||t.originalParams,u=zw(t,i),d=zw(t,l),h=t.params.grabCursor,f=l.grabCursor,g=i.enabled;u&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),h&&!f?t.unsetGrabCursor():!h&&f&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(w=>{if(typeof l[w]>"u")return;const P=i[w]&&i[w].enabled,O=l[w]&&l[w].enabled;P&&!O&&t[w].disable(),!P&&O&&t[w].enable()});const _=l.direction&&l.direction!==i.direction,E=i.loop&&(l.slidesPerView!==i.slidesPerView||_),A=i.loop;_&&n&&t.changeDirection(),nn(t.params,l);const v=t.params.enabled,y=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),g&&!v?t.disable():!g&&v&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),n&&(E?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!A&&y?(t.loopCreate(e),t.updateSlides()):A&&!y&&t.loopDestroy()),t.emit("breakpoint",l)}function k2(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let i=!1;const r=dn(),s=e==="window"?r.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:u}=o[a];e==="window"?r.matchMedia(`(min-width: ${u}px)`).matches&&(i=l):u<=n.clientWidth&&(i=l)}return i||"max"}var P2={setBreakpoint:A2,getBreakpoint:k2};function x2(t,e){const n=[];return t.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(e+r)}):typeof i=="string"&&n.push(e+i)}),n}function R2(){const t=this,{classNames:e,params:n,rtl:i,el:r,device:s}=t,o=x2(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),r.classList.add(...e),t.emitContainerClasses()}function N2(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var O2={addClasses:R2,removeClasses:N2};function L2(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:i}=n;if(i){const r=t.slides.length-1,s=t.slidesGrid[r]+t.slidesSizesGrid[r]+i*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var M2={checkOverflow:L2},um={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function D2(t,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){nn(e,i);return}if(t[r]===!0&&(t[r]={enabled:!0}),r==="navigation"&&t[r]&&t[r].enabled&&!t[r].prevEl&&!t[r].nextEl&&(t[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&t[r]&&t[r].enabled&&!t[r].el&&(t[r].auto=!0),!(r in t&&"enabled"in s)){nn(e,i);return}typeof t[r]=="object"&&!("enabled"in t[r])&&(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),nn(e,i)}}const Ff={eventsEmitter:ON,update:WN,translate:YN,transition:e2,slide:l2,loop:h2,grabCursor:m2,events:C2,breakpoints:P2,checkOverflow:M2,classes:O2},Uf={};let Qg=class hi{constructor(){let e,n;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?n=r[0]:[e,n]=r,n||(n={}),n=nn({},n),e&&!n.el&&(n.el=e);const o=Ii();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const d=[];return o.querySelectorAll(n.el).forEach(h=>{const f=nn({},n,{el:h});d.push(new hi(f))}),d}const a=this;a.__swiper__=!0,a.support=kS(),a.device=PS({userAgent:n.userAgent}),a.browser=xN(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],n.modules&&Array.isArray(n.modules)&&a.modules.push(...n.modules);const l={};a.modules.forEach(d=>{d({params:n,swiper:a,extendParams:D2(n,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const u=nn({},um,l);return a.params=nn({},u,Uf,n),a.originalParams=nn({},a.params),a.passedParams=nn({},n),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:i}=this,r=qn(n,`.${i.slideClass}, swiper-slide`),s=Dw(r[0]);return Dw(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:i}=e;e.slides=qn(n,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*e+r;i.translateTo(o,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);n.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:u}=i;let d=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let h=s[u]?Math.ceil(s[u].swiperSlideSize):0,f;for(let g=u+1;g<s.length;g+=1)s[g]&&!f&&(h+=Math.ceil(s[g].swiperSlideSize),d+=1,h>l&&(f=!0));for(let g=u-1;g>=0;g-=1)s[g]&&!f&&(h+=s[g].swiperSlideSize,d+=1,h>l&&(f=!0))}else if(e==="current")for(let h=u+1;h<s.length;h+=1)(n?o[h]+a[h]-o[u]<l:o[h]-o[u]<l)&&(d+=1);else for(let h=u-1;h>=0;h-=1)o[u]-o[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&_u(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let i=e||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):qn(i,r())[0];return!o&&n.params.createElements&&(o=ud("div",n.params.wrapperClass),i.append(o),qn(i,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:i,wrapperEl:o,slidesEl:n.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:n.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||cr(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||cr(i,"direction")==="rtl"),wrongRTL:cr(o,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?_u(n,s):s.addEventListener("load",o=>{_u(n,o.target)})}),cm(n),n.initialized=!0,cm(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const i=this,{params:r,el:s,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),vN(i)),i.destroyed=!0),null}static extendDefaults(e){nn(Uf,e)}static get extendedDefaults(){return Uf}static get defaults(){return um}static installModule(e){hi.prototype.__modules__||(hi.prototype.__modules__=[]);const n=hi.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>hi.installModule(n)),hi):(hi.installModule(e),hi)}};Object.keys(Ff).forEach(t=>{Object.keys(Ff[t]).forEach(e=>{Qg.prototype[e]=Ff[t][e]})});Qg.use([RN,NN]);const NS=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function ds(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function ao(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof t[i]>"u"?t[i]=e[i]:ds(e[i])&&ds(t[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?t[i]=e[i]:ao(t[i],e[i]):t[i]=e[i]})}function OS(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function LS(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function MS(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function DS(t){t===void 0&&(t="");const e=t.split(" ").map(i=>i.trim()).filter(i=>!!i),n=[];return e.forEach(i=>{n.indexOf(i)<0&&n.push(i)}),n.join(" ")}function V2(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function F2(t){let{swiper:e,slides:n,passedParams:i,changedParams:r,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=t;const u=r.filter(b=>b!=="children"&&b!=="direction"&&b!=="wrapperClass"),{params:d,pagination:h,navigation:f,scrollbar:g,virtual:_,thumbs:E}=e;let A,v,y,w,P,O,D,k;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(A=!0),r.includes("controller")&&i.controller&&i.controller.control&&d.controller&&!d.controller.control&&(v=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(y=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&g&&!g.el&&(w=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||o)&&(i.navigation.nextEl||s)&&(d.navigation||d.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(P=!0);const S=b=>{e[b]&&(e[b].destroy(),b==="navigation"?(e.isElement&&(e[b].prevEl.remove(),e[b].nextEl.remove()),d[b].prevEl=void 0,d[b].nextEl=void 0,e[b].prevEl=void 0,e[b].nextEl=void 0):(e.isElement&&e[b].el.remove(),d[b].el=void 0,e[b].el=void 0))};r.includes("loop")&&e.isElement&&(d.loop&&!i.loop?O=!0:!d.loop&&i.loop?D=!0:k=!0),u.forEach(b=>{if(ds(d[b])&&ds(i[b]))Object.assign(d[b],i[b]),(b==="navigation"||b==="pagination"||b==="scrollbar")&&"enabled"in i[b]&&!i[b].enabled&&S(b);else{const C=i[b];(C===!0||C===!1)&&(b==="navigation"||b==="pagination"||b==="scrollbar")?C===!1&&S(b):d[b]=i[b]}}),u.includes("controller")&&!v&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),r.includes("children")&&n&&_&&d.virtual.enabled?(_.slides=n,_.update(!0)):r.includes("virtual")&&_&&d.virtual.enabled&&(n&&(_.slides=n),_.update(!0)),r.includes("children")&&n&&d.loop&&(k=!0),A&&E.init()&&E.update(!0),v&&(e.controller.control=d.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),w&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),g.init(),g.updateSize(),g.setTranslate()),P&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),f.init(),f.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(O||k)&&e.loopDestroy(),(D||k)&&e.loopCreate(),e.update()}function U2(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},i={},r={};ao(n,um),n._emitClasses=!0,n.init=!1;const s={},o=NS.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?ds(t[l])?(n[l]={},r[l]={},ao(n[l],t[l]),ao(r[l],t[l])):(n[l]=t[l],r[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:r,rest:s,events:i}}function j2(t,e){let{el:n,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:o,swiper:a}=t;OS(e)&&i&&r&&(a.params.navigation.nextEl=i,a.originalParams.navigation.nextEl=i,a.params.navigation.prevEl=r,a.originalParams.navigation.prevEl=r),LS(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),MS(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(n)}function z2(t,e,n,i,r){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&i){const l=i.map(r),u=n.map(r);l.join("")!==u.join("")&&o("children"),i.length!==n.length&&o("children")}return NS.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(ds(t[l])&&ds(e[l])){const u=Object.keys(t[l]),d=Object.keys(e[l]);u.length!==d.length?o(l):(u.forEach(h=>{t[l][h]!==e[l][h]&&o(l)}),d.forEach(h=>{t[l][h]!==e[l][h]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}const B2=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dd.apply(this,arguments)}function VS(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function FS(t){const e=[];return Qe.Children.toArray(t).forEach(n=>{VS(n)?e.push(n):n.props&&n.props.children&&FS(n.props.children).forEach(i=>e.push(i))}),e}function $2(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Qe.Children.toArray(t).forEach(i=>{if(VS(i))e.push(i);else if(i.props&&i.props.slot&&n[i.props.slot])n[i.props.slot].push(i);else if(i.props&&i.props.children){const r=FS(i.props.children);r.length>0?r.forEach(s=>e.push(s)):n["container-end"].push(i)}else n["container-end"].push(i)}),{slides:e,slots:n}}function W2(t,e,n){if(!n)return null;const i=d=>{let h=d;return d<0?h=e.length+d:h>=e.length&&(h=h-e.length),h},r=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,u=[];for(let d=a;d<l;d+=1)d>=s&&d<=o&&u.push(e[i(d)]);return u.map((d,h)=>Qe.cloneElement(d,{swiper:t,style:r,key:d.props.virtualIndex||d.key||`slide-${h}`}))}function Ga(t,e){return typeof window>"u"?M.useEffect(t,e):M.useLayoutEffect(t,e)}const Bw=M.createContext(null),H2=M.createContext(null),US=M.forwardRef(function(t,e){let{className:n,tag:i="div",wrapperTag:r="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[u,d]=M.useState("swiper"),[h,f]=M.useState(null),[g,_]=M.useState(!1),E=M.useRef(!1),A=M.useRef(null),v=M.useRef(null),y=M.useRef(null),w=M.useRef(null),P=M.useRef(null),O=M.useRef(null),D=M.useRef(null),k=M.useRef(null),{params:S,passedParams:b,rest:C,events:N}=U2(a),{slides:L,slots:x}=$2(s),z=()=>{_(!g)};Object.assign(S.on,{_containerClasses(K,Q){d(Q)}});const J=()=>{Object.assign(S.on,N),l=!0;const K={...S};if(delete K.wrapperClass,v.current=new Qg(K),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=L;const Q={cache:!1,slides:L,renderExternal:f,renderExternalUpdate:!1};ao(v.current.params.virtual,Q),ao(v.current.originalParams.virtual,Q)}};A.current||J(),v.current&&v.current.on("_beforeBreakpoint",z);const Pe=()=>{l||!N||!v.current||Object.keys(N).forEach(K=>{v.current.on(K,N[K])})},tt=()=>{!N||!v.current||Object.keys(N).forEach(K=>{v.current.off(K,N[K])})};M.useEffect(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",z)}),M.useEffect(()=>{!E.current&&v.current&&(v.current.emitSlidesClasses(),E.current=!0)}),Ga(()=>{if(e&&(e.current=A.current),!!A.current)return v.current.destroyed&&J(),j2({el:A.current,nextEl:P.current,prevEl:O.current,paginationEl:D.current,scrollbarEl:k.current,swiper:v.current},S),o&&!v.current.destroyed&&o(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),Ga(()=>{Pe();const K=z2(b,y.current,L,w.current,Q=>Q.key);return y.current=b,w.current=L,K.length&&v.current&&!v.current.destroyed&&F2({swiper:v.current,slides:L,passedParams:b,changedParams:K,nextEl:P.current,prevEl:O.current,scrollbarEl:k.current,paginationEl:D.current}),()=>{tt()}}),Ga(()=>{B2(v.current)},[h]);function U(){return S.virtual?W2(v.current,L,h):L.map((K,Q)=>Qe.cloneElement(K,{swiper:v.current,swiperSlideIndex:Q}))}return Qe.createElement(i,dd({ref:A,className:DS(`${u}${n?` ${n}`:""}`)},C),Qe.createElement(H2.Provider,{value:v.current},x["container-start"],Qe.createElement(r,{className:V2(S.wrapperClass)},x["wrapper-start"],U(),x["wrapper-end"]),OS(S)&&Qe.createElement(Qe.Fragment,null,Qe.createElement("div",{ref:O,className:"swiper-button-prev"}),Qe.createElement("div",{ref:P,className:"swiper-button-next"})),MS(S)&&Qe.createElement("div",{ref:k,className:"swiper-scrollbar"}),LS(S)&&Qe.createElement("div",{ref:D,className:"swiper-pagination"}),x["container-end"]))});US.displayName="Swiper";const jS=M.forwardRef(function(t,e){let{tag:n="div",children:i,className:r="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:u,...d}=t===void 0?{}:t;const h=M.useRef(null),[f,g]=M.useState("swiper-slide"),[_,E]=M.useState(!1);function A(P,O,D){O===h.current&&g(D)}Ga(()=>{if(typeof u<"u"&&(h.current.swiperSlideIndex=u),e&&(e.current=h.current),!(!h.current||!s)){if(s.destroyed){f!=="swiper-slide"&&g("swiper-slide");return}return s.on("_slideClass",A),()=>{s&&s.off("_slideClass",A)}}}),Ga(()=>{s&&h.current&&!s.destroyed&&g(s.getSlideClasses(h.current))},[s]);const v={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},y=()=>typeof i=="function"?i(v):i,w=()=>{E(!0)};return Qe.createElement(n,dd({ref:h,className:DS(`${f}${r?` ${r}`:""}`),"data-swiper-slide-index":l,onLoad:w},d),o&&Qe.createElement(Bw.Provider,{value:v},Qe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},y(),a&&!_&&Qe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Qe.createElement(Bw.Provider,{value:v},y(),a&&!_&&Qe.createElement("div",{className:"swiper-lazy-preloader"})))});jS.displayName="SwiperSlide";function q2(t,e,n,i){return t.params.createElements&&Object.keys(i).forEach(r=>{if(!n[r]&&n.auto===!0){let s=qn(t.el,`.${i[r]}`)[0];s||(s=ud("div",i[r]),s.className=i[r],t.el.append(s)),n[r]=s,e[r]=s}}),n}function G2(t){let{swiper:e,extendParams:n,on:i,emit:r}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(_){let E;return _&&typeof _=="string"&&e.isElement&&(E=e.el.querySelector(_),E)?E:(_&&(typeof _=="string"&&(E=[...document.querySelectorAll(_)]),e.params.uniqueNavElements&&typeof _=="string"&&E&&E.length>1&&e.el.querySelectorAll(_).length===1?E=e.el.querySelector(_):E&&E.length===1&&(E=E[0])),_&&!E?_:E)}function o(_,E){const A=e.params.navigation;_=di(_),_.forEach(v=>{v&&(v.classList[E?"add":"remove"](...A.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=E),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](A.lockClass))})}function a(){const{nextEl:_,prevEl:E}=e.navigation;if(e.params.loop){o(E,!1),o(_,!1);return}o(E,e.isBeginning&&!e.params.rewind),o(_,e.isEnd&&!e.params.rewind)}function l(_){_.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function u(_){_.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const _=e.params.navigation;if(e.params.navigation=q2(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(_.nextEl||_.prevEl))return;let E=s(_.nextEl),A=s(_.prevEl);Object.assign(e.navigation,{nextEl:E,prevEl:A}),E=di(E),A=di(A);const v=(y,w)=>{y&&y.addEventListener("click",w==="next"?u:l),!e.enabled&&y&&y.classList.add(..._.lockClass.split(" "))};E.forEach(y=>v(y,"next")),A.forEach(y=>v(y,"prev"))}function h(){let{nextEl:_,prevEl:E}=e.navigation;_=di(_),E=di(E);const A=(v,y)=>{v.removeEventListener("click",y==="next"?u:l),v.classList.remove(...e.params.navigation.disabledClass.split(" "))};_.forEach(v=>A(v,"next")),E.forEach(v=>A(v,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?g():(d(),a())}),i("toEdge fromEdge lock unlock",()=>{a()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:_,prevEl:E}=e.navigation;if(_=di(_),E=di(E),e.enabled){a();return}[..._,...E].filter(A=>!!A).forEach(A=>A.classList.add(e.params.navigation.lockClass))}),i("click",(_,E)=>{let{nextEl:A,prevEl:v}=e.navigation;A=di(A),v=di(v);const y=E.target;let w=v.includes(y)||A.includes(y);if(e.isElement&&!w){const P=E.path||E.composedPath&&E.composedPath();P&&(w=P.find(O=>A.includes(O)||v.includes(O)))}if(e.params.navigation.hideOnClick&&!w){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let P;A.length?P=A[0].classList.contains(e.params.navigation.hiddenClass):v.length&&(P=v[0].classList.contains(e.params.navigation.hiddenClass)),r(P===!0?"navigationShow":"navigationHide"),[...A,...v].filter(O=>!!O).forEach(O=>O.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},g=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:g,update:a,init:d,destroy:h})}function K2(t){let{swiper:e,extendParams:n,on:i,emit:r,params:s}=t;e.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=s&&s.autoplay?s.autoplay.delay:3e3,u=s&&s.autoplay?s.autoplay.delay:3e3,d,h=new Date().getTime(),f,g,_,E,A,v,y;function w(U){!e||e.destroyed||!e.wrapperEl||U.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",w),!(y||U.detail&&U.detail.bySwiperTouchMove)&&C())}const P=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(u=d,f=!1);const U=e.autoplay.paused?d:h+u-new Date().getTime();e.autoplay.timeLeft=U,r("autoplayTimeLeft",U,U/l),a=requestAnimationFrame(()=>{P()})},O=()=>{let U;return e.virtual&&e.params.virtual.enabled?U=e.slides.filter(Q=>Q.classList.contains("swiper-slide-active"))[0]:U=e.slides[e.activeIndex],U?parseInt(U.getAttribute("data-swiper-autoplay"),10):void 0},D=U=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),P();let K=typeof U>"u"?e.params.autoplay.delay:U;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const Q=O();!Number.isNaN(Q)&&Q>0&&typeof U>"u"&&(K=Q,l=Q,u=Q),d=K;const we=e.params.speed,ge=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(we,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,we,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(we,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,we,!0,!0),r("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{D()})))};return K>0?(clearTimeout(o),o=setTimeout(()=>{ge()},K)):requestAnimationFrame(()=>{ge()}),K},k=()=>{h=new Date().getTime(),e.autoplay.running=!0,D(),r("autoplayStart")},S=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),r("autoplayStop")},b=(U,K)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),U||(v=!0);const Q=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",w):C()};if(e.autoplay.paused=!0,K){A&&(d=e.params.autoplay.delay),A=!1,Q();return}d=(d||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&d<0&&!e.params.loop)&&(d<0&&(d=0),Q())},C=()=>{e.isEnd&&d<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),v?(v=!1,D(d)):D(),e.autoplay.paused=!1,r("autoplayResume"))},N=()=>{if(e.destroyed||!e.autoplay.running)return;const U=Ii();U.visibilityState==="hidden"&&(v=!0,b(!0)),U.visibilityState==="visible"&&C()},L=U=>{U.pointerType==="mouse"&&(v=!0,y=!0,!(e.animating||e.autoplay.paused)&&b(!0))},x=U=>{U.pointerType==="mouse"&&(y=!1,e.autoplay.paused&&C())},z=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",L),e.el.addEventListener("pointerleave",x))},J=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",L),e.el.removeEventListener("pointerleave",x))},Pe=()=>{Ii().addEventListener("visibilitychange",N)},tt=()=>{Ii().removeEventListener("visibilitychange",N)};i("init",()=>{e.params.autoplay.enabled&&(z(),Pe(),k())}),i("destroy",()=>{J(),tt(),e.autoplay.running&&S()}),i("_freeModeStaticRelease",()=>{(_||v)&&C()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?S():b(!0,!0)}),i("beforeTransitionStart",(U,K,Q)=>{e.destroyed||!e.autoplay.running||(Q||!e.params.autoplay.disableOnInteraction?b(!0,!0):S())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){S();return}g=!0,_=!1,v=!1,E=setTimeout(()=>{v=!0,_=!0,b(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!g)){if(clearTimeout(E),clearTimeout(o),e.params.autoplay.disableOnInteraction){_=!1,g=!1;return}_&&e.params.cssMode&&C(),_=!1,g=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(A=!0)}),Object.assign(e.autoplay,{start:k,stop:S,pause:b,resume:C})}function Q2(t){const{effect:e,swiper:n,on:i,setTranslate:r,setTransition:s,overwriteParams:o,perspective:a,recreateShadows:l,getEffectParams:u}=t;i("beforeInit",()=>{if(n.params.effect!==e)return;n.classNames.push(`${n.params.containerModifierClass}${e}`),a&&a()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const h=o?o():{};Object.assign(n.params,h),Object.assign(n.originalParams,h)}),i("setTranslate",()=>{n.params.effect===e&&r()}),i("setTransition",(h,f)=>{n.params.effect===e&&s(f)}),i("transitionEnd",()=>{if(n.params.effect===e&&l){if(!u||!u().slideShadows)return;n.slides.forEach(h=>{h.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(f=>f.remove())}),l()}});let d;i("virtualUpdate",()=>{n.params.effect===e&&(n.slides.length||(d=!0),requestAnimationFrame(()=>{d&&n.slides&&n.slides.length&&(r(),d=!1)}))})}function Y2(t,e){const n=AS(e);return n!==e&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function X2(t){let{swiper:e,duration:n,transformElements:i,allSlides:r}=t;const{activeIndex:s}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(u=>u.shadowRoot&&u.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&n!==0){let a=!1,l;r?l=i:l=i.filter(u=>{const d=u.classList.contains("swiper-slide-transform")?o(u):u;return e.getSlideIndex(d)===s}),l.forEach(u=>{CN(u,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;const d=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(d)})})}}function J2(t){let{swiper:e,extendParams:n,on:i}=t;n({fadeEffect:{crossFade:!1}}),Q2({effect:"fade",swiper:e,on:i,setTranslate:()=>{const{slides:o}=e,a=e.params.fadeEffect;for(let l=0;l<o.length;l+=1){const u=e.slides[l];let h=-u.swiperSlideOffset;e.params.virtualTranslate||(h-=e.translate);let f=0;e.isHorizontal()||(f=h,h=0);const g=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(u.progress),0):1+Math.min(Math.max(u.progress,-1),0),_=Y2(a,u);_.style.opacity=g,_.style.transform=`translate3d(${h}px, ${f}px, 0px)`}},setTransition:o=>{const a=e.slides.map(l=>AS(l));a.forEach(l=>{l.style.transitionDuration=`${o}ms`}),X2({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function Z2({item:t,Imdb:e}){const{fav:n,watchList:i,handleFav:r,handleWatchList:s}=In(),[o,a]=M.useState(null),[l,u]=M.useState(null),[d,h]=M.useState(null),[f,g]=M.useState([]);return M.useEffect(()=>{g(t),a(n),u(i)},[n,i,t,e,d]),M.useEffect(()=>{h(()=>e.filter(E=>E.imdbID==f.imdb_id)[0]),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(E=>new window.bootstrap.Tooltip(E))},[d,e]),T.jsx("div",{style:{"--bg":`url(${f["banner-img"]})`},className:"w-100 eachSlide h-100 row align-items-end m-0 p-md-5 p-3 pb-5",children:T.jsxs("div",{className:"col-12 col-lg-8 col-xl-6 p-md-5 d-flex flex-column gap-3",children:[T.jsx("h4",{className:"theme-clr",children:f.type}),d!=null&&T.jsx("h6",{className:"d-flex gap-3 genre",children:d.Genre.split(", ").map((_,E)=>T.jsx("span",{role:"button",children:_},E))}),T.jsx("h1",{className:"display-4 fw-bold text-balance",children:f.title}),d!=null&&T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"text-balance clamp",children:d.Plot}),T.jsxs("div",{className:"info d-flex gap-1 align-items-center",children:[T.jsx("h5",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Released "+d.Released,className:"m-0",children:d.Year}),T.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:T.jsxs("g",{fill:"currentColor",children:[T.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),T.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),T.jsx("h5",{className:"m-0",children:d.Rated}),T.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:T.jsxs("g",{fill:"currentColor",children:[T.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),T.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),T.jsx("h5",{className:"m-0",children:d.Runtime})]})," "]}),d!=null&&T.jsxs("div",{style:{"--rating":d.imdbRating/2},className:"rating d-flex gap-2 align-items-center",children:[T.jsx("div",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Total Votes "+d.imdbVotes}),d.imdbRating,"/10 Rating"]}),T.jsxs("div",{className:"d-flex gap-4 align-items-center mt-4",children:[T.jsx(Io,{to:"../play",state:{item:t,imdbData:d},children:T.jsx("button",{className:"custom-btn w-max px-4 py-2 full-radius",children:"Watch Now"})}),o!=null&&T.jsx("div",{onClick:()=>r(f.imdb_id),role:"button",className:o.includes(f.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),l!=null&&T.jsx("div",{onClick:()=>s(f.imdb_id),role:"button",className:l.includes(f.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})})]})]})})}function eO({loading:t,error:e,moviza:n,Imdb:i}){return In(),t?T.jsx("div",{className:"loading",children:"Loading..."}):T.jsx(US,{className:"slider",modules:[G2,J2,K2],spaceBetween:0,slidesPerView:1,navigation:!0,effect:"fade",loop:!0,autoplay:t?{}:{delay:3e3,disableOnInteraction:!1},children:n.map((r,s)=>{if(s<7)return T.jsx(jS,{children:T.jsx(Z2,{item:r,Imdb:i})},s)})})}function Yg({item:t,Imdb:e}){const{fav:n,watchList:i,handleFav:r,handleWatchList:s}=In(),[o,a]=M.useState(null),[l,u]=M.useState(null);M.useEffect(()=>{a(n),u(i)},[n,i]);const[d,h]=M.useState(null);return M.useEffect(()=>{h(()=>e.filter(g=>g.imdbID==t.imdb_id)[0]),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(g=>new window.bootstrap.Tooltip(g))},[d,e,t]),T.jsxs("div",{className:"gridItem w-100 d-flex ",style:{"--bg":`url(${d!=null&&d.Poster})`},children:[T.jsxs("div",{className:"position-absolute gap-1 px-2 py-4 top-0 start-0 w-100 h-100 d-flex flex-column justify-content-end align-items-center",children:[d!=null&&T.jsx("h6",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Released "+d.Released,className:"m-0 small-font theme-clr",children:d.Year}),T.jsx("h6",{className:"text-center text-balance",children:t.title}),d!=null&&T.jsxs("div",{className:"info d-flex gap-1 flex-wrap align-items-center  justify-content-center",children:[T.jsx("h6",{className:"m-0 small-font",children:d.Rated}),T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256",children:T.jsxs("g",{fill:"currentColor",children:[T.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),T.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),T.jsx("h6",{className:"m-0 small-font",children:d.Runtime})]})]}),T.jsxs("div",{className:"d-flex play position-absolute top-0 start-0 w-100 h-100 justify-content-center align-items-center",children:[T.jsx(Io,{to:"../play",state:{item:t,imdbData:d},children:T.jsx("button",{className:"custom-btn w-max full-radius fs-3 px-2",children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"M8 17.175V6.825q0-.425.3-.713t.7-.287q.125 0 .263.037t.262.113l8.15 5.175q.225.15.338.375t.112.475t-.112.475t-.338.375l-8.15 5.175q-.125.075-.262.113T9 18.175q-.4 0-.7-.288t-.3-.712"})})})}),o!=null&&T.jsx("div",{onClick:()=>r(t.imdb_id),role:"button",className:o.includes(t.imdb_id)?"theme-clr w-max position-absolute top-0 start-0 ms-2 mt-2  fs-3 d-flex justify-content-center align-items-center":"w-max position-absolute top-0 start-0 ms-2 mt-2  fs-3 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),l!=null&&T.jsx("div",{onClick:()=>s(t.imdb_id),role:"button",className:l.includes(t.imdb_id)?"theme-clr w-max position-absolute top-0 end-0 me-2 mt-2  fs-3 d-flex justify-content-center align-items-center":"w-max position-absolute top-0 end-0 me-2 mt-2  fs-3 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})})]})]})}function Ms({loading:t,error:e,moviza:n,Imdb:i,match:r,type:s,range:o,title:a,link:l}){In();let u=0;return T.jsx("section",{className:"container",children:T.jsxs("div",{className:"row",children:[a&&T.jsxs("div",{className:"col-12 py-5 px-3 d-flex justify-content-between align-items-center",children:[T.jsxs("h3",{children:[T.jsx("span",{className:"theme-clr",children:"#"}),a]}),T.jsx(Io,{to:l,children:"See All"})]}),T.jsx("div",{className:"col-12 gridItems",children:n&&n.length>0?n.map((d,h)=>{if(u<o&&d[s]==r)return u++,T.jsx(Yg,{item:d,Imdb:i},h)}):T.jsx("h1",{className:"no-data",children:"No Data Found"})})]})})}function tO({useMoviza:t}){const{fav:e,watchList:n,handleFav:i,handleWatchList:r}=In(),{loading:s,error:o,moviza:a,Imdb:l}=t(),[u,d]=M.useState([]);return M.useEffect(()=>{d(l)},[s,t]),T.jsxs("main",{children:[T.jsx(eO,{fav:e,watchList:n,loading:s,error:o,moviza:a,Imdb:u}),T.jsx(Ms,{link:"movies",loading:s,error:o,moviza:a,Imdb:u,match:"Movie",type:"type",range:12,title:"Movies"}),T.jsx(Ms,{link:"series",loading:s,error:o,moviza:a,Imdb:u,match:"Series",type:"type",range:12,title:"Series"}),T.jsx(Ms,{link:"anime",loading:s,error:o,moviza:a,Imdb:u,match:"Anime",type:"cinematography",range:12,title:"Anime"}),T.jsx(Ms,{link:"animation",loading:s,error:o,moviza:a,Imdb:u,match:"Animation",type:"cinematography",range:12,title:"Animation"}),T.jsx(Ms,{link:"live-action",loading:s,error:o,moviza:a,Imdb:u,match:"Live-Action",type:"cinematography",range:12,title:"Live Action"})]})}function $w(){const{documentData:t}=In(),[e,n]=M.useState(""),[i,r]=M.useState("");M.useEffect(()=>{t&&n(t.name)},[t]);const s=o=>{o.preventDefault();const a=`Request From ${e}
${i}`,l="7217477094:AAG2Ej7QPlgaGmEbe8FCoRGqcvRZ68aPN1s",u="-1002206486921",d=`https://api.telegram.org/bot${l}/sendMessage`;fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:u,text:a})}).then(h=>h.json()).then(h=>{h.ok?(r(""),alert("Message sent successfully!")):alert("Failed to send message: "+h.description)}).catch(h=>{console.error("Error:",h),alert("Error sending message")})};return T.jsx("section",{className:"container mt-5",children:T.jsxs("div",{className:"row my-5 pt-5",children:[T.jsxs("div",{className:"col-12 col-xl-7 p-5",children:[T.jsx("h2",{className:"theme-clr",children:"Moviza"}),T.jsx("h1",{children:"Your Ultimate Free OTT Destination"}),T.jsx("p",{className:"fs-5",children:"Moviza is your go-to OTT platform, offering a vast library of movies, series, and animes, all completely free of charge! Inspired by the likes of Netflix and Amazon Prime, Moviza is dedicated to providing high-quality entertainment in Tamil."}),T.jsx("h2",{className:"theme-clr mt-5",children:"What We Offer"}),T.jsxs("ul",{children:[T.jsxs("li",{children:[T.jsx("span",{className:"theme-clr",children:"Diverse Content:"})," From the latest Hollywood blockbusters to popular Tamil-dubbed films, we bring you a wide range of content. Enjoy your favorite movies and series in Tamil or catch the latest Hollywood releases with Tamil dubbing."]}),T.jsxs("li",{children:[T.jsx("span",{className:"theme-clr",children:"Extensive Tamil Library:"})," Explore an array of Tamil-dubbed series and animes, ensuring there's always something new and exciting for you to watch."]}),T.jsxs("li",{children:[T.jsx("span",{className:"theme-clr",children:"Request New Content:"})," Have a specific movie or series in mind? Use our request feature to suggest new titles. We strive to accommodate your requests, with new additions typically uploaded within just one day!"]})]}),T.jsx("h2",{className:"theme-clr mt-5",children:"Why Choose Moviza?"}),T.jsxs("ul",{children:[T.jsxs("li",{children:[T.jsx("span",{className:"theme-clr",children:"Absolutely Free:"})," Access all our content without any subscription fees. Just stream and enjoy!"]}),T.jsxs("li",{children:[T.jsx("span",{className:"theme-clr",children:"High-Quality Entertainment:"})," Experience a seamless streaming experience with a user-friendly interface and high-definition content."]}),T.jsxs("li",{children:[T.jsx("span",{className:"theme-clr",children:"Tamil Focus:"})," Our platform is dedicated to serving the Tamil-speaking audience, ensuring you have access to content that resonates with you."]})]}),T.jsx("p",{className:"fs-5",children:"Moviza is here to redefine your entertainment experience. Dive into our world of free streaming and explore a universe of movies, series, and animes like never before!"})]}),T.jsxs("div",{className:"col-12 col-xl-5 p-5",children:[T.jsx("h2",{className:"theme-clr",children:"Request"}),T.jsxs("form",{className:"d-flex flex-column gap-4 my-3",onSubmit:s,children:[T.jsx("textarea",{className:"form-control py-3",rows:10,value:i,onChange:o=>r(o.target.value),placeholder:"Your Request",required:!0}),T.jsx("button",{className:"custom-btn py-2 rounded-1",type:"submit",children:"Send Request"})]})]})]})})}const zS="/assets/logo-CQ3Ew4tp.png";function Bn(){const[t,e]=M.useState([]),[n,i]=M.useState([]),[r,s]=M.useState(!0),[o,a]=M.useState(null);return M.useEffect(()=>{(async()=>{try{const u=await fetch("https://nwmtamilplay.github.io/moviza/database/moviza.json");if(!u.ok)throw new Error("Network response was not ok");const d=await u.json();e(d)}catch(u){console.error("There has been a problem with your fetch operation:",u),a(u.message),s(!1)}try{const u=await fetch("https://nwmtamilplay.github.io/moviza/database/imdb_data.json");if(!u.ok)throw new Error("Network response was not ok");const d=await u.json();i(d),s(!1)}catch(u){console.error("There has been a problem with your fetch operation:",u),a(u.message),s(!1)}})()},[]),{loading:r,error:o,moviza:t,Imdb:n}}function nO({user:t}){const e=Dr(),{loading:n,error:i,moviza:r,Imdb:s}=Bn(),{fav:o,watchList:a,handleFav:l,handleWatchList:u}=In(),[d,h]=M.useState(null),[f,g]=M.useState(null);M.useEffect(()=>{h(o),g(a)},[o,a]);const[_,E]=M.useState(""),[A,v]=M.useState([]),y=z=>{if(v([]),E(z.target.value),z.target.value.trim()!=""){const J=r.filter(Pe=>Pe.title.toLowerCase().includes(z.target.value)||Pe.detail.toLowerCase().includes(z.target.value));console.log(J),v(J)}},w=z=>{z.key==="Enter"&&_.trim()!=""&&(E(""),v([]),e("/search",{state:{searchText:_},replace:!0}))},P=z=>{const J=r.filter(tt=>tt.imdb_id==z),Pe=s.filter(tt=>tt.imdbID==z);return{moviza:J,imdb:Pe}},O=M.useRef(null),{documentData:D}=In(),[k,S]=M.useState(null),[b,C]=M.useState(null),N=M.useRef(null),L=M.useRef(null);M.useEffect(()=>{L.current&&L.current.classList.contains("active")&&L.current.classList.remove("active")},[e]);const x=()=>{L.current&&L.current.classList.toggle("active")};return M.useEffect(()=>{S(t),C(D);const z=J=>{L.current&&!L.current.contains(J.target)&&N.current&&!N.current.contains(J.target)&&L.current.classList.remove("active")};return document.addEventListener("click",z),()=>{document.removeEventListener("click",z)}},[t,D]),M.useEffect(()=>{let z=0;window.addEventListener("scroll",function(){let J=window.pageYOffset||document.documentElement.scrollTop;z>200?(O.current&&O.current.classList.add("not-top"),J>z?O.current&&O.current.classList.remove("show"):O.current&&O.current.classList.add("show")):O.current&&O.current.classList.remove("not-top"),z=J})},[O]),T.jsx("header",{ref:O,className:"w-100",children:T.jsx("nav",{className:"container p-3",children:T.jsx("div",{className:"row",children:T.jsxs("div",{className:"col-12 d-flex align-items-center",children:[T.jsx(ui,{className:"logo me-auto",to:"/",children:T.jsx("img",{className:"w-100",src:zS,alt:"Moviza"})}),T.jsxs("div",{ref:L,className:"navigation d-flex flex-column flex-xl-row align-items-xl-center justify-content-center gap-4 p-4 p-xl-0",children:[T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/",children:[T.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"M4 14.85V11q0-.2.075-.375T4.3 10.3l7-7q.15-.15.325-.225Q11.8 3 12 3t.375.075q.175.075.325.225l1.425 1.4ZM17 20v-8.175L13.075 7.9L15.2 5.775l4.5 4.525q.125.15.213.325Q20 10.8 20 11v8q0 .425-.288.712Q19.425 20 19 20ZM5 20q-.425 0-.713-.288Q4 19.425 4 19v-2.05l3-3V17h8.5v3Z"})}),"Home"]}),T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/about",children:[" ",T.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"M18.001 20H20v2h-8C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10a9.99 9.99 0 0 1-3.999 8M12 10a2 2 0 1 0 0-4a2 2 0 0 0 0 4m-4 4a2 2 0 1 0 0-4a2 2 0 0 0 0 4m8 0a2 2 0 1 0 0-4a2 2 0 0 0 0 4m-4 4a2 2 0 1 0 0-4a2 2 0 0 0 0 4"})}),"About"]}),T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/movies",children:[T.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"m20.84 2.18l-3.93.78l2.74 3.54l1.97-.4zm-6.87 1.36L12 3.93l2.75 3.53l1.96-.39zm-4.9.96l-1.97.41l2.75 3.53l1.96-.39zm-4.91 1l-.98.19a2 2 0 0 0-1.57 2.35L2 10l4.9-.97zM2 10v10a2 2 0 0 0 2 2h16c1.11 0 2-.89 2-2V10z"})})," Movies"]}),T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/series",children:[T.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"m11.05 14.5l4.15-2.65q.45-.3.45-.85t-.45-.85L11.05 7.5q-.5-.325-1.025-.05t-.525.875v5.35q0 .6.525.875t1.025-.05M4 19q-.825 0-1.412-.587T2 17V5q0-.825.588-1.412T4 3h16q.825 0 1.413.588T22 5v12q0 .825-.587 1.413T20 19h-4v1q0 .425-.288.713T15 21H9q-.425 0-.712-.288T8 20v-1z"})})," Series"]}),T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/anime",children:[T.jsx("svg",{className:"fs-4 d-flex d-xl-none",xmlns:"http://www.w3.org/2000/svg",width:"0.95em",height:"0.95em",viewBox:"0 0 512 512",children:T.jsx("path",{fill:"currentColor",d:"m368.256 214.573l-102.627 187.35c40.554 71.844 73.647 97.07 138.664 94.503c63.67-2.514 136.974-89.127 95.694-163.243L397.205 150.94c-3.676 12.266-25.16 55.748-28.95 63.634M216.393 440.625C104.077 583.676-57.957 425.793 20.85 302.892c0 0 83.895-147.024 116.521-204.303c25.3-44.418 53.644-72.37 90.497-81.33c44.94-10.926 97.565 12.834 125.62 56.167c19.497 30.113 36.752 57.676 6.343 109.738c-3.613 6.184-136.326 248.402-143.438 257.46m8.014-264.595c-30.696-17.696-30.696-62.177 0-79.873s69.273 4.544 69.273 39.936s-38.578 57.633-69.273 39.937"})})," Anime"]}),T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/favorite",children:[T.jsx("svg",{role:"button",className:"fs-4",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"M12 20.325q-.35 0-.712-.125t-.638-.4l-1.725-1.575q-2.65-2.425-4.788-4.812T2 8.15Q2 5.8 3.575 4.225T7.5 2.65q1.325 0 2.5.562t2 1.538q.825-.975 2-1.537t2.5-.563q2.35 0 3.925 1.575T22 8.15q0 2.875-2.125 5.275T15.05 18.25l-1.7 1.55q-.275.275-.637.4t-.713.125"})})," ",T.jsx("span",{className:"w-max d-flex d-xl-none",children:"Favorite"})]}),T.jsxs(ui,{className:"d-flex gap-3 align-items-center",to:"/watch-list",children:[T.jsx("svg",{role:"button",className:"fs-4",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"m12 18l-4.2 1.8q-1 .425-1.9-.162T5 17.975V5q0-.825.588-1.412T7 3h10q.825 0 1.413.588T19 5v12.975q0 1.075-.9 1.663t-1.9.162z"})})," ",T.jsx("span",{className:"w-max d-flex d-xl-none",children:"Watch List"})]}),T.jsxs(ui,{className:"d-flex d-xl-none gap-3 align-items-center",to:"/search",children:[T.jsx("svg",{role:"button",className:"fs-4",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"})})," ",T.jsx("span",{className:"w-max d-flex d-xl-none",children:"Search"})]}),T.jsxs("div",{className:"position-relative search-box d-none d-xl-flex",children:[T.jsx("input",{onKeyDown:w,name:"s",placeholder:"Search",value:_,onChange:z=>y(z),className:"search full-radius py-2 px-3",type:"text"}),T.jsx("div",{className:"searchResult scroll-box",children:A.map(z=>{const J=P(z.imdb_id);return console.log(J),T.jsxs("div",{className:"result-items m-3",children:[T.jsx("img",{className:"w-100",src:J.imdb[0].Poster,alt:""}),T.jsxs("div",{className:"details d-flex flex-column gap-1 p-3",children:[T.jsx("span",{className:"theme-clr small-font",children:z.type}),T.jsx("h6",{className:"fs-6",children:z.title}),T.jsxs("div",{className:"d-flex w-100 gap-2 align-items-center mt-auto",children:[d!=null&&T.jsx("div",{onClick:()=>l(z.imdb_id),role:"button",className:d.includes(z.imdb_id)?"theme-clr fs-4 d-flex justify-content-center align-items-center":"fs-4 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),f!=null&&T.jsx("div",{onClick:()=>u(z.imdb_id),role:"button",className:f.includes(z.imdb_id)?"theme-clr fs-4 d-flex justify-content-center align-items-center":"fs-4 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})}),T.jsx(Io,{to:"../play",onClick:()=>{E(""),v([])},className:"ms-auto",state:{item:z,imdbData:J.imdb[0]},children:T.jsx("button",{className:"result-btn w-max btn",children:"Watch Now"})})]})]})]})})})]})]}),T.jsx(Io,{to:"/profile",children:T.jsx("img",{role:"button",className:"profile full-radius ms-5",src:b!=null?b.profile?b.profile:`https://placehold.co/40x40/yellow/black?text=${b.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:k!=null?k.displayName:"admin"})}),T.jsx("button",{ref:N,onClick:x,className:"menu ms-3 d-flex d-xl-none",children:T.jsx("svg",{className:"fs-1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:T.jsx("path",{fill:"currentColor",d:"M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1m0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1M3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1"})})})]})})})})}function _a({useMoviza:t,types:e,check:n,queryCheck:i}){const[r,s]=IS(),[o,a]=M.useState([{cat:"All",active:!0},{cat:"Anime",active:!1},{cat:"Animation",active:!1},{cat:"Live-Action",active:!1}]),[l,u]=M.useState([{type:"All",active:!0},{type:"Movie",active:!1},{type:"Series",active:!1}]),{loading:d,error:h,moviza:f,Imdb:g}=t(),[_,E]=M.useState([]),[A,v]=M.useState([]);return M.useEffect(()=>{if(E(f),v(g),r.get(i[1])){if(i[1]=="cat"){const y=o.map(w=>w.cat===r.get(i[1])?{...w,active:!0}:{...w,active:!1});a(y)}else{const y=l.map(w=>w.type===r.get(i[1])?{...w,active:!0}:{...w,active:!1});u(y)}r.get(i[1])!="All"&&r.get(i[1])!=""&&E(f.filter(y=>y[i[0]]===r.get(i[1])&&y[n]===e))}},[d,r]),T.jsxs(T.Fragment,{children:[T.jsx("section",{className:"mt-5 pt-5 container",children:T.jsx("div",{className:"row",children:T.jsx("div",{className:"col-12 py-5",children:T.jsx("h6",{className:"d-flex flex-wrap gap-3 genre",children:i[1]=="cat"?o.map((y,w)=>T.jsx("span",{role:"button",onClick:()=>{s({cat:y.cat})},className:y.active?"active":"",children:y.cat},w)):l.map((y,w)=>T.jsx("span",{role:"button",onClick:()=>{s({type:y.type})},className:y.active?"active":"",children:y.type},w))})})})}),T.jsx(Ms,{loading:d,error:h,moviza:_,Imdb:A,match:e,type:n,range:99})]})}var Ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q=function(t,e){if(!t)throw jo(e)},jo=function(t){return new Error("Firebase Database ("+BS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},iO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),i.push(n[d],n[h],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($S(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||h==null)throw new rO;const f=s<<2|a>>4;if(i.push(f),u!==64){const g=a<<4&240|u>>2;if(i.push(g),h!==64){const _=u<<6&192|h;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WS=function(t){const e=$S(t);return Xg.encodeByteArray(e,!0)},hd=function(t){return WS(t).replace(/\./g,"")},fd=function(t){try{return Xg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){return HS(void 0,t)}function HS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!oO(n)||(t[n]=HS(t[n],e[n]));return t}function oO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=()=>aO().__FIREBASE_DEFAULTS__,cO=()=>{if(typeof process>"u"||typeof Ww>"u")return;const t=Ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fd(t[1]);return e&&JSON.parse(e)},lh=()=>{try{return lO()||cO()||uO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qS=t=>{var e,n;return(n=(e=lh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Jg=t=>{const e=qS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},GS=()=>{var t;return(t=lh())===null||t===void 0?void 0:t.config},KS=t=>{var e;return(e=lh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hd(JSON.stringify(n)),hd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ty(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function dO(){var t;const e=(t=lh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fO(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YS(){return BS.NODE_ADMIN===!0}function pO(){return!dO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mO(){try{return typeof indexedDB=="object"}catch{return!1}}function gO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="FirebaseError";class ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=yO,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?vO(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ii(r,a,i)}}function vO(t,e){return t.replace(_O,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const _O=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){return JSON.parse(t)}function yt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=Il(fd(s[0])||""),n=Il(fd(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},wO=function(t){const e=XS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},EO=function(t){const e=XS(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function dm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pd(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function md(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Hw(s)&&Hw(o)){if(!md(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Hw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Na(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Oa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(f<<1|f>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),d=1518500249):(u=s^o^a,d=1859775393):h<60?(u=s&o|a&(s|o),d=2400959708):(u=s^o^a,d=3395469782);const f=(r<<5|r>>>27)+u+l+d+i[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=f}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function SO(t,e){const n=new IO(t,e);return n.subscribe.bind(n)}class IO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");bO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jf),r.error===void 0&&(r.error=jf),r.complete===void 0&&(r.complete=jf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jf(){}function CO(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,q(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ch=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zg;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xO(e))try{this.getOrInitializeService({instanceIdentifier:Hr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hr){return this.instances.has(e)}getOptions(e=Hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:PO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hr){return this.component?this.component.multipleInstances?e:Hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PO(t){return t===Hr?void 0:t}function xO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const NO={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},OO=le.INFO,LO={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},MO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=LO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uh{constructor(e){this.name=e,this._logLevel=OO,this._logHandler=MO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const DO=(t,e)=>e.some(n=>t instanceof n);let qw,Gw;function VO(){return qw||(qw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FO(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JS=new WeakMap,hm=new WeakMap,ZS=new WeakMap,zf=new WeakMap,ny=new WeakMap;function UO(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Er(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JS.set(n,t)}).catch(()=>{}),ny.set(e,t),e}function jO(t){if(hm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hm.set(t,e)}let fm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zO(t){fm=t(fm)}function BO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bf(this),e,...n);return ZS.set(i,e.sort?e.sort():[e]),Er(i)}:FO().includes(t)?function(...e){return t.apply(Bf(this),e),Er(JS.get(this))}:function(...e){return Er(t.apply(Bf(this),e))}}function $O(t){return typeof t=="function"?BO(t):(t instanceof IDBTransaction&&jO(t),DO(t,VO())?new Proxy(t,fm):t)}function Er(t){if(t instanceof IDBRequest)return UO(t);if(zf.has(t))return zf.get(t);const e=$O(t);return e!==t&&(zf.set(t,e),ny.set(e,t)),e}const Bf=t=>ny.get(t);function WO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Er(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Er(o.result),l.oldVersion,l.newVersion,Er(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const HO=["get","getKey","getAll","getAllKeys","count"],qO=["put","add","delete","clear"],$f=new Map;function Kw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($f.get(e))return $f.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=qO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||HO.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return $f.set(e,s),s}zO(t=>({...t,get:(e,n,i)=>Kw(e,n)||t.get(e,n,i),has:(e,n)=>!!Kw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function KO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",Qw="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new uh("@firebase/app"),QO="@firebase/app-compat",YO="@firebase/analytics-compat",XO="@firebase/analytics",JO="@firebase/app-check-compat",ZO="@firebase/app-check",eL="@firebase/auth",tL="@firebase/auth-compat",nL="@firebase/database",iL="@firebase/database-compat",rL="@firebase/functions",sL="@firebase/functions-compat",oL="@firebase/installations",aL="@firebase/installations-compat",lL="@firebase/messaging",cL="@firebase/messaging-compat",uL="@firebase/performance",dL="@firebase/performance-compat",hL="@firebase/remote-config",fL="@firebase/remote-config-compat",pL="@firebase/storage",mL="@firebase/storage-compat",gL="@firebase/firestore",yL="@firebase/vertexai-preview",vL="@firebase/firestore-compat",_L="firebase",wL="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",EL={[pm]:"fire-core",[QO]:"fire-core-compat",[XO]:"fire-analytics",[YO]:"fire-analytics-compat",[ZO]:"fire-app-check",[JO]:"fire-app-check-compat",[eL]:"fire-auth",[tL]:"fire-auth-compat",[nL]:"fire-rtdb",[iL]:"fire-rtdb-compat",[rL]:"fire-fn",[sL]:"fire-fn-compat",[oL]:"fire-iid",[aL]:"fire-iid-compat",[lL]:"fire-fcm",[cL]:"fire-fcm-compat",[uL]:"fire-perf",[dL]:"fire-perf-compat",[hL]:"fire-rc",[fL]:"fire-rc-compat",[pL]:"fire-gcs",[mL]:"fire-gcs-compat",[gL]:"fire-fst",[vL]:"fire-fst-compat",[yL]:"fire-vertex","fire-js":"fire-js",[_L]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,TL=new Map,gm=new Map;function Yw(t,e){try{t.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ar(t){const e=t.name;if(gm.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,t);for(const n of gd.values())Yw(n,t);for(const n of TL.values())Yw(n,t);return!0}function Kl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tr=new Gl("app","Firebase",SL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=wL;function eI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:mm,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Tr.create("bad-app-name",{appName:String(r)});if(n||(n=GS()),!n)throw Tr.create("no-options");const s=gd.get(r);if(s){if(md(n,s.options)&&md(i,s.config))return s;throw Tr.create("duplicate-app",{appName:r})}const o=new RO(r);for(const l of gm.values())o.addComponent(l);const a=new IL(n,i,o);return gd.set(r,a),a}function dh(t=mm){const e=gd.get(t);if(!e&&t===mm&&GS())return eI();if(!e)throw Tr.create("no-app",{appName:t});return e}function vn(t,e,n){var i;let r=(i=EL[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(a.join(" "));return}Ar(new Oi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="firebase-heartbeat-database",CL=1,bl="firebase-heartbeat-store";let Wf=null;function tI(){return Wf||(Wf=WO(bL,CL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tr.create("idb-open",{originalErrorMessage:t.message})})),Wf}async function AL(t){try{const n=(await tI()).transaction(bl),i=await n.objectStore(bl).get(nI(t));return await n.done,i}catch(e){if(e instanceof ii)Li.warn(e.message);else{const n=Tr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Li.warn(n.message)}}}async function Xw(t,e){try{const i=(await tI()).transaction(bl,"readwrite");await i.objectStore(bl).put(e,nI(t)),await i.done}catch(n){if(n instanceof ii)Li.warn(n.message);else{const i=Tr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Li.warn(i.message)}}}function nI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=1024,PL=30*24*60*60*1e3;class xL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NL(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n,i;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Jw();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=PL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jw(),{heartbeatsToSend:i,unsentEntries:r}=RL(this._heartbeatsCache.heartbeats),s=hd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Li.warn(n),""}}}function Jw(){return new Date().toISOString().substring(0,10)}function RL(t,e=kL){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Zw(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Zw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class NL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mO()?gO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Xw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Xw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zw(t){return hd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){Ar(new Oi("platform-logger",e=>new GO(e),"PRIVATE")),Ar(new Oi("heartbeat",e=>new xL(e),"PRIVATE")),vn(pm,Qw,t),vn(pm,Qw,"esm2017"),vn("fire-js","")}OL("");var LL="firebase",ML="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn(LL,ML,"app");function iy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function iI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DL=iI,rI=new Gl("auth","Firebase",iI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new uh("@firebase/auth");function VL(t,...e){yd.logLevel<=le.WARN&&yd.warn(`Auth (${Vr}): ${t}`,...e)}function wu(t,...e){yd.logLevel<=le.ERROR&&yd.error(`Auth (${Vr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw sy(t,...e)}function Vn(t,...e){return sy(t,...e)}function ry(t,e,n){const i=Object.assign(Object.assign({},DL()),{[e]:n});return new Gl("auth","Firebase",i).create(e,{appName:t.name})}function bi(t){return ry(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FL(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Tn(t,"argument-error"),ry(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return rI.create(t,...e)}function ie(t,e,...n){if(!t)throw sy(e,...n)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wu(e),new Error(e)}function Mi(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UL(){return e0()==="http:"||e0()==="https:"}function e0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UL()||hO()||"connection"in navigator)?navigator.onLine:!0}function zL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=ty()||QS()}get(){return jL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new Ql(3e4,6e4);function $i(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Wi(t,e,n,i,r={}){return oI(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=zo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),sI.fetch()(aI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function oI(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},BL),e);try{const r=new HL(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Xc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xc(t,"user-disabled",o);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ry(t,d,u);Tn(t,d)}}catch(r){if(r instanceof ii)throw r;Tn(t,"network-request-failed",{message:String(r)})}}async function Yl(t,e,n,i,r={}){const s=await Wi(t,e,n,i,r);return"mfaPendingCredential"in s&&Tn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function aI(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?oy(t.config,r):`${t.config.apiScheme}://${r}`}function WL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),$L.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vn(t,e,i);return r.customData._tokenResponse=n,r}function t0(t){return t!==void 0&&t.enterprise!==void 0}class qL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function GL(t,e){return Wi(t,"GET","/v2/recaptchaConfig",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return Wi(t,"POST","/v1/accounts:delete",e)}async function lI(t,e){return Wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QL(t,e=!1){const n=Tt(t),i=await n.getIdToken(e),r=hh(i);ie(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ka(Hf(r.auth_time)),issuedAtTime:Ka(Hf(r.iat)),expirationTime:Ka(Hf(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Hf(t){return Number(t)*1e3}function hh(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const r=fd(n);return r?JSON.parse(r):(wu("Failed to decode base64 JWT payload"),null)}catch(r){return wu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function n0(t){const e=hh(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ii&&YL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function YL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Cl(t,lI(n,{idToken:i}));ie(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?cI(s.providerUserInfo):[],a=ZL(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function JL(t){const e=Tt(t);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZL(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function cI(t){return t.map(e=>{var{providerId:n}=e,i=iy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e){const n=await oI(t,{},async()=>{const i=zo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=aI(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",sI.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tM(t,e){return Wi(t,"POST","/v2/accounts:revokeToken",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const n=n0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await eM(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new lo;return i&&(ie(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ie(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _i{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=iy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Cl(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QL(this,e)}reload(){return JL(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await Cl(this,KL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,d;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:P,isAnonymous:O,providerData:D,stsTokenManager:k}=n;ie(w&&k,e,"internal-error");const S=lo.fromJSON(this.name,k);ie(typeof w=="string",e,"internal-error"),Yi(h,e.name),Yi(f,e.name),ie(typeof P=="boolean",e,"internal-error"),ie(typeof O=="boolean",e,"internal-error"),Yi(g,e.name),Yi(_,e.name),Yi(E,e.name),Yi(A,e.name),Yi(v,e.name),Yi(y,e.name);const b=new _i({uid:w,auth:e,email:f,emailVerified:P,displayName:h,isAnonymous:O,photoURL:_,phoneNumber:g,tenantId:E,stsTokenManager:S,createdAt:v,lastLoginAt:y});return D&&Array.isArray(D)&&(b.providerData=D.map(C=>Object.assign({},C))),A&&(b._redirectEventId=A),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new lo;r.updateFromServerResponse(n);const s=new _i({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await vd(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ie(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?cI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new lo;a.updateFromIdToken(i);const l=new _i({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new vm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;function wi(t){Mi(t instanceof Function,"Expected a class definition");let e=i0.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uI.type="NONE";const r0=uI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t,e,n){return`firebase:${t}:${e}:${n}`}class co{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Eu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Eu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new co(wi(r0),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||wi(r0);const o=Eu(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=_i._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new co(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new co(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gI(e))return"Blackberry";if(yI(e))return"Webos";if(hI(e))return"Safari";if((e.includes("chrome/")||fI(e))&&!e.includes("edge/"))return"Chrome";if(mI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function dI(t=Ft()){return/firefox\//i.test(t)}function hI(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fI(t=Ft()){return/crios\//i.test(t)}function pI(t=Ft()){return/iemobile/i.test(t)}function mI(t=Ft()){return/android/i.test(t)}function gI(t=Ft()){return/blackberry/i.test(t)}function yI(t=Ft()){return/webos/i.test(t)}function ay(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nM(t=Ft()){var e;return ay(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iM(){return fO()&&document.documentMode===10}function vI(t=Ft()){return ay(t)||mI(t)||yI(t)||gI(t)||/windows phone/i.test(t)||pI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e=[]){let n;switch(t){case"Browser":n=s0(Ft());break;case"Worker":n=`${s0(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e={}){return Wi(t,"GET","/v2/passwordPolicy",$i(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=6;class aM{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new rM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lI(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(bi(this));const n=e?Tt(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sM(this),n=new aM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await tM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_I(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hi(t){return Tt(t)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=SO(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cM(t){fh=t}function wI(t){return fh.loadJS(t)}function uM(){return fh.recaptchaEnterpriseScript}function dM(){return fh.gapiScript}function hM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fM="recaptcha-enterprise",pM="NO_RECAPTCHA";class mM{constructor(e){this.type=fM,this.auth=Hi(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{GL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new qL(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;t0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(pM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&t0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uM();l.length!==0&&(l+=a),wI(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function a0(t,e,n,i=!1){const r=new mM(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _d(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await a0(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await a0(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t,e){const n=Kl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(md(s,e??{}))return r;Tn(r,"already-initialized")}return n.initialize({options:e})}function yM(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vM(t,e,n){const i=Hi(t);ie(i._canInitEmulator,i,"emulator-config-failed"),ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=EI(e),{host:o,port:a}=_M(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),wM()}function EI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _M(t){const e=EI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:l0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:l0(o)}}}function l0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function EM(t,e){return Wi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e){return Yl(t,"POST","/v1/accounts:signInWithPassword",$i(t,e))}async function SM(t,e){return Wi(t,"POST","/v1/accounts:sendOobCode",$i(t,e))}async function IM(t,e){return SM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t,e){return Yl(t,"POST","/v1/accounts:signInWithEmailLink",$i(t,e))}async function CM(t,e){return Yl(t,"POST","/v1/accounts:signInWithEmailLink",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends ly{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Al(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Al(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,n,"signInWithPassword",TM);case"emailLink":return bM(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,i,"signUpPassword",EM);case"emailLink":return CM(e,{idToken:n,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return Yl(t,"POST","/v1/accounts:signInWithIdp",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="http://localhost";class hs extends ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=iy(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new hs(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,uo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:AM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PM(t){const e=Na(Oa(t)).link,n=e?Na(Oa(e)).deep_link_id:null,i=Na(Oa(t)).deep_link_id;return(i?Na(Oa(i)).link:null)||i||n||e||t}class cy{constructor(e){var n,i,r,s,o,a;const l=Na(Oa(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(i=l.oobCode)!==null&&i!==void 0?i:null,h=kM((r=l.mode)!==null&&r!==void 0?r:null);ie(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=PM(e);try{return new cy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,n){return Al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=cy.parseLink(n);return ie(i,"argument-error"),Al._fromEmailAndCode(e,i.code,i.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends uy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Xl{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return mi.credential(n,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Xl{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Xl{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ir.credential(n,i)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e){return Yl(t,"POST","/v1/accounts:signUp",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await _i._fromIdTokenResponse(e,i,r),o=c0(i);return new fs({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=c0(i);return new fs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function c0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends ii{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new wd(e,n,i,r)}}function TI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(t,s,e,i):s})}async function RM(t,e,n=!1){const i=await Cl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e,n=!1){const{auth:i}=t;if(Nn(i.app))return Promise.reject(bi(i));const r="reauthenticate";try{const s=await Cl(t,TI(i,r,e,t),n);ie(s.idToken,i,"internal-error");const o=hh(s.idToken);ie(o,i,"internal-error");const{sub:a}=o;return ie(t.uid===a,i,"user-mismatch"),fs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Tn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(t,e,n=!1){if(Nn(t.app))return Promise.reject(bi(t));const i="signIn",r=await TI(t,i,e),s=await fs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function OM(t,e){return SI(Hi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(t){const e=Hi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LM(t,e,n){const i=Hi(t);await _d(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",IM)}async function MM(t,e,n){if(Nn(t.app))return Promise.reject(bi(t));const i=Hi(t),o=await _d(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&II(t),l}),a=await fs._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function DM(t,e,n){return Nn(t.app)?Promise.reject(bi(t)):OM(Tt(t),Bo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&II(t),i})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const o=(n=(e=hh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ho(s,a)}}if(!i)return null;switch(i){case"facebook.com":return new FM(s,r);case"github.com":return new UM(s,r);case"google.com":return new jM(s,r);case"twitter.com":return new zM(s,r,t.screenName||null);case"custom":case"anonymous":return new ho(s,null);default:return new ho(s,i,r)}}class ho{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class bI extends ho{constructor(e,n,i,r){super(e,n,i),this.username=r}}class FM extends ho{constructor(e,n){super(e,"facebook.com",n)}}class UM extends bI{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class jM extends ho{constructor(e,n){super(e,"google.com",n)}}class zM extends bI{constructor(e,n,i){super(e,"twitter.com",n,i)}}function BM(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:VM(n)}function $M(t,e,n,i){return Tt(t).onIdTokenChanged(e,n,i)}function WM(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=1e3,qM=10;class AI extends CI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);iM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,qM):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},HM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AI.type="LOCAL";const GM=AI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends CI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kI.type="SESSION";const PI=kI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new ph(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await KM(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=dy("",20);r.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function YM(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function XM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZM(){return xI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebaseLocalStorageDb",eD=1,Td="firebaseLocalStorage",NI="fbase_key";class Jl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mh(t,e){return t.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function tD(){const t=indexedDB.deleteDatabase(RI);return new Jl(t).toPromise()}function _m(){const t=indexedDB.open(RI,eD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Td,{keyPath:NI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Td)?e(i):(i.close(),await tD(),e(await _m()))})})}async function u0(t,e,n){const i=mh(t,!0).put({[NI]:e,value:n});return new Jl(i).toPromise()}async function nD(t,e){const n=mh(t,!1).get(e),i=await new Jl(n).toPromise();return i===void 0?null:i.value}function d0(t,e){const n=mh(t,!0).delete(e);return new Jl(n).toPromise()}const iD=800,rD=3;class OI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>rD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ph._getInstance(ZM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XM(),!this.activeServiceWorker)return;this.sender=new QM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await u0(e,Ed,"1"),await d0(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>u0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>nD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>d0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=mh(r,!1).getAll();return new Jl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OI.type="LOCAL";const sD=OI;new Ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){return e?wi(e):(ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends ly{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oD(t){return SI(t.auth,new hy(t),t.bypassAuthState)}function aD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),NM(n,new hy(t),t.bypassAuthState)}async function lD(t){const{auth:e,user:n}=t;return ie(n,e,"internal-error"),RM(n,new hy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oD;case"linkViaPopup":case"linkViaRedirect":return lD;case"reauthViaPopup":case"reauthViaRedirect":return aD;default:Tn(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Ql(2e3,1e4);async function uD(t,e,n){if(Nn(t.app))return Promise.reject(Vn(t,"operation-not-supported-in-this-environment"));const i=Hi(t);FL(t,e,uy);const r=LI(i,n);return new Jr(i,"signInViaPopup",e,r).executeNotNull()}class Jr extends MI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cD.get())};e()}}Jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="pendingRedirect",Tu=new Map;class hD extends MI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const i=await fD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fD(t,e){const n=gD(e),i=mD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function pD(t,e){Tu.set(t._key(),e)}function mD(t){return wi(t._redirectPersistence)}function gD(t){return Eu(dD,t.config.apiKey,t.name)}async function yD(t,e,n=!1){if(Nn(t.app))return Promise.reject(bi(t));const i=Hi(t),r=LI(i,e),o=await new hD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=10*60*1e3;class _D{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!DI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vD&&this.cachedEventUids.clear(),this.cachedEventUids.has(h0(e))}saveEventToCache(e){this.cachedEventUids.add(h0(e)),this.lastProcessedEventTime=Date.now()}}function h0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e={}){return Wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SD=/^https?/;async function ID(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ED(t);for(const n of e)try{if(bD(n))return}catch{}Tn(t,"unauthorized-domain")}function bD(t){const e=ym(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!SD.test(n))return!1;if(TD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new Ql(3e4,6e4);function f0(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AD(t){return new Promise((e,n)=>{var i,r,s;function o(){f0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f0(),n(Vn(t,"network-request-failed"))},timeout:CD.get()})}if(!((r=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Jn().gapi)===null||s===void 0)&&s.load)o();else{const a=hM("iframefcb");return Jn()[a]=()=>{gapi.load?o():n(Vn(t,"network-request-failed"))},wI(`${dM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Su=null,e})}let Su=null;function kD(t){return Su=Su||AD(t),Su}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new Ql(5e3,15e3),xD="__/auth/iframe",RD="emulator/auth/iframe",ND={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LD(t){const e=t.config;ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oy(e,RD):`https://${t.config.authDomain}/${xD}`,i={apiKey:e.apiKey,appName:t.name,v:Vr},r=OD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${zo(i).slice(1)}`}async function MD(t){const e=await kD(t),n=Jn().gapi;return ie(n,t,"internal-error"),e.open({where:document.body,url:LD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ND,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),a=Jn().setTimeout(()=>{s(o)},PD.get());function l(){Jn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VD=500,FD=600,UD="_blank",jD="http://localhost";class p0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zD(t,e,n,i=VD,r=FD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DD),{width:i.toString(),height:r.toString(),top:s,left:o}),u=Ft().toLowerCase();n&&(a=fI(u)?UD:n),dI(u)&&(e=e||jD,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(nM(u)&&a!=="_self")return BD(e||"",a),new p0(null);const h=window.open(e||"",a,d);ie(h,t,"popup-blocked");try{h.focus()}catch{}return new p0(h)}function BD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="__/auth/handler",WD="emulator/auth/handler",HD=encodeURIComponent("fac");async function m0(t,e,n,i,r,s){ie(t.config.authDomain,t,"auth-domain-config-required"),ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Vr,eventId:r};if(e instanceof uy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Xl){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${HD}=${encodeURIComponent(l)}`:"";return`${qD(t)}?${zo(a).slice(1)}${u}`}function qD({config:t}){return t.emulator?oy(t,WD):`https://${t.authDomain}/${$D}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="webStorageSupport";class GD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PI,this._completeRedirectFn=yD,this._overrideRedirectResult=pD}async _openPopup(e,n,i,r){var s;Mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await m0(e,n,i,ym(),r);return zD(e,o,dy())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await m0(e,n,i,ym(),r);return YM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Mi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await MD(e),i=new _D(e);return n.register("authEvent",r=>(ie(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qf,{type:qf},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[qf];o!==void 0&&n(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ID(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vI()||hI()||ay()}}const KD=GD;var g0="@firebase/auth",y0="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XD(t){Ar(new Oi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_I(t)},u=new lM(i,r,s,l);return yM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ar(new Oi("auth-internal",e=>{const n=Hi(e.getProvider("auth").getImmediate());return(i=>new QD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vn(g0,y0,YD(t)),vn(g0,y0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=5*60,ZD=KS("authIdTokenMaxAge")||JD;let v0=null;const e4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ZD)return;const r=n==null?void 0:n.token;v0!==r&&(v0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function t4(t=dh()){const e=Kl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gM(t,{popupRedirectResolver:KD,persistence:[sD,GM,PI]}),i=KS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=e4(s.toString());WM(n,o,()=>o(n.currentUser)),$M(n,a=>o(a))}}const r=qS("auth");return r&&vM(n,`http://${r}`),n}function n4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Vn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",n4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XD("Browser");var _0={};const w0="@firebase/database",E0="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VI="";function i4(t){VI=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Il(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Bi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r4(e)}}catch{}return new s4},Zr=FI("localStorage"),o4=FI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new uh("@firebase/database"),a4=function(){let t=1;return function(){return t++}}(),UI=function(t){const e=AO(t),n=new TO;n.update(e);const i=n.digest();return Xg.encodeByteArray(i)},Zl=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Zl.apply(null,i):typeof i=="object"?e+=yt(i):e+=i,e+=" "}return e};let Qa=null,T0=!0;const l4=function(t,e){q(!e,"Can't turn on custom loggers persistently."),fo.logLevel=le.VERBOSE,Qa=fo.log.bind(fo)},Ot=function(...t){if(T0===!0&&(T0=!1,Qa===null&&o4.get("logging_enabled")===!0&&l4()),Qa){const e=Zl.apply(null,t);Qa(e)}},ec=function(t){return function(...e){Ot(t,...e)}},wm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Zl(...t);fo.error(e)},Di=function(...t){const e=`FIREBASE FATAL ERROR: ${Zl(...t)}`;throw fo.error(e),new Error(e)},an=function(...t){const e="FIREBASE WARNING: "+Zl(...t);fo.warn(e)},c4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&an("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},u4=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Co="[MIN_NAME]",ps="[MAX_NAME]",$o=function(t,e){if(t===e)return 0;if(t===Co||e===ps)return-1;if(e===Co||t===ps)return 1;{const n=S0(t),i=S0(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},d4=function(t,e){return t===e?0:t<e?-1:1},wa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+yt(e))},fy=function(t){if(typeof t!="object"||t===null)return yt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=yt(e[i]),n+=":",n+=fy(t[e[i]]);return n+="}",n},zI=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Sn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const BI=function(t){q(!jI(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(r?1:0),u.reverse();const d=u.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},h4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},f4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},p4=new RegExp("^-?(0*)\\d{1,10}$"),m4=-2147483648,g4=2147483647,S0=function(t){if(p4.test(t)){const e=Number(t);if(e>=m4&&e<=g4)return e}return null},tc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw an("Exception was thrown by user callback.",n),e},Math.floor(0))}},y4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ya=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){an(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ot("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',an(e)}}class Iu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Iu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="5",$I="v",WI="s",HI="r",qI="f",GI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,KI="ls",QI="p",Em="ac",YI="websocket",XI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function w4(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ZI(t,e,n){q(typeof e=="string","typeof type must == string"),q(typeof n=="object","typeof params must == object");let i;if(e===YI)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===XI)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);w4(t)&&(n.ns=t.namespace);const r=[];return Sn(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.counters_={}}incrementCounter(e,n=1){Bi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return sO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf={},Kf={};function my(t){const e=t.toString();return Gf[e]||(Gf[e]=new E4),Gf[e]}function T4(t,e){const n=t.toString();return Kf[n]||(Kf[n]=e()),Kf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&tc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="start",I4="close",b4="pLPCommand",C4="pRTLPCB",eb="id",tb="pw",nb="ser",A4="cb",k4="seg",P4="ts",x4="d",R4="dframe",ib=1870,rb=30,N4=ib-rb,O4=25e3,L4=3e4;class Zs{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ec(e),this.stats_=my(n),this.urlFn=l=>(this.appCheckToken&&(l[Em]=this.appCheckToken),ZI(n,XI,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new S4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(L4)),u4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gy((...s)=>{const[o,a,l,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===I0)this.id=a,this.password=l;else if(o===I4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[I0]="t",i[nb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[A4]=this.scriptTagHolder.uniqueCallbackIdentifier),i[$I]=py,this.transportSessionId&&(i[WI]=this.transportSessionId),this.lastSessionId&&(i[KI]=this.lastSessionId),this.applicationId&&(i[QI]=this.applicationId),this.appCheckToken&&(i[Em]=this.appCheckToken),typeof location<"u"&&location.hostname&&GI.test(location.hostname)&&(i[HI]=qI);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zs.forceAllow_=!0}static forceDisallow(){Zs.forceDisallow_=!0}static isAvailable(){return Zs.forceAllow_?!0:!Zs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!h4()&&!f4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=WS(n),r=zI(i,N4);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[R4]="t",i[eb]=e,i[tb]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=yt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class gy{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=a4(),window[b4+this.uniqueCallbackIdentifier]=e,window[C4+this.uniqueCallbackIdentifier]=n,this.myIFrame=gy.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ot("frame writing exception"),a.stack&&Ot(a.stack),Ot(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ot("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[eb]=this.myID,e[tb]=this.myPW,e[nb]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+rb+i.length<=ib;){const o=this.pendingSegs.shift();i=i+"&"+k4+r+"="+o.seg+"&"+P4+r+"="+o.ts+"&"+x4+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(O4)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ot("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=16384,D4=45e3;let Sd=null;typeof MozWebSocket<"u"?Sd=MozWebSocket:typeof WebSocket<"u"&&(Sd=WebSocket);class Rn{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ec(this.connId),this.stats_=my(n),this.connURL=Rn.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[$I]=py,typeof location<"u"&&location.hostname&&GI.test(location.hostname)&&(o[HI]=qI),n&&(o[WI]=n),i&&(o[KI]=i),r&&(o[Em]=r),s&&(o[QI]=s),ZI(e,YI,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zr.set("previous_websocket_failure",!0);try{let i;YS(),this.mySock=new Sd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Rn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Sd!==null&&!Rn.forceDisallow_}static previouslyFailed(){return Zr.isInMemoryStorage||Zr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Il(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(q(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=zI(n,M4);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(D4))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Rn.responsesRequiredToBeHealthy=2;Rn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Zs,Rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Rn&&Rn.isAvailable();let i=n&&!Rn.previouslyFailed();if(e.webSocketOnly&&(n||an("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Rn];else{const r=this.transports_=[];for(const s of kl.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);kl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}kl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=6e4,F4=5e3,U4=10*1024,j4=100*1024,Qf="t",b0="d",z4="s",C0="r",B4="e",A0="o",k0="a",P0="n",x0="p",$4="h";class W4{constructor(e,n,i,r,s,o,a,l,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ec("c:"+this.id+":"),this.transportManager_=new kl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ya(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>j4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>U4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qf in e){const n=e[Qf];n===k0?this.upgradeIfSecondaryHealthy_():n===C0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===A0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=wa("t",e),i=wa("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:x0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:k0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:P0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=wa("t",e),i=wa("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=wa(Qf,e);if(b0 in e){const i=e[b0];if(n===$4){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===P0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===z4?this.onConnectionShutdown_(i):n===C0?this.onReset_(i):n===B4?wm("Server Error: "+i):n===A0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),py!==i&&an("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ya(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(V4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ya(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(F4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:x0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e){this.allowedEvents_=e,this.listeners_={},q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends ob{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ty()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Id}getInitialEvent(e){return q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=32,N0=768;class Me{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function be(){return new Me("")}function he(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function kr(t){return t.pieces_.length-t.pieceNum_}function Oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Me(t.pieces_,e)}function ab(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function H4(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function lb(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function cb(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Me(e,0)}function ht(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Me)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Me(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function gn(t,e){const n=he(t),i=he(e);if(n===null)return e;if(n===i)return gn(Oe(t),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ub(t,e){if(kr(t)!==kr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function On(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(kr(t)>kr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class q4{constructor(e,n){this.errorPrefix_=n,this.parts_=lb(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ch(this.parts_[i]);db(this)}}function G4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ch(e),db(t)}function K4(t){const e=t.parts_.pop();t.byteLength_-=ch(e),t.parts_.length>0&&(t.byteLength_-=1)}function db(t){if(t.byteLength_>N0)throw new Error(t.errorPrefix_+"has a key path longer than "+N0+" bytes ("+t.byteLength_+").");if(t.parts_.length>R0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+R0+") or object contains a cycle "+qr(t))}function qr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends ob{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new yy}getInitialEvent(e){return q(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=1e3,Q4=60*5*1e3,O0=30*1e3,Y4=1.3,X4=3e4,J4="server_kill",L0=3;class Ci extends sb{constructor(e,n,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ci.nextPersistentConnectionId_++,this.log_=ec("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ea,this.maxReconnectDelay_=Q4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!YS())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Id.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(yt(s)),q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Zg,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),q(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;Ci.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Bi(e,"w")){const i=bo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();an(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||EO(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=O0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=wO(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+yt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wm("Unrecognized action received from server: "+yt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>X4&&(this.reconnectDelay_=Ea),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Y4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ci.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},u=function(h){q(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Ot("getToken() completed but was canceled"):(Ot("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new W4(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,g=>{an(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(J4)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&an(h),l())}}}interrupt(e){Ot("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ot("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dm(this.interruptReasons_)&&(this.reconnectDelay_=Ea,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>fy(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Me(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Ot("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=L0&&(this.reconnectDelay_=O0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ot("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=L0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+VI.replace(/\./g,"-")]=1,ty()?e["framework.cordova"]=1:QS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Id.getInstance().currentlyOnline();return dm(this.interruptReasons_)&&e}}Ci.nextPersistentConnectionId_=0;Ci.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new fe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new fe(Co,e),r=new fe(Co,n);return this.compare(i,r)!==0}minPost(){return fe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc;class hb extends gh{static get __EMPTY_NODE(){return Jc}static set __EMPTY_NODE(e){Jc=e}compare(e,n){return $o(e.name,n.name)}isDefinedOn(e){throw jo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return fe.MIN}maxPost(){return new fe(ps,Jc)}makePost(e,n){return q(typeof e=="string","KeyIndex indexValue must always be a string."),new fe(e,Jc)}toString(){return".key"}}const po=new hb;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},tn=class La{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??La.RED,this.left=r??Gn.EMPTY_NODE,this.right=s??Gn.EMPTY_NODE}copy(e,n,i,r,s){return new La(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Gn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,La.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,La.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};tn.RED=!0;tn.BLACK=!1;class Z4{copy(e,n,i,r,s){return this}insert(e,n,i){return new tn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Gn=class bu{constructor(e,n=bu.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new bu(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tn.BLACK,null,null))}remove(e){return new bu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tn.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Zc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Zc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Zc(this.root_,null,this.comparator_,!0,e)}};Gn.EMPTY_NODE=new Z4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t,e){return $o(t.name,e.name)}function vy(t,e){return $o(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm;function tV(t){Tm=t}const fb=function(t){return typeof t=="number"?"number:"+BI(t):"string:"+t},pb=function(t){if(t.isLeafNode()){const e=t.val();q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bi(e,".sv"),"Priority must be a string or number.")}else q(t===Tm||t.isEmpty(),"priority of unexpected type.");q(t===Tm||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M0;class lt{constructor(e,n=lt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pb(this.priorityNode_)}static set __childrenNodeConstructor(e){M0=e}static get __childrenNodeConstructor(){return M0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new lt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ue(e)?this:he(e)===".priority"?this.priorityNode_:lt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:lt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=he(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(q(i!==".priority"||kr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,lt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fb(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=BI(this.value_):e+=this.value_,this.lazyHash_=UI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===lt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof lt.__childrenNodeConstructor?-1:(q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=lt.VALUE_TYPE_ORDER.indexOf(n),s=lt.VALUE_TYPE_ORDER.indexOf(i);return q(r>=0,"Unknown leaf type: "+n),q(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}lt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mb,gb;function nV(t){mb=t}function iV(t){gb=t}class rV extends gh{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?$o(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return fe.MIN}maxPost(){return new fe(ps,new lt("[PRIORITY-POST]",gb))}makePost(e,n){const i=mb(e);return new fe(n,new lt("[PRIORITY-POST]",i))}toString(){return".priority"}}const Dt=new rV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=Math.log(2);class oV{constructor(e){const n=s=>parseInt(Math.log(s)/sV,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bd=function(t,e,n,i){t.sort(e);const r=function(l,u){const d=u-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new tn(f,h.node,tn.BLACK,null,null);{const g=parseInt(d/2,10)+l,_=r(l,g),E=r(g+1,u);return h=t[g],f=n?n(h):h,new tn(f,h.node,tn.BLACK,_,E)}},s=function(l){let u=null,d=null,h=t.length;const f=function(_,E){const A=h-_,v=h;h-=_;const y=r(A+1,v),w=t[A],P=n?n(w):w;g(new tn(P,w.node,E,null,y))},g=function(_){u?(u.left=_,u=_):(d=_,u=_)};for(let _=0;_<l.count;++_){const E=l.nextBitIsOne(),A=Math.pow(2,l.count-(_+1));E?f(A,tn.BLACK):(f(A,tn.BLACK),f(A,tn.RED))}return d},o=new oV(t.length),a=s(o);return new Gn(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf;const Os={};class Ei{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return q(Os&&Dt,"ChildrenNode.ts has not been loaded"),Yf=Yf||new Ei({".priority":Os},{".priority":Dt}),Yf}get(e){const n=bo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gn?n:null}hasIndex(e){return Bi(this.indexSet_,e.toString())}addIndex(e,n){q(e!==po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(fe.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=bd(i,e.getCompare()):a=Os;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new Ei(d,u)}addToIndexes(e,n){const i=pd(this.indexes_,(r,s)=>{const o=bo(this.indexSet_,s);if(q(o,"Missing index implementation for "+s),r===Os)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(fe.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),bd(a,o.getCompare())}else return Os;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new fe(e.name,a))),l.insert(e,e.node)}});return new Ei(i,this.indexSet_)}removeFromIndexes(e,n){const i=pd(this.indexes_,r=>{if(r===Os)return r;{const s=n.get(e.name);return s?r.remove(new fe(e.name,s)):r}});return new Ei(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta;class Te{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pb(this.priorityNode_),this.children_.isEmpty()&&q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ta||(Ta=new Te(new Gn(vy),null,Ei.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ta}updatePriority(e){return this.children_.isEmpty()?this:new Te(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ta:n}}getChild(e){const n=he(e);return n===null?this:this.getImmediateChild(n).getChild(Oe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(q(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new fe(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?Ta:this.priorityNode_;return new Te(r,o,s)}}updateChild(e,n){const i=he(e);if(i===null)return n;{q(he(e)!==".priority"||kr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Oe(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(Dt,(o,a)=>{n[o]=a.val(e),i++,s&&Te.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fb(this.getPriority().val())+":"),this.forEachChild(Dt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":UI(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new fe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new fe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new fe(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,fe.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,fe.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nc?-1:0}withIndex(e){if(e===po||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Te(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===po||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Dt),r=n.getIterator(Dt);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===po?null:this.indexMap_.get(e.toString())}}Te.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class aV extends Te{constructor(){super(new Gn(vy),Te.EMPTY_NODE,Ei.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Te.EMPTY_NODE}isEmpty(){return!1}}const nc=new aV;Object.defineProperties(fe,{MIN:{value:new fe(Co,Te.EMPTY_NODE)},MAX:{value:new fe(ps,nc)}});hb.__EMPTY_NODE=Te.EMPTY_NODE;lt.__childrenNodeConstructor=Te;tV(nc);iV(nc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=!0;function Lt(t,e=null){if(t===null)return Te.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new lt(n,Lt(e))}if(!(t instanceof Array)&&lV){const n=[];let i=!1;if(Sn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Lt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new fe(o,l)))}}),n.length===0)return Te.EMPTY_NODE;const s=bd(n,eV,o=>o.name,vy);if(i){const o=bd(n,Dt.getCompare());return new Te(s,Lt(e),new Ei({".priority":o},{".priority":Dt}))}else return new Te(s,Lt(e),Ei.Default)}else{let n=Te.EMPTY_NODE;return Sn(t,(i,r)=>{if(Bi(t,i)&&i.substring(0,1)!=="."){const s=Lt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Lt(e))}}nV(Lt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV extends gh{constructor(e){super(),this.indexPath_=e,q(!ue(e)&&he(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?$o(e.name,n.name):s}makePost(e,n){const i=Lt(e),r=Te.EMPTY_NODE.updateChild(this.indexPath_,i);return new fe(n,r)}maxPost(){const e=Te.EMPTY_NODE.updateChild(this.indexPath_,nc);return new fe(ps,e)}toString(){return lb(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV extends gh{compare(e,n){const i=e.node.compareTo(n.node);return i===0?$o(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return fe.MIN}maxPost(){return fe.MAX}makePost(e,n){const i=Lt(e);return new fe(n,i)}toString(){return".value"}}const dV=new uV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){return{type:"value",snapshotNode:t}}function fV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pV(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function D0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function mV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Co}hasEnd(){return this.endSet_}getIndexEndValue(){return q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ps}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dt}copy(){const e=new _y;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function V0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Dt?n="$priority":t.index_===dV?n="$value":t.index_===po?n="$key":(q(t.index_ instanceof cV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=yt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=yt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+yt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=yt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+yt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function F0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Dt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends sb{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=ec("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Cd.getListenId_(e,i),a={};this.listens_[o]=a;const l=V0(e._queryParams);this.restRequest_(s+".json",l,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,i),bo(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",r(f,null)}})}unlisten(e,n){const i=Cd.getListenId_(e,n);delete this.listens_[i]}get(e){const n=V0(e._queryParams),i=e._path.toString(),r=new Zg;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zo(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Il(a.responseText)}catch{an("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&an("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.rootNode_=Te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(){return{value:null,children:new Map}}function yb(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=he(e);t.children.has(i)||t.children.set(i,Ad());const r=t.children.get(i);e=Oe(e),yb(r,e,n)}}function Sm(t,e,n){t.value!==null?n(e,t.value):yV(t,(i,r)=>{const s=new Me(e.toString()+"/"+i);Sm(r,s,n)})}function yV(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Sn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=10*1e3,_V=30*1e3,wV=5*60*1e3;class EV{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new vV(e);const i=U0+(_V-U0)*Math.random();Ya(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;Sn(e,(r,s)=>{s>0&&Bi(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Ya(this.reportStats_.bind(this),Math.floor(Math.random()*2*wV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Kn||(Kn={}));function vb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _b(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function wb(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Kn.ACK_USER_WRITE,this.source=vb()}operationForChild(e){if(ue(this.path)){if(this.affectedTree.value!=null)return q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Me(e));return new kd(be(),n,this.revert)}}else return q(he(this.path)===e,"operationForChild called for unrelated child."),new kd(Oe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Kn.OVERWRITE}operationForChild(e){return ue(this.path)?new ms(this.source,be(),this.snap.getImmediateChild(e)):new ms(this.source,Oe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Kn.MERGE}operationForChild(e){if(ue(this.path)){const n=this.children.subtree(new Me(e));return n.isEmpty()?null:n.value?new ms(this.source,be(),n.value):new Pl(this.source,be(),n)}else return q(he(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pl(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=he(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function TV(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(mV(o.childName,o.snapshotNode))}),Sa(t,r,"child_removed",e,i,n),Sa(t,r,"child_added",e,i,n),Sa(t,r,"child_moved",s,i,n),Sa(t,r,"child_changed",e,i,n),Sa(t,r,"value",e,i,n),r}function Sa(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>IV(t,a,l)),o.forEach(a=>{const l=SV(t,a,s);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function SV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function IV(t,e,n){if(e.childName==null||n.childName==null)throw jo("Should only compare child_ events.");const i=new fe(e.childName,e.snapshotNode),r=new fe(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(t,e){return{eventCache:t,serverCache:e}}function Xa(t,e,n,i){return Eb(new wy(e,n,i),t.serverCache)}function Tb(t,e,n,i){return Eb(t.eventCache,new wy(e,n,i))}function Im(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function gs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf;const bV=()=>(Xf||(Xf=new Gn(d4)),Xf);class Ne{constructor(e,n=bV()){this.value=e,this.children=n}static fromObject(e){let n=new Ne(null);return Sn(e,(i,r)=>{n=n.set(new Me(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:be(),value:this.value};if(ue(e))return null;{const i=he(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(Oe(e),n);return s!=null?{path:ht(new Me(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{const n=he(e),i=this.children.get(n);return i!==null?i.subtree(Oe(e)):new Ne(null)}}set(e,n){if(ue(e))return new Ne(n,this.children);{const i=he(e),s=(this.children.get(i)||new Ne(null)).set(Oe(e),n),o=this.children.insert(i,s);return new Ne(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new Ne(null):new Ne(null,this.children);{const n=he(e),i=this.children.get(n);if(i){const r=i.remove(Oe(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new Ne(null):new Ne(this.value,s)}else return this}}get(e){if(ue(e))return this.value;{const n=he(e),i=this.children.get(n);return i?i.get(Oe(e)):null}}setTree(e,n){if(ue(e))return n;{const i=he(e),s=(this.children.get(i)||new Ne(null)).setTree(Oe(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new Ne(this.value,o)}}fold(e){return this.fold_(be(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ht(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,be(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(ue(e))return null;{const s=he(e),o=this.children.get(s);return o?o.findOnPath_(Oe(e),ht(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,be(),n)}foreachOnPath_(e,n,i){if(ue(e))return this;{this.value&&i(n,this.value);const r=he(e),s=this.children.get(r);return s?s.foreachOnPath_(Oe(e),ht(n,r),i):new Ne(null)}}foreach(e){this.foreach_(be(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ht(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.writeTree_=e}static empty(){return new Fn(new Ne(null))}}function Ja(t,e,n){if(ue(e))return new Fn(new Ne(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=gn(r,e);return s=s.updateChild(o,n),new Fn(t.writeTree_.set(r,s))}else{const r=new Ne(n),s=t.writeTree_.setTree(e,r);return new Fn(s)}}}function j0(t,e,n){let i=t;return Sn(n,(r,s)=>{i=Ja(i,ht(e,r),s)}),i}function z0(t,e){if(ue(e))return Fn.empty();{const n=t.writeTree_.setTree(e,new Ne(null));return new Fn(n)}}function bm(t,e){return Is(t,e)!=null}function Is(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(gn(n.path,e)):null}function B0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Dt,(i,r)=>{e.push(new fe(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new fe(i,r.value))}),e}function Sr(t,e){if(ue(e))return t;{const n=Is(t,e);return n!=null?new Fn(new Ne(n)):new Fn(t.writeTree_.subtree(e))}}function Cm(t){return t.writeTree_.isEmpty()}function Ao(t,e){return Sb(be(),t.writeTree_,e)}function Sb(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(q(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=Sb(ht(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ht(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e){return Pb(e,t)}function CV(t,e,n,i,r){q(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Ja(t.visibleWrites,e,n)),t.lastWriteId=i}function AV(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function kV(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);q(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&PV(a,i.path)?r=!1:On(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return xV(t),!0;if(i.snap)t.visibleWrites=z0(t.visibleWrites,i.path);else{const a=i.children;Sn(a,l=>{t.visibleWrites=z0(t.visibleWrites,ht(i.path,l))})}return!0}else return!1}function PV(t,e){if(t.snap)return On(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&On(ht(t.path,n),e))return!0;return!1}function xV(t){t.visibleWrites=bb(t.allWrites,RV,be()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function RV(t){return t.visible}function bb(t,e,n){let i=Fn.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)On(n,o)?(a=gn(n,o),i=Ja(i,a,s.snap)):On(o,n)&&(a=gn(o,n),i=Ja(i,be(),s.snap.getChild(a)));else if(s.children){if(On(n,o))a=gn(n,o),i=j0(i,a,s.children);else if(On(o,n))if(a=gn(o,n),ue(a))i=j0(i,be(),s.children);else{const l=bo(s.children,he(a));if(l){const u=l.getChild(Oe(a));i=Ja(i,be(),u)}}}else throw jo("WriteRecord should have .snap or .children")}}return i}function Cb(t,e,n,i,r){if(!i&&!r){const s=Is(t.visibleWrites,e);if(s!=null)return s;{const o=Sr(t.visibleWrites,e);if(Cm(o))return n;if(n==null&&!bm(o,be()))return null;{const a=n||Te.EMPTY_NODE;return Ao(o,a)}}}else{const s=Sr(t.visibleWrites,e);if(!r&&Cm(s))return n;if(!r&&n==null&&!bm(s,be()))return null;{const o=function(u){return(u.visible||r)&&(!i||!~i.indexOf(u.writeId))&&(On(u.path,e)||On(e,u.path))},a=bb(t.allWrites,o,e),l=n||Te.EMPTY_NODE;return Ao(a,l)}}}function NV(t,e,n){let i=Te.EMPTY_NODE;const r=Is(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Dt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=Sr(t.visibleWrites,e);return n.forEachChild(Dt,(o,a)=>{const l=Ao(Sr(s,new Me(o)),a);i=i.updateImmediateChild(o,l)}),B0(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=Sr(t.visibleWrites,e);return B0(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function OV(t,e,n,i,r){q(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ht(e,n);if(bm(t.visibleWrites,s))return null;{const o=Sr(t.visibleWrites,s);return Cm(o)?r.getChild(n):Ao(o,r.getChild(n))}}function LV(t,e,n,i){const r=ht(e,n),s=Is(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=Sr(t.visibleWrites,r);return Ao(o,i.getNode().getImmediateChild(n))}else return null}function MV(t,e){return Is(t.visibleWrites,e)}function DV(t,e,n,i,r,s,o){let a;const l=Sr(t.visibleWrites,e),u=Is(l,be());if(u!=null)a=u;else if(n!=null)a=Ao(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let g=f.getNext();for(;g&&d.length<r;)h(g,i)!==0&&d.push(g),g=f.getNext();return d}else return[]}function VV(){return{visibleWrites:Fn.empty(),allWrites:[],lastWriteId:-1}}function Am(t,e,n,i){return Cb(t.writeTree,t.treePath,e,n,i)}function Ab(t,e){return NV(t.writeTree,t.treePath,e)}function $0(t,e,n,i){return OV(t.writeTree,t.treePath,e,n,i)}function Pd(t,e){return MV(t.writeTree,ht(t.treePath,e))}function FV(t,e,n,i,r,s){return DV(t.writeTree,t.treePath,e,n,i,r,s)}function Ey(t,e,n){return LV(t.writeTree,t.treePath,e,n)}function kb(t,e){return Pb(ht(t.treePath,e),t.writeTree)}function Pb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),q(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,D0(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,pV(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,fV(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,D0(i,e.snapshotNode,r.oldSnap));else throw jo("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const xb=new jV;class Ty{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new wy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ey(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gs(this.viewCache_),s=FV(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}function zV(t,e){q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function BV(t,e,n,i,r){const s=new UV;let o,a;if(n.type===Kn.OVERWRITE){const u=n;u.source.fromUser?o=km(t,e,u.path,u.snap,i,r,s):(q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ue(u.path),o=xd(t,e,u.path,u.snap,i,r,a,s))}else if(n.type===Kn.MERGE){const u=n;u.source.fromUser?o=WV(t,e,u.path,u.children,i,r,s):(q(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Pm(t,e,u.path,u.children,i,r,a,s))}else if(n.type===Kn.ACK_USER_WRITE){const u=n;u.revert?o=GV(t,e,u.path,i,r,s):o=HV(t,e,u.path,u.affectedTree,i,r,s)}else if(n.type===Kn.LISTEN_COMPLETE)o=qV(t,e,n.path,i,s);else throw jo("Unknown operation type: "+n.type);const l=s.getChanges();return $V(e,o,l),{viewCache:o,changes:l}}function $V(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Im(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(hV(Im(e)))}}function Rb(t,e,n,i,r,s){const o=e.eventCache;if(Pd(i,n)!=null)return e;{let a,l;if(ue(n))if(q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=gs(e),d=u instanceof Te?u:Te.EMPTY_NODE,h=Ab(i,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=Am(i,gs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=he(n);if(u===".priority"){q(kr(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=$0(i,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=Oe(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=$0(i,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=Ey(i,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,r,s):a=o.getNode()}}return Xa(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function xd(t,e,n,i,r,s,o,a){const l=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(ue(n))u=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,i);u=d.updateFullNode(l.getNode(),g,null)}else{const g=he(n);if(!l.isCompleteForPath(n)&&kr(n)>1)return e;const _=Oe(n),A=l.getNode().getImmediateChild(g).updateChild(_,i);g===".priority"?u=d.updatePriority(l.getNode(),A):u=d.updateChild(l.getNode(),g,A,_,xb,null)}const h=Tb(e,u,l.isFullyInitialized()||ue(n),d.filtersNodes()),f=new Ty(r,h,s);return Rb(t,h,n,r,f,a)}function km(t,e,n,i,r,s,o){const a=e.eventCache;let l,u;const d=new Ty(r,e,s);if(ue(n))u=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Xa(e,u,!0,t.filter.filtersNodes());else{const h=he(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),i),l=Xa(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=Oe(n),g=a.getNode().getImmediateChild(h);let _;if(ue(f))_=i;else{const E=d.getCompleteChild(h);E!=null?ab(f)===".priority"&&E.getChild(cb(f)).isEmpty()?_=E:_=E.updateChild(f,i):_=Te.EMPTY_NODE}if(g.equals(_))l=e;else{const E=t.filter.updateChild(a.getNode(),h,_,f,d,o);l=Xa(e,E,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function W0(t,e){return t.eventCache.isCompleteForChild(e)}function WV(t,e,n,i,r,s,o){let a=e;return i.foreach((l,u)=>{const d=ht(n,l);W0(e,he(d))&&(a=km(t,a,d,u,r,s,o))}),i.foreach((l,u)=>{const d=ht(n,l);W0(e,he(d))||(a=km(t,a,d,u,r,s,o))}),a}function H0(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Pm(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;ue(n)?u=i:u=new Ne(null).setTree(n,i);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const g=e.serverCache.getNode().getImmediateChild(h),_=H0(t,g,f);l=xd(t,l,new Me(h),_,r,s,o,a)}}),u.children.inorderTraversal((h,f)=>{const g=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!g){const _=e.serverCache.getNode().getImmediateChild(h),E=H0(t,_,f);l=xd(t,l,new Me(h),E,r,s,o,a)}}),l}function HV(t,e,n,i,r,s,o){if(Pd(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(ue(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return xd(t,e,n,l.getNode().getChild(n),r,s,a,o);if(ue(n)){let u=new Ne(null);return l.getNode().forEachChild(po,(d,h)=>{u=u.set(new Me(d),h)}),Pm(t,e,n,u,r,s,a,o)}else return e}else{let u=new Ne(null);return i.foreach((d,h)=>{const f=ht(n,d);l.isCompleteForPath(f)&&(u=u.set(d,l.getNode().getChild(f)))}),Pm(t,e,n,u,r,s,a,o)}}function qV(t,e,n,i,r){const s=e.serverCache,o=Tb(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered());return Rb(t,o,n,i,xb,r)}function GV(t,e,n,i,r,s){let o;if(Pd(i,n)!=null)return e;{const a=new Ty(i,e,r),l=e.eventCache.getNode();let u;if(ue(n)||he(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Am(i,gs(e));else{const h=e.serverCache.getNode();q(h instanceof Te,"serverChildren would be complete if leaf node"),d=Ab(i,h)}d=d,u=t.filter.updateFullNode(l,d,s)}else{const d=he(n);let h=Ey(i,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?u=t.filter.updateChild(l,d,h,Oe(n),a,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(l,d,Te.EMPTY_NODE,Oe(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Am(i,gs(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Pd(i,be())!=null,Xa(e,u,o,t.filter.filtersNodes())}}function KV(t,e){const n=gs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(he(e)).isEmpty())?n.getChild(e):null}function q0(t,e,n,i){e.type===Kn.MERGE&&e.source.queryId!==null&&(q(gs(t.viewCache_),"We should always have a full cache before handling merges"),q(Im(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=BV(t.processor_,r,e,n,i);return zV(t.processor_,s.viewCache),q(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,QV(t,s.changes,s.viewCache.eventCache.getNode())}function QV(t,e,n,i){const r=t.eventRegistrations_;return TV(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G0;function YV(t){q(!G0,"__referenceConstructor has already been defined"),G0=t}function Sy(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return q(s!=null,"SyncTree gave us an op for an invalid query."),q0(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(q0(o,e,n,i));return s}}function Iy(t,e){let n=null;for(const i of t.views.values())n=n||KV(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K0;function XV(t){q(!K0,"__referenceConstructor has already been defined"),K0=t}class Q0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ne(null),this.pendingWriteTree_=VV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JV(t,e,n,i,r){return CV(t.pendingWriteTree_,e,n,i,r),r?vh(t,new ms(vb(),e,n)):[]}function eo(t,e,n=!1){const i=AV(t.pendingWriteTree_,e);if(kV(t.pendingWriteTree_,e)){let s=new Ne(null);return i.snap!=null?s=s.set(be(),!0):Sn(i.children,o=>{s=s.set(new Me(o),!0)}),vh(t,new kd(i.path,s,n))}else return[]}function yh(t,e,n){return vh(t,new ms(_b(),e,n))}function ZV(t,e,n){const i=Ne.fromObject(n);return vh(t,new Pl(_b(),e,i))}function e5(t,e,n,i){const r=Mb(t,i);if(r!=null){const s=Db(r),o=s.path,a=s.queryId,l=gn(o,e),u=new ms(wb(a),l,n);return Vb(t,o,u)}else return[]}function t5(t,e,n,i){const r=Mb(t,i);if(r){const s=Db(r),o=s.path,a=s.queryId,l=gn(o,e),u=Ne.fromObject(n),d=new Pl(wb(a),l,u);return Vb(t,o,d)}else return[]}function Nb(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=gn(o,e),u=Iy(a,l);if(u)return u});return Cb(r,e,s,n,!0)}function vh(t,e){return Ob(e,t.syncPointTree_,null,Ib(t.pendingWriteTree_,be()))}function Ob(t,e,n,i){if(ue(t.path))return Lb(t,e,n,i);{const r=e.get(be());n==null&&r!=null&&(n=Iy(r,be()));let s=[];const o=he(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,d=kb(i,o);s=s.concat(Ob(a,l,u,d))}return r&&(s=s.concat(Sy(r,t,i,n))),s}}function Lb(t,e,n,i){const r=e.get(be());n==null&&r!=null&&(n=Iy(r,be()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=kb(i,o),d=t.operationForChild(o);d&&(s=s.concat(Lb(d,a,l,u)))}),r&&(s=s.concat(Sy(r,t,i,n))),s}function Mb(t,e){return t.tagToQueryMap.get(e)}function Db(t){const e=t.indexOf("$");return q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Me(t.substr(0,e))}}function Vb(t,e,n){const i=t.syncPointTree_.get(e);q(i,"Missing sync point for query tag that we're tracking");const r=Ib(t.pendingWriteTree_,e);return Sy(i,n,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new by(n)}node(){return this.node_}}class Cy{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ht(this.path_,e);return new Cy(this.syncTree_,n)}node(){return Nb(this.syncTree_,this.path_)}}const n5=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Y0=function(t,e,n){if(!t||typeof t!="object")return t;if(q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return i5(t[".sv"],e,n);if(typeof t[".sv"]=="object")return r5(t[".sv"],e);q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},i5=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:q(!1,"Unexpected server value: "+t)}},r5=function(t,e,n){t.hasOwnProperty("increment")||q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&q(!1,"Unexpected increment value: "+i);const r=e.node();if(q(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},s5=function(t,e,n,i){return Ay(e,new Cy(n,t),i)},o5=function(t,e,n){return Ay(t,new by(e),n)};function Ay(t,e,n){const i=t.getPriority().val(),r=Y0(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Y0(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new lt(a,Lt(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new lt(r))),o.forEachChild(Dt,(a,l)=>{const u=Ay(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Py(t,e){let n=e instanceof Me?e:new Me(e),i=t,r=he(n);for(;r!==null;){const s=bo(i.node.children,r)||{children:{},childCount:0};i=new ky(r,i,s),n=Oe(n),r=he(n)}return i}function Wo(t){return t.node.value}function Fb(t,e){t.node.value=e,xm(t)}function Ub(t){return t.node.childCount>0}function a5(t){return Wo(t)===void 0&&!Ub(t)}function _h(t,e){Sn(t.node.children,(n,i)=>{e(new ky(n,t,i))})}function jb(t,e,n,i){n&&!i&&e(t),_h(t,r=>{jb(r,e,!0,i)}),n&&i&&e(t)}function l5(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ic(t){return new Me(t.parent===null?t.name:ic(t.parent)+"/"+t.name)}function xm(t){t.parent!==null&&c5(t.parent,t.name,t)}function c5(t,e,n){const i=a5(n),r=Bi(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,xm(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,xm(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=/[\[\].#$\/\u0000-\u001F\u007F]/,d5=/[\[\].#$\u0000-\u001F\u007F]/,Jf=10*1024*1024,zb=function(t){return typeof t=="string"&&t.length!==0&&!u5.test(t)},h5=function(t){return typeof t=="string"&&t.length!==0&&!d5.test(t)},f5=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),h5(t)},Bb=function(t,e,n){const i=n instanceof Me?new q4(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qr(i));if(typeof e=="function")throw new Error(t+"contains a function "+qr(i)+" with contents = "+e.toString());if(jI(e))throw new Error(t+"contains "+e.toString()+" "+qr(i));if(typeof e=="string"&&e.length>Jf/3&&ch(e)>Jf)throw new Error(t+"contains a string greater than "+Jf+" utf8 bytes "+qr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Sn(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!zb(o)))throw new Error(t+" contains an invalid key ("+o+") "+qr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);G4(i,o),Bb(t,a,i),K4(i)}),r&&s)throw new Error(t+' contains ".value" child '+qr(i)+" in addition to actual children.")}},p5=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zb(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!f5(n))throw new Error(CO(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function g5(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!ub(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function bs(t,e,n){g5(t,n),y5(t,i=>On(i,e)||On(e,i))}function y5(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(v5(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function v5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Qa&&Ot("event: "+n.toString()),tc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5="repo_interrupt",w5=25;class E5{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new m5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ad(),this.transactionQueueTree_=new ky,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function T5(t,e,n){if(t.stats_=my(t.repoInfo_),t.forceRestClient_||y4())t.server_=new Cd(t.repoInfo_,(i,r,s,o)=>{X0(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>J0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Ci(t.repoInfo_,e,(i,r,s,o)=>{X0(t,i,r,s,o)},i=>{J0(t,i)},i=>{I5(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=T4(t.repoInfo_,()=>new EV(t.stats_,t.server_)),t.infoData_=new gV,t.infoSyncTree_=new Q0({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=yh(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),xy(t,"connected",!1),t.serverSyncTree_=new Q0({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const u=o(a,l);bs(t.eventQueue_,i._path,u)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function S5(t){const n=t.infoData_.getNode(new Me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function $b(t){return n5({timestamp:S5(t)})}function X0(t,e,n,i,r){t.dataUpdateCount++;const s=new Me(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=pd(n,u=>Lt(u));o=t5(t.serverSyncTree_,s,l,r)}else{const l=Lt(n);o=e5(t.serverSyncTree_,s,l,r)}else if(i){const l=pd(n,u=>Lt(u));o=ZV(t.serverSyncTree_,s,l)}else{const l=Lt(n);o=yh(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Ny(t,s)),bs(t.eventQueue_,a,o)}function J0(t,e){xy(t,"connected",e),e===!1&&C5(t)}function I5(t,e){Sn(e,(n,i)=>{xy(t,n,i)})}function xy(t,e,n){const i=new Me("/.info/"+e),r=Lt(n);t.infoData_.updateSnapshot(i,r);const s=yh(t.infoSyncTree_,i,r);bs(t.eventQueue_,i,s)}function b5(t){return t.nextWriteId_++}function C5(t){Wb(t,"onDisconnectEvents");const e=$b(t),n=Ad();Sm(t.onDisconnect_,be(),(r,s)=>{const o=s5(r,s,t.serverSyncTree_,e);yb(n,r,o)});let i=[];Sm(n,be(),(r,s)=>{i=i.concat(yh(t.serverSyncTree_,r,s));const o=x5(t,r);Ny(t,o)}),t.onDisconnect_=Ad(),bs(t.eventQueue_,be(),i)}function A5(t){t.persistentConnection_&&t.persistentConnection_.interrupt(_5)}function Wb(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ot(n,...e)}function Hb(t,e,n){return Nb(t.serverSyncTree_,e,n)||Te.EMPTY_NODE}function Ry(t,e=t.transactionQueueTree_){if(e||wh(t,e),Wo(e)){const n=Gb(t,e);q(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&k5(t,ic(e),n)}else Ub(e)&&_h(e,n=>{Ry(t,n)})}function k5(t,e,n){const i=n.map(u=>u.currentWriteId),r=Hb(t,e,i);let s=r;const o=r.hash();for(let u=0;u<n.length;u++){const d=n[u];q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=gn(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Wb(t,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(eo(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();wh(t,Py(t.transactionQueueTree_,e)),Ry(t,t.transactionQueueTree_),bs(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)tc(h[f])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{an("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}Ny(t,e)}},o)}function Ny(t,e){const n=qb(t,e),i=ic(n),r=Gb(t,n);return P5(t,r,i),i}function P5(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=gn(n,l.path);let d=!1,h;if(q(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,r=r.concat(eo(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=w5)d=!0,h="maxretry",r=r.concat(eo(t.serverSyncTree_,l.currentWriteId,!0));else{const f=Hb(t,l.path,o);l.currentInputSnapshot=f;const g=e[a].update(f.val());if(g!==void 0){Bb("transaction failed: Data returned ",g,l.path);let _=Lt(g);typeof g=="object"&&g!=null&&Bi(g,".priority")||(_=_.updatePriority(f.getPriority()));const A=l.currentWriteId,v=$b(t),y=o5(_,f,v);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=y,l.currentWriteId=b5(t),o.splice(o.indexOf(A),1),r=r.concat(JV(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),r=r.concat(eo(t.serverSyncTree_,A,!0))}else d=!0,h="nodata",r=r.concat(eo(t.serverSyncTree_,l.currentWriteId,!0))}bs(t.eventQueue_,n,r),r=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}wh(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)tc(i[a]);Ry(t,t.transactionQueueTree_)}function qb(t,e){let n,i=t.transactionQueueTree_;for(n=he(e);n!==null&&Wo(i)===void 0;)i=Py(i,n),e=Oe(e),n=he(e);return i}function Gb(t,e){const n=[];return Kb(t,e,n),n.sort((i,r)=>i.order-r.order),n}function Kb(t,e,n){const i=Wo(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);_h(e,r=>{Kb(t,r,n)})}function wh(t,e){const n=Wo(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Fb(e,n.length>0?n:void 0)}_h(e,i=>{wh(t,i)})}function x5(t,e){const n=ic(qb(t,e)),i=Py(t.transactionQueueTree_,e);return l5(i,r=>{Zf(t,r)}),Zf(t,i),jb(i,r=>{Zf(t,r)}),n}function Zf(t,e){const n=Wo(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(q(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(q(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(eo(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Fb(e,void 0):n.length=s+1,bs(t.eventQueue_,ic(e),r);for(let o=0;o<i.length;o++)tc(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function N5(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):an(`Invalid query segment '${n}' in query '${t}'`)}return e}const Z0=function(t,e){const n=O5(t),i=n.namespace;n.domain==="firebase.com"&&Di(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||c4();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new JI(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Me(n.pathString)}},O5=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(r=R5(t.substring(d,h)));const f=N5(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const _=e.indexOf(".");i=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=i}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ue(this._path)?null:ab(this._path)}get ref(){return new Ho(this._repo,this._path)}get _queryIdentifier(){const e=F0(this._queryParams),n=fy(e);return n==="{}"?"default":n}get _queryObject(){return F0(this._queryParams)}isEqual(e){if(e=Tt(e),!(e instanceof Oy))return!1;const n=this._repo===e._repo,i=ub(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+H4(this._path)}}class Ho extends Oy{constructor(e,n){super(e,n,new _y,!1)}get parent(){const e=cb(this._path);return e===null?null:new Ho(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}YV(Ho);XV(Ho);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="FIREBASE_DATABASE_EMULATOR_HOST",Rm={};let M5=!1;function D5(t,e,n,i){t.repoInfo_=new JI(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function V5(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ot("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Z0(s,r),a=o.repoInfo,l;typeof process<"u"&&_0&&(l=_0[L5]),l?(s=`http://${l}?ns=${a.namespace}`,o=Z0(s,r),a=o.repoInfo):o.repoInfo.secure;const u=new _4(t.name,t.options,e);p5("Invalid Firebase Database URL",o),ue(o.path)||Di("Database URL must point to the root of a Firebase Database (not including a child path).");const d=U5(a,t,u,new v4(t.name,n));return new j5(d,t)}function F5(t,e){const n=Rm[e];(!n||n[t.key]!==t)&&Di(`Database ${e}(${t.repoInfo_}) has already been deleted.`),A5(t),delete n[t.key]}function U5(t,e,n,i){let r=Rm[e.name];r||(r={},Rm[e.name]=r);let s=r[t.toURLString()];return s&&Di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new E5(t,M5,n,i),r[t.toURLString()]=s,s}class j5{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(T5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ho(this._repo,be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(F5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Di("Cannot call "+e+" on a deleted database.")}}function z5(t=dh(),e){const n=Kl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=Jg("database");i&&B5(n,...i)}return n}function B5(t,e,n,i={}){t=Tt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Di("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Di('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Iu(Iu.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:ey(i.mockUserToken,t.app.options.projectId);s=new Iu(o)}D5(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t){i4(Vr),Ar(new Oi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return V5(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),vn(w0,E0,t),vn(w0,E0,"esm2017")}Ci.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ci.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};$5();var eE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,Qb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function b(){}b.prototype=S.prototype,k.D=S.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(C,N,L){for(var x=Array(arguments.length-2),z=2;z<arguments.length;z++)x[z-2]=arguments[z];return S.prototype[N].apply(C,x)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,S,b){b||(b=0);var C=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)C[N]=S.charCodeAt(b++)|S.charCodeAt(b++)<<8|S.charCodeAt(b++)<<16|S.charCodeAt(b++)<<24;else for(N=0;16>N;++N)C[N]=S[b++]|S[b++]<<8|S[b++]<<16|S[b++]<<24;S=k.g[0],b=k.g[1],N=k.g[2];var L=k.g[3],x=S+(L^b&(N^L))+C[0]+3614090360&4294967295;S=b+(x<<7&4294967295|x>>>25),x=L+(N^S&(b^N))+C[1]+3905402710&4294967295,L=S+(x<<12&4294967295|x>>>20),x=N+(b^L&(S^b))+C[2]+606105819&4294967295,N=L+(x<<17&4294967295|x>>>15),x=b+(S^N&(L^S))+C[3]+3250441966&4294967295,b=N+(x<<22&4294967295|x>>>10),x=S+(L^b&(N^L))+C[4]+4118548399&4294967295,S=b+(x<<7&4294967295|x>>>25),x=L+(N^S&(b^N))+C[5]+1200080426&4294967295,L=S+(x<<12&4294967295|x>>>20),x=N+(b^L&(S^b))+C[6]+2821735955&4294967295,N=L+(x<<17&4294967295|x>>>15),x=b+(S^N&(L^S))+C[7]+4249261313&4294967295,b=N+(x<<22&4294967295|x>>>10),x=S+(L^b&(N^L))+C[8]+1770035416&4294967295,S=b+(x<<7&4294967295|x>>>25),x=L+(N^S&(b^N))+C[9]+2336552879&4294967295,L=S+(x<<12&4294967295|x>>>20),x=N+(b^L&(S^b))+C[10]+4294925233&4294967295,N=L+(x<<17&4294967295|x>>>15),x=b+(S^N&(L^S))+C[11]+2304563134&4294967295,b=N+(x<<22&4294967295|x>>>10),x=S+(L^b&(N^L))+C[12]+1804603682&4294967295,S=b+(x<<7&4294967295|x>>>25),x=L+(N^S&(b^N))+C[13]+4254626195&4294967295,L=S+(x<<12&4294967295|x>>>20),x=N+(b^L&(S^b))+C[14]+2792965006&4294967295,N=L+(x<<17&4294967295|x>>>15),x=b+(S^N&(L^S))+C[15]+1236535329&4294967295,b=N+(x<<22&4294967295|x>>>10),x=S+(N^L&(b^N))+C[1]+4129170786&4294967295,S=b+(x<<5&4294967295|x>>>27),x=L+(b^N&(S^b))+C[6]+3225465664&4294967295,L=S+(x<<9&4294967295|x>>>23),x=N+(S^b&(L^S))+C[11]+643717713&4294967295,N=L+(x<<14&4294967295|x>>>18),x=b+(L^S&(N^L))+C[0]+3921069994&4294967295,b=N+(x<<20&4294967295|x>>>12),x=S+(N^L&(b^N))+C[5]+3593408605&4294967295,S=b+(x<<5&4294967295|x>>>27),x=L+(b^N&(S^b))+C[10]+38016083&4294967295,L=S+(x<<9&4294967295|x>>>23),x=N+(S^b&(L^S))+C[15]+3634488961&4294967295,N=L+(x<<14&4294967295|x>>>18),x=b+(L^S&(N^L))+C[4]+3889429448&4294967295,b=N+(x<<20&4294967295|x>>>12),x=S+(N^L&(b^N))+C[9]+568446438&4294967295,S=b+(x<<5&4294967295|x>>>27),x=L+(b^N&(S^b))+C[14]+3275163606&4294967295,L=S+(x<<9&4294967295|x>>>23),x=N+(S^b&(L^S))+C[3]+4107603335&4294967295,N=L+(x<<14&4294967295|x>>>18),x=b+(L^S&(N^L))+C[8]+1163531501&4294967295,b=N+(x<<20&4294967295|x>>>12),x=S+(N^L&(b^N))+C[13]+2850285829&4294967295,S=b+(x<<5&4294967295|x>>>27),x=L+(b^N&(S^b))+C[2]+4243563512&4294967295,L=S+(x<<9&4294967295|x>>>23),x=N+(S^b&(L^S))+C[7]+1735328473&4294967295,N=L+(x<<14&4294967295|x>>>18),x=b+(L^S&(N^L))+C[12]+2368359562&4294967295,b=N+(x<<20&4294967295|x>>>12),x=S+(b^N^L)+C[5]+4294588738&4294967295,S=b+(x<<4&4294967295|x>>>28),x=L+(S^b^N)+C[8]+2272392833&4294967295,L=S+(x<<11&4294967295|x>>>21),x=N+(L^S^b)+C[11]+1839030562&4294967295,N=L+(x<<16&4294967295|x>>>16),x=b+(N^L^S)+C[14]+4259657740&4294967295,b=N+(x<<23&4294967295|x>>>9),x=S+(b^N^L)+C[1]+2763975236&4294967295,S=b+(x<<4&4294967295|x>>>28),x=L+(S^b^N)+C[4]+1272893353&4294967295,L=S+(x<<11&4294967295|x>>>21),x=N+(L^S^b)+C[7]+4139469664&4294967295,N=L+(x<<16&4294967295|x>>>16),x=b+(N^L^S)+C[10]+3200236656&4294967295,b=N+(x<<23&4294967295|x>>>9),x=S+(b^N^L)+C[13]+681279174&4294967295,S=b+(x<<4&4294967295|x>>>28),x=L+(S^b^N)+C[0]+3936430074&4294967295,L=S+(x<<11&4294967295|x>>>21),x=N+(L^S^b)+C[3]+3572445317&4294967295,N=L+(x<<16&4294967295|x>>>16),x=b+(N^L^S)+C[6]+76029189&4294967295,b=N+(x<<23&4294967295|x>>>9),x=S+(b^N^L)+C[9]+3654602809&4294967295,S=b+(x<<4&4294967295|x>>>28),x=L+(S^b^N)+C[12]+3873151461&4294967295,L=S+(x<<11&4294967295|x>>>21),x=N+(L^S^b)+C[15]+530742520&4294967295,N=L+(x<<16&4294967295|x>>>16),x=b+(N^L^S)+C[2]+3299628645&4294967295,b=N+(x<<23&4294967295|x>>>9),x=S+(N^(b|~L))+C[0]+4096336452&4294967295,S=b+(x<<6&4294967295|x>>>26),x=L+(b^(S|~N))+C[7]+1126891415&4294967295,L=S+(x<<10&4294967295|x>>>22),x=N+(S^(L|~b))+C[14]+2878612391&4294967295,N=L+(x<<15&4294967295|x>>>17),x=b+(L^(N|~S))+C[5]+4237533241&4294967295,b=N+(x<<21&4294967295|x>>>11),x=S+(N^(b|~L))+C[12]+1700485571&4294967295,S=b+(x<<6&4294967295|x>>>26),x=L+(b^(S|~N))+C[3]+2399980690&4294967295,L=S+(x<<10&4294967295|x>>>22),x=N+(S^(L|~b))+C[10]+4293915773&4294967295,N=L+(x<<15&4294967295|x>>>17),x=b+(L^(N|~S))+C[1]+2240044497&4294967295,b=N+(x<<21&4294967295|x>>>11),x=S+(N^(b|~L))+C[8]+1873313359&4294967295,S=b+(x<<6&4294967295|x>>>26),x=L+(b^(S|~N))+C[15]+4264355552&4294967295,L=S+(x<<10&4294967295|x>>>22),x=N+(S^(L|~b))+C[6]+2734768916&4294967295,N=L+(x<<15&4294967295|x>>>17),x=b+(L^(N|~S))+C[13]+1309151649&4294967295,b=N+(x<<21&4294967295|x>>>11),x=S+(N^(b|~L))+C[4]+4149444226&4294967295,S=b+(x<<6&4294967295|x>>>26),x=L+(b^(S|~N))+C[11]+3174756917&4294967295,L=S+(x<<10&4294967295|x>>>22),x=N+(S^(L|~b))+C[2]+718787259&4294967295,N=L+(x<<15&4294967295|x>>>17),x=b+(L^(N|~S))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+L&4294967295}i.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var b=S-this.blockSize,C=this.B,N=this.h,L=0;L<S;){if(N==0)for(;L<=b;)r(this,k,L),L+=this.blockSize;if(typeof k=="string"){for(;L<S;)if(C[N++]=k.charCodeAt(L++),N==this.blockSize){r(this,C),N=0;break}}else for(;L<S;)if(C[N++]=k[L++],N==this.blockSize){r(this,C),N=0;break}}this.h=N,this.o+=S},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var b=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=b&255,b/=256;for(this.u(k),k=Array(16),S=b=0;4>S;++S)for(var C=0;32>C;C+=8)k[b++]=this.g[S]>>>C&255;return k};function s(k,S){var b=a;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=S(k)}function o(k,S){this.h=S;for(var b=[],C=!0,N=k.length-1;0<=N;N--){var L=k[N]|0;C&&L==S||(b[N]=L,C=!1)}this.g=b}var a={};function l(k){return-128<=k&&128>k?s(k,function(S){return new o([S|0],0>S?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return h;if(0>k)return A(u(-k));for(var S=[],b=1,C=0;k>=b;C++)S[C]=k/b|0,b*=4294967296;return new o(S,0)}function d(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return A(d(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(S,8)),C=h,N=0;N<k.length;N+=8){var L=Math.min(8,k.length-N),x=parseInt(k.substring(N,N+L),S);8>L?(L=u(Math.pow(S,L)),C=C.j(L).add(u(x))):(C=C.j(b),C=C.add(u(x)))}return C}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var k=0,S=1,b=0;b<this.g.length;b++){var C=this.i(b);k+=(0<=C?C:4294967296+C)*S,S*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(E(this))return"-"+A(this).toString(k);for(var S=u(Math.pow(k,6)),b=this,C="";;){var N=P(b,S).g;b=v(b,N.j(S));var L=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=N,_(b))return L+C;for(;6>L.length;)L="0"+L;C=L+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function E(k){return k.h==-1}t.l=function(k){return k=v(this,k),E(k)?-1:_(k)?0:1};function A(k){for(var S=k.g.length,b=[],C=0;C<S;C++)b[C]=~k.g[C];return new o(b,~k.h).add(f)}t.abs=function(){return E(this)?A(this):this},t.add=function(k){for(var S=Math.max(this.g.length,k.g.length),b=[],C=0,N=0;N<=S;N++){var L=C+(this.i(N)&65535)+(k.i(N)&65535),x=(L>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);C=x>>>16,L&=65535,x&=65535,b[N]=x<<16|L}return new o(b,b[b.length-1]&-2147483648?-1:0)};function v(k,S){return k.add(A(S))}t.j=function(k){if(_(this)||_(k))return h;if(E(this))return E(k)?A(this).j(A(k)):A(A(this).j(k));if(E(k))return A(this.j(A(k)));if(0>this.l(g)&&0>k.l(g))return u(this.m()*k.m());for(var S=this.g.length+k.g.length,b=[],C=0;C<2*S;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var N=0;N<k.g.length;N++){var L=this.i(C)>>>16,x=this.i(C)&65535,z=k.i(N)>>>16,J=k.i(N)&65535;b[2*C+2*N]+=x*J,y(b,2*C+2*N),b[2*C+2*N+1]+=L*J,y(b,2*C+2*N+1),b[2*C+2*N+1]+=x*z,y(b,2*C+2*N+1),b[2*C+2*N+2]+=L*z,y(b,2*C+2*N+2)}for(C=0;C<S;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=S;C<2*S;C++)b[C]=0;return new o(b,0)};function y(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function w(k,S){this.g=k,this.h=S}function P(k,S){if(_(S))throw Error("division by zero");if(_(k))return new w(h,h);if(E(k))return S=P(A(k),S),new w(A(S.g),A(S.h));if(E(S))return S=P(k,A(S)),new w(A(S.g),S.h);if(30<k.g.length){if(E(k)||E(S))throw Error("slowDivide_ only works with positive integers.");for(var b=f,C=S;0>=C.l(k);)b=O(b),C=O(C);var N=D(b,1),L=D(C,1);for(C=D(C,2),b=D(b,2);!_(C);){var x=L.add(C);0>=x.l(k)&&(N=N.add(b),L=x),C=D(C,1),b=D(b,1)}return S=v(k,N.j(S)),new w(N,S)}for(N=h;0<=k.l(S);){for(b=Math.max(1,Math.floor(k.m()/S.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),L=u(b),x=L.j(S);E(x)||0<x.l(k);)b-=C,L=u(b),x=L.j(S);_(L)&&(L=f),N=N.add(L),k=v(k,x)}return new w(N,k)}t.A=function(k){return P(this,k).h},t.and=function(k){for(var S=Math.max(this.g.length,k.g.length),b=[],C=0;C<S;C++)b[C]=this.i(C)&k.i(C);return new o(b,this.h&k.h)},t.or=function(k){for(var S=Math.max(this.g.length,k.g.length),b=[],C=0;C<S;C++)b[C]=this.i(C)|k.i(C);return new o(b,this.h|k.h)},t.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),b=[],C=0;C<S;C++)b[C]=this.i(C)^k.i(C);return new o(b,this.h^k.h)};function O(k){for(var S=k.g.length+1,b=[],C=0;C<S;C++)b[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(b,k.h)}function D(k,S){var b=S>>5;S%=32;for(var C=k.g.length-b,N=[],L=0;L<C;L++)N[L]=0<S?k.i(L+b)>>>S|k.i(L+b+1)<<32-S:k.i(L+b);return new o(N,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Qb=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,rs=o}).apply(typeof eE<"u"?eE:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yb,Xb,Ma,Jb,Cu,Nm,Zb,eC,tC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,m){return c==Array.prototype||c==Object.prototype||(c[p]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var m=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var V=c[I];if(!(V in m))break e;m=m[V]}c=c[c.length-1],I=m[c],p=p(I),p!=I&&p!=null&&e(m,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var m=0,I=!1,V={next:function(){if(!I&&m<c.length){var F=m++;return{value:p(F,c[F]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,m){return c.call.apply(c.bind,arguments)}function h(c,p,m){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),c.apply(p,V)}}return function(){return c.apply(p,arguments)}}function f(c,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function _(c,p){function m(){}m.prototype=p.prototype,c.aa=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(I,V,F){for(var W=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)W[Ce-2]=arguments[Ce];return p.prototype[V].apply(I,W)}}function E(c){const p=c.length;if(0<p){const m=Array(p);for(let I=0;I<p;I++)m[I]=c[I];return m}return[]}function A(c,p){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const V=c.length||0,F=I.length||0;c.length=V+F;for(let W=0;W<F;W++)c[V+W]=I[W]}else c.push(I)}}class v{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(c){return/^[\s\xa0]*$/.test(c)}function w(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function D(c,p,m){for(const I in c)p.call(m,c[I],I,c)}function k(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function S(c){const p={};for(const m in c)p[m]=c[m];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let m,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(m in I)c[m]=I[m];for(let F=0;F<b.length;F++)m=b[F],Object.prototype.hasOwnProperty.call(I,m)&&(c[m]=I[m])}}function N(c){var p=1;c=c.split(":");const m=[];for(;0<p&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function L(c){a.setTimeout(()=>{throw c},0)}function x(){var c=K;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class z{constructor(){this.h=this.g=null}add(p,m){const I=J.get();I.set(p,m),this.h?this.h.next=I:this.g=I,this.h=I}}var J=new v(()=>new Pe,c=>c.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,U=!1,K=new z,Q=()=>{const c=a.Promise.resolve(void 0);tt=()=>{c.then(we)}};var we=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(m){L(m)}var p=J;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}U=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var ri=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return c}();function si(c,p){if(Ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(O){e:{try{P(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:oi[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&si.aa.h.call(this)}}_(si,Ge);var oi={2:"touch",3:"pen",4:"mouse"};si.prototype.h=function(){si.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ai="closure_listenable_"+(1e6*Math.random()|0),uk=0;function dk(c,p,m,I,V){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!I,this.ha=V,this.key=++uk,this.da=this.fa=!1}function mc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gc(c){this.src=c,this.g={},this.h=0}gc.prototype.add=function(c,p,m,I,V){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var W=Vh(c,p,I,V);return-1<W?(p=c[W],m||(p.fa=!1)):(p=new dk(p,this.src,F,!!I,V),p.fa=m,c.push(p)),p};function Dh(c,p){var m=p.type;if(m in c.g){var I=c.g[m],V=Array.prototype.indexOf.call(I,p,void 0),F;(F=0<=V)&&Array.prototype.splice.call(I,V,1),F&&(mc(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function Vh(c,p,m,I){for(var V=0;V<c.length;++V){var F=c[V];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==I)return V}return-1}var Fh="closure_lm_"+(1e6*Math.random()|0),Uh={};function Ev(c,p,m,I,V){if(Array.isArray(p)){for(var F=0;F<p.length;F++)Ev(c,p[F],m,I,V);return null}return m=Iv(m),c&&c[ai]?c.K(p,m,u(I)?!!I.capture:!!I,V):hk(c,p,m,!1,I,V)}function hk(c,p,m,I,V,F){if(!p)throw Error("Invalid event type");var W=u(V)?!!V.capture:!!V,Ce=zh(c);if(Ce||(c[Fh]=Ce=new gc(c)),m=Ce.add(p,m,I,W,F),m.proxy)return m;if(I=fk(),m.proxy=I,I.src=c,I.listener=m,c.addEventListener)ri||(V=W),V===void 0&&(V=!1),c.addEventListener(p.toString(),I,V);else if(c.attachEvent)c.attachEvent(Sv(p.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function fk(){function c(m){return p.call(c.src,c.listener,m)}const p=pk;return c}function Tv(c,p,m,I,V){if(Array.isArray(p))for(var F=0;F<p.length;F++)Tv(c,p[F],m,I,V);else I=u(I)?!!I.capture:!!I,m=Iv(m),c&&c[ai]?(c=c.i,p=String(p).toString(),p in c.g&&(F=c.g[p],m=Vh(F,m,I,V),-1<m&&(mc(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete c.g[p],c.h--)))):c&&(c=zh(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Vh(p,m,I,V)),(m=-1<c?p[c]:null)&&jh(m))}function jh(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ai])Dh(p.i,c);else{var m=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(m,I,c.capture):p.detachEvent?p.detachEvent(Sv(m),I):p.addListener&&p.removeListener&&p.removeListener(I),(m=zh(p))?(Dh(m,c),m.h==0&&(m.src=null,p[Fh]=null)):mc(c)}}}function Sv(c){return c in Uh?Uh[c]:Uh[c]="on"+c}function pk(c,p){if(c.da)c=!0;else{p=new si(p,this);var m=c.listener,I=c.ha||c.src;c.fa&&jh(c),c=m.call(I,p)}return c}function zh(c){return c=c[Fh],c instanceof gc?c:null}var Bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iv(c){return typeof c=="function"?c:(c[Bh]||(c[Bh]=function(p){return c.handleEvent(p)}),c[Bh])}function It(){ge.call(this),this.i=new gc(this),this.M=this,this.F=null}_(It,ge),It.prototype[ai]=!0,It.prototype.removeEventListener=function(c,p,m,I){Tv(this,c,p,m,I)};function Ut(c,p){var m,I=c.F;if(I)for(m=[];I;I=I.F)m.push(I);if(c=c.M,I=p.type||p,typeof p=="string")p=new Ge(p,c);else if(p instanceof Ge)p.target=p.target||c;else{var V=p;p=new Ge(I,c),C(p,V)}if(V=!0,m)for(var F=m.length-1;0<=F;F--){var W=p.g=m[F];V=yc(W,I,!0,p)&&V}if(W=p.g=c,V=yc(W,I,!0,p)&&V,V=yc(W,I,!1,p)&&V,m)for(F=0;F<m.length;F++)W=p.g=m[F],V=yc(W,I,!1,p)&&V}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var m=c.g[p],I=0;I<m.length;I++)mc(m[I]);delete c.g[p],c.h--}}this.F=null},It.prototype.K=function(c,p,m,I){return this.i.add(String(c),p,!1,m,I)},It.prototype.L=function(c,p,m,I){return this.i.add(String(c),p,!0,m,I)};function yc(c,p,m,I){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,F=0;F<p.length;++F){var W=p[F];if(W&&!W.da&&W.capture==m){var Ce=W.listener,pt=W.ha||W.src;W.fa&&Dh(c.i,W),V=Ce.call(pt,I)!==!1&&V}}return V&&!I.defaultPrevented}function bv(c,p,m){if(typeof c=="function")m&&(c=f(c,m));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function Cv(c){c.g=bv(()=>{c.g=null,c.i&&(c.i=!1,Cv(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class mk extends ge{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Cv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xo(c){ge.call(this),this.h=c,this.g={}}_(Xo,ge);var Av=[];function kv(c){D(c.g,function(p,m){this.g.hasOwnProperty(m)&&jh(p)},c),c.g={}}Xo.prototype.N=function(){Xo.aa.N.call(this),kv(this)},Xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $h=a.JSON.stringify,gk=a.JSON.parse,yk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Wh(){}Wh.prototype.h=null;function Pv(c){return c.h||(c.h=c.i())}function xv(){}var Jo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hh(){Ge.call(this,"d")}_(Hh,Ge);function qh(){Ge.call(this,"c")}_(qh,Ge);var Fr={},Rv=null;function vc(){return Rv=Rv||new It}Fr.La="serverreachability";function Nv(c){Ge.call(this,Fr.La,c)}_(Nv,Ge);function Zo(c){const p=vc();Ut(p,new Nv(p))}Fr.STAT_EVENT="statevent";function Ov(c,p){Ge.call(this,Fr.STAT_EVENT,c),this.stat=p}_(Ov,Ge);function jt(c){const p=vc();Ut(p,new Ov(p,c))}Fr.Ma="timingevent";function Lv(c,p){Ge.call(this,Fr.Ma,c),this.size=p}_(Lv,Ge);function ea(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function ta(){this.g=!0}ta.prototype.xa=function(){this.g=!1};function vk(c,p,m,I,V,F){c.info(function(){if(c.g)if(F)for(var W="",Ce=F.split("&"),pt=0;pt<Ce.length;pt++){var ye=Ce[pt].split("=");if(1<ye.length){var bt=ye[0];ye=ye[1];var Ct=bt.split("_");W=2<=Ct.length&&Ct[1]=="type"?W+(bt+"="+ye+"&"):W+(bt+"=redacted&")}}else W=null;else W=F;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+p+`
`+m+`
`+W})}function _k(c,p,m,I,V,F,W){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+p+`
`+m+`
`+F+" "+W})}function ks(c,p,m,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ek(c,m)+(I?" "+I:"")})}function wk(c,p){c.info(function(){return"TIMEOUT: "+p})}ta.prototype.info=function(){};function Ek(c,p){if(!c.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var I=m[c];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return $h(m)}catch{return p}}var _c={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gh;function wc(){}_(wc,Wh),wc.prototype.g=function(){return new XMLHttpRequest},wc.prototype.i=function(){return{}},Gh=new wc;function qi(c,p,m,I){this.j=c,this.i=p,this.l=m,this.R=I||1,this.U=new Xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dv}function Dv(){this.i=null,this.g="",this.h=!1}var Vv={},Kh={};function Qh(c,p,m){c.L=1,c.v=Ic(li(p)),c.m=m,c.P=!0,Fv(c,null)}function Fv(c,p){c.F=Date.now(),Ec(c),c.A=li(c.v);var m=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Jv(m.i,"t",I),c.C=0,m=c.j.J,c.h=new Dv,c.g=g_(c.j,m?p:null,!c.m),0<c.O&&(c.M=new mk(f(c.Y,c,c.g),c.O)),p=c.U,m=c.g,I=c.ca;var V="readystatechange";Array.isArray(V)||(V&&(Av[0]=V.toString()),V=Av);for(var F=0;F<V.length;F++){var W=Ev(m,V[F],I||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Zo(),vk(c.i,c.u,c.A,c.l,c.R,c.m)}qi.prototype.ca=function(c){c=c.target;const p=this.M;p&&ci(c)==3?p.j():this.Y(c)},qi.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=ci(this.g);var p=this.g.Ba();const Rs=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||s_(this.g)))){this.J||Ct!=4||p==7||(p==8||0>=Rs?Zo(3):Zo(2)),Yh(this);var m=this.g.Z();this.X=m;t:if(Uv(this)){var I=s_(this.g);c="";var V=I.length,F=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),na(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,c+=this.h.i.decode(I[p],{stream:!(F&&p==V-1)});I.length=0,this.h.g+=c,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,_k(this.i,this.u,this.A,this.l,this.R,Ct,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,pt=this.g;if((Ce=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ce)){var ye=Ce;break t}}ye=null}if(m=ye)ks(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xh(this,m);else{this.o=!1,this.s=3,jt(12),Ur(this),na(this);break e}}if(this.P){m=!0;let bn;for(;!this.J&&this.C<W.length;)if(bn=Tk(this,W),bn==Kh){Ct==4&&(this.s=4,jt(14),m=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==Vv){this.s=4,jt(15),ks(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else ks(this.i,this.l,bn,null),Xh(this,bn);if(Uv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||W.length!=0||this.h.h||(this.s=1,jt(16),m=!1),this.o=this.o&&m,!m)ks(this.i,this.l,W,"[Invalid Chunked Response]"),Ur(this),na(this);else if(0<W.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),rf(bt),bt.M=!0,jt(11))}}else ks(this.i,this.l,W,null),Xh(this,W);Ct==4&&Ur(this),this.o&&!this.J&&(Ct==4?h_(this.j,this):(this.o=!1,Ec(this)))}else Uk(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),Ur(this),na(this)}}}catch{}finally{}};function Uv(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Tk(c,p){var m=c.C,I=p.indexOf(`
`,m);return I==-1?Kh:(m=Number(p.substring(m,I)),isNaN(m)?Vv:(I+=1,I+m>p.length?Kh:(p=p.slice(I,I+m),c.C=I+m,p)))}qi.prototype.cancel=function(){this.J=!0,Ur(this)};function Ec(c){c.S=Date.now()+c.I,jv(c,c.I)}function jv(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ea(f(c.ba,c),p)}function Yh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}qi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(wk(this.i,this.A),this.L!=2&&(Zo(),jt(17)),Ur(this),this.s=2,na(this)):jv(this,this.S-c)};function na(c){c.j.G==0||c.J||h_(c.j,c)}function Ur(c){Yh(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,kv(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Xh(c,p){try{var m=c.j;if(m.G!=0&&(m.g==c||Jh(m.h,c))){if(!c.K&&Jh(m.h,c)&&m.G==3){try{var I=m.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)Pc(m),Ac(m);else break e;nf(m),jt(18)}}else m.za=V[1],0<m.za-m.T&&37500>V[2]&&m.F&&m.v==0&&!m.C&&(m.C=ea(f(m.Za,m),6e3));if(1>=$v(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else zr(m,11)}else if((c.K||m.g==c)&&Pc(m),!y(p))for(V=m.Da.g.parse(p),p=0;p<V.length;p++){let ye=V[p];if(m.T=ye[0],ye=ye[1],m.G==2)if(ye[0]=="c"){m.K=ye[1],m.ia=ye[2];const bt=ye[3];bt!=null&&(m.la=bt,m.j.info("VER="+m.la));const Ct=ye[4];Ct!=null&&(m.Aa=Ct,m.j.info("SVER="+m.Aa));const Rs=ye[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(I=1.5*Rs,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const bn=c.g;if(bn){const Rc=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rc){var F=I.h;F.g||Rc.indexOf("spdy")==-1&&Rc.indexOf("quic")==-1&&Rc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Zh(F,F.h),F.h=null))}if(I.D){const sf=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(I.ya=sf,xe(I.I,I.D,sf))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var W=c;if(I.qa=m_(I,I.J?I.ia:null,I.W),W.K){Wv(I.h,W);var Ce=W,pt=I.L;pt&&(Ce.I=pt),Ce.B&&(Yh(Ce),Ec(Ce)),I.g=W}else u_(I);0<m.i.length&&kc(m)}else ye[0]!="stop"&&ye[0]!="close"||zr(m,7);else m.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?zr(m,7):tf(m):ye[0]!="noop"&&m.l&&m.l.ta(ye),m.v=0)}}Zo(4)}catch{}}var Sk=class{constructor(c,p){this.g=c,this.map=p}};function zv(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bv(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $v(c){return c.h?1:c.g?c.g.size:0}function Jh(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Zh(c,p){c.g?c.g.add(p):c.h=p}function Wv(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}zv.prototype.cancel=function(){if(this.i=Hv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Hv(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.D);return p}return E(c.i)}function Ik(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],m=c.length,I=0;I<m;I++)p.push(c[I]);return p}p=[],m=0;for(I in c)p[m++]=c[I];return p}function bk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var m=0;m<c;m++)p.push(m);return p}p=[],m=0;for(const I in c)p[m++]=I;return p}}}function qv(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var m=bk(c),I=Ik(c),V=I.length,F=0;F<V;F++)p.call(void 0,I[F],m&&m[F],c)}var Gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ck(c,p){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var I=c[m].indexOf("="),V=null;if(0<=I){var F=c[m].substring(0,I);V=c[m].substring(I+1)}else F=c[m];p(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function jr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof jr){this.h=c.h,Tc(this,c.j),this.o=c.o,this.g=c.g,Sc(this,c.s),this.l=c.l;var p=c.i,m=new sa;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),Kv(this,m),this.m=c.m}else c&&(p=String(c).match(Gv))?(this.h=!1,Tc(this,p[1]||"",!0),this.o=ia(p[2]||""),this.g=ia(p[3]||"",!0),Sc(this,p[4]),this.l=ia(p[5]||"",!0),Kv(this,p[6]||"",!0),this.m=ia(p[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}jr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(ra(p,Qv,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ra(p,Qv,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(ra(m,m.charAt(0)=="/"?Pk:kk,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",ra(m,Rk)),c.join("")};function li(c){return new jr(c)}function Tc(c,p,m){c.j=m?ia(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Sc(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Kv(c,p,m){p instanceof sa?(c.i=p,Nk(c.i,c.h)):(m||(p=ra(p,xk)),c.i=new sa(p,c.h))}function xe(c,p,m){c.i.set(p,m)}function Ic(c){return xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ia(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ra(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,Ak),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ak(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Qv=/[#\/\?@]/g,kk=/[#\?:]/g,Pk=/[#\?]/g,xk=/[#\?@]/g,Rk=/#/g;function sa(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Gi(c){c.g||(c.g=new Map,c.h=0,c.i&&Ck(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=sa.prototype,t.add=function(c,p){Gi(this),this.i=null,c=Ps(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function Yv(c,p){Gi(c),p=Ps(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Xv(c,p){return Gi(c),p=Ps(c,p),c.g.has(p)}t.forEach=function(c,p){Gi(this),this.g.forEach(function(m,I){m.forEach(function(V){c.call(p,V,I,this)},this)},this)},t.na=function(){Gi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let I=0;I<p.length;I++){const V=c[I];for(let F=0;F<V.length;F++)m.push(p[I])}return m},t.V=function(c){Gi(this);let p=[];if(typeof c=="string")Xv(this,c)&&(p=p.concat(this.g.get(Ps(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)p=p.concat(c[m])}return p},t.set=function(c,p){return Gi(this),this.i=null,c=Ps(this,c),Xv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Jv(c,p,m){Yv(c,p),0<m.length&&(c.i=null,c.g.set(Ps(c,p),E(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var I=p[m];const F=encodeURIComponent(String(I)),W=this.V(I);for(I=0;I<W.length;I++){var V=F;W[I]!==""&&(V+="="+encodeURIComponent(String(W[I]))),c.push(V)}}return this.i=c.join("&")};function Ps(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Nk(c,p){p&&!c.j&&(Gi(c),c.i=null,c.g.forEach(function(m,I){var V=I.toLowerCase();I!=V&&(Yv(this,I),Jv(this,V,m))},c)),c.j=p}function Ok(c,p){const m=new ta;if(a.Image){const I=new Image;I.onload=g(Ki,m,"TestLoadImage: loaded",!0,p,I),I.onerror=g(Ki,m,"TestLoadImage: error",!1,p,I),I.onabort=g(Ki,m,"TestLoadImage: abort",!1,p,I),I.ontimeout=g(Ki,m,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}function Lk(c,p){const m=new ta,I=new AbortController,V=setTimeout(()=>{I.abort(),Ki(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:I.signal}).then(F=>{clearTimeout(V),F.ok?Ki(m,"TestPingServer: ok",!0,p):Ki(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Ki(m,"TestPingServer: error",!1,p)})}function Ki(c,p,m,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(m)}catch{}}function Mk(){this.g=new yk}function Dk(c,p,m){const I=m||"";try{qv(c,function(V,F){let W=V;u(V)&&(W=$h(V)),p.push(I+F+"="+encodeURIComponent(W))})}catch(V){throw p.push(I+"type="+encodeURIComponent("_badmap")),V}}function oa(c){this.l=c.Ub||null,this.j=c.eb||!1}_(oa,Wh),oa.prototype.g=function(){return new bc(this.l,this.j)},oa.prototype.i=function(c){return function(){return c}}({});function bc(c,p){It.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(bc,It),t=bc.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,la(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,aa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zv(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zv(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?aa(this):la(this),this.readyState==3&&Zv(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,aa(this))},t.Qa=function(c){this.g&&(this.response=c,aa(this))},t.ga=function(){this.g&&aa(this)};function aa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,la(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function la(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function e_(c){let p="";return D(c,function(m,I){p+=I,p+=":",p+=m,p+=`\r
`}),p}function ef(c,p,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=e_(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):xe(c,p,m))}function $e(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_($e,It);var Vk=/^https?$/i,Fk=["POST","PUT"];t=$e.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gh.g(),this.v=this.o?Pv(this.o):Pv(Gh),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){t_(this,F);return}if(c=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)m.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())m.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fk,p,void 0))||I||V||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,W]of m)this.g.setRequestHeader(F,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{r_(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){t_(this,F)}};function t_(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,n_(c),Cc(c)}function n_(c){c.A||(c.A=!0,Ut(c,"complete"),Ut(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ut(this,"complete"),Ut(this,"abort"),Cc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cc(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?i_(this):this.bb())},t.bb=function(){i_(this)};function i_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||ci(c)!=4||c.Z()!=2)){if(c.u&&ci(c)==4)bv(c.Ea,0,c);else if(Ut(c,"readystatechange"),ci(c)==4){c.h=!1;try{const W=c.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var I;if(I=W===0){var V=String(c.D).match(Gv)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!Vk.test(V?V.toLowerCase():"")}m=I}if(m)Ut(c,"complete"),Ut(c,"success");else{c.m=6;try{var F=2<ci(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",n_(c)}}finally{Cc(c)}}}}function Cc(c,p){if(c.g){r_(c);const m=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ut(c,"ready");try{m.onreadystatechange=I}catch{}}}function r_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ci(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),gk(p)}};function s_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(c){const p={};c=(c.g&&2<=ci(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(y(c[I]))continue;var m=N(c[I]);const V=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[V]||[];p[V]=F,F.push(m)}k(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function o_(c){this.Aa=0,this.i=[],this.j=new ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,c),this.cb=ca("retryDelaySeedMs",1e4,c),this.Wa=ca("forwardChannelMaxRetries",2,c),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zv(c&&c.concurrentRequestLimit),this.Da=new Mk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=o_.prototype,t.la=8,t.G=1,t.connect=function(c,p,m,I){jt(0),this.W=c,this.H=p||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=m_(this,null,this.W),kc(this)};function tf(c){if(a_(c),c.G==3){var p=c.U++,m=li(c.I);if(xe(m,"SID",c.K),xe(m,"RID",p),xe(m,"TYPE","terminate"),ua(c,m),p=new qi(c,c.j,p),p.L=2,p.v=Ic(li(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=g_(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ec(p)}p_(c)}function Ac(c){c.g&&(rf(c),c.g.cancel(),c.g=null)}function a_(c){Ac(c),c.u&&(a.clearTimeout(c.u),c.u=null),Pc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function kc(c){if(!Bv(c.h)&&!c.s){c.s=!0;var p=c.Ga;tt||Q(),U||(tt(),U=!0),K.add(p,c),c.B=0}}function jk(c,p){return $v(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ea(f(c.Ga,c,p),f_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const V=new qi(this,this.j,c);let F=this.o;if(this.S&&(F?(F=S(F),C(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=c_(this,V,p),m=li(this.I),xe(m,"RID",c),xe(m,"CVER",22),this.D&&xe(m,"X-HTTP-Session-Id",this.D),ua(this,m),F&&(this.O?p="headers="+encodeURIComponent(String(e_(F)))+"&"+p:this.m&&ef(m,this.m,F)),Zh(this.h,V),this.Ua&&xe(m,"TYPE","init"),this.P?(xe(m,"$req",p),xe(m,"SID","null"),V.T=!0,Qh(V,m,null)):Qh(V,m,p),this.G=2}}else this.G==3&&(c?l_(this,c):this.i.length==0||Bv(this.h)||l_(this))};function l_(c,p){var m;p?m=p.l:m=c.U++;const I=li(c.I);xe(I,"SID",c.K),xe(I,"RID",m),xe(I,"AID",c.T),ua(c,I),c.m&&c.o&&ef(I,c.m,c.o),m=new qi(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),p&&(c.i=p.D.concat(c.i)),p=c_(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zh(c.h,m),Qh(m,I,p)}function ua(c,p){c.H&&D(c.H,function(m,I){xe(p,I,m)}),c.l&&qv({},function(m,I){xe(p,I,m)})}function c_(c,p,m){m=Math.min(c.i.length,m);var I=c.l?f(c.l.Na,c.l,c):null;e:{var V=c.i;let F=-1;for(;;){const W=["count="+m];F==-1?0<m?(F=V[0].g,W.push("ofs="+F)):F=0:W.push("ofs="+F);let Ce=!0;for(let pt=0;pt<m;pt++){let ye=V[pt].g;const bt=V[pt].map;if(ye-=F,0>ye)F=Math.max(0,V[pt].g-100),Ce=!1;else try{Dk(bt,W,"req"+ye+"_")}catch{I&&I(bt)}}if(Ce){I=W.join("&");break e}}}return c=c.i.splice(0,m),p.D=c,I}function u_(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;tt||Q(),U||(tt(),U=!0),K.add(p,c),c.v=0}}function nf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ea(f(c.Fa,c),f_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,d_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ea(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Ac(this),d_(this))};function rf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function d_(c){c.g=new qi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=li(c.qa);xe(p,"RID","rpc"),xe(p,"SID",c.K),xe(p,"AID",c.T),xe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&xe(p,"TO",c.ja),xe(p,"TYPE","xmlhttp"),ua(c,p),c.m&&c.o&&ef(p,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=Ic(li(p)),m.m=null,m.P=!0,Fv(m,c)}t.Za=function(){this.C!=null&&(this.C=null,Ac(this),nf(this),jt(19))};function Pc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function h_(c,p){var m=null;if(c.g==p){Pc(c),rf(c),c.g=null;var I=2}else if(Jh(c.h,p))m=p.D,Wv(c.h,p),I=1;else return;if(c.G!=0){if(p.o)if(I==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var V=c.B;I=vc(),Ut(I,new Lv(I,m)),kc(c)}else u_(c);else if(V=p.s,V==3||V==0&&0<p.X||!(I==1&&jk(c,p)||I==2&&nf(c)))switch(m&&0<m.length&&(p=c.h,p.i=p.i.concat(m)),V){case 1:zr(c,5);break;case 4:zr(c,10);break;case 3:zr(c,6);break;default:zr(c,2)}}}function f_(c,p){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*p}function zr(c,p){if(c.j.info("Error code "+p),p==2){var m=f(c.fb,c),I=c.Xa;const V=!I;I=new jr(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tc(I,"https"),Ic(I),V?Ok(I.toString(),m):Lk(I.toString(),m)}else jt(2);c.G=0,c.l&&c.l.sa(p),p_(c),a_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function p_(c){if(c.G=0,c.ka=[],c.l){const p=Hv(c.h);(p.length!=0||c.i.length!=0)&&(A(c.ka,p),A(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function m_(c,p,m){var I=m instanceof jr?li(m):new jr(m);if(I.g!="")p&&(I.g=p+"."+I.g),Sc(I,I.s);else{var V=a.location;I=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var F=new jr(null);I&&Tc(F,I),p&&(F.g=p),V&&Sc(F,V),m&&(F.l=m),I=F}return m=c.D,p=c.ya,m&&p&&xe(I,m,p),xe(I,"VER",c.la),ua(c,I),I}function g_(c,p,m){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new $e(new oa({eb:m})):new $e(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y_(){}t=y_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xc(){}xc.prototype.g=function(c,p){return new Zt(c,p)};function Zt(c,p){It.call(this),this.g=new o_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!y(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new xs(this)}_(Zt,It),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){tf(this.g)},Zt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=$h(c),c=m);p.i.push(new Sk(p.Ya++,c)),p.G==3&&kc(p)},Zt.prototype.N=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,Zt.aa.N.call(this)};function v_(c){Hh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const m in p){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}_(v_,Hh);function __(){qh.call(this),this.status=1}_(__,qh);function xs(c){this.g=c}_(xs,y_),xs.prototype.ua=function(){Ut(this.g,"a")},xs.prototype.ta=function(c){Ut(this.g,new v_(c))},xs.prototype.sa=function(c){Ut(this.g,new __)},xs.prototype.ra=function(){Ut(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,tC=function(){return new xc},eC=function(){return vc()},Zb=Fr,Nm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_c.NO_ERROR=0,_c.TIMEOUT=8,_c.HTTP_ERROR=6,Cu=_c,Mv.COMPLETE="complete",Jb=Mv,xv.EventType=Jo,Jo.OPEN="a",Jo.CLOSE="b",Jo.ERROR="c",Jo.MESSAGE="d",It.prototype.listen=It.prototype.K,Ma=xv,Xb=oa,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,Yb=$e}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const tE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new uh("@firebase/firestore");function Ia(){return ys.logLevel}function X(t,...e){if(ys.logLevel<=le.DEBUG){const n=e.map(Ly);ys.debug(`Firestore (${qo}): ${t}`,...n)}}function Vi(t,...e){if(ys.logLevel<=le.ERROR){const n=e.map(Ly);ys.error(`Firestore (${qo}): ${t}`,...n)}}function ko(t,...e){if(ys.logLevel<=le.WARN){const n=e.map(Ly);ys.warn(`Firestore (${qo}): ${t}`,...n)}}function Ly(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+t;throw Vi(e),new Error(e)}function Ae(t,e){t||re()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class H5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class q5{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ir,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string"),new nC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Rt(e)}}class G5{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class K5{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new G5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new Q5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=X5(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function _e(t,e){return t<e?-1:t>e?1:0}function Po(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new ot(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new ot(0,0))}static max(){return new se(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,i){n===void 0?n=0:n>e.length&&re(),i===void 0?i=e.length-n:i>e.length-n&&re(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return xl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends xl{construct(e,n,i){return new He(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new He(n)}static emptyPath(){return new He([])}}const J5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends xl{construct(e,n,i){return new vt(e,n,i)}static isValidIdentifier(e){return J5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(He.fromString(e))}static fromName(e){return new ee(He.fromString(e).popFirst(5))}static empty(){return new ee(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new He(e.slice()))}}function Z5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=se.fromTimestamp(i===1e9?new ot(n+1,0):new ot(n,i));return new Pr(r,ee.empty(),e)}function eF(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Pr(se.min(),ee.empty(),-1)}static max(){return new Pr(se.max(),ee.empty(),-1)}}function tF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==nF)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,i)=>{n(e)})}static reject(e){return new j((n,i)=>{i(e)})}static waitFor(e){return new j((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=j.resolve(!1);for(const i of e)n=n.next(r=>r?j.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new j((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,n){return new j((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function rF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}My.oe=-1;function Eh(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function sF(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tu(this.root,e,this.comparator,!0)}}class tu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??gt.RED,this.left=r??gt.EMPTY,this.right=s??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new gt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return gt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,i,r,s){return this}insert(e,n,i){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iE(this.data.getIterator())}getIteratorFrom(e){return new iE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class iE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new wt(vt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sC("Invalid base64 string: "+s):s}}(e);return new St(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new St(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const oF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=oF.exec(t);if(Ae(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?St.fromBase64String(t):St.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vy(t){const e=t.mapValue.fields.__previous_value__;return Dy(e)?Vy(e):e}function Rl(t){const e=xr(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Nl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dy(t)?4:cF(t)?9007199254740991:lF(t)?10:11:re()}function ti(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rl(t).isEqual(Rl(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=xr(r.timestampValue),a=xr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return vs(r.bytesValue).isEqual(vs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Xe(r.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(r.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Xe(r.integerValue)===Xe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Xe(r.doubleValue),a=Xe(s.doubleValue);return o===a?Rd(o)===Rd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Po(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(nE(o)!==nE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ti(o[l],a[l])))return!1;return!0}(t,e);default:return re()}}function Ol(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function xo(t,e){if(t===e)return 0;const n=_s(t),i=_s(e);if(n!==i)return _e(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xe(s.integerValue||s.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rE(t.timestampValue,e.timestampValue);case 4:return rE(Rl(t),Rl(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=vs(s),l=vs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=_e(a[u],l[u]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_e(Xe(s.latitude),Xe(o.latitude));return a!==0?a:_e(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const h=s.fields||{},f=o.fields||{},g=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(l=f.value)===null||l===void 0?void 0:l.arrayValue,E=_e(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:sE(g,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===nu.mapValue&&o===nu.mapValue)return 0;if(s===nu.mapValue)return 1;if(o===nu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=_e(l[h],d[h]);if(f!==0)return f;const g=xo(a[l[h]],u[d[h]]);if(g!==0)return g}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw re()}}function rE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=xr(t),i=xr(e),r=_e(n.seconds,i.seconds);return r!==0?r:_e(n.nanos,i.nanos)}function sE(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=xo(n[r],i[r]);if(s)return s}return _e(n.length,i.length)}function Ro(t){return Om(t)}function Om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=xr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Om(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Om(n.fields[o])}`;return r+"}"}(t.mapValue):re()}function Lm(t){return!!t&&"integerValue"in t}function Fy(t){return!!t&&"arrayValue"in t}function oE(t){return!!t&&"nullValue"in t}function aE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Au(t){return!!t&&"mapValue"in t}function lF(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Go(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Za(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=vt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Za(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Au(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Go(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new pn(Za(this.value))}}function oC(t){const e=[];return Go(t.fields,(n,i)=>{const r=new vt([n]);if(Au(i)){const s=oC(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Mt(e,0,se.min(),se.min(),se.min(),pn.empty(),0)}static newFoundDocument(e,n,i,r){return new Mt(e,1,n,se.min(),i,r,0)}static newNoDocument(e,n){return new Mt(e,2,n,se.min(),se.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,se.min(),se.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function lE(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=ee.comparator(ee.fromName(o.referenceValue),n.key):i=xo(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function cE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n="asc"){this.field=e,this.dir=n}}function uF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class rt extends aC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new hF(e,n,i):n==="array-contains"?new mF(e,i):n==="in"?new gF(e,i):n==="not-in"?new yF(e,i):n==="array-contains-any"?new vF(e,i):new rt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new fF(e,i):new pF(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xo(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends aC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ni(e,n)}matches(e){return lC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lC(t){return t.op==="and"}function cC(t){return dF(t)&&lC(t)}function dF(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function Mm(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Ro(t.value);if(cC(t))return t.filters.map(e=>Mm(e)).join(",");{const e=t.filters.map(n=>Mm(n)).join(",");return`${t.op}(${e})`}}function uC(t,e){return t instanceof rt?function(i,r){return r instanceof rt&&i.op===r.op&&i.field.isEqual(r.field)&&ti(i.value,r.value)}(t,e):t instanceof ni?function(i,r){return r instanceof ni&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&uC(o,r.filters[a]),!0):!1}(t,e):void re()}function dC(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ro(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(dC).join(" ,")+"}"}(t):"Filter"}class hF extends rt{constructor(e,n,i){super(e,n,i),this.key=ee.fromName(i.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class fF extends rt{constructor(e,n){super(e,"in",n),this.keys=hC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pF extends rt{constructor(e,n){super(e,"not-in",n),this.keys=hC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ee.fromName(i.referenceValue))}class mF extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fy(n)&&Ol(n.arrayValue,this.value)}}class gF extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class yF extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ol(this.value.arrayValue,n)}}class vF extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ol(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function uE(t,e=null,n=[],i=[],r=null,s=null,o=null){return new _F(t,e,n,i,r,s,o)}function Uy(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Mm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ro(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ro(i)).join(",")),e.ue=n}return e.ue}function jy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cE(t.startAt,e.startAt)&&cE(t.endAt,e.endAt)}function Dm(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wF(t,e,n,i,r,s,o,a){return new Th(t,e,n,i,r,s,o,a)}function zy(t){return new Th(t)}function dE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EF(t){return t.collectionGroup!==null}function el(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wt(vt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Od(s,i))}),n.has(vt.keyField().canonicalString())||e.ce.push(new Od(vt.keyField(),i))}return e.ce}function Zn(t){const e=oe(t);return e.le||(e.le=TF(e,el(t))),e.le}function TF(t,e){if(t.limitType==="F")return uE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Od(r.field,s)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return uE(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Vm(t,e,n){return new Th(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sh(t,e){return jy(Zn(t),Zn(e))&&t.limitType===e.limitType}function fC(t){return`${Uy(Zn(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>dC(r)).join(", ")}]`),Eh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ro(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ro(r)).join(",")),`Target(${i})`}(Zn(t))}; limitType=${t.limitType})`}function Ih(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ee.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of el(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=lE(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,el(i),r)||i.endAt&&!function(o,a,l){const u=lE(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,el(i),r))}(t,e)}function SF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pC(t){return(e,n)=>{let i=!1;for(const r of el(t)){const s=IF(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function IF(t,e,n){const i=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?xo(l,u):re()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Go(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return rC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=new ze(ee.comparator);function Fi(){return bF}const mC=new ze(ee.comparator);function Da(...t){let e=mC;for(const n of t)e=e.insert(n.key,n);return e}function gC(t){let e=mC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function es(){return tl()}function yC(){return tl()}function tl(){return new Ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const CF=new ze(ee.comparator),AF=new wt(ee.comparator);function ce(...t){let e=AF;for(const n of t)e=e.add(n);return e}const kF=new wt(_e);function PF(){return kF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function vC(t){return{integerValue:""+t}}function xF(t,e){return sF(e)?vC(e):By(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function RF(t,e,n){return t instanceof Ld?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Dy(s)&&(s=Vy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ll?wC(t,e):t instanceof Ml?EC(t,e):function(r,s){const o=_C(r,s),a=hE(o)+hE(r.Pe);return Lm(o)&&Lm(r.Pe)?vC(a):By(r.serializer,a)}(t,e)}function NF(t,e,n){return t instanceof Ll?wC(t,e):t instanceof Ml?EC(t,e):n}function _C(t,e){return t instanceof Md?function(i){return Lm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Ld extends bh{}class Ll extends bh{constructor(e){super(),this.elements=e}}function wC(t,e){const n=TC(e);for(const i of t.elements)n.some(r=>ti(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ml extends bh{constructor(e){super(),this.elements=e}}function EC(t,e){let n=TC(e);for(const i of t.elements)n=n.filter(r=>!ti(r,i));return{arrayValue:{values:n}}}class Md extends bh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hE(t){return Xe(t.integerValue||t.doubleValue)}function TC(t){return Fy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function OF(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Ll&&r instanceof Ll||i instanceof Ml&&r instanceof Ml?Po(i.elements,r.elements,ti):i instanceof Md&&r instanceof Md?ti(i.Pe,r.Pe):i instanceof Ld&&r instanceof Ld}(t.transform,e.transform)}class LF{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ch{}function SC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bC(t.key,Ai.none()):new oc(t.key,t.data,Ai.none());{const n=t.data,i=pn.empty();let r=new wt(vt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Cs(t.key,i,new Ln(r.toArray()),Ai.none())}}function MF(t,e,n){t instanceof oc?function(r,s,o){const a=r.value.clone(),l=pE(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Cs?function(r,s,o){if(!ku(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=pE(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(IC(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function nl(t,e,n,i){return t instanceof oc?function(s,o,a,l){if(!ku(s.precondition,o))return a;const u=s.value.clone(),d=mE(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Cs?function(s,o,a,l){if(!ku(s.precondition,o))return a;const u=mE(s.fieldTransforms,l,o),d=o.data;return d.setAll(IC(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,i):function(s,o,a){return ku(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function DF(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=_C(i.transform,r||null);s!=null&&(n===null&&(n=pn.empty()),n.set(i.field,s))}return n||null}function fE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Po(i,r,(s,o)=>OF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oc extends Ch{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cs extends Ch{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function pE(t,e,n){const i=new Map;Ae(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,NF(o,a,n[r]))}return i}function mE(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,RF(s,o,e))}return i}class bC extends Ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VF extends Ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&MF(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=nl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=nl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=yC();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=SC(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,(n,i)=>fE(n,i))&&Po(this.baseMutations,e.baseMutations,(n,i)=>fE(n,i))}}class $y{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ae(e.mutations.length===i.length);let r=function(){return CF}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new $y(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,de;function zF(t){switch(t){default:return re();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function CC(t){if(t===void 0)return Vi("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ze.OK:return B.OK;case Ze.CANCELLED:return B.CANCELLED;case Ze.UNKNOWN:return B.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return B.INTERNAL;case Ze.UNAVAILABLE:return B.UNAVAILABLE;case Ze.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ze.NOT_FOUND:return B.NOT_FOUND;case Ze.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ze.ABORTED:return B.ABORTED;case Ze.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ze.DATA_LOSS:return B.DATA_LOSS;default:return re()}}(de=Ze||(Ze={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=new rs([4294967295,4294967295],0);function gE(t){const e=BF().encode(t),n=new Qb;return n.update(e),new Uint8Array(n.digest())}function yE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rs([n,i],0),new rs([r,s],0)]}class Wy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Va(`Invalid padding: ${n}`);if(i<0)throw new Va(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Va(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=rs.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(rs.fromNumber(i)));return r.compare($F)===1&&(r=new rs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gE(e),[i,r]=yE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Wy(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gE(e),[i,r]=yE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ah(se.min(),r,new ze(_e),Fi(),ce())}}class ac{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ac(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class AC{constructor(e,n){this.targetId=e,this.me=n}}class kC{constructor(e,n,i=St.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class vE{constructor(){this.fe=0,this.ge=wE(),this.pe=St.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),i=ce();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:re()}}),new ac(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=wE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class WF{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fi(),this.qe=_E(),this.Qe=new ze(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Dm(s))if(i===0){const o=new ee(s.path);this.Ue(n,o,Mt.newNoDocument(o,se.min()))}else Ae(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=vs(i).toUint8Array()}catch(l){if(l instanceof sC)return ko("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Wy(o,r,s)}catch(l){return ko(l instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Dm(a.target)){const l=new ee(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Mt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Ah(e,n,this.Qe,this.ke,i);return this.ke=Fi(),this.qe=_E(),this.Qe=new ze(_e),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _E(){return new ze(ee.comparator)}function wE(){return new ze(ee.comparator)}const HF={asc:"ASCENDING",desc:"DESCENDING"},qF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GF={and:"AND",or:"OR"};class KF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fm(t,e){return t.useProto3Json||Eh(e)?e:{value:e}}function Dd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QF(t,e){return Dd(t,e.toTimestamp())}function ei(t){return Ae(!!t),se.fromTimestamp(function(n){const i=xr(n);return new ot(i.seconds,i.nanos)}(t))}function Hy(t,e){return Um(t,e).canonicalString()}function Um(t,e){const n=function(r){return new He(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xC(t){const e=He.fromString(t);return Ae(MC(e)),e}function jm(t,e){return Hy(t.databaseId,e.path)}function ep(t,e){const n=xC(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(NC(n))}function RC(t,e){return Hy(t.databaseId,e)}function YF(t){const e=xC(t);return e.length===4?He.emptyPath():NC(e)}function zm(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NC(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function EE(t,e,n){return{name:jm(t,e),fields:n.value.mapValue.fields}}function XF(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ae(d===void 0||typeof d=="string"),St.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array),St.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?B.UNKNOWN:CC(u.code);return new Z(d,u.message||"")}(o);n=new kC(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ep(t,i.document.name),s=ei(i.document.updateTime),o=i.document.createTime?ei(i.document.createTime):se.min(),a=new pn({mapValue:{fields:i.document.fields}}),l=Mt.newFoundDocument(r,s,o,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new Pu(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ep(t,i.document),s=i.readTime?ei(i.readTime):se.min(),o=Mt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Pu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ep(t,i.document),s=i.removedTargetIds||[];n=new Pu([],s,r,null)}else{if(!("filter"in e))return re();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new jF(r,s),a=i.targetId;n=new AC(a,o)}}return n}function JF(t,e){let n;if(e instanceof oc)n={update:EE(t,e.key,e.value)};else if(e instanceof bC)n={delete:jm(t,e.key)};else if(e instanceof Cs)n={update:EE(t,e.key,e.data),updateMask:a3(e.fieldMask)};else{if(!(e instanceof VF))return re();n={verify:jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Md)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:QF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function ZF(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?ei(r.updateTime):ei(s);return o.isEqual(se.min())&&(o=ei(s)),new LF(o,r.transformResults||[])}(n,e))):[]}function e3(t,e){return{documents:[RC(t,e.path)]}}function t3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=RC(t,r);const s=function(u){if(u.length!==0)return LC(ni.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Vs(f.field),direction:r3(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Fm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function n3(t){let e=YF(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ae(i===1);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=OC(h);return f instanceof ni&&cC(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(_){return new Od(Fs(_.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Eh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new Nd(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,g=h.values||[];return new Nd(g,f)}(n.endAt)),wF(e,r,o,s,a,"F",l,u)}function i3(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Fs(n.unaryFilter.field);return rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Fs(n.unaryFilter.field);return rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fs(n.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fs(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(Fs(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(i=>OC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function r3(t){return HF[t]}function s3(t){return qF[t]}function o3(t){return GF[t]}function Vs(t){return{fieldPath:t.canonicalString()}}function Fs(t){return vt.fromServerFormat(t.fieldPath)}function LC(t){return t instanceof rt?function(n){if(n.op==="=="){if(aE(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NAN"}};if(oE(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aE(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NOT_NAN"}};if(oE(n.value))return{unaryFilter:{field:Vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vs(n.field),op:s3(n.op),value:n.value}}}(t):t instanceof ni?function(n){const i=n.getFilters().map(r=>LC(r));return i.length===1?i[0]:{compositeFilter:{op:o3(n.op),filters:i}}}(t):re()}function a3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,i,r,s=se.min(),o=se.min(),a=St.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.ct=e}}function c3(t){const e=n3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.un=new d3}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Pr.min())}updateCollectionGroup(e,n,i){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class d3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new wt(He.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new wt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new No(0)}static kn(){return new No(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.changes=new Ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?j.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&nl(i.mutation,r,Ln.empty(),ot.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Da();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=Fi();const o=tl(),a=function(){return tl()}();return n.forEach((l,u)=>{const d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof Cs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),nl(d.mutation,u,d.mutation.getFieldMask(),ot.now())):o.set(u.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new f3(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=tl();let r=new ze((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=i.get(l)||Ln.empty();d=a.applyToLocalView(u,d),i.set(l,d);const h=(r.get(a.batchId)||ce()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=yC();d.forEach(f=>{if(!s.has(f)){const g=SC(n.get(f),i.get(f));g!==null&&h.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return j.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):j.resolve(es());let a=-1,l=s;return o.next(u=>j.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ce())).next(d=>({batchId:a,changes:gC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(i=>{let r=Da();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Da();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const u=function(h,f){return new Th(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Mt.newInvalidDocument(d)))});let a=Da();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&nl(d.mutation,u,Ln.empty(),ot.now()),Ih(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ei(r.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:c3(r.bundledQuery),readTime:ei(r.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.overlays=new ze(ee.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const i=es();return j.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),j.resolve()}getOverlaysForCollection(e,n,i){const r=es(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return j.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ze((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=s.get(u.largestBatchId);d===null&&(d=es(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=es(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return j.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new UF(n,i));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Tr=new wt(ct.Er),this.dr=new wt(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new ct(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ee(new He([])),i=new ct(n,e),r=new ct(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ee(new He([])),i=new ct(n,e),r=new ct(n,e+1);let s=ce();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ee.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(ct.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FF(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ct(n,0),r=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new wt(_e);return n.forEach(r=>{const s=new ct(r,0),o=new ct(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),j.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ee.isDocumentKey(s)||(s=s.child(""));const o=new ct(new ee(s),0);let a=new wt(_e);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return j.forEach(n.mutations,r=>{const s=new ct(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new ct(n,0),r=this.br.firstAfterOrEqual(i);return j.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.Mr=e,this.docs=function(){return new ze(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return j.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=Fi();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Mt.newInvalidDocument(r))}),j.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Fi();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||tF(eF(d),i)<=0||(r.has(d.key)||Ih(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,i,r){re()}Or(e,n){return j.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new w3(this)}getSize(e){return j.resolve(this.size)}}class w3 extends h3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.persistence=e,this.Nr=new Ko(n=>Uy(n),jy),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qy,this.targetCount=0,this.kr=No.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new No(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),j.waitFor(s).next(()=>r)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return j.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),j.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return j.resolve(i)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new My(0),this.Kr=!1,this.Kr=!0,this.$r=new y3,this.referenceDelegate=e(this),this.Ur=new E3(this),this.indexManager=new u3,this.remoteDocumentCache=function(r){return new _3(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new l3(n),this.Gr=new m3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new v3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){X("MemoryPersistence","Starting transaction:",e);const r=new S3(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class S3 extends iF{constructor(e){super(),this.currentSequenceNumber=e}}class Gy{constructor(e){this.persistence=e,this.Jr=new qy,this.Yr=null}static Zr(e){return new Gy(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),j.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,i=>{const r=ee.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ky(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pO()?8:rF(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new I3;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Ia()<=le.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Ia()<=le.DEBUG&&X("QueryEngine","Query:",Ds(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Ia()<=le.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zn(n))):j.resolve())}Yi(e,n){if(dE(n))return j.resolve(null);let i=Zn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Vm(n,null,"F"),i=Zn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Vm(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return dE(n)||r.isEqual(se.min())?j.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?j.resolve(null):(Ia()<=le.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ds(n)),this.rs(e,o,n,Z5(r,-1)).next(a=>a))})}ts(e,n){let i=new wt(pC(e));return n.forEach((r,s)=>{Ih(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Ia()<=le.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new ze(_e),this._s=new Ko(s=>Uy(s),jy),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function A3(t,e,n,i){return new C3(t,e,n,i)}async function DC(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ce();for(const u of r){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function k3(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let g=j.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(l,_)).next(E=>{const A=u.docVersions.get(_);Ae(A!==null),E.version.compareTo(A)<0&&(h.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function VC(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function P3(t,e){const n=oe(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=r.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(St.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,i)),r=r.insert(h,g),function(E,A,v){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,d)&&a.push(n.Ur.updateTargetData(s,g))});let l=Fi(),u=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(x3(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!i.isEqual(se.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function x3(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Fi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function R3(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function N3(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,j.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new ur(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Bm(t,e,n){const i=oe(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!sc(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function TE(t,e,n){const i=oe(t);let r=se.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=oe(l),f=h._s.get(d);return f!==void 0?j.resolve(h.os.get(f)):h.Ur.getTargetData(u,d)}(i,o,Zn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:se.min(),n?s:ce())).next(a=>(O3(i,SF(e),a),{documents:a,Ts:s})))}function O3(t,e,n){let i=t.us.get(e)||se.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class SE{constructor(){this.activeTargetIds=PF()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class L3{constructor(){this.so=new SE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new SE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function tp(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class F3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=tp(),l=this.xo(n,i.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ko("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",r),d})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=D3[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=tp();return new Promise((o,a)=>{const l=new Yb;l.setWithCredentials(!0),l.listenOnce(Jb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Cu.NO_ERROR:const d=l.getResponseJson();X(Pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Cu.TIMEOUT:X(Pt,`RPC '${e}' ${s} timed out`),a(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const h=l.getStatus();if(X(Pt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const _=function(A){const v=A.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(g.status);a(new Z(_,g.message))}else a(new Z(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Z(B.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{X(Pt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);X(Pt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=tp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tC(),a=eC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new Xb({})),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const d=s.join("");X(Pt,`Creating RPC '${e}' stream ${r}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,g=!1;const _=new V3({Io:A=>{g?X(Pt,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(f||(X(Pt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),X(Pt,`RPC '${e}' stream ${r} sending:`,A),h.send(A))},To:()=>h.close()}),E=(A,v,y)=>{A.listen(v,w=>{try{y(w)}catch(P){setTimeout(()=>{throw P},0)}})};return E(h,Ma.EventType.OPEN,()=>{g||(X(Pt,`RPC '${e}' stream ${r} transport opened.`),_.yo())}),E(h,Ma.EventType.CLOSE,()=>{g||(g=!0,X(Pt,`RPC '${e}' stream ${r} transport closed`),_.So())}),E(h,Ma.EventType.ERROR,A=>{g||(g=!0,ko(Pt,`RPC '${e}' stream ${r} transport errored:`,A),_.So(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),E(h,Ma.EventType.MESSAGE,A=>{var v;if(!g){const y=A.data[0];Ae(!!y);const w=y,P=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(P){X(Pt,`RPC '${e}' stream ${r} received error:`,P);const O=P.status;let D=function(b){const C=Ze[b];if(C!==void 0)return CC(C)}(O),k=P.message;D===void 0&&(D=B.INTERNAL,k="Unknown error status: "+O+" with message "+P.message),g=!0,_.So(new Z(D,k)),h.close()}else X(Pt,`RPC '${e}' stream ${r} received:`,y),_.bo(y)}}),E(a,Zb.STAT_EVENT,A=>{A.stat===Nm.PROXY?X(Pt,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===Nm.NOPROXY&&X(Pt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t){return new KF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&X("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new FC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Vi(n.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new Z(B.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U3 extends UC{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XF(this.serializer,e),i=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?ei(o.readTime):se.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=zm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Dm(l)?{documents:e3(s,l)}:{query:t3(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PC(s,o.resumeToken);const u=Fm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Dd(s,o.snapshotVersion.toTimestamp());const u=Fm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=i3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=zm(this.serializer),n.removeTarget=e,this.a_(n)}}class j3 extends UC{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZF(e.writeResults,e.commitTime),i=ei(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=zm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>JF(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Um(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(B.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Um(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class B3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Vi(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{As(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.L_.add(4),await lc(u),u.q_.set("Unknown"),u.L_.delete(4),await Ph(u)}(this))})}),this.q_=new B3(i,r)}}async function Ph(t){if(As(t))for(const e of t.B_)await e(!0)}async function lc(t){for(const e of t.B_)await e(!1)}function jC(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Jy(n)?Xy(n):Qo(n).r_()&&Yy(n,e))}function Qy(t,e){const n=oe(t),i=Qo(n);n.N_.delete(e),i.r_()&&zC(n,e),n.N_.size===0&&(i.r_()?i.o_():As(n)&&n.q_.set("Unknown"))}function Yy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qo(t).A_(e)}function zC(t,e){t.Q_.xe(e),Qo(t).R_(e)}function Xy(t){t.Q_=new WF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Qo(t).start(),t.q_.v_()}function Jy(t){return As(t)&&!Qo(t).n_()&&t.N_.size>0}function As(t){return oe(t).L_.size===0}function BC(t){t.Q_=void 0}async function W3(t){t.q_.set("Online")}async function H3(t){t.N_.forEach((e,n)=>{Yy(t,e)})}async function q3(t,e){BC(t),Jy(t)?(t.q_.M_(e),Xy(t)):t.q_.set("Unknown")}async function G3(t,e,n){if(t.q_.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(t,i)}else if(e instanceof Pu?t.Q_.Ke(e):e instanceof AC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const i=await VC(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(St.EMPTY_BYTE_STRING,d.snapshotVersion)),zC(s,l);const h=new ur(d.target,l,u,d.sequenceNumber);Yy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){X("RemoteStore","Failed to raise snapshot:",i),await Vd(t,i)}}async function Vd(t,e,n){if(!sc(e))throw e;t.L_.add(1),await lc(t),t.q_.set("Offline"),n||(n=()=>VC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ph(t)})}function $C(t,e){return e().catch(n=>Vd(t,n,e))}async function xh(t){const e=oe(t),n=Rr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;K3(e);)try{const r=await R3(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,Q3(e,r)}catch(r){await Vd(e,r)}WC(e)&&HC(e)}function K3(t){return As(t)&&t.O_.length<10}function Q3(t,e){t.O_.push(e);const n=Rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function WC(t){return As(t)&&!Rr(t).n_()&&t.O_.length>0}function HC(t){Rr(t).start()}async function Y3(t){Rr(t).p_()}async function X3(t){const e=Rr(t);for(const n of t.O_)e.m_(n.mutations)}async function J3(t,e,n){const i=t.O_.shift(),r=$y.from(i,e,n);await $C(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await xh(t)}async function Z3(t,e){e&&Rr(t).V_&&await async function(i,r){if(function(o){return zF(o)&&o!==B.ABORTED}(r.code)){const s=i.O_.shift();Rr(i).s_(),await $C(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await xh(i)}}(t,e),WC(t)&&HC(t)}async function bE(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const i=As(n);n.L_.add(3),await lc(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ph(n)}async function eU(t,e){const n=oe(t);e?(n.L_.delete(2),await Ph(n)):e||(n.L_.add(2),await lc(n),n.q_.set("Unknown"))}function Qo(t){return t.K_||(t.K_=function(n,i,r){const s=oe(n);return s.w_(),new U3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:W3.bind(null,t),Ro:H3.bind(null,t),mo:q3.bind(null,t),d_:G3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Jy(t)?Xy(t):t.q_.set("Unknown")):(await t.K_.stop(),BC(t))})),t.K_}function Rr(t){return t.U_||(t.U_=function(n,i,r){const s=oe(n);return s.w_(),new j3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Y3.bind(null,t),mo:Z3.bind(null,t),f_:X3.bind(null,t),g_:J3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await xh(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Zy(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(t,e){if(Vi("AsyncQueue",`${e}: ${t}`),sc(t))return new Z(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ee.comparator(n.key,i.key):(n,i)=>ee.comparator(n.key,i.key),this.keyedMap=Da(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.W_=new ze(ee.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Oo{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Oo(e,n,mo.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nU{constructor(){this.queries=AE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=oe(n),s=r.queries;r.queries=AE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function AE(){return new Ko(t=>fC(t),Sh)}async function iU(t,e){const n=oe(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new tU,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ev(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&tv(n)}async function rU(t,e){const n=oe(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function sU(t,e){const n=oe(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&tv(n)}function oU(t,e,n){const i=oe(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function tv(t){t.Y_.forEach(e=>{e.next()})}var $m,kE;(kE=$m||($m={})).ea="default",kE.Cache="cache";class aU{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Oo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.key=e}}class GC{constructor(e){this.key=e}}class lU{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=pC(e),this.Ra=new mo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new CE,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,h)=>{const f=r.get(d),g=Ih(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;f&&g?f.data.isEqual(g.data)?_!==E&&(i.track({type:3,doc:g}),A=!0):this.ga(f,g)||(i.track({type:2,doc:g}),A=!0,(l&&this.Aa(g,l)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),A=!0):f&&!g&&(i.track({type:1,doc:f}),A=!0,(l||u)&&(a=!0)),A&&(g?(o=o.add(g),s=E?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(g,_){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return E(g)-E(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Oo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new CE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new GC(i))}),this.da.forEach(i=>{e.has(i)||n.push(new qC(i))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class cU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class uU{constructor(e){this.key=e,this.va=!1}}class dU{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ko(a=>fC(a),Sh),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(ee.comparator),this.Na=new Map,this.La=new qy,this.Ba={},this.ka=new Map,this.qa=No.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hU(t,e,n=!0){const i=ZC(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await KC(i,e,n,!0),r}async function fU(t,e){const n=ZC(t);await KC(n,e,!0,!1)}async function KC(t,e,n,i){const r=await N3(t.localStore,Zn(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await pU(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&jC(t.remoteStore,r),a}async function pU(t,e,n,i,r){t.Ka=(h,f,g)=>async function(E,A,v,y){let w=A.view.ma(v);w.ns&&(w=await TE(E.localStore,A.query,!1).then(({documents:k})=>A.view.ma(k,w)));const P=y&&y.targetChanges.get(A.targetId),O=y&&y.targetMismatches.get(A.targetId)!=null,D=A.view.applyChanges(w,E.isPrimaryClient,P,O);return xE(E,A.targetId,D.wa),D.snapshot}(t,h,f,g);const s=await TE(t.localStore,e,!0),o=new lU(e,s.Ts),a=o.ma(s.documents),l=ac.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);xE(t,n,u.wa);const d=new cU(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function mU(t,e,n){const i=oe(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Sh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Bm(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Qy(i.remoteStore,r.targetId),Wm(i,r.targetId)}).catch(rc)):(Wm(i,r.targetId),await Bm(i.localStore,r.targetId,!0))}async function gU(t,e){const n=oe(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Qy(n.remoteStore,i.targetId))}async function yU(t,e,n){const i=IU(t);try{const r=await function(o,a){const l=oe(o),u=ot.now(),d=a.reduce((g,_)=>g.add(_.key),ce());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Fi(),E=ce();return l.cs.getEntries(g,d).next(A=>{_=A,_.forEach((v,y)=>{y.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(A=>{h=A;const v=[];for(const y of a){const w=DF(y,h.get(y.key).overlayedDocument);w!=null&&v.push(new Cs(y.key,w,oC(w.value.mapValue),Ai.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,v,a)}).next(A=>{f=A;const v=A.applyToLocalDocumentSet(h,E);return l.documentOverlayCache.saveOverlays(g,A.batchId,v)})}).then(()=>({batchId:f.batchId,changes:gC(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new ze(_e)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await cc(i,r.changes),await xh(i.remoteStore)}catch(r){const s=ev(r,"Failed to persist write");n.reject(s)}}async function QC(t,e){const n=oe(t);try{const i=await P3(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ae(o.va):r.removedDocuments.size>0&&(Ae(o.va),o.va=!1))}),await cc(n,i,e)}catch(i){await rc(i)}}function PE(t,e,n){const i=oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(u=!0)}),u&&tv(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vU(t,e,n){const i=oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new ze(ee.comparator);o=o.insert(s,Mt.newNoDocument(s,se.min()));const a=ce().add(s),l=new Ah(se.min(),new Map,new ze(_e),o,a);await QC(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),nv(i)}else await Bm(i.localStore,e,!1).then(()=>Wm(i,e,n)).catch(rc)}async function _U(t,e){const n=oe(t),i=e.batch.batchId;try{const r=await k3(n.localStore,e);XC(n,i,null),YC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cc(n,r)}catch(r){await rc(r)}}async function wU(t,e,n){const i=oe(t);try{const r=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Ae(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,e);XC(i,e,n),YC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await cc(i,r)}catch(r){await rc(r)}}function YC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function XC(t,e,n){const i=oe(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Wm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||JC(t,i)})}function JC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Qy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),nv(t))}function xE(t,e,n){for(const i of n)i instanceof qC?(t.La.addReference(i.key,e),EU(t,i)):i instanceof GC?(X("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||JC(t,i.key)):re()}function EU(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(i),nv(t))}function nv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ee(He.fromString(e)),i=t.qa.next();t.Na.set(i,new uU(n)),t.Oa=t.Oa.insert(n,i),jC(t.remoteStore,new ur(Zn(zy(n.path)),i,"TargetPurposeLimboResolution",My.oe))}}async function cc(t,e,n){const i=oe(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var d;if((u||n)&&i.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Ky.Wi(l.targetId,u);s.push(h)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(u,f=>j.forEach(f.$i,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>j.forEach(f.Ui,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!sc(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const g=d.os.get(f),_=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(f,E)}}}(i.localStore,s))}async function TU(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const i=await DC(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Z(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cc(n,i.hs)}}function SU(t,e){const n=oe(t),i=n.Na.get(e);if(i&&i.va)return ce().add(i.key);{let r=ce();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function ZC(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vU.bind(null,e),e.Ca.d_=sU.bind(null,e.eventManager),e.Ca.$a=oU.bind(null,e.eventManager),e}function IU(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wU.bind(null,e),e}class RE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return A3(this.persistence,new b3,e.initialUser,this.serializer)}createPersistence(e){return new T3(Gy.Zr,this.serializer)}createSharedClientState(e){return new L3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bU{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>PE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TU.bind(null,this.syncEngine),await eU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nU}()}createDatastore(e){const n=kh(e.databaseInfo.databaseId),i=function(s){return new F3(s)}(e.databaseInfo);return function(s,o,a,l){return new z3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new $3(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>PE(this.syncEngine,n,0),function(){return IE.D()?new IE:new M3}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,d){const h=new dU(r,s,o,a,l,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=oe(r);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await lc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Rt.UNAUTHENTICATED,this.clientId=iC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{X("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ev(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ip(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await DC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PU(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>bE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>bE(e.remoteStore,r)),t._onlineComponents=e}function kU(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function PU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await ip(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!kU(n))throw n;ko("Error using user provided cache. Falling back to memory cache: "+n),await ip(t,new RE)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await ip(t,new RE);return t._offlineComponents}async function eA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await NE(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await NE(t,new bU))),t._onlineComponents}function xU(t){return eA(t).then(e=>e.syncEngine)}async function RU(t){const e=await eA(t),n=e.eventManager;return n.onListen=hU.bind(null,e.syncEngine),n.onUnlisten=mU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gU.bind(null,e.syncEngine),n}function NU(t,e,n={}){const i=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new CU({next:f=>{o.enqueueAndForget(()=>rU(s,h));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new Z(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new Z(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new aU(zy(a.path),d,{includeMetadataChanges:!0,_a:!0});return iU(s,h)}(await RU(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e,n){if(!n)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LU(t,e,n,i){if(e===!0&&i===!0)throw new Z(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LE(t){if(!ee.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Dl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iv(t);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rv{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ME({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ME(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new W5;switch(i.type){case"firstParty":return new K5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=OE.get(n);i&&(X("ComponentProvider","Removing Datastore"),OE.delete(n),i.terminate())}(this),Promise.resolve()}}function MU(t,e,n,i={}){var r;const s=(t=Dl(t,rv))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Rt.MOCK_USER;else{a=ey(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Rt(u)}t._authCredentials=new H5(new nC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new sv(this.firestore,e,this._query)}}class _n{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class Vl extends sv{constructor(e,n,i){super(e,n,zy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new ee(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function Gr(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=iC.newId()),OU("doc","path",e),t instanceof rv){const i=He.fromString(e,...n);return LE(i),new _n(t,null,new ee(i))}{if(!(t instanceof _n||t instanceof Vl))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(He.fromString(e,...n));return LE(i),new _n(t.firestore,t instanceof Vl?t.converter:null,new ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new FC(this,"async_queue_retry"),this.Eu=()=>{const n=np();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=np();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Ir;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!sc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(i=>{this.hu=i,this.Pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Vi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Pu=!1,i))));return this.au=n,n}enqueueAfterDelay(e,n,i){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const r=Zy.createAndSchedule(this,e,n,i,s=>this.Vu(s));return this.lu.push(r),r}du(){this.hu&&re()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class ov extends rv{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new DU}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||iA(this),this._firestoreClient.terminate()}}function VU(t,e){const n=typeof t=="object"?t:dh(),i=typeof t=="string"?t:"(default)",r=Kl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=Jg("firestore");s&&MU(r,...s)}return r}function nA(t){return t._firestoreClient||iA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function iA(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,d){return new aF(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new AU(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(St.fromBase64String(e))}catch(n){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lo(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=/^__.*__$/;class UU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new oc(e,this.data,n,this.fieldTransforms)}}function sA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class uv{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.vu(e),r}Cu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Su({path:i,Du:!1});return r.yu(),r}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Fd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(sA(this.wu)&&FU.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class jU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||kh(e)}Nu(e,n,i,r=!1){return new uv({wu:e,methodName:n,Ou:i,path:vt.emptyPath(),Du:!1,xu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zU(t){const e=t._freezeSettings(),n=kh(t._databaseId);return new jU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BU(t,e,n,i,r,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,r);cA("Data must be an object, but it was:",o,i);const a=aA(i,o);let l,u;if(s.merge)l=new Ln(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=$U(e,h,n);if(!o.contains(f))throw new Z(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);HU(d,f)||d.push(f)}l=new Ln(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new UU(new pn(a),l,u)}function oA(t,e){if(lA(t=Tt(t)))return cA("Unsupported field value:",e,t),aA(t,e);if(t instanceof rA)return function(i,r){if(!sA(r.wu))throw r.Mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Mu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=oA(a,r.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xF(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ot.fromDate(i);return{timestampValue:Dd(r.serializer,s)}}if(i instanceof ot){const s=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dd(r.serializer,s)}}if(i instanceof lv)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Lo)return{bytesValue:PC(r.serializer,i._byteString)};if(i instanceof _n){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof cv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return By(a.serializer,l)})}}}}}}(i,r);throw r.Mu(`Unsupported field value: ${iv(i)}`)}(t,e)}function aA(t,e){const n={};return rC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Go(t,(i,r)=>{const s=oA(r,e.bu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function lA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof lv||t instanceof Lo||t instanceof _n||t instanceof rA||t instanceof cv)}function cA(t,e,n){if(!lA(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=iv(n);throw i==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+i)}}function $U(t,e,n){if((e=Tt(e))instanceof av)return e._internalPath;if(typeof e=="string")return uA(t,e);throw Fd("Field path arguments must be of type string or ",t,!1,void 0,n)}const WU=new RegExp("[~\\*/\\[\\]]");function uA(t,e,n){if(e.search(WU)>=0)throw Fd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new av(...e.split("."))._internalPath}catch{throw Fd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fd(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Z(B.INVALID_ARGUMENT,a+t+l)}function HU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qU extends dA{data(){return super.data()}}function hA(t,e){return typeof e=="string"?uA(t,e):e instanceof av?e._internalPath:e._delegate._internalPath}class GU{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Go(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Xe(o.doubleValue));return new cv(s)}convertGeoPoint(e){return new lv(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Vy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Rl(e));default:return null}}convertTimestamp(e){const n=xr(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=He.fromString(e);Ae(MC(i));const r=new Nl(i.get(1),i.get(3)),s=new ee(i.popFirst(5));return r.isEqual(n)||Vi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fA extends dA{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new YU(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(hA("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class YU extends fA{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){t=Dl(t,_n);const e=Dl(t.firestore,ov);return NU(nA(e),t._key).then(n=>ej(e,t,n))}class JU extends GU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function Us(t,e,n){t=Dl(t,_n);const i=Dl(t.firestore,ov),r=KU(t.converter,e,n);return ZU(i,[BU(zU(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ai.none())])}function ZU(t,e){return function(i,r){const s=new Ir;return i.asyncQueue.enqueueAndForget(async()=>yU(await xU(i),r,s)),s.promise}(nA(t),e)}function ej(t,e,n){const i=n.docs.get(e._key),r=new JU(t);return new fA(t,r,e._key,i,new QU(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){qo=r})(Vr),Ar(new Oi("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new ov(new q5(i.getProvider("auth-internal")),new Y5(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(u.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vn(tE,"4.7.0",e),vn(tE,"4.7.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firebasestorage.googleapis.com",mA="storageBucket",tj=2*60*1e3,nj=10*60*1e3,ij=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends ii{constructor(e,n,i=0){super(rp(e),`Firebase Storage: ${n} (${rp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Be.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function rp(t){return"storage/"+t}function dv(){const t="An unknown error occurred, please check the error payload for server response.";return new Be(De.UNKNOWN,t)}function rj(t){return new Be(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sj(t){return new Be(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Be(De.UNAUTHENTICATED,t)}function aj(){return new Be(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lj(t){return new Be(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function gA(){return new Be(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yA(){return new Be(De.CANCELED,"User canceled the upload/download.")}function cj(t){return new Be(De.INVALID_URL,"Invalid URL '"+t+"'.")}function uj(t){return new Be(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dj(){return new Be(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mA+"' property when initializing the app?")}function vA(){return new Be(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hj(){return new Be(De.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function fj(){return new Be(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pj(t){return new Be(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hm(t){return new Be(De.INVALID_ARGUMENT,t)}function _A(){return new Be(De.APP_DELETED,"The Firebase app was deleted.")}function mj(t){return new Be(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function il(t,e){return new Be(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ba(t){throw new Be(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(i.path==="")return i;throw uj(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${r}/o${f}`,"i"),_={bucket:1,path:3},E=n===pA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",v=new RegExp(`^https?://${E}/${r}/${A}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:g,indices:_,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<w.length;P++){const O=w[P],D=O.regex.exec(e);if(D){const k=D[O.indices.bucket];let S=D[O.indices.path];S||(S=""),i=new sn(k,S),O.postModify(i);break}}if(i==null)throw cj(e);return i}}class gj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...A){u||(u=!0,e.apply(null,A))}function h(A){r=setTimeout(()=>{r=null,t(g,l())},A)}function f(){s&&clearTimeout(s)}function g(A,...v){if(u){f();return}if(A){f(),d.call(null,A,...v);return}if(l()||o){f(),d.call(null,A,...v);return}i<64&&(i*=2);let w;a===1?(a=2,w=0):w=(i+Math.random())*1e3,h(w)}let _=!1;function E(A){_||(_=!0,f(),!u&&(r!==null?(A||(a=2),clearTimeout(r),h(0)):A||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function vj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){return t!==void 0}function wj(t){return typeof t=="function"}function Ej(t){return typeof t=="object"&&!Array.isArray(t)}function Rh(t){return typeof t=="string"||t instanceof String}function DE(t){return hv()&&t instanceof Blob}function hv(){return typeof Blob<"u"}function VE(t,e,n,i){if(i<e)throw Hm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Hm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function wA(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ss;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ss||(ss={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,n,i,r,s,o,a,l,u,d,h,f=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,_)=>{this.resolve_=g,this.reject_=_,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new ru(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ss.NO_ERROR,l=s.getStatus();if(!a||EA(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===ss.ABORT;i(!1,new ru(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;i(!0,new ru(u,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());_j(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=dv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?_A():yA();o(l)}else{const l=gA();o(l)}};this.canceled_?n(!1,new ru(!1,null,!0)):this.backoffId_=yj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ru{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function Sj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ij(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Cj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Aj(t,e,n,i,r,s,o=!0){const a=wA(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return bj(u,e),Sj(u,n),Ij(u,s),Cj(u,i),new Tj(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Pj(...t){const e=kj();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(hv())return new Blob(t);throw new Be(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t){if(typeof atob>"u")throw pj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sp{constructor(e,n){this.data=e,this.contentType=n||null}}function Nj(t,e){switch(t){case Qn.RAW:return new sp(TA(e));case Qn.BASE64:case Qn.BASE64URL:return new sp(SA(t,e));case Qn.DATA_URL:return new sp(Lj(e),Mj(e))}throw dv()}function TA(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Oj(t){let e;try{e=decodeURIComponent(t)}catch{throw il(Qn.DATA_URL,"Malformed data URL.")}return TA(e)}function SA(t,e){switch(t){case Qn.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw il(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw il(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Rj(e)}catch(r){throw r.message.includes("polyfill")?r:il(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class IA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw il(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=Dj(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Lj(t){const e=new IA(t);return e.base64?SA(Qn.BASE64,e.rest):Oj(e.rest)}function Mj(t){return new IA(t).contentType}function Dj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){let i=0,r="";DE(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(DE(this.data_)){const i=this.data_,r=xj(i,e,n);return r===null?null:new rr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new rr(i,!0)}}static getBlob(...e){if(hv()){const n=e.map(i=>i instanceof rr?i.data_:i);return new rr(Pj.apply(null,n))}else{const n=e.map(o=>Rh(o)?Nj(Qn.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new rr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){let e;try{e=JSON.parse(t)}catch{return null}return Ej(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Fj(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function CA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e){return e}class zt{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||Uj}}let su=null;function jj(t){return!Rh(t)||t.length<2?t:CA(t)}function AA(){if(su)return su;const t=[];t.push(new zt("bucket")),t.push(new zt("generation")),t.push(new zt("metageneration")),t.push(new zt("name","fullPath",!0));function e(s,o){return jj(o)}const n=new zt("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new zt("size");return r.xform=i,t.push(r),t.push(new zt("timeCreated")),t.push(new zt("updated")),t.push(new zt("md5Hash",null,!0)),t.push(new zt("cacheControl",null,!0)),t.push(new zt("contentDisposition",null,!0)),t.push(new zt("contentEncoding",null,!0)),t.push(new zt("contentLanguage",null,!0)),t.push(new zt("contentType",null,!0)),t.push(new zt("metadata","customMetadata",!0)),su=t,su}function zj(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new sn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Bj(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return zj(i,t),i}function kA(t,e,n){const i=bA(e);return i===null?null:Bj(t,i,n)}function $j(t,e,n,i){const r=bA(e);if(r===null||!Rh(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),g=uc(f,n,i),_=wA({alt:"media",token:u});return g+_})[0]}function PA(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Yo{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){if(!t)throw dv()}function fv(t,e){function n(i,r){const s=kA(t,r,e);return ki(s!==null),s}return n}function Wj(t,e){function n(i,r){const s=kA(t,r,e);return ki(s!==null),$j(s,r,t.host,t._protocol)}return n}function dc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=aj():r=oj():n.getStatus()===402?r=sj(t.bucket):n.getStatus()===403?r=lj(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function xA(t){const e=dc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=rj(t.path)),s.serverResponse=r.serverResponse,s}return n}function Hj(t,e,n){const i=e.fullServerUrl(),r=uc(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Yo(r,s,fv(t,n),o);return a.errorHandler=xA(e),a}function qj(t,e,n){const i=e.fullServerUrl(),r=uc(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Yo(r,s,Wj(t,n),o);return a.errorHandler=xA(e),a}function Gj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RA(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=Gj(null,e)),i}function Kj(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let P=0;P<2;P++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=RA(e,i,r),d=PA(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=rr.getBlob(h,i,f);if(g===null)throw vA();const _={name:u.fullPath},E=uc(s,t.host,t._protocol),A="POST",v=t.maxUploadRetryTime,y=new Yo(E,A,fv(t,n),v);return y.urlParams=_,y.headers=o,y.body=g.uploadData(),y.errorHandler=dc(e),y}class Ud{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function pv(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ki(!1)}return ki(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Qj(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o=RA(e,i,r),a={name:o.fullPath},l=uc(s,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=PA(o,n),f=t.maxUploadRetryTime;function g(E){pv(E);let A;try{A=E.getResponseHeader("X-Goog-Upload-URL")}catch{ki(!1)}return ki(Rh(A)),A}const _=new Yo(l,u,g,f);return _.urlParams=a,_.headers=d,_.body=h,_.errorHandler=dc(e),_}function Yj(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(u){const d=pv(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ki(!1)}h||ki(!1);const f=Number(h);return ki(!isNaN(f)),new Ud(f,i.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Yo(n,o,s,a);return l.headers=r,l.errorHandler=dc(e),l}const FE=256*1024;function Xj(t,e,n,i,r,s,o,a){const l=new Ud(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw hj();const u=l.total-l.current;let d=u;r>0&&(d=Math.min(d,r));const h=l.current,f=h+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const _={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},E=i.slice(h,f);if(E===null)throw vA();function A(P,O){const D=pv(P,["active","final"]),k=l.current+d,S=i.size();let b;return D==="final"?b=fv(e,s)(P,O):b=null,new Ud(k,S,D==="final",b)}const v="POST",y=e.maxUploadRetryTime,w=new Yo(n,v,A,y);return w.headers=_,w.body=E.uploadData(),w.progressCallback=a||null,w.errorHandler=dc(t),w}const Gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function op(t){switch(t){case"running":case"pausing":case"canceling":return Gt.RUNNING;case"paused":return Gt.PAUSED;case"success":return Gt.SUCCESS;case"canceled":return Gt.CANCELED;case"error":return Gt.ERROR;default:return Gt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,i){if(wj(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Zj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ss.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ss.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ss.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw ba("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ba("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ba("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ba("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ba("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e6 extends Zj{initXhr(){this.xhr_.responseType="text"}}function js(){return new e6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=AA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(De.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(EA(r.status,[]))if(s)r=gA();else{this.sleepTime=Math.max(this.sleepTime*2,ij),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(De.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=Qj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,js,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=Yj(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,js,n,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=FE*this._chunkMultiplier,n=new Ud(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=Xj(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,js,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){FE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=Hj(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,js,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=Kj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,js,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=yA(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=op(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new Jj(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(op(this._state)){case Gt.SUCCESS:Ls(this._resolve.bind(null,this.snapshot))();break;case Gt.CANCELED:case Gt.ERROR:const n=this._reject;Ls(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(op(this._state)){case Gt.RUNNING:case Gt.PAUSED:e.next&&Ls(e.next.bind(e,this.snapshot))();break;case Gt.SUCCESS:e.complete&&Ls(e.complete.bind(e))();break;case Gt.CANCELED:case Gt.ERROR:e.error&&Ls(e.error.bind(e,this._error))();break;default:e.error&&Ls(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ws(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CA(this._location.path)}get storage(){return this._service}get parent(){const e=Vj(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new ws(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw mj(e)}}function n6(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new t6(t,new rr(e),n)}function i6(t){t._throwIfRoot("getDownloadURL");const e=qj(t.storage,t._location,AA());return t.storage.makeRequestWithTokens(e,js).then(n=>{if(n===null)throw fj();return n})}function r6(t,e){const n=Fj(t._location.path,e),i=new sn(t._location.bucket,n);return new ws(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return/^[A-Za-z]+:\/\//.test(t)}function o6(t,e){return new ws(t,e)}function NA(t,e){if(t instanceof mv){const n=t;if(n._bucket==null)throw dj();const i=new ws(n,n._bucket);return e!=null?NA(i,e):i}else return e!==void 0?r6(t,e):t}function a6(t,e){if(e&&s6(e)){if(t instanceof mv)return o6(t,e);throw Hm("To use ref(service, url), the first argument must be a Storage instance.")}else return NA(t,e)}function UE(t,e){const n=e==null?void 0:e[mA];return n==null?null:sn.makeFromBucketSpec(n,t)}function l6(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:ey(r,t.app.options.projectId))}class mv{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=pA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tj,this._maxUploadRetryTime=nj,this._requests=new Set,r!=null?this._bucket=sn.makeFromBucketSpec(r,this._host):this._bucket=UE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=UE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ws(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new gj(_A());{const o=Aj(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const jE="@firebase/storage",zE="0.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="storage";function c6(t,e,n){return t=Tt(t),n6(t,e,n)}function u6(t){return t=Tt(t),i6(t)}function d6(t,e){return t=Tt(t),a6(t,e)}function h6(t=dh(),e){t=Tt(t);const i=Kl(t,OA).getImmediate({identifier:e}),r=Jg("storage");return r&&f6(i,...r),i}function f6(t,e,n,i={}){l6(t,e,n,i)}function p6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new mv(n,i,r,e,Vr)}function m6(){Ar(new Oi(OA,p6,"PUBLIC").setMultipleInstances(!0)),vn(jE,zE,""),vn(jE,zE,"esm2017")}m6();const g6={apiKey:"AIzaSyDTeUPlMVgXYt60SAUE7y5COkCxywRJbeQ",authDomain:"moviza-db6ad.firebaseapp.com",databaseURL:"https://moviza-db6ad-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"moviza-db6ad",storageBucket:"moviza-db6ad.appspot.com",messagingSenderId:"1088122486336",appId:"1:1088122486336:web:38f3550ca70e818a2969a5",measurementId:"G-XLQ7BYLPQG"},Nh=eI(g6),ou=t4(Nh),y6=new mi;z5(Nh);const Kr=VU(Nh),v6=h6(Nh);function _6({enforceGoogleSignIn:t=!1,handleUpdate:e}){const n=Dr(),i=M.useRef(null),r=M.useRef(null),s=M.useRef(null),[o,a]=M.useState(""),[l,u]=M.useState(""),[d,h]=M.useState(""),[f,g]=M.useState(""),[_,E]=M.useState(!1),[A,v]=M.useState(!1),[y,w]=M.useState("");M.useEffect(()=>{i.current&&i.current.classList.contains("error")&&i.current.classList.remove("error"),r.current&&r.current.classList.contains("error")&&r.current.classList.remove("error"),s.current&&s.current.classList.contains("error")&&s.current.classList.remove("error"),w("")},[_,A]);const P=z=>a(z.target.value),O=z=>u(z.target.value),D=z=>h(z.target.value),k=z=>g(z.target.value),S=()=>E(z=>!z),b=()=>v(z=>!z),C=async z=>{if(z.preventDefault(),d.length<6){w("Password should be at least 6 characters"),r.current.classList.contains("error")&&r.current.classList.remove("error"),setTimeout(()=>{r.current.classList.add("error")},100);return}if(d===f)try{const J=await MM(ou,l,d);window.localStorage.setItem("user",JSON.stringify(J.user)),console.log("signed up"),e(J.user.email,o,["start"],["start"]),n("/",{state:{message:"Welcome to Moviza!",fromSignIn:!0},replace:!0})}catch(J){J.message==="Firebase: Password should be at least 6 characters (auth/weak-password)."?(w("Password should be at least 6 characters"),r.current.classList.contains("error")&&r.current.classList.remove("error"),setTimeout(()=>{r.current.classList.add("error")},100)):J.message==="Firebase: Error (auth/email-already-in-use)."?(w("This Email already in use"),i.current.classList.contains("error")&&i.current.classList.remove("error"),setTimeout(()=>{i.current.classList.add("error")},100)):(w("An unexpected error occurred. Please try again."),console.error("Error Signing Up:",J.message))}else w("Confirm Password Not Matched"),r.current.classList.contains("error")&&r.current.classList.remove("error"),s.current.classList.contains("error")&&s.current.classList.remove("error"),setTimeout(()=>{r.current.classList.add("error"),s.current.classList.add("error")},100)},N=async z=>{z.preventDefault();try{const J=await DM(ou,l,d);console.log(J.user),window.localStorage.setItem("user",JSON.stringify(J.user)),n("/",{state:{message:"Welcome back!",fromSignIn:!0},replace:!0})}catch(J){console.error("Error Logging In:",J.message),J.message=="Firebase: Error (auth/invalid-credential)."&&(w("Invalid Email or Password"),i.current.classList.contains("error")&&i.current.classList.remove("error"),r.current.classList.contains("error")&&r.current.classList.remove("error"),setTimeout(()=>{i.current.classList.add("error"),r.current.classList.add("error")},100))}},L=async()=>{try{const z=await uD(ou,y6),Pe=BM(z).isNewUser;window.localStorage.setItem("user",JSON.stringify(z.user)),Pe?(e(z.user.email,z.user.displayName,["Start"],["Start"]),console.log("Welcome, new user!")):(e(z.user.email,z.user.displayName),console.log("Welcome back!")),n("/",{state:{message:"Welcome "+z.user.displayName,fromSignIn:!0},replace:!0})}catch(z){console.error("Error with Google Sign-In:",z.message)}},x=async z=>{z.preventDefault();try{await LM(ou,l),alert("Password reset email sent!")}catch(J){console.error("Error sending password reset email:",J.message)}};return T.jsx("div",{className:"container form-container mt-5 pt-5",children:T.jsxs("div",{className:"row justify-content-center py-5 my-5 align-items-center h-100",children:[T.jsxs("div",{className:"col-11 col-md-5 d-flex flex-column bg-black p-md-5 p-4 rounded-3",children:[T.jsx("img",{className:"w-100 mx-auto",style:{"max-width":"150px"},src:zS,alt:"Moviza"}),T.jsx("h2",{className:"text-center mb-3",children:A?"Reset Password":_?"Sign Up":"Login"}),T.jsx("h6",{className:"text-danger mb-2",children:y}),A?T.jsxs("form",{className:"d-flex flex-column gap-4 my-3",onSubmit:x,children:[T.jsx("input",{className:"form-control py-3",type:"email",value:l,onChange:O,placeholder:"Email",required:!0}),T.jsx("button",{className:"custom-btn py-2 rounded-1",type:"submit",children:"Send Password Reset Email"})]}):T.jsxs("form",{className:"d-flex flex-column gap-4 my-3",onSubmit:_?C:N,children:[!t&&_&&T.jsx("div",{children:T.jsx("input",{className:"form-control py-3",type:"text",value:o,onChange:P,placeholder:"Display Name",required:!0})}),T.jsx("input",{ref:i,className:"form-control py-3",type:"email",value:l,onChange:O,placeholder:"Email",required:!0}),!t&&T.jsx("div",{children:T.jsx("input",{ref:r,className:"form-control py-3",type:"password",value:d,onChange:D,placeholder:"Password",required:!0})}),!t&&_&&T.jsx("div",{children:T.jsx("input",{ref:s,className:"form-control py-3",type:"password",value:f,onChange:k,placeholder:"Confirm Password",required:!0})}),!t&&T.jsx("button",{className:"custom-btn py-2 rounded-1",type:"submit",children:_?"Sign Up":"Login"})]}),!t&&!A&&T.jsxs(T.Fragment,{children:[_?"":T.jsx("p",{className:"text-end cursor",onClick:b,children:"Forgot your password?"}),T.jsx("p",{className:"text-center mt-5 cursor",onClick:S,children:_?"Already have an account? Login":"Don't have an account? Sign Up"})]}),A&&T.jsxs("p",{className:"text-end cursor",onClick:b,children:["Back to ",_?"Sign Up":"Login"]})]}),T.jsxs("div",{className:"col-11 mt-5",children:[t&&T.jsx("p",{children:"You can only sign in with Google."}),!A&&T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"text-center",children:"or"}),T.jsxs("button",{className:"btn cursor text-white d-flex align-items-center gap-2 w-100 justify-content-center",onClick:L,children:[_?"Sign Up with":"Sign in with",T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"97.53",height:"32",viewBox:"0 0 512 168",children:[T.jsx("path",{fill:"#FF302F",d:"m496.052 102.672l14.204 9.469c-4.61 6.79-15.636 18.44-34.699 18.44c-23.672 0-41.301-18.315-41.301-41.614c0-24.793 17.816-41.613 39.308-41.613c21.616 0 32.206 17.193 35.633 26.475l1.869 4.735l-55.692 23.049c4.236 8.348 10.84 12.584 20.183 12.584c9.345 0 15.823-4.61 20.495-11.525M452.384 87.66l37.19-15.45c-2.056-5.17-8.16-8.845-15.45-8.845c-9.281 0-22.176 8.223-21.74 24.295"}),T.jsx("path",{fill:"#20B15A",d:"M407.407 4.931h17.94v121.85h-17.94z"}),T.jsx("path",{fill:"#3686F7",d:"M379.125 50.593h17.318V124.6c0 30.711-18.128 43.357-39.558 43.357c-20.183 0-32.33-13.58-36.878-24.606l15.885-6.604c2.865 6.79 9.78 14.827 20.993 14.827c13.767 0 22.24-8.535 22.24-24.482v-5.98h-.623c-4.112 4.983-11.961 9.468-21.928 9.468c-20.807 0-39.87-18.128-39.87-41.488c0-23.486 19.063-41.8 39.87-41.8c9.905 0 17.816 4.423 21.928 9.282h.623zm1.245 38.499c0-14.702-9.78-25.417-22.239-25.417c-12.584 0-23.174 10.715-23.174 25.417c0 14.514 10.59 25.042 23.174 25.042c12.46.063 22.24-10.528 22.24-25.042"}),T.jsx("path",{fill:"#FF302F",d:"M218.216 88.78c0 23.984-18.688 41.613-41.613 41.613c-22.924 0-41.613-17.691-41.613-41.613c0-24.108 18.689-41.675 41.613-41.675c22.925 0 41.613 17.567 41.613 41.675m-18.19 0c0-14.95-10.84-25.23-23.423-25.23S153.18 73.83 153.18 88.78c0 14.826 10.84 25.23 23.423 25.23c12.584 0 23.423-10.404 23.423-25.23"}),T.jsx("path",{fill:"#FFBA40",d:"M309.105 88.967c0 23.984-18.689 41.613-41.613 41.613c-22.925 0-41.613-17.63-41.613-41.613c0-24.108 18.688-41.613 41.613-41.613c22.924 0 41.613 17.443 41.613 41.613m-18.253 0c0-14.95-10.839-25.23-23.423-25.23s-23.423 10.28-23.423 25.23c0 14.826 10.84 25.23 23.423 25.23c12.646 0 23.423-10.466 23.423-25.23"}),T.jsx("path",{fill:"#3686F7",d:"M66.59 112.328c-26.102 0-46.534-21.056-46.534-47.158c0-26.101 20.432-47.157 46.534-47.157c14.079 0 24.357 5.544 31.957 12.646l12.522-12.521C100.479 7.984 86.338.258 66.59.258C30.833.259.744 29.414.744 65.17s30.089 64.912 65.846 64.912c19.312 0 33.889-6.354 45.289-18.19c11.711-11.712 15.324-28.158 15.324-41.489c0-4.174-.498-8.472-1.059-11.649H66.59v17.318h42.423c-1.246 10.84-4.672 18.253-9.718 23.298c-6.105 6.168-15.76 12.958-32.705 12.958"})]})]})]})]})]})})}function w6({loading:t,error:e,moviza:n,Imdb:i}){return T.jsx("section",{className:"container",children:T.jsx("div",{className:"row",children:T.jsx("div",{className:"col-12 gridItems",children:n&&n.length>0?n.map((r,s)=>T.jsx(Yg,{item:r,Imdb:i},s)):T.jsx("h1",{className:"no-data",children:"No Data Found"})})})})}function BE({useMoviza:t,forWhat:e}){const{fav:n,watchList:i,handleFav:r,handleWatchList:s}=In(),[o,a]=IS(),[l,u]=M.useState([{filter:"All",type:"all",active:!0},{filter:"Movie",type:"type",active:!1},{filter:"Series",type:"type",active:!1},{filter:"Anime",type:"cinematography",active:!1},{filter:"Animation",type:"cinematography",active:!1},{filter:"Live-Action",type:"cinematography",active:!1}]),{loading:d,error:h,moviza:f,Imdb:g}=t(),[_,E]=M.useState([]),[A,v]=M.useState([]);return M.useEffect(()=>{u([{filter:"All",type:"all",active:!0},{filter:"Movie",type:"type",active:!1},{filter:"Series",type:"type",active:!1},{filter:"Anime",type:"cinematography",active:!1},{filter:"Animation",type:"cinematography",active:!1},{filter:"Live-Action",type:"cinematography",active:!1}])},[e]),M.useEffect(()=>{if(E(f),v(g),o.get("filter")){const y=l.map(w=>w.filter===o.get("filter")?{...w,active:!0}:{...w,active:!1});u(y),o.get("filter")!="All"&&o.get("filter")!=""?e=="fav"?E(f.filter(w=>w[o.get("type")]==o.get("filter")&&n.includes(w.imdb_id))):E(f.filter(w=>w[o.get("type")]==o.get("filter")&&i.includes(w.imdb_id))):e=="fav"?E(f.filter(w=>n.includes(w.imdb_id))):E(f.filter(w=>i.includes(w.imdb_id)))}else e=="fav"?E(f.filter(y=>n.includes(y.imdb_id))):E(f.filter(y=>i.includes(y.imdb_id)))},[d,o,n,i,e]),T.jsxs(T.Fragment,{children:[T.jsx("section",{className:"mt-5 pt-5 container",children:T.jsx("div",{className:"row",children:T.jsx("div",{className:"col-12 py-5",children:T.jsx("h6",{className:"d-flex flex-wrap gap-3 genre",children:l.map((y,w)=>T.jsx("span",{role:"button",onClick:()=>{a({filter:y.filter,type:y.type})},className:y.active?"active":"",children:y.filter},w))})})})}),T.jsx(w6,{loading:d,error:h,moviza:_,Imdb:A,range:99})]})}function G(t,e,n){return(e=T6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E6(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T6(t){var e=E6(t,"string");return typeof e=="symbol"?e:String(e)}function S6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I6(t,e,n){return e&&$E(t.prototype,e),n&&$E(t,n),t}function b6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function HE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(n),!0).forEach(function(i){b6(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var qE={addCSS:!0,thumbWidth:15,watch:!0};function C6(t,e){return(function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function A6(t,e){if(t&&e){var n=new Event(e,{bubbles:!0});t.dispatchEvent(n)}}var hc=function(t){return t!=null?t.constructor:null},gv=function(t,e){return!!(t&&e&&t instanceof e)},LA=function(t){return t==null},MA=function(t){return hc(t)===Object},k6=function(t){return hc(t)===Number&&!Number.isNaN(t)},DA=function(t){return hc(t)===String},P6=function(t){return hc(t)===Boolean},x6=function(t){return hc(t)===Function},VA=function(t){return Array.isArray(t)},FA=function(t){return gv(t,NodeList)},R6=function(t){return gv(t,Element)},N6=function(t){return gv(t,Event)},O6=function(t){return LA(t)||(DA(t)||VA(t)||FA(t))&&!t.length||MA(t)&&!Object.keys(t).length},xt={nullOrUndefined:LA,object:MA,number:k6,string:DA,boolean:P6,function:x6,array:VA,nodeList:FA,element:R6,event:N6,empty:O6};function L6(t){var e="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function M6(t,e){if(1>e){var n=L6(e);return parseFloat(t.toFixed(n))}return Math.round(t/e)*e}var D6=function(){function t(e,n){S6(this,t),xt.element(e)?this.element=e:xt.string(e)&&(this.element=document.querySelector(e)),xt.element(this.element)&&xt.empty(this.element.rangeTouch)&&(this.config=HE({},qE,{},n),this.init())}return I6(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var n=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(r){n.element[i](r,function(s){return n.set(s)},!1)})}},{key:"get",value:function(e){if(!t.enabled||!xt.event(e))return null;var n,i=e.target,r=e.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,o=parseFloat(i.getAttribute("max"))||100,a=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(r.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*u:50<n&&(n+=2*(n-50)*u),s+M6(n/100*(o-s),a)}},{key:"set",value:function(e){t.enabled&&xt.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),A6(e.target,e.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},i=null;if(xt.empty(e)||xt.string(e)?i=Array.from(document.querySelectorAll(xt.string(e)?e:'input[type="range"]')):xt.element(e)?i=[e]:xt.nodeList(e)?i=Array.from(e):xt.array(e)&&(i=e.filter(xt.element)),xt.empty(i))return null;var r=HE({},qE,{},n);if(xt.string(e)&&r.watch){var s=new MutationObserver(function(o){Array.from(o).forEach(function(a){Array.from(a.addedNodes).forEach(function(l){xt.element(l)&&C6(l,e)&&new t(l,r)})})});s.observe(document.body,{childList:!0,subtree:!0})}return i.map(function(o){return new t(o,n)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),t}();const fc=t=>t!=null?t.constructor:null,Ui=(t,e)=>!!(t&&e&&t instanceof e),yv=t=>t==null,UA=t=>fc(t)===Object,V6=t=>fc(t)===Number&&!Number.isNaN(t),Oh=t=>fc(t)===String,F6=t=>fc(t)===Boolean,jA=t=>typeof t=="function",zA=t=>Array.isArray(t),U6=t=>Ui(t,WeakMap),BA=t=>Ui(t,NodeList),j6=t=>fc(t)===Text,z6=t=>Ui(t,Event),B6=t=>Ui(t,KeyboardEvent),$6=t=>Ui(t,window.TextTrackCue)||Ui(t,window.VTTCue),W6=t=>Ui(t,TextTrack)||!yv(t)&&Oh(t.kind),H6=t=>Ui(t,Promise)&&jA(t.then),q6=t=>t!==null&&typeof t=="object"&&t.nodeType===1&&typeof t.style=="object"&&typeof t.ownerDocument=="object",$A=t=>yv(t)||(Oh(t)||zA(t)||BA(t))&&!t.length||UA(t)&&!Object.keys(t).length,G6=t=>{if(Ui(t,window.URL))return!0;if(!Oh(t))return!1;let e=t;t.startsWith("http://")&&t.startsWith("https://")||(e=`http://${t}`);try{return!$A(new URL(e).hostname)}catch{return!1}};var R={nullOrUndefined:yv,object:UA,number:V6,string:Oh,boolean:F6,function:jA,array:zA,weakMap:U6,nodeList:BA,element:q6,textNode:j6,event:z6,keyboardEvent:B6,cue:$6,track:W6,promise:H6,url:G6,empty:$A};const qm=(()=>{const t=document.createElement("span"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(e).find(i=>t.style[i]!==void 0);return!!R.string(n)&&e[n]})();function WA(t,e){setTimeout(()=>{try{t.hidden=!0,t.offsetHeight,t.hidden=!1}catch{}},e)}const K6=!!window.document.documentMode,Q6=/Edge/g.test(navigator.userAgent),Y6="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),X6=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,J6=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,Z6=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var dt={isIE:K6,isEdge:Q6,isWebKit:Y6,isIPhone:X6,isIPadOS:J6,isIos:Z6};function e9(t){return JSON.parse(JSON.stringify(t))}function HA(t,e){return e.split(".").reduce((n,i)=>n&&n[i],t)}function Ke(t={},...e){if(!e.length)return t;const n=e.shift();return R.object(n)?(Object.keys(n).forEach(i=>{R.object(n[i])?(Object.keys(t).includes(i)||Object.assign(t,{[i]:{}}),Ke(t[i],n[i])):Object.assign(t,{[i]:n[i]})}),Ke(t,...e)):t}function qA(t,e){const n=t.length?t:[t];Array.from(n).reverse().forEach((i,r)=>{const s=r>0?e.cloneNode(!0):e,o=i.parentNode,a=i.nextSibling;s.appendChild(i),a?o.insertBefore(s,a):o.appendChild(s)})}function Gm(t,e){R.element(t)&&!R.empty(e)&&Object.entries(e).filter(([,n])=>!R.nullOrUndefined(n)).forEach(([n,i])=>t.setAttribute(n,i))}function te(t,e,n){const i=document.createElement(t);return R.object(e)&&Gm(i,e),R.string(n)&&(i.innerText=n),i}function t9(t,e){R.element(t)&&R.element(e)&&e.parentNode.insertBefore(t,e.nextSibling)}function GE(t,e,n,i){R.element(e)&&e.appendChild(te(t,n,i))}function Ti(t){R.nodeList(t)||R.array(t)?Array.from(t).forEach(Ti):R.element(t)&&R.element(t.parentNode)&&t.parentNode.removeChild(t)}function xu(t){if(!R.element(t))return;let{length:e}=t.childNodes;for(;e>0;)t.removeChild(t.lastChild),e-=1}function jd(t,e){return R.element(e)&&R.element(e.parentNode)&&R.element(t)?(e.parentNode.replaceChild(t,e),t):null}function $n(t,e){if(!R.string(t)||R.empty(t))return{};const n={},i=Ke({},e);return t.split(",").forEach(r=>{const s=r.trim(),o=s.replace(".",""),a=s.replace(/[[\]]/g,"").split("="),[l]=a,u=a.length>1?a[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":R.string(i.class)?n.class=`${i.class} ${o}`:n.class=o;break;case"#":n.id=s.replace("#","");break;case"[":n[l]=u}}),Ke(i,n)}function Br(t,e){if(!R.element(t))return;let n=e;R.boolean(n)||(n=!t.hidden),t.hidden=n}function Ee(t,e,n){if(R.nodeList(t))return Array.from(t).map(i=>Ee(i,e,n));if(R.element(t)){let i="toggle";return n!==void 0&&(i=n?"add":"remove"),t.classList[i](e),t.classList.contains(e)}return!1}function zd(t,e){return R.element(t)&&t.classList.contains(e)}function ts(t,e){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(e)).includes(this)}).call(t,e)}function n9(t,e){const{prototype:n}=Element;return(n.closest||function(){let i=this;do{if(ts.matches(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}).call(t,e)}function Fl(t){return this.elements.container.querySelectorAll(t)}function nt(t){return this.elements.container.querySelector(t)}function ap(t=null,e=!1){R.element(t)&&t.focus({preventScroll:!0,focusVisible:e})}const KE={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Ye={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(t,e){const n=Ye[t]||e!=="html5";return{api:n,ui:n&&Ye.rangeInput}},pip:!(dt.isIPhone||!R.function(te("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||te("video").disablePictureInPicture)),airplay:R.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(t){if(R.empty(t))return!1;const[e]=t.split("/");let n=t;if(!this.isHTML5||e!==this.type)return!1;Object.keys(KE).includes(n)&&(n+=`; codecs="${KE[t]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const t=document.createElement("input");return t.type="range",t.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:qm!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},i9=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,null)});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t})();function Ul(t,e,n,i=!1,r=!0,s=!1){if(!t||!("addEventListener"in t)||R.empty(e)||!R.function(n))return;const o=e.split(" ");let a=s;i9&&(a={passive:r,capture:s}),o.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:t,type:l,callback:n,options:a}),t[i?"addEventListener":"removeEventListener"](l,n,a)})}function pe(t,e="",n,i=!0,r=!1){Ul.call(this,t,e,n,!0,i,r)}function Lh(t,e="",n,i=!0,r=!1){Ul.call(this,t,e,n,!1,i,r)}function vv(t,e="",n,i=!0,r=!1){const s=(...o)=>{Lh(t,e,s,i,r),n.apply(this,o)};Ul.call(this,t,e,s,!0,i,r)}function ne(t,e="",n=!1,i={}){if(!R.element(t)||R.empty(e))return;const r=new CustomEvent(e,{bubbles:n,detail:{...i,plyr:this}});t.dispatchEvent(r)}function r9(){this&&this.eventListeners&&(this.eventListeners.forEach(t=>{const{element:e,type:n,callback:i,options:r}=t;e.removeEventListener(n,i,r)}),this.eventListeners=[])}function s9(){return new Promise(t=>this.ready?setTimeout(t,0):pe.call(this,this.elements.container,"ready",t)).then(()=>{})}function Hn(t){R.promise(t)&&t.then(null,()=>{})}function Km(t){return R.array(t)?t.filter((e,n)=>t.indexOf(e)===n):t}function GA(t,e){return R.array(t)&&t.length?t.reduce((n,i)=>Math.abs(i-e)<Math.abs(n-e)?i:n):null}function KA(t){return!(!window||!window.CSS)&&window.CSS.supports(t)}const QE=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((t,[e,n])=>({...t,[e/n]:[e,n]}),{});function QA(t){return R.array(t)||R.string(t)&&t.includes(":")?(R.array(t)?t:t.split(":")).map(Number).every(R.number):!1}function Bd(t){if(!R.array(t)||!t.every(R.number))return null;const[e,n]=t,i=(s,o)=>o===0?s:i(o,s%o),r=i(e,n);return[e/r,n/r]}function _v(t){const e=i=>QA(i)?i.split(":").map(Number):null;let n=e(t);if(n===null&&(n=e(this.config.ratio)),n===null&&!R.empty(this.embed)&&R.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:i,videoHeight:r}=this.media;n=[i,r]}return Bd(n)}function Mo(t){if(!this.isVideo)return{};const{wrapper:e}=this.elements,n=_v.call(this,t);if(!R.array(n))return{};const[i,r]=Bd(n),s=100/i*r;if(KA(`aspect-ratio: ${i}/${r}`)?e.style.aspectRatio=`${i}/${r}`:e.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-s)/(o/50);this.fullscreen.active?e.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&e.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function YA(t,e,n=.05){const i=t/e,r=GA(Object.keys(QE),i);return Math.abs(r-i)<=n?QE[r]:[t,e]}function o9(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const dr={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(t=>{const e=t.getAttribute("type");return!!R.empty(e)||Ye.mime.call(this,e)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:dr.getSources.call(this).map(t=>Number(t.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const t=this;t.options.speed=t.config.speed.options,R.empty(this.config.ratio)||Mo.call(t),Object.defineProperty(t.media,"quality",{get(){const e=dr.getSources.call(t).find(n=>n.getAttribute("src")===t.source);return e&&Number(e.getAttribute("size"))},set(e){if(t.quality!==e){if(t.config.quality.forced&&R.function(t.config.quality.onChange))t.config.quality.onChange(e);else{const n=dr.getSources.call(t).find(l=>Number(l.getAttribute("size"))===e);if(!n)return;const{currentTime:i,paused:r,preload:s,readyState:o,playbackRate:a}=t.media;t.media.src=n.getAttribute("src"),(s!=="none"||o)&&(t.once("loadedmetadata",()=>{t.speed=a,t.currentTime=i,r||Hn(t.play())}),t.media.load())}ne.call(t,t.media,"qualitychange",!1,{quality:e})}}})},cancelRequests(){this.isHTML5&&(Ti(dr.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function a9(t){return`${t}-${Math.floor(1e4*Math.random())}`}function Qm(t,...e){return R.empty(t)?t:t.toString().replace(/{(\d+)}/g,(n,i)=>e[i].toString())}function l9(t,e){return t===0||e===0||Number.isNaN(t)||Number.isNaN(e)?0:(t/e*100).toFixed(2)}const rl=(t="",e="",n="")=>t.replace(new RegExp(e.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),XA=(t="")=>t.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function c9(t=""){let e=t.toString();return e=rl(e,"-"," "),e=rl(e,"_"," "),e=XA(e),rl(e," ","")}function u9(t=""){let e=t.toString();return e=c9(e),e.charAt(0).toLowerCase()+e.slice(1)}function d9(t){const e=document.createDocumentFragment(),n=document.createElement("div");return e.appendChild(n),n.innerHTML=t,e.firstChild.innerText}function h9(t){const e=document.createElement("div");return e.appendChild(t),e.innerHTML}const YE={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},at={get(t="",e={}){if(R.empty(t)||R.empty(e))return"";let n=HA(e.i18n,t);if(R.empty(n))return Object.keys(YE).includes(t)?YE[t]:"";const i={"{seektime}":e.seekTime,"{title}":e.title};return Object.entries(i).forEach(([r,s])=>{n=rl(n,r,s)}),n}};class jl{constructor(e){G(this,"get",n=>{if(!jl.supported||!this.enabled)return null;const i=window.localStorage.getItem(this.key);if(R.empty(i))return null;const r=JSON.parse(i);return R.string(n)&&n.length?r[n]:r}),G(this,"set",n=>{if(!jl.supported||!this.enabled||!R.object(n))return;let i=this.get();R.empty(i)&&(i={}),Ke(i,n);try{window.localStorage.setItem(this.key,JSON.stringify(i))}catch{}}),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}}function pc(t,e="text"){return new Promise((n,i)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",()=>{if(e==="text")try{n(JSON.parse(r.responseText))}catch{n(r.responseText)}else n(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",t,!0),r.responseType=e,r.send()}catch(r){i(r)}})}function JA(t,e){if(!R.string(t))return;const n="cache",i=R.string(e);let r=!1;const s=()=>document.getElementById(e)!==null,o=(a,l)=>{a.innerHTML=l,i&&s()||document.body.insertAdjacentElement("afterbegin",a)};if(!i||!s()){const a=jl.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),i&&l.setAttribute("id",e),a){const u=window.localStorage.getItem(`${n}-${e}`);if(r=u!==null,r){const d=JSON.parse(u);o(l,d.content)}}pc(t).then(u=>{if(!R.empty(u)){if(a)try{window.localStorage.setItem(`${n}-${e}`,JSON.stringify({content:u}))}catch{}o(l,u)}}).catch(()=>{})}}const ZA=t=>Math.trunc(t/60/60%60,10),f9=t=>Math.trunc(t/60%60,10),p9=t=>Math.trunc(t%60,10);function Mh(t=0,e=!1,n=!1){if(!R.number(t))return Mh(void 0,e,n);const i=a=>`0${a}`.slice(-2);let r=ZA(t);const s=f9(t),o=p9(t);return r=e||r>0?`${r}:`:"",`${n&&t>0?"-":""}${r}${i(s)}:${i(o)}`}const H={getIconUrl(){const t=new URL(this.config.iconUrl,window.location),e=window.location.host?window.location.host:window.top.location.host,n=t.host!==e||dt.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=nt.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:Fl.call(this,this.config.selectors.buttons.play),pause:nt.call(this,this.config.selectors.buttons.pause),restart:nt.call(this,this.config.selectors.buttons.restart),rewind:nt.call(this,this.config.selectors.buttons.rewind),fastForward:nt.call(this,this.config.selectors.buttons.fastForward),mute:nt.call(this,this.config.selectors.buttons.mute),pip:nt.call(this,this.config.selectors.buttons.pip),airplay:nt.call(this,this.config.selectors.buttons.airplay),settings:nt.call(this,this.config.selectors.buttons.settings),captions:nt.call(this,this.config.selectors.buttons.captions),fullscreen:nt.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=nt.call(this,this.config.selectors.progress),this.elements.inputs={seek:nt.call(this,this.config.selectors.inputs.seek),volume:nt.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:nt.call(this,this.config.selectors.display.buffer),currentTime:nt.call(this,this.config.selectors.display.currentTime),duration:nt.call(this,this.config.selectors.display.duration)},R.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(t){return this.debug.warn("It looks like there is a problem with your custom controls HTML",t),this.toggleNativeControls(!0),!1}},createIcon(t,e){const n="http://www.w3.org/2000/svg",i=H.getIconUrl.call(this),r=`${i.cors?"":i.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");Gm(s,Ke(e,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${r}-${t}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(t,e={}){const n=at.get(t,this.config);return te("span",{...e,class:[e.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(t){if(R.empty(t))return null;const e=te("span",{class:this.config.classNames.menu.value});return e.appendChild(te("span",{class:this.config.classNames.menu.badge},t)),e},createButton(t,e){const n=Ke({},e);let i=u9(t);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(o=>{Object.keys(n).includes(o)&&(r[o]=n[o],delete n[o])}),r.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some(o=>o===this.config.classNames.control)||Ke(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,t){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,i="play",r.label="play",r.icon="play";break;default:R.empty(r.label)&&(r.label=i),R.empty(r.icon)&&(r.icon=t)}const s=te(r.element);return r.toggle?(s.appendChild(H.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),s.appendChild(H.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),s.appendChild(H.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),s.appendChild(H.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(s.appendChild(H.createIcon.call(this,r.icon)),s.appendChild(H.createLabel.call(this,r.label))),Ke(n,$n(this.config.selectors.buttons[i],n)),Gm(s,n),i==="play"?(R.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(s)):this.elements.buttons[i]=s,s},createRange(t,e){const n=te("input",Ke($n(this.config.selectors.inputs[t]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":at.get(t,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},e));return this.elements.inputs[t]=n,H.updateRangeFill.call(this,n),D6.setup(n),n},createProgress(t,e){const n=te("progress",Ke($n(this.config.selectors.display[t]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},e));if(t!=="volume"){n.appendChild(te("span",null,"0"));const i={played:"played",buffer:"buffered"}[t],r=i?at.get(i,this.config):"";n.innerText=`% ${r.toLowerCase()}`}return this.elements.display[t]=n,n},createTime(t,e){const n=$n(this.config.selectors.display[t],e),i=te("div",Ke(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":at.get(t,this.config),role:"timer"}),"00:00");return this.elements.display[t]=i,i},bindMenuItemShortcuts(t,e){pe.call(this,t,"keydown keyup",n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const i=ts(t,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(n.key))H.showMenuPanel.call(this,e,!0);else{let r;n.key!==" "&&(n.key==="ArrowDown"||i&&n.key==="ArrowRight"?(r=t.nextElementSibling,R.element(r)||(r=t.parentNode.firstElementChild)):(r=t.previousElementSibling,R.element(r)||(r=t.parentNode.lastElementChild)),ap.call(this,r,!0))}},!1),pe.call(this,t,"keyup",n=>{n.key==="Return"&&H.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:t,list:e,type:n,title:i,badge:r=null,checked:s=!1}){const o=$n(this.config.selectors.inputs[n]),a=te("button",Ke(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:t})),l=te("span");l.innerHTML=i,R.element(r)&&l.appendChild(r),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(u){u&&Array.from(a.parentNode.children).filter(d=>ts(d,'[role="menuitemradio"]')).forEach(d=>d.setAttribute("aria-checked","false")),a.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(a,"click keyup",u=>{if(!R.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(t);break;case"quality":this.quality=t;break;case"speed":this.speed=parseFloat(t)}H.showMenuPanel.call(this,"home",R.keyboardEvent(u))}},n,!1),H.bindMenuItemShortcuts.call(this,a,n),e.appendChild(a)},formatTime(t=0,e=!1){return R.number(t)?Mh(t,ZA(this.duration)>0,e):t},updateTimeDisplay(t=null,e=0,n=!1){R.element(t)&&R.number(e)&&(t.innerText=H.formatTime(e,n))},updateVolume(){this.supported.ui&&(R.element(this.elements.inputs.volume)&&H.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),R.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(t,e=0){R.element(t)&&(t.value=e,H.updateRangeFill.call(this,t))},updateProgress(t){if(!this.supported.ui||!R.event(t))return;let e=0;const n=(i,r)=>{const s=R.number(r)?r:0,o=R.element(i)?i:this.elements.display.buffer;if(R.element(o)){o.value=s;const a=o.getElementsByTagName("span")[0];R.element(a)&&(a.childNodes[0].nodeValue=s)}};if(t)switch(t.type){case"timeupdate":case"seeking":case"seeked":e=l9(this.currentTime,this.duration),t.type==="timeupdate"&&H.setRange.call(this,this.elements.inputs.seek,e);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(t){const e=R.event(t)?t.target:t;if(R.element(e)&&e.getAttribute("type")==="range"){if(ts(e,this.config.selectors.inputs.seek)){e.setAttribute("aria-valuenow",this.currentTime);const n=H.formatTime(this.currentTime),i=H.formatTime(this.duration),r=at.get("seekLabel",this.config);e.setAttribute("aria-valuetext",r.replace("{currentTime}",n).replace("{duration}",i))}else if(ts(e,this.config.selectors.inputs.volume)){const n=100*e.value;e.setAttribute("aria-valuenow",n),e.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else e.setAttribute("aria-valuenow",e.value);(dt.isWebKit||dt.isIPadOS)&&e.style.setProperty("--value",e.value/e.max*100+"%")}},updateSeekTooltip(t){var e,n;if(!this.config.tooltips.seek||!R.element(this.elements.inputs.seek)||!R.element(this.elements.display.seekTooltip)||this.duration===0)return;const i=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,s=d=>Ee(i,r,d);if(this.touch)return void s(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(R.event(t))o=100/a.width*(t.pageX-a.left);else{if(!zd(i,r))return;o=parseFloat(i.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;i.innerText=H.formatTime(l);const u=(e=this.config.markers)===null||e===void 0||(n=e.points)===null||n===void 0?void 0:n.find(({time:d})=>d===Math.round(l));u&&i.insertAdjacentHTML("afterbegin",`${u.label}<br>`),i.style.left=`${o}%`,R.event(t)&&["mouseenter","mouseleave"].includes(t.type)&&s(t.type==="mouseenter")},timeUpdate(t){const e=!R.element(this.elements.display.duration)&&this.config.invertTime;H.updateTimeDisplay.call(this,this.elements.display.currentTime,e?this.duration-this.currentTime:this.currentTime,e),t&&t.type==="timeupdate"&&this.media.seeking||H.updateProgress.call(this,t)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Br(this.elements.display.currentTime,!0),void Br(this.elements.progress,!0);R.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const t=R.element(this.elements.display.duration);!t&&this.config.displayDuration&&this.paused&&H.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),t&&H.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&H.setMarkers.call(this),H.updateSeekTooltip.call(this)},toggleMenuButton(t,e){Br(this.elements.settings.buttons[t],!e)},updateSetting(t,e,n){const i=this.elements.settings.panels[t];let r=null,s=e;if(t==="captions")r=this.currentTrack;else{if(r=R.empty(n)?this[t]:n,R.empty(r)&&(r=this.config[t].default),!R.empty(this.options[t])&&!this.options[t].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${t}`);if(!this.config[t].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${t}`)}if(R.element(s)||(s=i&&i.querySelector('[role="menu"]')),!R.element(s))return;this.elements.settings.buttons[t].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=H.getLabel.call(this,t,r);const o=s&&s.querySelector(`[value="${r}"]`);R.element(o)&&(o.checked=!0)},getLabel(t,e){switch(t){case"speed":return e===1?at.get("normal",this.config):`${e}&times;`;case"quality":if(R.number(e)){const n=at.get(`qualityLabel.${e}`,this.config);return n.length?n:`${e}p`}return XA(e);case"captions":return ve.getLabel.call(this);default:return null}},setQualityMenu(t){if(!R.element(this.elements.settings.panels.quality))return;const e="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');R.array(t)&&(this.options.quality=Km(t).filter(s=>this.config.quality.options.includes(s)));const i=!R.empty(this.options.quality)&&this.options.quality.length>1;if(H.toggleMenuButton.call(this,e,i),xu(n),H.checkMenu.call(this),!i)return;const r=s=>{const o=at.get(`qualityBadge.${s}`,this.config);return o.length?H.createBadge.call(this,o):null};this.options.quality.sort((s,o)=>{const a=this.config.quality.options;return a.indexOf(s)>a.indexOf(o)?1:-1}).forEach(s=>{H.createMenuItem.call(this,{value:s,list:n,type:e,title:H.getLabel.call(this,"quality",s),badge:r(s)})}),H.updateSetting.call(this,e,n)},setCaptionsMenu(){if(!R.element(this.elements.settings.panels.captions))return;const t="captions",e=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=ve.getTracks.call(this),i=!!n.length;if(H.toggleMenuButton.call(this,t,i),xu(e),H.checkMenu.call(this),!i)return;const r=n.map((s,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:ve.getLabel.call(this,s),badge:s.language&&H.createBadge.call(this,s.language.toUpperCase()),list:e,type:"language"}));r.unshift({value:-1,checked:!this.captions.toggled,title:at.get("disabled",this.config),list:e,type:"language"}),r.forEach(H.createMenuItem.bind(this)),H.updateSetting.call(this,t,e)},setSpeedMenu(){if(!R.element(this.elements.settings.panels.speed))return;const t="speed",e=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(i=>i>=this.minimumSpeed&&i<=this.maximumSpeed);const n=!R.empty(this.options.speed)&&this.options.speed.length>1;H.toggleMenuButton.call(this,t,n),xu(e),H.checkMenu.call(this),n&&(this.options.speed.forEach(i=>{H.createMenuItem.call(this,{value:i,list:e,type:t,title:H.getLabel.call(this,"speed",i)})}),H.updateSetting.call(this,t,e))},checkMenu(){const{buttons:t}=this.elements.settings,e=!R.empty(t)&&Object.values(t).some(n=>!n.hidden);Br(this.elements.settings.menu,!e)},focusFirstMenuItem(t,e=!1){if(this.elements.settings.popup.hidden)return;let n=t;R.element(n)||(n=Object.values(this.elements.settings.panels).find(r=>!r.hidden));const i=n.querySelector('[role^="menuitem"]');ap.call(this,i,e)},toggleMenu(t){const{popup:e}=this.elements.settings,n=this.elements.buttons.settings;if(!R.element(e)||!R.element(n))return;const{hidden:i}=e;let r=i;if(R.boolean(t))r=t;else if(R.keyboardEvent(t)&&t.key==="Escape")r=!1;else if(R.event(t)){const s=R.function(t.composedPath)?t.composedPath()[0]:t.target,o=e.contains(s);if(o||!o&&t.target!==n&&r)return}n.setAttribute("aria-expanded",r),Br(e,!r),Ee(this.elements.container,this.config.classNames.menu.open,r),r&&R.keyboardEvent(t)?H.focusFirstMenuItem.call(this,null,!0):r||i||ap.call(this,n,R.keyboardEvent(t))},getMenuSize(t){const e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.removeAttribute("hidden"),t.parentNode.appendChild(e);const n=e.scrollWidth,i=e.scrollHeight;return Ti(e),{width:n,height:i}},showMenuPanel(t="",e=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${t}`);if(!R.element(n))return;const i=n.parentNode,r=Array.from(i.children).find(s=>!s.hidden);if(Ye.transitions&&!Ye.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const s=H.getMenuSize.call(this,n),o=a=>{a.target===i&&["width","height"].includes(a.propertyName)&&(i.style.width="",i.style.height="",Lh.call(this,i,qm,o))};pe.call(this,i,qm,o),i.style.width=`${s.width}px`,i.style.height=`${s.height}px`}Br(r,!0),Br(n,!1),H.focusFirstMenuItem.call(this,n,e)},setDownloadUrl(){const t=this.elements.buttons.download;R.element(t)&&t.setAttribute("href",this.download)},create(t){const{bindMenuItemShortcuts:e,createButton:n,createProgress:i,createRange:r,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=H;this.elements.controls=null,R.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const u=te("div",$n(this.config.selectors.controls.wrapper));this.elements.controls=u;const d={class:"plyr__controls__item"};return Km(R.array(this.config.controls)?this.config.controls:[]).forEach(h=>{if(h==="restart"&&u.appendChild(n.call(this,"restart",d)),h==="rewind"&&u.appendChild(n.call(this,"rewind",d)),h==="play"&&u.appendChild(n.call(this,"play",d)),h==="fast-forward"&&u.appendChild(n.call(this,"fast-forward",d)),h==="progress"){const f=te("div",{class:`${d.class} plyr__progress__container`}),g=te("div",$n(this.config.selectors.progress));if(g.appendChild(r.call(this,"seek",{id:`plyr-seek-${t.id}`})),g.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const _=te("span",{class:this.config.classNames.tooltip},"00:00");g.appendChild(_),this.elements.display.seekTooltip=_}this.elements.progress=g,f.appendChild(this.elements.progress),u.appendChild(f)}if(h==="current-time"&&u.appendChild(s.call(this,"currentTime",d)),h==="duration"&&u.appendChild(s.call(this,"duration",d)),h==="mute"||h==="volume"){let{volume:f}=this.elements;if(R.element(f)&&u.contains(f)||(f=te("div",Ke({},d,{class:`${d.class} plyr__volume`.trim()})),this.elements.volume=f,u.appendChild(f)),h==="mute"&&f.appendChild(n.call(this,"mute")),h==="volume"&&!dt.isIos&&!dt.isIPadOS){const g={max:1,step:.05,value:this.config.volume};f.appendChild(r.call(this,"volume",Ke(g,{id:`plyr-volume-${t.id}`})))}}if(h==="captions"&&u.appendChild(n.call(this,"captions",d)),h==="settings"&&!R.empty(this.config.settings)){const f=te("div",Ke({},d,{class:`${d.class} plyr__menu`.trim(),hidden:""}));f.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${t.id}`,"aria-expanded":!1}));const g=te("div",{class:"plyr__menu__container",id:`plyr-settings-${t.id}`,hidden:""}),_=te("div"),E=te("div",{id:`plyr-settings-${t.id}-home`}),A=te("div",{role:"menu"});E.appendChild(A),_.appendChild(E),this.elements.settings.panels.home=E,this.config.settings.forEach(v=>{const y=te("button",Ke($n(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));e.call(this,y,v),pe.call(this,y,"click",()=>{l.call(this,v,!1)});const w=te("span",null,at.get(v,this.config)),P=te("span",{class:this.config.classNames.menu.value});P.innerHTML=t[v],w.appendChild(P),y.appendChild(w),A.appendChild(y);const O=te("div",{id:`plyr-settings-${t.id}-${v}`,hidden:""}),D=te("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});D.appendChild(te("span",{"aria-hidden":!0},at.get(v,this.config))),D.appendChild(te("span",{class:this.config.classNames.hidden},at.get("menuBack",this.config))),pe.call(this,O,"keydown",k=>{k.key==="ArrowLeft"&&(k.preventDefault(),k.stopPropagation(),l.call(this,"home",!0))},!1),pe.call(this,D,"click",()=>{l.call(this,"home",!1)}),O.appendChild(D),O.appendChild(te("div",{role:"menu"})),_.appendChild(O),this.elements.settings.buttons[v]=y,this.elements.settings.panels[v]=O}),g.appendChild(_),f.appendChild(g),u.appendChild(f),this.elements.settings.popup=g,this.elements.settings.menu=f}if(h==="pip"&&Ye.pip&&u.appendChild(n.call(this,"pip",d)),h==="airplay"&&Ye.airplay&&u.appendChild(n.call(this,"airplay",d)),h==="download"){const f=Ke({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:g}=this.config.urls;!R.url(g)&&this.isEmbed&&Ke(f,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(n.call(this,"download",f))}h==="fullscreen"&&u.appendChild(n.call(this,"fullscreen",d))}),this.isHTML5&&o.call(this,dr.getQualityOptions.call(this)),a.call(this),u},inject(){if(this.config.loadSprite){const r=H.getIconUrl.call(this);r.cors&&JA(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let t=null;this.elements.controls=null;const e={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;R.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,e)),this.config.controls||(this.config.controls=[]),R.element(this.config.controls)||R.string(this.config.controls)?t=this.config.controls:(t=H.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:ve.getLabel.call(this)}),n=!1);let i;if(n&&R.string(this.config.controls)&&(t=(r=>{let s=r;return Object.entries(e).forEach(([o,a])=>{s=rl(s,`{${o}}`,a)}),s})(t)),R.string(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),R.element(i)||(i=this.elements.container),i[R.element(t)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",t),R.element(this.elements.controls)||H.findElements.call(this),!R.empty(this.elements.buttons)){const r=s=>{const o=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>zd(s,o),set(a=!1){Ee(s,o,a),s.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(s=>{R.array(s)||R.nodeList(s)?Array.from(s).filter(Boolean).forEach(r):r(s)})}if(dt.isEdge&&WA(i),this.config.tooltips.controls){const{classNames:r,selectors:s}=this.config,o=`${s.controls.wrapper} ${s.labels} .${r.hidden}`,a=Fl.call(this,o);Array.from(a).forEach(l=>{Ee(l,this.config.classNames.hidden,!1),Ee(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var t,e;if(!this.duration||this.elements.markers)return;const n=(t=this.config.markers)===null||t===void 0||(e=t.points)===null||e===void 0?void 0:e.filter(({time:l})=>l>0&&l<this.duration);if(n==null||!n.length)return;const i=document.createDocumentFragment(),r=document.createDocumentFragment();let s=null;const o=`${this.config.classNames.tooltip}--visible`,a=l=>Ee(s,o,l);n.forEach(l=>{const u=te("span",{class:this.config.classNames.marker},""),d=l.time/this.duration*100+"%";s&&(u.addEventListener("mouseenter",()=>{l.label||(s.style.left=d,s.innerHTML=l.label,a(!0))}),u.addEventListener("mouseleave",()=>{a(!1)})),u.addEventListener("click",()=>{this.currentTime=l.time}),u.style.left=d,r.appendChild(u)}),i.appendChild(r),this.config.tooltips.seek||(s=te("span",{class:this.config.classNames.tooltip},""),i.appendChild(s)),this.elements.markers={points:r,tip:s},this.elements.progress.appendChild(i)}};function ek(t,e=!0){let n=t;if(e){const i=document.createElement("a");i.href=n,n=i.href}try{return new URL(n)}catch{return null}}function tk(t){const e=new URLSearchParams;return R.object(t)&&Object.entries(t).forEach(([n,i])=>{e.set(n,i)}),e}const ve={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Ye.textTracks)return void(R.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&H.setCaptionsMenu.call(this));if(R.element(this.elements.captions)||(this.elements.captions=te("div",$n(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),t9(this.elements.captions,this.elements.wrapper)),dt.isIE&&window.URL){const i=this.media.querySelectorAll("track");Array.from(i).forEach(r=>{const s=r.getAttribute("src"),o=ek(s);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&pc(s,"blob").then(a=>{r.setAttribute("src",window.URL.createObjectURL(a))}).catch(()=>{Ti(r)})})}const t=Km((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(i=>i.split("-")[0]));let e=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();e==="auto"&&([e]=t);let n=this.storage.get("captions");if(R.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:e,languages:t}),this.isHTML5){const i=this.config.captions.update?"addtrack removetrack":"removetrack";pe.call(this,this.media.textTracks,i,ve.update.bind(this))}setTimeout(ve.update.bind(this),0)},update(){const t=ve.getTracks.call(this,!0),{active:e,language:n,meta:i,currentTrackNode:r}=this.captions,s=!!t.find(o=>o.language===n);this.isHTML5&&this.isVideo&&t.filter(o=>!i.get(o)).forEach(o=>{this.debug.log("Track added",o),i.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),pe.call(this,o,"cuechange",()=>ve.updateCues.call(this))}),(s&&this.language!==n||!t.includes(r))&&(ve.setLanguage.call(this,n),ve.toggle.call(this,e&&s)),this.elements&&Ee(this.elements.container,this.config.classNames.captions.enabled,!R.empty(t)),R.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&H.setCaptionsMenu.call(this)},toggle(t,e=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,i=this.config.classNames.captions.active,r=R.nullOrUndefined(t)?!n:t;if(r!==n){if(e||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!e){const s=ve.getTracks.call(this),o=ve.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void ve.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),Ee(this.elements.container,i,r),this.captions.toggled=r,H.updateSetting.call(this,"captions"),ne.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout(()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(t,e=!0){const n=ve.getTracks.call(this);if(t!==-1)if(R.number(t))if(t in n){if(this.captions.currentTrack!==t){this.captions.currentTrack=t;const i=n[t],{language:r}=i||{};this.captions.currentTrackNode=i,H.updateSetting.call(this,"captions"),e||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),ne.call(this,this.media,"languagechange")}ve.toggle.call(this,!0,e),this.isHTML5&&this.isVideo&&ve.updateCues.call(this)}else this.debug.warn("Track not found",t);else this.debug.warn("Invalid caption argument",t);else ve.toggle.call(this,!1,e)},setLanguage(t,e=!0){if(!R.string(t))return void this.debug.warn("Invalid language argument",t);const n=t.toLowerCase();this.captions.language=n;const i=ve.getTracks.call(this),r=ve.findTrack.call(this,[n]);ve.set.call(this,i.indexOf(r),e)},getTracks(t=!1){return Array.from((this.media||{}).textTracks||[]).filter(e=>!this.isHTML5||t||this.captions.meta.has(e)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(t,e=!1){const n=ve.getTracks.call(this),i=o=>Number((this.captions.meta.get(o)||{}).default),r=Array.from(n).sort((o,a)=>i(a)-i(o));let s;return t.every(o=>(s=r.find(a=>a.language===o),!s)),s||(e?r[0]:void 0)},getCurrentTrack(){return ve.getTracks.call(this)[this.currentTrack]},getLabel(t){let e=t;return!R.track(e)&&Ye.textTracks&&this.captions.toggled&&(e=ve.getCurrentTrack.call(this)),R.track(e)?R.empty(e.label)?R.empty(e.language)?at.get("enabled",this.config):t.language.toUpperCase():e.label:at.get("disabled",this.config)},updateCues(t){if(!this.supported.ui)return;if(!R.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!R.nullOrUndefined(t)&&!Array.isArray(t))return void this.debug.warn("updateCues: Invalid input",t);let e=t;if(!e){const i=ve.getCurrentTrack.call(this);e=Array.from((i||{}).activeCues||[]).map(r=>r.getCueAsHTML()).map(h9)}const n=e.map(i=>i.trim()).join(`
`);if(n!==this.elements.captions.innerHTML){xu(this.elements.captions);const i=te("span",$n(this.config.selectors.caption));i.innerHTML=n,this.elements.captions.appendChild(i),ne.call(this,this.media,"cuechange")}}},nk={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},lp={active:"picture-in-picture",inactive:"inline"},sr={html5:"html5",youtube:"youtube",vimeo:"vimeo"},cp={audio:"audio",video:"video"};function m9(t){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(t)?sr.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(t)?sr.vimeo:null}const up=()=>{};class g9{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):up}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):up}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):up}}class An{constructor(e){G(this,"onChange",()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;R.element(n)&&(n.pressed=this.active);const i=this.target===this.player.media?this.target:this.player.elements.container;ne.call(this.player,i,this.active?"enterfullscreen":"exitfullscreen",!0)}),G(this,"toggleFallback",(n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",Ee(this.target,this.player.config.classNames.fullscreen.fallback,n),dt.isIos){let i=document.head.querySelector('meta[name="viewport"]');const r="viewport-fit=cover";i||(i=document.createElement("meta"),i.setAttribute("name","viewport"));const s=R.string(i.content)&&i.content.includes(r);n?(this.cleanupViewport=!s,s||(i.content+=`,${r}`)):this.cleanupViewport&&(i.content=i.content.split(",").filter(o=>o.trim()!==r).join(","))}this.onChange()}),G(this,"trapFocus",n=>{if(dt.isIos||dt.isIPadOS||!this.active||n.key!=="Tab")return;const i=document.activeElement,r=Fl.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=r,o=r[r.length-1];i!==o||n.shiftKey?i===s&&n.shiftKey&&(o.focus(),n.preventDefault()):(s.focus(),n.preventDefault())}),G(this,"update",()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":An.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");Ee(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),G(this,"enter",()=>{this.supported&&(dt.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!An.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?R.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),G(this,"exit",()=>{if(this.supported)if(dt.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Hn(this.player.play());else if(!An.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!R.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),G(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=e,this.prefix=An.prefix,this.property=An.property,this.scrollPosition={x:0,y:0},this.forceFallback=e.config.fullscreen.fallback==="force",this.player.elements.fullscreen=e.config.fullscreen.container&&n9(this.player.elements.container,e.config.fullscreen.container),pe.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),pe.call(this.player,this.player.elements.container,"dblclick",n=>{R.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")}),pe.call(this,this.player.elements.container,"keydown",n=>this.trapFocus(n)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return An.nativeSupported&&!this.forceFallback}static get prefix(){if(R.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(n=>!(!R.function(document[`${n}ExitFullscreen`])&&!R.function(document[`${n}CancelFullScreen`]))&&(e=n,!0)),e}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,An.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||An.nativeSupported||!dt.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!An.nativeSupported||this.forceFallback)return zd(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return dt.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Ru(t,e=1){return new Promise((n,i)=>{const r=new Image,s=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=e?n:i)(r)};Object.assign(r,{onload:s,onerror:s,src:t})})}const Ie={addStyleHook(){Ee(this.elements.container,this.config.selectors.container.replace(".",""),!0),Ee(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(t=!1){t&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Ie.toggleNativeControls.call(this,!0);R.element(this.elements.controls)||(H.inject.call(this),this.listeners.controls()),Ie.toggleNativeControls.call(this),this.isHTML5&&ve.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,H.updateVolume.call(this),H.timeUpdate.call(this),H.durationUpdate.call(this),Ie.checkPlaying.call(this),Ee(this.elements.container,this.config.classNames.pip.supported,Ye.pip&&this.isHTML5&&this.isVideo),Ee(this.elements.container,this.config.classNames.airplay.supported,Ye.airplay&&this.isHTML5),Ee(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{ne.call(this,this.media,"ready")},0),Ie.setTitle.call(this),this.poster&&Ie.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&H.durationUpdate.call(this),this.config.mediaMetadata&&H.setMediaMetadata.call(this)},setTitle(){let t=at.get("play",this.config);if(R.string(this.config.title)&&!R.empty(this.config.title)&&(t+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(e=>{e.setAttribute("aria-label",t)}),this.isEmbed){const e=nt.call(this,"iframe");if(!R.element(e))return;const n=R.empty(this.config.title)?"video":this.config.title,i=at.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",n))}},togglePoster(t){Ee(this.elements.container,this.config.classNames.posterEnabled,t)},setPoster(t,e=!0){return e&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",t),this.elements.poster.removeAttribute("hidden"),s9.call(this).then(()=>Ru(t)).catch(n=>{throw t===this.poster&&Ie.togglePoster.call(this,!1),n}).then(()=>{if(t!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${t}')`,backgroundSize:""}),Ie.togglePoster.call(this,!0),t)))},checkPlaying(t){Ee(this.elements.container,this.config.classNames.playing,this.playing),Ee(this.elements.container,this.config.classNames.paused,this.paused),Ee(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",at.get(this.playing?"pause":"play",this.config))}),R.event(t)&&t.type==="timeupdate"||Ie.toggleControls.call(this)},checkLoading(t){this.loading=["stalled","waiting"].includes(t.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Ee(this.elements.container,this.config.classNames.loading,this.loading),Ie.toggleControls.call(this)},this.loading?250:0)},toggleControls(t){const{controls:e}=this.elements;if(e&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(t||this.loading||this.paused||e.pressed||e.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter(t=>!R.empty(t)&&R.string(t)&&t.startsWith("--plyr")).forEach(t=>{this.elements.container.style.setProperty(t,this.media.style.getPropertyValue(t)),this.media.style.removeProperty(t)}),R.empty(this.media.style)&&this.media.removeAttribute("style")}};class y9{constructor(e){G(this,"firstTouch",()=>{const{player:n}=this,{elements:i}=n;n.touch=!0,Ee(i.container,n.config.classNames.isTouch,!0)}),G(this,"global",(n=!0)=>{const{player:i}=this;i.config.keyboard.global&&Ul.call(i,window,"keydown keyup",this.handleKey,n,!1),Ul.call(i,document.body,"click",this.toggleMenu,n),vv.call(i,document.body,"touchstart",this.firstTouch)}),G(this,"container",()=>{const{player:n}=this,{config:i,elements:r,timers:s}=n;!i.keyboard.global&&i.keyboard.focused&&pe.call(n,r.container,"keydown keyup",this.handleKey,!1),pe.call(n,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",l=>{const{controls:u}=r;u&&l.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let d=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Ie.toggleControls.call(n,!0),d=n.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>Ie.toggleControls.call(n,!1),d)});const o=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const l=r.wrapper,{active:u}=n.fullscreen,[d,h]=_v.call(n),f=KA(`aspect-ratio: ${d} / ${h}`);if(!u)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[g,_]=o9(),E=g/_>d/h;f?(l.style.width=E?"auto":"100%",l.style.height=E?"100%":"auto"):(l.style.maxWidth=E?_/h*d+"px":null,l.style.margin=E?"0 auto":null)},a=()=>{clearTimeout(s.resized),s.resized=setTimeout(o,50)};pe.call(n,r.container,"enterfullscreen exitfullscreen",l=>{const{target:u}=n.fullscreen;u===r.container&&(!n.isEmbed&&R.empty(n.config.ratio)||(o(),(l.type==="enterfullscreen"?pe:Lh).call(n,window,"resize",a)))})}),G(this,"media",()=>{const{player:n}=this,{elements:i}=n;if(pe.call(n,n.media,"timeupdate seeking seeked",s=>H.timeUpdate.call(n,s)),pe.call(n,n.media,"durationchange loadeddata loadedmetadata",s=>H.durationUpdate.call(n,s)),pe.call(n,n.media,"ended",()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())}),pe.call(n,n.media,"progress playing seeking seeked",s=>H.updateProgress.call(n,s)),pe.call(n,n.media,"volumechange",s=>H.updateVolume.call(n,s)),pe.call(n,n.media,"playing play pause ended emptied timeupdate",s=>Ie.checkPlaying.call(n,s)),pe.call(n,n.media,"waiting canplay seeked playing",s=>Ie.checkLoading.call(n,s)),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const s=nt.call(n,`.${n.config.classNames.video}`);if(!R.element(s))return;pe.call(n,i.container,"click",o=>{([i.container,s].includes(o.target)||s.contains(o.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(o,n.restart,"restart"),this.proxy(o,()=>{Hn(n.play())},"play")):this.proxy(o,()=>{Hn(n.togglePlay())},"play")))})}n.supported.ui&&n.config.disableContextMenu&&pe.call(n,i.wrapper,"contextmenu",s=>{s.preventDefault()},!1),pe.call(n,n.media,"volumechange",()=>{n.storage.set({volume:n.volume,muted:n.muted})}),pe.call(n,n.media,"ratechange",()=>{H.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})}),pe.call(n,n.media,"qualitychange",s=>{H.updateSetting.call(n,"quality",null,s.detail.quality)}),pe.call(n,n.media,"ready qualitychange",()=>{H.setDownloadUrl.call(n)});const r=n.config.events.concat(["keyup","keydown"]).join(" ");pe.call(n,n.media,r,s=>{let{detail:o={}}=s;s.type==="error"&&(o=n.media.error),ne.call(n,i.container,s.type,!0,o)})}),G(this,"proxy",(n,i,r)=>{const{player:s}=this,o=s.config.listeners[r];let a=!0;R.function(o)&&(a=o.call(s,n)),a!==!1&&R.function(i)&&i.call(s,n)}),G(this,"bind",(n,i,r,s,o=!0)=>{const{player:a}=this,l=a.config.listeners[s],u=R.function(l);pe.call(a,n,i,d=>this.proxy(d,r,s),o&&!u)}),G(this,"controls",()=>{const{player:n}=this,{elements:i}=n,r=dt.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(s=>{this.bind(s,"click",()=>{Hn(n.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",n.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{n.lastSeekTime=Date.now(),n.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{n.lastSeekTime=Date.now(),n.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{n.muted=!n.muted},"mute"),this.bind(i.buttons.captions,"click",()=>n.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{ne.call(n,n.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{n.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{n.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",n.airplay,"airplay"),this.bind(i.buttons.settings,"click",s=>{s.stopPropagation(),s.preventDefault(),H.toggleMenu.call(n,s)},null,!1),this.bind(i.buttons.settings,"keyup",s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),H.toggleMenu.call(n,s)):H.focusFirstMenuItem.call(n,null,!0))},null,!1),this.bind(i.settings.menu,"keydown",s=>{s.key==="Escape"&&H.toggleMenu.call(n,s)}),this.bind(i.inputs.seek,"mousedown mousemove",s=>{const o=i.progress.getBoundingClientRect(),a=100/o.width*(s.pageX-o.left);s.currentTarget.setAttribute("seek-value",a)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",s=>{const o=s.currentTarget,a="play-on-seeked";if(R.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;n.lastSeekTime=Date.now();const l=o.hasAttribute(a),u=["mouseup","touchend","keyup"].includes(s.type);l&&u?(o.removeAttribute(a),Hn(n.play())):!u&&n.playing&&(o.setAttribute(a,""),n.pause())}),dt.isIos){const s=Fl.call(n,'input[type="range"]');Array.from(s).forEach(o=>this.bind(o,r,a=>WA(a.target)))}this.bind(i.inputs.seek,r,s=>{const o=s.currentTarget;let a=o.getAttribute("seek-value");R.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),n.currentTime=a/o.max*n.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",s=>H.updateSeekTooltip.call(n,s)),this.bind(i.progress,"mousemove touchmove",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startMove(s)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:s}=n;s&&s.loaded&&s.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startScrubbing(s)}),this.bind(i.progress,"mouseup touchend",s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.endScrubbing(s)}),dt.isWebKit&&Array.from(Fl.call(n,'input[type="range"]')).forEach(s=>{this.bind(s,"input",o=>H.updateRangeFill.call(n,o.target))}),n.config.toggleInvert&&!R.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,H.timeUpdate.call(n))}),this.bind(i.inputs.volume,r,s=>{n.volume=s.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",s=>{i.controls.hover=!n.touch&&s.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(s=>!s.contains(i.container)).forEach(s=>{this.bind(s,"mouseenter mouseleave",o=>{i.controls&&(i.controls.hover=!n.touch&&o.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",s=>{i.controls.pressed=["mousedown","touchstart"].includes(s.type)}),this.bind(i.controls,"focusin",()=>{const{config:s,timers:o}=n;Ee(i.controls,s.classNames.noTransition,!0),Ie.toggleControls.call(n,!0),setTimeout(()=>{Ee(i.controls,s.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout(()=>Ie.toggleControls.call(n,!1),a)}),this.bind(i.inputs.volume,"wheel",s=>{const o=s.webkitDirectionInvertedFromDevice,[a,l]=[s.deltaX,-s.deltaY].map(h=>o?-h:h),u=Math.sign(Math.abs(a)>Math.abs(l)?a:l);n.increaseVolume(u/50);const{volume:d}=n.media;(u===1&&d<1||u===-1&&d>0)&&s.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:n}=this,{elements:i}=n,{key:r,type:s,altKey:o,ctrlKey:a,metaKey:l,shiftKey:u}=e,d=s==="keydown",h=d&&r===this.lastKey;if(!(o||a||l||u)&&r){if(d){const g=document.activeElement;if(R.element(g)){const{editable:_}=n.config.selectors,{seek:E}=i.inputs;if(g!==E&&ts(g,_)||e.key===" "&&ts(g,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(r)&&(e.preventDefault(),e.stopPropagation()),r){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h||(f=parseInt(r,10),n.currentTime=n.duration/10*f);break;case" ":case"k":h||Hn(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":h||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":h||n.toggleCaptions();break;case"l":n.loop=!n.loop}r==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=r}else this.lastKey=null;var f}}toggleMenu(e){H.toggleMenu.call(this.player,e)}}function v9(t,e){return t(e={exports:{}},e.exports),e.exports}var _9=v9(function(t,e){t.exports=function(){var n=function(){},i={},r={},s={};function o(f,g){f=f.push?f:[f];var _,E,A,v=[],y=f.length,w=y;for(_=function(P,O){O.length&&v.push(P),--w||g(v)};y--;)E=f[y],(A=r[E])?_(E,A):(s[E]=s[E]||[]).push(_)}function a(f,g){if(f){var _=s[f];if(r[f]=g,_)for(;_.length;)_[0](f,g),_.splice(0,1)}}function l(f,g){f.call&&(f={success:f}),g.length?(f.error||n)(g):(f.success||n)(f)}function u(f,g,_,E){var A,v,y=document,w=_.async,P=(_.numRetries||0)+1,O=_.before||n,D=f.replace(/[\?|#].*$/,""),k=f.replace(/^(css|img)!/,"");E=E||0,/(^css!|\.css$)/.test(D)?((v=y.createElement("link")).rel="stylesheet",v.href=k,(A="hideFocus"in v)&&v.relList&&(A=0,v.rel="preload",v.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(D)?(v=y.createElement("img")).src=k:((v=y.createElement("script")).src=f,v.async=w===void 0||w),v.onload=v.onerror=v.onbeforeload=function(S){var b=S.type[0];if(A)try{v.sheet.cssText.length||(b="e")}catch(C){C.code!=18&&(b="e")}if(b=="e"){if((E+=1)<P)return u(f,g,_,E)}else if(v.rel=="preload"&&v.as=="style")return v.rel="stylesheet";g(f,b,S.defaultPrevented)},O(f,v)!==!1&&y.head.appendChild(v)}function d(f,g,_){var E,A,v=(f=f.push?f:[f]).length,y=v,w=[];for(E=function(P,O,D){if(O=="e"&&w.push(P),O=="b"){if(!D)return;w.push(P)}--v||g(w)},A=0;A<y;A++)u(f[A],E,_)}function h(f,g,_){var E,A;if(g&&g.trim&&(E=g),A=(E?_:g)||{},E){if(E in i)throw"LoadJS";i[E]=!0}function v(y,w){d(f,function(P){l(A,P),y&&l({success:y,error:w},P),a(E,P)},A)}if(A.returnPromise)return new Promise(v);v()}return h.ready=function(f,g){return o(f,function(_){l(g,_)}),h},h.done=function(f){a(f,[])},h.reset=function(){i={},r={},s={}},h.isDefined=function(f){return f in i},h}()});function wv(t){return new Promise((e,n)=>{_9(t,{success:e,error:n})})}function w9(t){return R.empty(t)?null:R.number(Number(t))?t:t.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:t}function E9(t){const e=t.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return e&&e.length===5?e[4]:null}function Ca(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,ne.call(this,this.media,t?"play":"pause"))}const Ym={setup(){const t=this;Ee(t.elements.wrapper,t.config.classNames.embed,!0),t.options.speed=t.config.speed.options,Mo.call(t),R.object(window.Vimeo)?Ym.ready.call(t):wv(t.config.urls.vimeo.sdk).then(()=>{Ym.ready.call(t)}).catch(e=>{t.debug.warn("Vimeo SDK (player.js) failed to load",e)})},ready(){const t=this,e=t.config.vimeo,{premium:n,referrerPolicy:i,...r}=e;let s=t.media.getAttribute("src"),o="";R.empty(s)?(s=t.media.getAttribute(t.config.attributes.embed.id),o=t.media.getAttribute(t.config.attributes.embed.hash)):o=E9(s);const a=o?{h:o}:{};n&&Object.assign(r,{controls:!1,sidedock:!1});const l=tk({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:t.config.playsinline,...a,...r}),u=w9(s),d=te("iframe"),h=Qm(t.config.urls.vimeo.iframe,u,l);if(d.setAttribute("src",h),d.setAttribute("allowfullscreen",""),d.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),R.empty(i)||d.setAttribute("referrerPolicy",i),n||!e.customControls)d.setAttribute("data-poster",t.poster),t.media=jd(d,t.media);else{const y=te("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});y.appendChild(d),t.media=jd(y,t.media)}e.customControls||pc(Qm(t.config.urls.vimeo.api,h)).then(y=>{!R.empty(y)&&y.thumbnail_url&&Ie.setPoster.call(t,y.thumbnail_url).catch(()=>{})}),t.embed=new window.Vimeo.Player(d,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=()=>(Ca.call(t,!0),t.embed.play()),t.media.pause=()=>(Ca.call(t,!1),t.embed.pause()),t.media.stop=()=>{t.pause(),t.currentTime=0};let{currentTime:f}=t.media;Object.defineProperty(t.media,"currentTime",{get:()=>f,set(y){const{embed:w,media:P,paused:O,volume:D}=t,k=O&&!w.hasPlayed;P.seeking=!0,ne.call(t,P,"seeking"),Promise.resolve(k&&w.setVolume(0)).then(()=>w.setCurrentTime(y)).then(()=>k&&w.pause()).then(()=>k&&w.setVolume(D)).catch(()=>{})}});let g=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:()=>g,set(y){t.embed.setPlaybackRate(y).then(()=>{g=y,ne.call(t,t.media,"ratechange")}).catch(()=>{t.options.speed=[1]})}});let{volume:_}=t.config;Object.defineProperty(t.media,"volume",{get:()=>_,set(y){t.embed.setVolume(y).then(()=>{_=y,ne.call(t,t.media,"volumechange")})}});let{muted:E}=t.config;Object.defineProperty(t.media,"muted",{get:()=>E,set(y){const w=!!R.boolean(y)&&y;t.embed.setMuted(!!w||t.config.muted).then(()=>{E=w,ne.call(t,t.media,"volumechange")})}});let A,{loop:v}=t.config;Object.defineProperty(t.media,"loop",{get:()=>v,set(y){const w=R.boolean(y)?y:t.config.loop.active;t.embed.setLoop(w).then(()=>{v=w})}}),t.embed.getVideoUrl().then(y=>{A=y,H.setDownloadUrl.call(t)}).catch(y=>{this.debug.warn(y)}),Object.defineProperty(t.media,"currentSrc",{get:()=>A}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then(y=>{const[w,P]=y;t.embed.ratio=YA(w,P),Mo.call(this)}),t.embed.setAutopause(t.config.autopause).then(y=>{t.config.autopause=y}),t.embed.getVideoTitle().then(y=>{t.config.title=y,Ie.setTitle.call(this)}),t.embed.getCurrentTime().then(y=>{f=y,ne.call(t,t.media,"timeupdate")}),t.embed.getDuration().then(y=>{t.media.duration=y,ne.call(t,t.media,"durationchange")}),t.embed.getTextTracks().then(y=>{t.media.textTracks=y,ve.setup.call(t)}),t.embed.on("cuechange",({cues:y=[]})=>{const w=y.map(P=>d9(P.text));ve.updateCues.call(t,w)}),t.embed.on("loaded",()=>{t.embed.getPaused().then(y=>{Ca.call(t,!y),y||ne.call(t,t.media,"playing")}),R.element(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)}),t.embed.on("bufferstart",()=>{ne.call(t,t.media,"waiting")}),t.embed.on("bufferend",()=>{ne.call(t,t.media,"playing")}),t.embed.on("play",()=>{Ca.call(t,!0),ne.call(t,t.media,"playing")}),t.embed.on("pause",()=>{Ca.call(t,!1)}),t.embed.on("timeupdate",y=>{t.media.seeking=!1,f=y.seconds,ne.call(t,t.media,"timeupdate")}),t.embed.on("progress",y=>{t.media.buffered=y.percent,ne.call(t,t.media,"progress"),parseInt(y.percent,10)===1&&ne.call(t,t.media,"canplaythrough"),t.embed.getDuration().then(w=>{w!==t.media.duration&&(t.media.duration=w,ne.call(t,t.media,"durationchange"))})}),t.embed.on("seeked",()=>{t.media.seeking=!1,ne.call(t,t.media,"seeked")}),t.embed.on("ended",()=>{t.media.paused=!0,ne.call(t,t.media,"ended")}),t.embed.on("error",y=>{t.media.error=y,ne.call(t,t.media,"error")}),e.customControls&&setTimeout(()=>Ie.build.call(t),0)}};function T9(t){return R.empty(t)?null:t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:t}function Aa(t){t&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===t&&(this.media.paused=!t,ne.call(this,this.media,t?"play":"pause"))}function S9(t){return t.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const Nu={setup(){if(Ee(this.elements.wrapper,this.config.classNames.embed,!0),R.object(window.YT)&&R.function(window.YT.Player))Nu.ready.call(this);else{const t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{R.function(t)&&t(),Nu.ready.call(this)},wv(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(t){pc(Qm(this.config.urls.youtube.api,t)).then(e=>{if(R.object(e)){const{title:n,height:i,width:r}=e;this.config.title=n,Ie.setTitle.call(this),this.embed.ratio=YA(r,i)}Mo.call(this)}).catch(()=>{Mo.call(this)})},ready(){const t=this,e=t.config.youtube,n=t.media&&t.media.getAttribute("id");if(!R.empty(n)&&n.startsWith("youtube-"))return;let i=t.media.getAttribute("src");R.empty(i)&&(i=t.media.getAttribute(this.config.attributes.embed.id));const r=T9(i),s=te("div",{id:a9(t.provider),"data-poster":e.customControls?t.poster:void 0});if(t.media=jd(s,t.media),e.customControls){const o=a=>`https://i.ytimg.com/vi/${r}/${a}default.jpg`;Ru(o("maxres"),121).catch(()=>Ru(o("sd"),121)).catch(()=>Ru(o("hq"))).then(a=>Ie.setPoster.call(t,a.src)).then(a=>{a.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}t.embed=new window.YT.Player(t.media,{videoId:r,host:S9(e),playerVars:Ke({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&e.customControls?0:1,disablekb:1,playsinline:t.config.playsinline&&!t.config.fullscreen.iosNative?1:0,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},e),events:{onError(o){if(!t.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";t.media.error={code:a,message:l},ne.call(t,t.media,"error")}},onPlaybackRateChange(o){const a=o.target;t.media.playbackRate=a.getPlaybackRate(),ne.call(t,t.media,"ratechange")},onReady(o){if(R.function(t.media.play))return;const a=o.target;Nu.getTitle.call(t,r),t.media.play=()=>{Aa.call(t,!0),a.playVideo()},t.media.pause=()=>{Aa.call(t,!1),a.pauseVideo()},t.media.stop=()=>{a.stopVideo()},t.media.duration=a.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(h){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,ne.call(t,t.media,"seeking"),a.seekTo(h)}}),Object.defineProperty(t.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(h){a.setPlaybackRate(h)}});let{volume:l}=t.config;Object.defineProperty(t.media,"volume",{get:()=>l,set(h){l=h,a.setVolume(100*l),ne.call(t,t.media,"volumechange")}});let{muted:u}=t.config;Object.defineProperty(t.media,"muted",{get:()=>u,set(h){const f=R.boolean(h)?h:u;u=f,a[f?"mute":"unMute"](),a.setVolume(100*l),ne.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration});const d=a.getAvailablePlaybackRates();t.options.speed=d.filter(h=>t.config.speed.options.includes(h)),t.supported.ui&&e.customControls&&t.media.setAttribute("tabindex",-1),ne.call(t,t.media,"timeupdate"),ne.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval(()=>{t.media.buffered=a.getVideoLoadedFraction(),(t.media.lastBuffered===null||t.media.lastBuffered<t.media.buffered)&&ne.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,t.media.buffered===1&&(clearInterval(t.timers.buffering),ne.call(t,t.media,"canplaythrough"))},200),e.customControls&&setTimeout(()=>Ie.build.call(t),50)},onStateChange(o){const a=o.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(o.data)&&(t.media.seeking=!1,ne.call(t,t.media,"seeked")),o.data){case-1:ne.call(t,t.media,"timeupdate"),t.media.buffered=a.getVideoLoadedFraction(),ne.call(t,t.media,"progress");break;case 0:Aa.call(t,!1),t.media.loop?(a.stopVideo(),a.playVideo()):ne.call(t,t.media,"ended");break;case 1:e.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(Aa.call(t,!0),ne.call(t,t.media,"playing"),t.timers.playing=setInterval(()=>{ne.call(t,t.media,"timeupdate")},50),t.media.duration!==a.getDuration()&&(t.media.duration=a.getDuration(),ne.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),Aa.call(t,!1);break;case 3:ne.call(t,t.media,"waiting")}ne.call(t,t.elements.container,"statechange",!1,{code:o.data})}}})}},ik={setup(){this.media?(Ee(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Ee(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Ee(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=te("div",{class:this.config.classNames.video}),qA(this.media,this.elements.wrapper),this.elements.poster=te("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?dr.setup.call(this):this.isYouTube?Nu.setup.call(this):this.isVimeo&&Ym.setup.call(this)):this.debug.warn("No media element found!")}};class I9{constructor(e){G(this,"load",()=>{this.enabled&&(R.object(window.google)&&R.object(window.google.ima)?this.ready():wv(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),G(this,"ready",()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),G(this,"setupIMA",()=>{this.elements.container=te("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,n=>this.onAdsManagerLoaded(n),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,n=>this.onAdError(n),!1),this.requestAds()}),G(this,"requestAds",()=>{const{container:n}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=n.offsetWidth,i.linearAdSlotHeight=n.offsetHeight,i.nonLinearAdSlotWidth=n.offsetWidth,i.nonLinearAdSlotHeight=n.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),G(this,"pollCountdown",(n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const i=Mh(Math.max(this.manager.getRemainingTime(),0)),r=`${at.get("advertisement",this.player.config)} - ${i}`;this.elements.container.setAttribute("data-badge-text",r)},100)}),G(this,"onAdsManagerLoaded",n=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=n.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,r=>this.onAdError(r)),Object.keys(google.ima.AdEvent.Type).forEach(r=>{this.manager.addEventListener(google.ima.AdEvent.Type[r],s=>this.onAdEvent(s))}),this.trigger("loaded")}),G(this,"addCuePoints",()=>{R.empty(this.cuePoints)||this.cuePoints.forEach(n=>{if(n!==0&&n!==-1&&n<this.player.duration){const i=this.player.elements.progress;if(R.element(i)){const r=100/this.player.duration*n,s=te("span",{class:this.player.config.classNames.cues});s.style.left=`${r.toString()}%`,i.appendChild(s)}}})}),G(this,"onAdEvent",n=>{const{container:i}=this.player.elements,r=n.getAd(),s=n.getAdData();switch((o=>{ne.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=i.offsetWidth,r.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),G(this,"onAdError",n=>{this.cancel(),this.player.debug.warn("Ads error",n)}),G(this,"listeners",()=>{const{container:n}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const r=this.player.currentTime;R.empty(this.cuePoints)||this.cuePoints.forEach((s,o)=>{i<s&&s<r&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)})}),G(this,"play",()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),G(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Hn(this.player.media.play())}),G(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),G(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),G(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(n=>{this.on("loaded",n),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),G(this,"trigger",(n,...i)=>{const r=this.events[n];R.array(r)&&r.forEach(s=>{R.function(s)&&s.apply(this,i)})}),G(this,"on",(n,i)=>(R.array(this.events[n])||(this.events[n]=[]),this.events[n].push(i),this)),G(this,"startSafetyTimer",(n,i)=>{this.player.debug.log(`Safety timer invoked from: ${i}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},n)}),G(this,"clearSafetyTimer",n=>{R.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((n,i)=>{this.on("loaded",n),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!R.empty(e.publisherId)||R.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return R.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${tk({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function rk(t=0,e=0,n=255){return Math.min(Math.max(t,e),n)}const b9=t=>{const e=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach(n=>{const i={};n.split(/\r\n|\n|\r/).forEach(r=>{if(R.number(i.startTime)){if(!R.empty(r.trim())&&R.empty(i.text)){const s=r.trim().split("#xywh=");[i.text]=s,s[1]&&([i.x,i.y,i.w,i.h]=s[1].split(","))}}else{const s=r.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(i.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,i.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}}),i.text&&e.push(i)}),e},XE=(t,e)=>{const n={};return t>e.width/e.height?(n.width=e.width,n.height=1/t*e.width):(n.height=e.height,n.width=t*e.height),n};class Xm{constructor(e){G(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),G(this,"getThumbnails",()=>new Promise(n=>{const{src:i}=this.player.config.previewThumbnails;if(R.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const r=()=>{this.thumbnails.sort((s,o)=>s.height-o.height),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(R.function(i))i(s=>{this.thumbnails=s,r()});else{const s=(R.string(i)?[i]:i).map(o=>this.getThumbnail(o));Promise.all(s).then(r)}})),G(this,"getThumbnail",n=>new Promise(i=>{pc(n).then(r=>{const s={frames:b9(r),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{s.height=o.naturalHeight,s.width=o.naturalWidth,this.thumbnails.push(s),i()},o.src=s.urlPrefix+s.frames[0].text})})),G(this,"startMove",n=>{if(this.loaded&&R.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,r;const s=this.player.elements.progress.getBoundingClientRect(),o=100/s.width*(n.pageX-s.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=Mh(this.seekTime);const a=(i=this.player.config.markers)===null||i===void 0||(r=i.points)===null||r===void 0?void 0:r.find(({time:l})=>l===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),G(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),G(this,"startScrubbing",n=>{(R.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),G(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):vv.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),G(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),G(this,"render",()=>{this.elements.thumb.container=te("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=te("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=te("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=te("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),R.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=te("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),G(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),G(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),i=n>=0;let r=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((s,o)=>{this.loadedImages.includes(s.frames[n].text)&&(r=o)}),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(r)))}),G(this,"loadImage",(n=0)=>{const i=this.showingThumb,r=this.thumbnails[n],{urlPrefix:s}=r,o=r.frames[i],a=r.frames[i].text,l=s+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,n,i,a,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=l,u.dataset.index=i,u.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${l}`),u.onload=()=>this.showImage(u,o,n,i,a,!0),this.loadingImage=u,this.removeOldImages(u)}}),G(this,"showImage",(n,i,r,s,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${s}. qual: ${r}. newimg: ${a}`),this.setImageSizeAndOffset(n,i),a&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(r,n,i,o))}),G(this,"removeOldImages",n=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const r=this.usingSprites?500:1e3;if(i.dataset.index!==n.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout(()=>{s.removeChild(i),this.player.debug.log(`Removing thumb: ${i.dataset.filename}`)},r)}})}),G(this,"preloadNearby",(n,i=!0)=>new Promise(r=>{setTimeout(()=>{const s=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===s){let o;o=i?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let a=!1;o.forEach(l=>{const u=l.text;if(u!==s&&!this.loadedImages.includes(u)){a=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:d}=this.thumbnails[0],h=d+u,f=new Image;f.src=h,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),r()}}}),a||r()}},300)})),G(this,"getHigherQuality",(n,i,r,s)=>{if(n<this.thumbnails.length-1){let o=i.naturalHeight;this.usingSprites&&(o=r.h),o<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(n+1))},300)}}),G(this,"toggleThumbContainer",(n=!1,i=!1)=>{const r=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,n),!n&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),G(this,"toggleScrubbingContainer",(n=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,n),n||(this.showingThumb=null,this.showingThumbFilename=null)}),G(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),G(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const i=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${i}px`}else if(n.clientHeight<20&&n.clientWidth>20){const i=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${i}px`}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${i}px`}this.setThumbContainerPos()}),G(this,"setThumbContainerPos",()=>{const n=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,s=i.left-n.left+10,o=i.right-n.left-r.clientWidth-10,a=this.mousePosX-n.left-r.clientWidth/2,l=rk(a,s,o);r.style.left=`${l}px`,r.style.setProperty("--preview-arrow-offset",a-l+"px")}),G(this,"setScrubbingContainerSize",()=>{const{width:n,height:i}=XE(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${i}px`}),G(this,"setImageSizeAndOffset",(n,i)=>{if(!this.usingSprites)return;const r=this.thumbContainerHeight/i.h;n.style.height=n.naturalHeight*r+"px",n.style.width=n.naturalWidth*r+"px",n.style.left=`-${i.x*r}px`,n.style.top=`-${i.y*r}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=XE(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const Jm={insertElements(t,e){R.string(e)?GE(t,this.media,{src:e}):R.array(e)&&e.forEach(n=>{GE(t,this.media,n)})},change(t){HA(t,"sources.length")?(dr.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],Ti(this.media),this.media=null,R.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:e,type:n}=t,[{provider:i=sr.html5,src:r}]=e,s=i==="html5"?n:"div",o=i==="html5"?{}:{src:r};Object.assign(this,{provider:i,type:n,supported:Ye.check(n,i,this.config.playsinline),media:te(s,o)}),this.elements.container.appendChild(this.media),R.boolean(t.autoplay)&&(this.config.autoplay=t.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),R.empty(t.poster)||(this.poster=t.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Ie.addStyleHook.call(this),this.isHTML5&&Jm.insertElements.call(this,"source",e),this.config.title=t.title,ik.setup.call(this),this.isHTML5&&Object.keys(t).includes("tracks")&&Jm.insertElements.call(this,"track",t.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ie.build.call(this),this.isHTML5&&this.media.load(),R.empty(t.previewThumbnails)||(Object.assign(this.config.previewThumbnails,t.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Xm(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};let sk=class Zm{constructor(e,n){if(G(this,"play",()=>R.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Hn(this.media.play())),this.media.play()):null),G(this,"pause",()=>this.playing&&R.function(this.media.pause)?this.media.pause():null),G(this,"togglePlay",a=>(R.boolean(a)?a:!this.playing)?this.play():this.pause()),G(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):R.function(this.media.stop)&&this.media.stop()}),G(this,"restart",()=>{this.currentTime=0}),G(this,"rewind",a=>{this.currentTime-=R.number(a)?a:this.config.seekTime}),G(this,"forward",a=>{this.currentTime+=R.number(a)?a:this.config.seekTime}),G(this,"increaseVolume",a=>{const l=this.media.muted?0:this.volume;this.volume=l+(R.number(a)?a:0)}),G(this,"decreaseVolume",a=>{this.increaseVolume(-a)}),G(this,"airplay",()=>{Ye.airplay&&this.media.webkitShowPlaybackTargetPicker()}),G(this,"toggleControls",a=>{if(this.supported.ui&&!this.isAudio){const l=zd(this.elements.container,this.config.classNames.hideControls),u=a===void 0?void 0:!a,d=Ee(this.elements.container,this.config.classNames.hideControls,u);if(d&&R.array(this.config.controls)&&this.config.controls.includes("settings")&&!R.empty(this.config.settings)&&H.toggleMenu.call(this,!1),d!==l){const h=d?"controlshidden":"controlsshown";ne.call(this,this.media,h)}return!d}return!1}),G(this,"on",(a,l)=>{pe.call(this,this.elements.container,a,l)}),G(this,"once",(a,l)=>{vv.call(this,this.elements.container,a,l)}),G(this,"off",(a,l)=>{Lh(this.elements.container,a,l)}),G(this,"destroy",(a,l=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(Ti(this.elements.buttons.play),Ti(this.elements.captions),Ti(this.elements.controls),Ti(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),R.function(a)&&a()):(r9.call(this),dr.cancelRequests.call(this),jd(this.elements.original,this.elements.container),ne.call(this,this.elements.original,"destroyed",!0),R.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Ie.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&R.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))}),G(this,"supports",a=>Ye.mime.call(this,a)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Ye.touch,this.media=e,R.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||R.nodeList(this.media)||R.array(this.media))&&(this.media=this.media[0]),this.config=Ke({},nk,Zm.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new g9(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Ye),R.nullOrUndefined(this.media)||!R.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Ye.check().api)return void this.debug.error("Setup failed: no support");const i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;const r=this.media.tagName.toLowerCase();let s=null,o=null;switch(r){case"div":if(s=this.media.querySelector("iframe"),R.element(s)){if(o=ek(s.getAttribute("src")),this.provider=m9(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(R.empty(this.provider)||!Object.values(sr).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=cp.video;break;case"video":case"audio":this.type=r,this.provider=sr.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Ye.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new y9(this),this.storage=new jl(this),this.media.plyr=this,R.element(this.elements.container)||(this.elements.container=te("div"),qA(this.media,this.elements.container)),Ie.migrateStyles.call(this),Ie.addStyleHook.call(this),ik.setup.call(this),this.config.debug&&pe.call(this,this.elements.container,this.config.events.join(" "),a=>{this.debug.log(`event: ${a.type}`)}),this.fullscreen=new An(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ie.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new I9(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Hn(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Xm(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===sr.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===sr.youtube}get isVimeo(){return this.provider===sr.vimeo}get isVideo(){return this.type===cp.video}get isAudio(){return this.type===cp.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(e){if(!this.duration)return;const n=R.number(e)&&e>0;this.media.currentTime=n?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return R.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const e=parseFloat(this.config.duration),n=(this.media||{}).duration,i=R.number(n)&&n!==1/0?n:0;return e||i}set volume(e){let n=e;R.string(n)&&(n=Number(n)),R.number(n)||(n=this.storage.get("volume")),R.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!R.empty(e)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let n=e;R.boolean(n)||(n=this.storage.get("muted")),R.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let n=null;R.number(e)&&(n=e),R.number(n)||(n=this.storage.get("speed")),R.number(n)||(n=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:r}=this;n=rk(n,i,r),this.config.speed.selected=n,setTimeout(()=>{this.media&&(this.media.playbackRate=n)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const n=this.config.quality,i=this.options.quality;if(!i.length)return;let r=[!R.empty(e)&&Number(e),this.storage.get("quality"),n.selected,n.default].find(R.number),s=!0;if(!i.includes(r)){const o=GA(i,r);this.debug.warn(`Unsupported quality option: ${r}, using ${o} instead`),r=o,s=!1}n.selected=r,this.media.quality=r,s&&this.storage.set({quality:r})}get quality(){return this.media.quality}set loop(e){const n=R.boolean(e)?e:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(e){Jm.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return R.url(e)?e:this.source}set download(e){R.url(e)&&(this.config.urls.download=e,H.setDownloadUrl.call(this))}set poster(e){this.isVideo?Ie.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=Bd(_v.call(this));return R.array(e)?e.join(":"):e}set ratio(e){this.isVideo?R.string(e)&&QA(e)?(this.config.ratio=Bd(e),Mo.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=R.boolean(e)?e:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(e){ve.toggle.call(this,e,!1)}set currentTrack(e){ve.set.call(this,e,!1),ve.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:n}=this.captions;return e?n:-1}set language(e){ve.setLanguage.call(this,e,!1)}get language(){return(ve.getCurrentTrack.call(this)||{}).language}set pip(e){if(!Ye.pip)return;const n=R.boolean(e)?e:!this.pip;R.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?lp.active:lp.inactive),R.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return Ye.pip?R.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===lp.active:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Xm(this))}static supported(e,n){return Ye.check(e,n)}static loadSprite(e,n){return JA(e,n)}static setup(e,n={}){let i=null;return R.string(e)?i=Array.from(document.querySelectorAll(e)):R.nodeList(e)?i=Array.from(e):R.array(e)&&(i=e.filter(R.element)),R.empty(i)?null:i.map(r=>new Zm(r,n))}};sk.defaults=e9(nk);var ok={exports:{}},C9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",A9=C9,k9=A9;function ak(){}function lk(){}lk.resetWarningCache=ak;var P9=function(){function t(i,r,s,o,a,l){if(l!==k9){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:lk,resetWarningCache:ak};return n.PropTypes=n,n};ok.exports=P9();var x9=ok.exports;const JE=ZE(x9);function R9(t,e,n=[]){const[i,r]=M.useState(null),s=M.useRef(null),{instantiate:o,destroy:a,getAPI:l,params:u}=e;M.useEffect(()=>{const h=o(s.current,u);return r(h),()=>{a&&a(h,u)}},n);const d=M.useMemo(()=>l(i,u),[i]);return M.useImperativeHandle(t,d,[d]),s}const N9={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},O9=(t,e)=>{const n=new sk(".plyr-react",e.options||{});return e.source&&(n.source=e.source),n},L9=t=>{t&&t.destroy()},M9=()=>{},D9=t=>t?()=>({plyr:t}):()=>new Proxy({plyr:{source:null}},{get:(e,n)=>n==="plyr"?e[n]:M9});function V9(t,e,n=null){return R9(t,{instantiate:O9,getAPI:D9,destroy:L9,params:e},n||[e.options,e.source])}const Ou=M.forwardRef((t,e)=>{const{source:n,options:i=null,...r}=t,s=V9(e,{source:n,options:i});return T.jsx("video",{ref:s,className:"plyr-react plyr",...r})});(N9&&"production")!=="production"&&(Ou.displayName="Plyr",Ou.defaultProps={options:{controls:["rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop"}},source:{type:"video",sources:[{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:720},{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:1080}]}},Ou.propTypes={options:JE.object,source:JE.any});const F9=({item:t})=>{const e=M.useRef(null),[n,i]=M.useState(null),[r,s]=M.useState("https://placehold.co/1920x1080/black/yellow?text=Moviza+App"),[o,a]=M.useState([]);M.useCallback((h,f)=>{const g=t.seasons.find(E=>E.season===h);if(!g)return null;const _=g.episodes.find(E=>E.episode===f);return _?_.source:null},[t]);const l=M.useCallback(h=>{i(f=>f.map(g=>({...g,active:g.season===h?!g.active:g.active})))},[]),u=M.useCallback((h,f)=>{i(g=>g.map(_=>({..._,episodes:_.episodes.map(E=>{if(E.episode===h){window.localStorage.setItem(`play-${t.imdb_id}`,JSON.stringify([{season:_.season,episode:E.episode}])),s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0ASeason${_.season}+Episode${E.episode}`);const A=E.source.map(v=>({src:v.src,type:"video/mp4",size:v.quality}));return a(A),{...E,active:!0}}else return{...E,active:!1}})}))),f||setTimeout(()=>{e.current.plyr.play()},1e3)},[t]);M.useEffect(()=>{if(t.type==="Movie"&&s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0A`),t.type==="Series"&&s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0ASeason1+Episode1`),t.type==="Movie"){const h=t.source.map(f=>({src:f.src,type:"video/mp4",size:f.quality}));a(h)}if(t.type==="Series")if(window.localStorage.getItem(`play-${t.imdb_id}`)){const h=JSON.parse(window.localStorage.getItem(`play-${t.imdb_id}`));s(`https://placehold.co/1920x1080/black/yellow?text=${t.title}%0ASeason${h[0].season}+Episode${h[0].episode}`),h[0].episode!==1&&setTimeout(()=>{u(h[0].episode,!0)},500);const f=t.seasons[h[0].season-1].episodes[h[0].episode-1].source.map(g=>({src:g.src,type:"video/mp4",size:g.quality}));a(f)}else{const h=t.seasons[0].episodes[0].source.map(f=>({src:f.src,type:"video/mp4",size:f.quality}));a(h)}t.type==="Series"&&i(t.seasons.map((h,f)=>{const g=h.episodes.map((_,E)=>({..._,active:f===0&&E===0}));return{season:h.season,episodes:g,active:f===0}}))},[t,u]);const d=M.useMemo(()=>({type:"video",sources:o,poster:r}),[o,r]);return T.jsxs("div",{children:[T.jsx(Ou,{ref:e,source:d}),T.jsx("div",{className:"d-flex gap-3 flex-column mt-3",children:t.type==="Series"&&n&&n.map(h=>T.jsxs("div",{children:[T.jsxs("button",{onClick:()=>l(h.season),className:h.active?"active btn seasons p-2 rounded-2 w-100":"btn seasons p-2 rounded-2 w-100",children:["Season ",h.season]}),T.jsx("div",{className:"d-flex justify-content-center gap-3 flex-wrap mt-3",children:h.active&&h.episodes.map(f=>T.jsxs("button",{onClick:()=>u(f.episode,!1),className:f.active?"active btn seasons p-2 rounded-2":"btn seasons p-2 rounded-2",children:["Ep ",f.episode]},f.episode))})]},h.season))})]})};function U9(){const t=Dr(),e=zi(),[n,i]=M.useState(!1);e.state==null&&t("/",{replace:!0});const r=()=>{i(!0),document.documentElement.scrollTop=0},{fav:s,watchList:o,handleFav:a,handleWatchList:l}=In(),{item:u,imdbData:d}=e.state||{};return M.useEffect(()=>{if(e.state!=null){console.log(u,d);let h=document.createElement("style");return h.innerHTML=`body {
    background-image: url(${u["banner-img"]});
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    min-height: 100vh;
    position: relative;
    isolation: isolate;
    background-attachment: fixed;
}

body::before {
    content: '';
    position: fixed;
    left:0;
    top:0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: -1;
    backdrop-filter: blur(5px);
}
header {
background-color: transparent !important;
}    
`,document.head.append(h),()=>{h.remove()}}},[]),T.jsx("section",{className:"container pt-5",children:e.state!=null&&T.jsx("div",{className:"row pt-5",children:T.jsx("div",{className:"col-12 mt-xl-5",children:T.jsxs("div",{className:"row justify-content-center",children:[n&&T.jsx("div",{className:"col-12 mb-5",children:T.jsx(F9,{item:u})}),T.jsx("div",{className:"col-xl-4 p-xl-5 py-5 d-flex justify-content-center align-items-start",children:T.jsx("img",{src:d.Poster,alt:""})}),T.jsxs("div",{className:"col-xl-8 p-xl-5 p-3 d-flex flex-column gap-2",children:[T.jsx("h4",{className:"theme-clr",children:u.type}),d!=null&&T.jsx("h6",{className:"d-flex flex-wrap gap-3 genre",children:d.Genre.split(", ").map((h,f)=>T.jsx("span",{role:"button",children:h},f))}),T.jsx("h1",{className:"display-3 fw-bold text-balance",children:u.title}),d!=null&&T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"text-balance",children:d.Plot}),T.jsxs("div",{className:"info d-flex gap-1 align-items-center",children:[T.jsx("h6",{className:"m-0",children:d.Released}),T.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:T.jsxs("g",{fill:"currentColor",children:[T.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),T.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),T.jsx("h6",{className:"m-0",children:d.Rated}),T.jsx("svg",{className:"theme-clr",xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256",children:T.jsxs("g",{fill:"currentColor",children:[T.jsx("path",{d:"M176 128a48 48 0 1 1-48-48a48 48 0 0 1 48 48",opacity:".2"}),T.jsx("path",{d:"M140 128a12 12 0 1 1-12-12a12 12 0 0 1 12 12"})]})}),T.jsx("h6",{className:"m-0",children:d.Runtime})]})]}),d!=null&&T.jsxs("div",{style:{"--rating":d.imdbRating/2},className:"rating d-flex gap-2 align-items-center",children:[T.jsx("div",{}),d.imdbRating,"/10 Rating"]}),T.jsxs("div",{className:"d-xl-flex d-none flex-column gap-2 mt-3",children:[T.jsxs("h6",{className:"text-balance",children:[T.jsx("span",{className:"theme-clr",children:"Director :"})," ",d.Director]}),T.jsxs("h6",{className:"text-balance",children:[T.jsx("span",{className:"theme-clr",children:"Actors :"})," ",d.Actors]}),T.jsxs("h6",{className:"text-balance",children:[T.jsx("span",{className:"theme-clr",children:"BoxOffice :"})," ",d.BoxOffice]})]}),T.jsxs("div",{className:"d-flex gap-4 align-items-center mt-4",children:[T.jsx("button",{onClick:r,className:"custom-btn w-max px-4 py-2 full-radius",children:"Play Now"}),s.length>0&&T.jsx("div",{onClick:()=>a(u.imdb_id),role:"button",className:s.includes(u.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"M16.5 5c-1.54 0-3.04.99-3.56 2.36h-1.87C10.54 5.99 9.04 5 7.5 5C5.5 5 4 6.5 4 8.5c0 2.89 3.14 5.74 7.9 10.05l.1.1l.1-.1C16.86 14.24 20 11.39 20 8.5c0-2-1.5-3.5-3.5-3.5",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3m-4.4 15.55l-.1.1l-.1-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05"})]})}),o.length>0&&T.jsx("div",{onClick:()=>l(u.imdb_id),role:"button",className:o.includes(u.imdb_id)?"theme-clr fs-1 d-flex justify-content-center align-items-center":"fs-1 d-flex justify-content-center align-items-center",children:T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[T.jsx("path",{fill:"currentColor",d:"m7 17.97l5-2.15l5 2.15V5H7z",opacity:".3"}),T.jsx("path",{fill:"currentColor",d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3l7 3V5c0-1.1-.9-2-2-2m0 14.97l-5-2.14l-5 2.14V5h10z"})]})})]})]})]})})})})}function j9(){Dr();const t=zi(),{searchText:e}=t.state||"",[n,i]=M.useState(""),[r,s]=M.useState([]),{loading:o,error:a,moviza:l,Imdb:u}=Bn();M.useEffect(()=>{if(t.state!=null){i(e);const P=l.filter(O=>O.title.toLowerCase().includes(e.toLowerCase())||O.detail.toLowerCase().includes(e.toLowerCase()));s(P)}},[t,l,u]);const{fav:d,watchList:h,handleFav:f,handleWatchList:g}=In(),[_,E]=M.useState(null),[A,v]=M.useState(null);M.useEffect(()=>{E(d),v(h)},[d,h]);const y=P=>{const O=l.filter(k=>k.imdb_id==P),D=u.filter(k=>k.imdbID==P);return{moviza:O,imdb:D}},w=P=>{if(s([]),i(P.target.value),P.target.value.trim()!=""){const O=l.filter(D=>D.title.toLowerCase().includes(P.target.value.toLowerCase())||D.detail.toLowerCase().includes(P.target.value.toLowerCase()));s(O)}};return T.jsxs("section",{className:"container mt-5 search-page",children:[T.jsx("div",{className:"row py-5",children:T.jsx("div",{className:"col-12 col-xl-6 py-5 px-4",children:T.jsx("input",{value:n,onChange:P=>w(P),placeholder:"Search Movies , Series , Anime.....",className:"search fs-5 full-radius py-2 px-3 w-100",type:"text"})})}),T.jsx("div",{className:"row",children:T.jsx("div",{className:"col-12 gridItems",children:r.length>0?r.map((P,O)=>{const D=y(P.imdb_id);return console.log(D),T.jsx(Yg,{item:P,Imdb:u},O)}):T.jsx("h1",{className:"no-data",children:"No Data Found"})})})]})}function z9(){const t=Dr(),e=()=>{window.localStorage.removeItem("user"),t("/login",{replace:!0})},{documentData:n}=In(),[i,r]=M.useState(null),[s,o]=M.useState(""),[a,l]=M.useState(""),[u,d]=M.useState(!1),h=M.useCallback(D=>{l(D.target.value),i.displayName==D.target.value?d(!1):d(!0)},[a]),f=()=>{d(!1);const D=JSON.parse(window.localStorage.getItem("user"));D.displayName=a,window.localStorage.setItem("user",JSON.stringify(D)),O({name:a})},[g,_]=M.useState(null),[E,A]=M.useState(null),[v,y]=M.useState(0);M.useState("");const w=D=>{const k=D.target.files[0];k&&(_(k),A(URL.createObjectURL(k)))},P=()=>{if(!g)return;const D=d6(v6,`moviza-profile/${s.replace("@gmail.com","")}`),k=c6(D,g);k.on("state_changed",S=>{const b=S.bytesTransferred/S.totalBytes*100;y(Math.floor(b))},S=>{console.error("Upload error:",S)},()=>{u6(k.snapshot.ref).then(S=>{O({url:S})})})},O=async D=>{try{await Us(Gr(Kr,"moviza_user_data",i.email),{...D.url&&{profile:D.url},...D.name&&{name:D.name}},{merge:!0}),window.location.reload()}catch(k){alert("Error Updating User Data: "+k.message)}};return M.useEffect(()=>{if(window.localStorage.getItem("user")){const D=JSON.parse(window.localStorage.getItem("user"));r(D)}console.log(n)},[n]),M.useEffect(()=>{console.log(i),l(n?n.name:i?i.displayName:""),o(i?i.email:"")},[i,n]),T.jsx("section",{className:"container mt-5",children:T.jsx("div",{className:"row py-5",children:T.jsx("div",{className:"col-12 p-4",children:T.jsxs("div",{className:"row",children:[T.jsx("div",{className:"col-12 pt-5",children:T.jsx("h1",{children:"Profile Setting"})}),T.jsxs("div",{className:"col-12 col-md-6",children:[T.jsxs("div",{className:"d-flex gap-3 align-items-center mt-3",children:[T.jsxs("div",{className:"profile-img position-relative w-max overflow-hidden",children:[T.jsx("input",{className:"d-none",hidden:!0,id:"uploadProfileImg",type:"file",onChange:w}),T.jsx("label",{for:"uploadProfileImg",className:"imageUpload"}),T.jsx("img",{src:n!=null?n.profile?n.profile:`https://placehold.co/150x150/yellow/black?text=${n.name.slice(0,1)}`:"https://api.iconify.design/svg-spinners:12-dots-scale-rotate.svg?color=%23ddff00",alt:i!=null?i.displayName:"admin"})]}),E&&T.jsxs("div",{className:"d-flex gap-3 align-items-center profile-img",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",children:[T.jsx("circle",{cx:"4",cy:"12",r:"3",fill:"#ddff00",children:T.jsx("animate",{id:"svgSpinners3DotsScale0",attributeName:"r",begin:"0;svgSpinners3DotsScale1.end-0.25s",dur:"0.75s",values:"3;.2;3"})}),T.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#ddff00",children:T.jsx("animate",{attributeName:"r",begin:"svgSpinners3DotsScale0.end-0.6s",dur:"0.75s",values:"3;.2;3"})}),T.jsx("circle",{cx:"20",cy:"12",r:"3",fill:"#ddff00",children:T.jsx("animate",{id:"svgSpinners3DotsScale1",attributeName:"r",begin:"svgSpinners3DotsScale0.end-0.45s",dur:"0.75s",values:"3;.2;3"})})]}),T.jsx("img",{src:E,alt:"Selected"})]})]}),E&&T.jsxs("div",{className:"d-flex mt-4",children:[T.jsx("button",{className:"custom-btn px-3",onClick:P,children:"Upload"}),v>0&&T.jsxs("h1",{className:"theme-clr ms-3",children:[v,"%"]})]}),T.jsxs("div",{className:"row mt-3",children:[T.jsxs("div",{className:"col-12 col-md-6 mt-4 d-flex flex-column gap-2",children:[T.jsxs("div",{className:"theme-clr d-flex align-items-center",children:[T.jsx("span",{children:"Name"})," ",u&&T.jsx("div",{onClick:f,className:"tick ms-auto"})," "]}),T.jsx("input",{value:a,onChange:D=>h(D),placeholder:"Name",className:"profile-inputs fs-6 rounded-2 py-2 px-3 w-100",type:"text"})]}),T.jsxs("div",{className:"col-12 col-md-6 mt-4 d-flex flex-column gap-2",children:[T.jsx("div",{className:"theme-clr",children:T.jsx("span",{children:"Email"})}),T.jsx("input",{value:s,disabled:!0,placeholder:"Email",className:"profile-inputs fs-6 rounded-2 py-2 px-3 w-100",type:"text"})]})]})]}),T.jsxs("div",{className:"col-12 pt-5",children:[T.jsx("h1",{className:"mb-4",children:"Account"}),T.jsx("button",{onClick:e,className:"custom-btn w-max px-4 fs-5",children:"Log Out"})]})]})})})})}const ck=M.createContext(),In=()=>M.useContext(ck);function B9(){const t=Dr();M.useEffect(()=>{window.localStorage.getItem("user")||t("/login",{replace:!0})},[t]);const[e,n]=M.useState(null),i=zi(),{message:r,fromSignIn:s}=i.state||{},[o,a]=M.useState(null),[l,u]=M.useState([]),[d,h]=M.useState([]),[f,g]=M.useState(""),_=()=>{window.location.reload(),t("/",{replace:!0})},E=async w=>{if(l.includes(w)){let P=l.filter(D=>D!=w),O=[...new Set(P)];u(O);try{await Us(Gr(Kr,"moviza_user_data",e.email),{favData:O},{merge:!0})}catch(D){alert("Error Updating User Data: "+D.message)}}else{let P=[...new Set([...l,w])];u(P);try{await Us(Gr(Kr,"moviza_user_data",e.email),{favData:P},{merge:!0})}catch(O){alert("Error Updating User Data: "+O.message)}}},A=async w=>{if(d.includes(w)){let P=d.filter(D=>D!=w),O=[...new Set(P)];h(O);try{await Us(Gr(Kr,"moviza_user_data",e.email),{watchList:O},{merge:!0})}catch(D){alert("Error Updating User Data: "+D.message)}}else{let P=[...new Set([...l,w])];h(P);try{await Us(Gr(Kr,"moviza_user_data",e.email),{watchList:P},{merge:!0})}catch(O){alert("Error Updating User Data: "+O.message)}}},v=async(w,P=null,O=null,D=null)=>{try{await Us(Gr(Kr,"moviza_user_data",w),{...P&&{name:P},...O&&{favData:O},...D&&{watchList:D}},{merge:!0})}catch(k){alert("Error Updating User Data: "+k.message)}},y=async w=>{if(w)try{const P=Gr(Kr,"moviza_user_data",w),O=await XU(P);O.exists()?(a(O.data()),console.log(O.data()),u(O.data().favData),h(O.data().watchList),g("")):g("No such document!")}catch(P){console.error("Error reading document: ",P),g("Error reading document: "+P.message)}else g("Please provide a document ID.")};return M.useEffect(()=>{if(window.localStorage.getItem("user")){const P=JSON.parse(window.localStorage.getItem("user"));n(P),y(P.email)}[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(P=>new window.bootstrap.Tooltip(P))},[t]),T.jsxs(ck.Provider,{value:{fav:l,watchList:d,handleFav:E,handleWatchList:A,documentData:o,handleRead:y},children:[i.pathname!="/login"&&T.jsx(nO,{user:e}),T.jsxs(tN,{children:[T.jsx(Bt,{path:"/",element:T.jsx(tO,{useMoviza:Bn})}),T.jsx(Bt,{path:"/about",element:T.jsx($w,{})}),T.jsx(Bt,{path:"/movies",element:T.jsx(_a,{useMoviza:Bn,queryCheck:["cinematography","cat"],check:"type",types:"Movie"})}),T.jsx(Bt,{path:"/series",element:T.jsx(_a,{useMoviza:Bn,queryCheck:["cinematography","cat"],check:"type",types:"Series"})}),T.jsx(Bt,{path:"/anime",element:T.jsx(_a,{useMoviza:Bn,queryCheck:["type","type"],check:"cinematography",types:"Anime"})}),T.jsx(Bt,{path:"/animation",element:T.jsx(_a,{useMoviza:Bn,queryCheck:["type","type"],check:"cinematography",types:"Animation"})}),T.jsx(Bt,{path:"/live-action",element:T.jsx(_a,{useMoviza:Bn,queryCheck:["type","type"],check:"cinematography",types:"Live-Action"})}),T.jsx(Bt,{path:"/favorite",element:T.jsx(BE,{useMoviza:Bn,forWhat:"fav"})}),T.jsx(Bt,{path:"/watch-list",element:T.jsx(BE,{useMoviza:Bn,forWhat:"watchList"})}),T.jsx(Bt,{path:"/play",element:T.jsx(U9,{})}),T.jsx(Bt,{path:"/login",element:T.jsx(_6,{handleUpdate:v})}),T.jsx(Bt,{path:"/search",element:T.jsx(j9,{handleUpdate:v})}),T.jsx(Bt,{path:"/profile",element:T.jsx(z9,{})}),T.jsx(Bt,{path:"/testing/:id",element:T.jsx($w,{})})]}),T.jsxs("h1",{children:[" ",s&&T.jsxs("div",{className:"startApp",children:[r,T.jsx("button",{onClick:_,className:"custom-btn fs-5 w-max px-4 py-2 full-radius",children:"Start"})]})]})]})}const $9=dp.createRoot(document.getElementById("root"));$9.render(T.jsx(Qe.StrictMode,{children:T.jsx(uN,{children:T.jsx(B9,{})})}));
